!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["react-sigplot"]=e():t["react-sigplot"]=e()}(window,function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=24)}([function(t,e,i){t.exports=i(12)()},function(t,e,i){"use strict";t.exports=i(11)},function(t,e,i){
/**
 * @license
 * File: sigplot.js
 * Copyright (c) 2012-2017, LGS Innovations Inc., All rights reserved.
 *
 * This file is part of SigPlot.
 *
 * Licensed to the LGS Innovations (LGS) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  LGS licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */
!function(){var e=i(14),n=i(3),r=i(7),o=i(16),a=i(5),s=i(6),l=i(21),h=i(22);function c(t,e){if(!(this instanceof c))return new c.Plot(t,e)}c.bluefile=r,c.matfile=o,c.m=a,c.mx=s,c.Layer1D=l,c.Layer2D=h,c.version="version-PLACEHOLDER";var u="Keypress Table:\n--------------\n?       - Main help box.\nA       - Toggle display x,y readouts:\n          (absc) -> (index) -> (1/absc) -> (time).\nB       - Toggle LM Drag Mode:\n          (box) -> (horizontal) -> (vertical).\nC       - Toggle controls.\nK       - Show Marker.\nL       - Toggle legend.\nM       - Pops up main menu\nR       - Toggle display specs (x/y readout)\nS       - Toggle display specs and axes.\nT       - Popup box with timecode value at mouse.\nX       - In 1D mode, popup box with X value at mouse.\n        - In 2D mode, toggle x-cut display.\nY       - In 1D mode, popup box with Y value at mouse.\n        - In 2D mode, toggle y-cut display.\nP       - In 2D mode, displays p-cuts along side and bottom.\nF       - Toggle fullscreen.\nCntrl+I - Invert colors.",d={lines:13,length:7,width:4,radius:10,corners:1,rotate:0,color:"#FFF",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"auto",left:"auto"};c.browserIsCompatible=function(){var t=!!document.createElement("canvas").getContext,e="ArrayBuffer"in window;return t&&e};var f=function(t,e){if(!c.browserIsCompatible())throw"Browser is not compatible";this._Mx=s.open(t);var i,r=this._Mx;return this._Gx=new p,this._Gx.parent=t,this.mouseOnCanvas=!1,e||(e={}),function(t,e){var i=t._Mx,n=t._Gx;e.xlab||(e.xlab=0);e.ylab||(e.ylab=0);e.useDomMenu&&(i.useDomMenu=!0);e.xlab=a.unit_lookup(e.xlab),e.ylab=a.unit_lookup(e.ylab),n.xmin=void 0===e.xmin?0:e.xmin,n.xmax=void 0===e.xmax?0:e.xmax;var r,o=void 0!==e.xmin,l=void 0!==e.xmax;if("number"==typeof e.cmode)switch(e.cmode){case 1:r="MA";break;case 2:r="PH";break;case 3:r="RE";break;case 4:r="IM";break;case 5:r="IR";break;case 6:r="LO";break;case 7:r="L2";break;default:throw new RangeError("Invalid cmode value")}else r=void 0===e.cmode?"":e.cmode.toUpperCase();void 0===e.line||e.line;n.ylab=e.ylab,n.ylabel=e.ylabel,n.ymin=void 0===e.ymin?0:e.ymin,n.ymax=void 0===e.ymax?0:e.ymax;var h=void 0!==e.ymin,c=void 0!==e.ymax;n.zmin=e.zmin,n.zmax=e.zmax;var u=void 0!==e.zmin,d=void 0!==e.zmax;void 0!==e.colors&&s.setbgfg(i,e.colors.bg,e.colors.fg,i.xi);e.xi&&s.invertbgfg(i);n.forcelab=void 0===e.forcelab||e.forcelab,n.all=void 0!==e.all&&e.all,n.expand=void 0!==e.expand&&e.expand,n.xlab=e.xlab,n.xlabel=e.xlabel,n.segment=void 0!==e.segment&&e.segment,n.plab=24;var f=void 0===e.phunits?"D":e.phunits;"R"===f[0]?n.plab=23:"C"===f[0]&&(n.plab=25);n.xdiv=void 0===e.xdiv?5:e.xdiv,n.ydiv=void 0===e.ydiv?5:e.ydiv,n.xcompression=e.xcmp||0,n.rasterSmoothing=e.smoothing||!1,i.origin=1,e.yinv&&(i.origin=4);n.pmt=void 0===e.pmt?1:e.pmt,n.bufmax=void 0===e.bufmax?32768:e.bufmax,n.sections=void 0===e.nsec?0:e.nsec,n.anno_type=void 0===e.anno_type?0:e.anno_type,n.xfmt=void 0===e.xfmt?"":e.xfmt,n.yfmt=void 0===e.yfmt?"":e.yfmt,n.index=void 0!==e.index&&e.index;var x=n.index||"IN"===r.slice(0,2);x&&(o&&1===n.xmin&&(o=!1),l&&1===n.xmin&&(l=!1));n.xdata=!1,n.note="",n.hold=0,n.always_show_marker=e.always_show_marker||!1,a.vstype("D"),e.inputs||k(t,!1);var m=r;n.lyr.length>0&&n.lyr[0].cx?n.cmode=1:n.cmode=3;"MA"!==m&&"INMA"!==m&&"ABMA"!==m&&"__MA"!==m&&"MAGNITUDE"!==m||(n.cmode=1);"PH"!==m&&"INPH"!==m&&"ABPH"!==m&&"__PH"!==m&&"PHASE"!==m||(n.cmode=2);"RE"!==m&&"INRE"!==m&&"ABRE"!==m&&"__RE"!==m&&"REAL"!==m||(n.cmode=3);"IM"!==m&&"INIM"!==m&&"ABIM"!==m&&"__IM"!==m&&"IMAGINARY"!==m||(n.cmode=4);"LO"!==m&&"D1"!==m&&"INLO"!==m&&"IND1"!==m&&"ABIM"!==m&&"ABD1"!==m&&"__LO"!==m&&"__D1"!==m&&"10*LOG10"!==m||(n.cmode=6);"L2"!==m&&"D2"!==m&&"INL2"!==m&&"IND2"!==m&&"ABLO"!==m&&"ABD2"!==m&&"__L2"!==m&&"__D2"!==m&&"20*LOG10"!==m||(n.cmode=7);"RI"!==m&&"IR"!==m&&"INRI"!==m&&"INIR"!==m&&"ABRI"!==m&&"ABIR"!==m&&"__RI"!==m&&"__IR"!==m&&"IMAG/REAL"!==m&&"REAL/IMAG"!==m||(n.index?alert("Imag/Real mode not permitted in INDEX mode"):n.cmode=5);if(n.basemode=n.cmode,t.change_settings({cmode:n.cmode}),n.dbmin=1e-20,n.cmode>=6){var p=10;7===n.cmode&&(p=20),"L"===m[0]||"1"===m[0]||"2"===m[0]?(n.lyr.length>0&&n.lyr[0].cx?(n.ymin=Math.max(n.ymin,1e-10),n.ymax=Math.max(n.ymax,1e-10)):(n.ymin=Math.max(n.ymin,1e-20),n.ymax=Math.max(n.ymax,1e-20)),n.ymin=a.log10(n.ymin)*p,n.ymax=a.log10(n.ymax)*p):n.lyr.length>0&&n.lyr[0].cx?(n.ymin=Math.max(-18*p,n.ymin),n.ymax=Math.max(-18*p,n.ymax),n.dbmin=1e-37):Math.min(n.ymin,n.ymax)<-20*p&&(n.ymin=Math.max(-37*p,n.ymin),n.ymax=Math.max(-37*p,n.ymax),n.dbmin=Math.pow(10,Math.min(n.ymin,n.ymax)/p))}i.level=0,x&&!n.index&&(o&&(n.xmin=n.xstart+n.xdelta*(n.xmin-1)),o&&(n.xmax=n.xstart+n.xdelta*(n.xmax-1)));switch(n.xmult=e.xmult,n.ymult=e.xmult,e.autox){case"none":e.autox=-1;break;case"min":e.autox=1;break;case"max":e.autox=2;break;case"full":e.autox=3}n.autox=void 0===e.autox?-1:e.autox,n.autox<0&&(n.autox=0,o||(n.autox+=1),l||(n.autox+=2));switch(e.autoy){case"none":e.autoy=-1;break;case"min":e.autoy=1;break;case"max":e.autoy=2;break;case"full":e.autoy=3}n.autoy=void 0===e.autoy?-1:e.autoy,n.autoy<0&&(n.autoy=0,h||(n.autoy+=1),c||(n.autoy+=2));switch(e.autoz){case"none":e.autoz=-1;break;case"min":e.autoz=1;break;case"max":e.autoz=2;break;case"full":e.autoz=3}n.autoz=void 0===e.autoz?-1:e.autoz,n.autoz<0&&(n.autoz=0,u||(n.autoz+=1),d||(n.autoz+=2));n.autol=void 0===e.autol?-1:e.autol,o||(n.xmin=void 0);l||(n.xmax=void 0);D(t,{get_data:!0},n.xmin,n.xmax,n.xlab,n.ylab),o||(n.xmin=i.stk[0].xmin);l||(n.xmax=i.stk[0].xmax);h||(n.ymin=i.stk[0].ymin);c||(n.ymax=i.stk[0].ymax);n.xmin>n.xmax&&(i.stk[0].xmin=n.xmax,n.xmax=n.xmin,n.xmin=i.stk[0].xmin);n.ymin>n.ymax&&(i.stk[0].ymin=n.ymax,n.ymax=n.ymin,n.ymin=i.stk[0].ymin);i.stk[0].xmin=n.xmin,i.stk[0].xmax=n.xmax,i.stk[0].ymin=n.ymin,i.stk[0].ymax=n.ymax,n.panxmin=Math.min(n.panxmin,n.xmin),n.panxmax=Math.max(n.panxmax,n.xmax),n.panymin=Math.min(n.panymin,n.ymin),n.panymax=Math.max(n.panymax,n.ymax),n.panxpad=e.panxpad,n.panypad=e.panypad;var v=n.panxmax-n.panxmin,_=n.panymax-n.panymin;n.panxmin-=a.pad(v,n.panxpad),n.panxmax+=a.pad(v,n.panxpad),n.panymin-=a.pad(_,n.panypad),n.panymax+=a.pad(_,n.panypad),n.xmin=i.stk[0].xmin,n.ymin=i.stk[0].ymin,e.font_family&&(i.font_family=e.font_family);e.font_width&&(i.font_width=e.font_width);e.font_scaled&&(i.font_scaled=!0);var b=i.font_width;i.font_scaled&&(b=Math.min(i.font_width,i.width/64));s.set_font(i,b),n.ncolors=void 0===e.ncolors?500:e.ncolors,n.cmap=null,e.cmap?n.cmap=e.cmap:n.cmap=void 0===e.xc?-1:e.xc;y(t,n.cmap),"leftmouse"===e.xcnt?n.cntrls=1:"continuous"===e.xcnt?n.cntrls=2:n.cntrls=void 0===e.xcnt?1:e.xcnt;n.default_rubberbox_mode=void 0===e.rubberbox_mode?"box":e.rubberbox_mode,n.default_rubberbox_action=void 0===e.rubberbox_action?"zoom":e.rubberbox_action,n.default_rightclick_rubberbox_mode=void 0===e.rightclick_rubberbox_mode?"box":e.rightclick_rubberbox_mode,n.default_rightclick_rubberbox_action=void 0===e.rightclick_rubberbox_action?null:e.rightclick_rubberbox_action,n.cross=void 0!==e.cross&&e.cross,n.grid=void 0===e.nogrid||!e.nogrid,n.fillStyle=e.fillStyle,n.gridBackground=e.gridBackground,n.gridStyle=e.gridStyle,n.wheelZoom=e.wheelZoom,n.wheelZoomPercent=e.wheelZoomPercent,n.legend=void 0!==e.legend&&e.legend,n.no_legend_button=void 0!==e.no_legend_button&&e.no_legend_button,n.legendBtnLocation=null,n.pan=void 0===e.nopan||!e.nopan,n.nomenu=void 0!==e.nomenu&&e.nomenu,n.modmode=0,n.modlayer=-1,n.modsource=0,n.modified=e.mod&&n.lyr.length>0,n.nmark=0,n.iabsc=0,n.index&&(n.iabsc=1);n.specs=!e.nospecs,n.scroll_time_interval=void 0===e.scroll_time_interval?n.scroll_time_interval:e.scroll_time_interval,n.autohide_readout=e.autohide_readout,n.autohide_panbars=e.autohide_panbars,n.x_scrollbar_location=e.x_scrollbar_location,n.specs?(n.show_x_axis=!e.noxaxis,n.show_y_axis=!e.noyaxis,n.show_readout=!e.noreadout,n.show_x_axis||n.show_y_axis||n.show_readout?n.specs=!0:n.specs=!1):(n.show_x_axis=!1,n.show_y_axis=!1,n.show_readout=!1);n.hide_note=e.hide_note||!1,n.xmrk=0,n.ymrk=0,e.nodragdrop||(s.addEventListener(i,"dragover",function(t){t.preventDefault()},!1),s.addEventListener(i,"drop",function(t){return function(e){var i=e.dataTransfer.files;i.length>0&&(e.preventDefault(),t.load_files(i))}}(t),!1));n.initialized=!0}(this,e),this.mimicListeners={other:null,listeners:{zoom:null,unzoom:null,xpan:null,ypan:null}},this._refresh(),this.onmousemove=(i=this,function(t){var e,n=i._Mx,r=i._Gx,o=t.target.getBoundingClientRect(),a=void 0===t.offsetX?t.pageX-o.left-window.scrollX:t.offsetX,l=void 0===t.offsetX?t.pageY-o.top-window.scrollY:t.offsetY,h=B(i,a,l);r.retx=h.x,r.rety=h.y,n.widget||(N(i),(e=document.createEvent("Event")).initEvent("mmove",!0,!0),e.xpos=a,e.ypos=l,e.x=r.retx,e.y=r.rety,s.dispatchEvent(n,e)&&(r.cross&&(n.warpbox?(void 0!==r.cross_xpos&&s.rubberline(n,r.cross_xpos,n.t,r.cross_xpos,n.b),void 0!==r.cross_ypos&&s.rubberline(n,n.l,r.cross_ypos,n.r,r.cross_ypos),r.cross_xpos=void 0,r.cross_ypos=void 0):i.mouseOnCanvas&&(G(i),r.p_cuts&&1===r.lyr.length&&2===r.lyr[0].hcb.class&&(r.y_cut_press_on||r.x_cut_press_on||z(i)))),2===r.cntrls&&((e=document.createEvent("Event")).initEvent("mtag",!0,!0),e.x=r.retx,e.y=r.rety,e.xpos=a,e.ypos=l,s.dispatchEvent(n,e))))}),this.throttledOnMouseMove=a.throttle(this._Gx.scroll_time_interval,this.onmousemove),s.addEventListener(r,"mousemove",this.throttledOnMouseMove,!1),this.onmouseout=function(t){return function(e){var i=t._Gx,n=t._Mx;t.mouseOnCanvas&&(t.mouseOnCanvas=!1,i.autohide_readout&&N(t),i.autohide_panbars&&O(t),n.prompt&&n.prompt.input.enableBlur())}}(this),s.addEventListener(r,"mouseout",this.onmouseout,!1),this.onmouseover=function(t){return function(e){var i=t._Gx,n=t._Mx;t.mouseOnCanvas=!0,i.autohide_panbars&&O(t),n.prompt&&n.prompt.input.disableBlur()}}(this),s.addEventListener(r,"mouseover",this.onmouseover,!1),this.onmousedown=function(t){return function(e){e.preventDefault();var i=t._Mx,n=t._Gx;i.widget&&"ONESHOT"===i.widget.type&&(i.widget=null,t.refresh()),s.ifevent(i,e);var r=document.createEvent("Event");if(r.initEvent("mdown",!0,!0),r.xpos=i.xpos,r.ypos=i.ypos,r.x=n.retx,r.y=n.rety,r.which=e.which,!s.dispatchEvent(i,r))return!1;var o,l,h,c,u,d,f=U(t);if(f.inPanRegion){if(e.preventDefault()," "!==f.command){var x=null,m=null;if("XPAN"===f.command?x=i.scrollbar_x:"YPAN"===f.command&&(x=i.scrollbar_y),2===e.which)m={x:i.xpos,y:i.ypos},void 0!==x&&F(m,x)&&function(t,e){var i=t._Mx;s.removeEventListener(i,"mousedown",t.onmousedown,!1),s.menu(i,{title:"SCROLLBAR",refresh:function(){t.refresh()},finalize:function(){s.addEventListener(i,"mousedown",t.onmousedown,!1),t.refresh()},items:[{text:"Expand Range",handler:function(){W(t,s.SB_EXPAND,e)}},{text:"Shrink Range",handler:function(){W(t,s.SB_SHRINK,e)}},{text:"Expand Full",handler:function(){W(t,s.SB_FULL,e)}}]})}(t,f.command);else if(" "!==f.command&&!F(m={x:i.xpos,y:i.ypos},x)&&1===e.which){R(t,f.command,0,e);var p=function(){F({x:i.xpos,y:i.ypos},x)?n.stillPanning&&(window.clearInterval(n.stillPanning),n.repeatPanning=void 0):R(t,f.command,0,e)};n.stillPanning=window.setTimeout(function(){n.repeatPanning=window.setInterval(p,50)},250)}}}else if(1===e.which||3===e.which){var y=!1;if(n.legendBtnLocation&&(o=i.xpos,l=i.ypos,h=n.legendBtnLocation.x,c=n.legendBtnLocation.y,u=n.legendBtnLocation.width,d=n.legendBtnLocation.height,y=o>=h&&o<=h+u&&l>=c&&l<=c+d),n.lg_colorbar&&2===n.lyr[0].hcb.class&&(1===e.which||3===e.which)){var v=i.xpos,_=i.ypos,g=n.cbb_top_x1,k=n.cbb_top_y1;if(H(v,_,g,k,g+n.cbb_width,k,g+.5*n.cbb_width,k-n.cbb_height)){var M=n.cmap;t.get_layer(0).img=void 0;for(var S=a.Mc.colormap[M],E=0;E<S.colors.length;E++)S.colors[E].pos+=5;s.colormap(i,S.colors,16),t.refresh()}var A=n.cbb_bot_x1,C=n.cbb_bot_y1;if(H(v,_,A,C,A+n.cbb_width,C,A+.5*n.cbb_width,C+n.cbb_height)){M=n.cmap,S=a.Mc.colormap[M];t.get_layer(0).img=void 0;for(E=0;E<S.colors.length;E++)S.colors[E].pos-=5;s.colormap(i,S.colors,16),t.refresh()}}if(y)t.change_settings({legend:!n.legend});else{N(t);var L={opacity:0,return_value:"zoom"},z={opacity:.4,fill_color:i.hi,return_value:"select"};1===e.which?"zoom"===n.default_rubberbox_action?s.rubberbox(i,w(t,e.which),n.default_rubberbox_mode,L,z):"select"===n.default_rubberbox_action&&s.rubberbox(i,w(t,e.which),n.default_rubberbox_mode,z,L):3===e.which&&("zoom"===n.default_rightclick_rubberbox_action?s.rubberbox(i,w(t,e.which),n.default_rightclick_rubberbox_mode,L,z):"select"===n.default_rightclick_rubberbox_action&&s.rubberbox(i,w(t,e.which),n.default_rightclick_rubberbox_mode,z,L))}}else 2===e.which&&(n.nomenu||b(t));return!1}}(this),s.addEventListener(r,"mousedown",this.onmousedown,!1),this.ontouchstart=function(t){return function(e){if(e.preventDefault(),1===e.targetTouches.length)if(r.touchClear&&r.touches)window.clearTimeout(r.touchClear),t.unzoom(),W(t,s.SB_FULL,"XPAN"),W(t,s.SB_FULL,"YPAN");else{var i=e.targetTouches[0],n=i.target.getBoundingClientRect(),o={x:i.pageX-n.left-window.scrollX,y:i.pageY-n.top-window.scrollY};r.xpos=a.bound(o.x,0,r.width),r.ypos=a.bound(o.y,0,r.height),U(t,o).inPanRegion||(r.touches=e.targetTouches)}else 2===e.targetTouches.length&&(r.touch_distance=a.touch_distance(e.targetTouches[0],e.targetTouches[1]))}}(this),s.addEventListener(r,"touchstart",this.ontouchstart,!1),this.ontouchmove=function(t){return function(e){var i=t._Mx,n=t._Gx,r=i.level;if(e.preventDefault(),1===e.targetTouches.length){var o=i.touches[0],s=o.target.getBoundingClientRect(),l=(o.pageX,s.left,window.scrollX,o.pageY,s.top,window.scrollY,e.targetTouches[0]),h=(s=l.target.getBoundingClientRect(),{x:l.pageX-s.left-window.scrollX,y:l.pageY-s.top-window.scrollY}),c=a.bound(h.x,0,i.width),u=a.bound(h.y,0,i.height),d=c-i.xpos,f=u-i.ypos;if(i.xpos=c,i.ypos=u,U(t,h).inPanRegion)return;var x=i.stk[r].xscl*d,m=i.stk[r].yscl*f;1===i.origin?x*=-1:2===i.origin?m*=-1:3===i.origin?m*=-1:4===i.origin&&(x*=-1,m*=-1);var p=i.stk[r].xmin+x,y=i.stk[r].xmax+x,v=i.stk[r].ymin+m,_=i.stk[r].ymax+m;p>=n.xmin&&y<=n.xmax&&(i.stk[r].xmin=p,i.stk[r].xmax=y),v>=n.ymin&&_<=n.ymax&&(i.stk[r].ymin=v,i.stk[r].ymax=_),n.cmode===n.basemode&&1===i.level&&(n.xmin=Math.min(n.xmin,p),n.xmax=Math.max(n.xmax,y),n.ymin=Math.min(n.ymin,v),n.ymax=Math.max(n.ymax,_)),t.refresh()}else if(2===e.targetTouches.length){var b=a.touch_distance(e.targetTouches[0],e.targetTouches[1]),g=.05*(1-i.touch_distance/b),w=i.stk[r].xmax-i.stk[r].xmin,k=i.stk[r].ymax-i.stk[r].ymin;p=i.stk[r].xmin+g*w,y=i.stk[r].xmax-g*w,v=i.stk[r].ymin+g*k,_=i.stk[r].ymax-g*k;i.stk[r].xmin=Math.max(n.xmin,p),i.stk[r].xmax=Math.min(n.xmax,y),i.stk[r].ymin=Math.max(n.ymin,v),i.stk[r].ymax=Math.min(n.ymax,_),t.refresh()}}}(this),this.throttledOnTouchMove=a.throttle(this._Gx.scroll_time_interval,this.ontouchmove),s.addEventListener(r,"touchmove",this.throttledOnTouchMove,!1),this.ontouchend=function(t){return function(e){var i=t._Gx,n=t._Mx;e.preventDefault(),console.log("on touch end ",e.targetTouches.length),i.panning=void 0,t._Mx.scrollbar_x.action=0,t._Mx.scrollbar_y.action=0,n.touch_distance=void 0,s.widget_callback(n,e),n.touchClear=window.setTimeout(function(){n.touches=void 0,n.touchClear=void 0},100)}}(this),s.addEventListener(r,"touchend",this.ontouchend,!1),this.docMouseUp=function(t){return function(e){var i=t._Gx;return 1===e.which&&(i.panning=void 0,t._Mx.scrollbar_x.action=0,t._Mx.scrollbar_y.action=0),i.stillPanning&&(window.clearTimeout(i.stillPanning),i.stillPanning=void 0),i.repeatPanning&&(window.clearInterval(i.repeatPanning),i.repeatPanning=void 0),!1}}(this),document.addEventListener("mouseup",this.docMouseUp,!1),this.mouseup=function(t){return function(e){e.preventDefault();var i=t._Gx,n=t._Mx;if(s.ifevent(t._Mx,e),(l=document.createEvent("Event")).initEvent("mup",!0,!0),l.xpos=n.xpos,l.ypos=n.ypos,l.x=i.retx,l.y=i.rety,l.which=e.which,s.dispatchEvent(n,l)){if(n.warpbox||n.widget||n.prompt)return;if(1===e.which){var r=function(t){var e=!1,i=t._Mx,n=i.xpos,r=i.ypos,o=i.text_h,s=i.text_w,l=" ";n<i.l-s&&r<=i.b&&r>=i.t?(l="YCENTER",e=!0):r>i.b+a.trunc(.5*s)&&r<=i.b+a.trunc(a.trunc(3*o)/2)&&n>=i.l&&n<=i.r&&(l="XCENTER",e=!0);return{inCenterRegion:e,command:l}}(t);if(r.inCenterRegion)" "!==r.command&&R(t,r.command,0,e);else if(1===i.cntrls){i.xmrk=i.retx,i.ymrk=i.rety;var o=document.createEvent("Event");o.initEvent("mtag",!0,!0),o.x=i.xmrk,o.y=i.ymrk,o.xpos=e.x||e.clientX,o.ypos=e.y||e.clientY,o.w=void 0,o.h=void 0,o.shift=e.shiftKey,s.dispatchEvent(n,o),t.redraw()}}else if(2===e.which){var l;if(i.nomenu)if((l=document.createEvent("Event")).initEvent("showmenu",!0,!0),l.x=e.x||e.clientX,l.y=e.y||e.clientY,s.dispatchEvent(n,l)){e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,s.removeEventListener(n,"mousedown",t.onmousedown,!1);var h=function(){try{var e=document.createEvent("Event");e.initEvent("hidemenu",!0,!0),s.dispatchEvent(n,e)&&s.addEventListener(n,"mousedown",t.onmousedown,!1)}finally{document.removeEventListener("mouseup",h,!1)}};document.addEventListener("mouseup",h,!1)}}else 3===e.which&&(e.preventDefault(),t.unzoom(1),t.refresh())}}}(this),s.addEventListener(r,"mouseup",this.mouseup,!1),this.mouseclick=function(t){return function(e){e.preventDefault();var i=t._Gx,n=t._Mx;s.ifevent(t._Mx,e);var r=document.createEvent("Event");return r.initEvent("mclick",!0,!0),r.xpos=n.xpos,r.ypos=n.ypos,r.x=i.retx,r.y=i.rety,r.which=e.which,s.dispatchEvent(n,r),!1}}(this),s.addEventListener(r,"click",this.mouseclick,!1),this.mousedblclick=function(t){return function(e){e.preventDefault();var i=t._Gx,n=t._Mx;s.ifevent(t._Mx,e);var r=document.createEvent("Event");return r.initEvent("mdblclick",!0,!0),r.xpos=n.xpos,r.ypos=n.ypos,r.x=i.retx,r.y=i.rety,r.which=e.which,s.dispatchEvent(n,r),!1}}(this),s.addEventListener(r,"dblclick",this.mousedblclick,!1),this.dragMouseDownHandler=function(t){return function(e){var i=t._Mx,n=t._Gx,r=U(t);if(r.inPanRegion&&(e.preventDefault()," "!==r.command)){var o;"XPAN"===r.command?o=i.scrollbar_x:"YPAN"===r.command&&(o=i.scrollbar_y);var a={x:i.xpos,y:i.ypos};void 0!==o&&F(a,o)&&1===e.which&&(n.panning={axis:r.command,xpos:e.screenX,ypos:e.screenY,xmin:i.stk[i.level].xmin,xmax:i.stk[i.level].xmax,ymin:i.stk[i.level].ymin,ymax:i.stk[i.level].ymax})}}}(this),window.addEventListener("mousedown",this.dragMouseDownHandler,!1),this.dragMouseMoveHandler=function(t){return function(e){var i=t._Gx;if(void 0!==i.panning)try{!function(t,e,i){var n,r,o,a=t._Mx,l=t._Gx;if("XPAN"===e)o=t._Mx.scrollbar_x;else{if("YPAN"!==e)throw"Unable to drag scrollbar - scrollAction is not 'XPAN' or 'YPAN'!!";o=t._Mx.scrollbar_y}o.flag=-12;var h=a.level;"XPAN"===e?(n=a.stk[h].xmin,r=a.stk[h].xmax):"YPAN"===e?(n=a.stk[h].ymin,r=a.stk[h].ymax):(n=void 0,r=void 0);var c={min:n,max:r};(function(t,e,i,n,r,o){if(i.action=s.SB_DRAG,"YPAN"===n){var a=t.scrollbar_y.trange/t.scrollbar_y.h;4===i.origin&&(a*=-1);var l=o.screenY-e.panning.ypos,h=l*a;e.panning.ymin-h<e.panymin?(r.max=e.panymin+(r.max-r.min),r.min=e.panymin):e.panning.ymax-h>e.panymax?(r.min=e.panymax-(r.max-r.min),r.max=e.panymax):(r.min=e.panning.ymin-h,r.max=e.panning.ymax-h)}else if("XPAN"===n){var a=t.scrollbar_x.trange/t.scrollbar_x.w;3===i.origin&&(a*=-1);var l=o.screenX-e.panning.xpos,h=l*a;e.panning.xmin+h<e.panxmin?(r.max=e.panxmin+(r.max-r.min),r.min=e.panxmin):e.panning.xmax+h>e.panxmax?(r.min=e.panxmax-(r.max-r.min),r.max=e.panxmax):(r.min=e.panning.xmin+h,r.max=e.panning.xmax+h)}})(a,l,o,e,c,i),n=c.min,r=c.max,o.smin=n,o.srange=r-n,s.redrawScrollbar(o,a,void 0),j(t,o.smin,o.smin+o.srange,e.slice(0,1)),this.inPan=!0;var u=document.createEvent("Event");"XPAN"===e?u.initEvent("xpan",!0,!0):"YPAN"===e&&u.initEvent("ypan",!0,!0);u.level=a.level,u.xmin=a.stk[a.level].xmin,u.ymin=a.stk[a.level].ymin,u.xmax=a.stk[a.level].xmax,u.ymax=a.stk[a.level].ymax,s.dispatchEvent(a,u),this.inPan=!1,o.action=0,t.refresh()}(t,i.panning.axis,e)}catch(t){console.log("Error: "+t)}}}(this),this.throttledDragOnMouseMove=a.throttle(this._Gx.scroll_time_interval,this.dragMouseMoveHandler),window.addEventListener("mousemove",this.throttledDragOnMouseMove,!1),this.dragMouseUpHandler=function(t){return function(e){var i=t._Gx;1===e.which&&(i.panning=void 0)}}(this),window.addEventListener("mouseup",this.dragMouseUpHandler,!1),this.onresize=function(t){return function(e){s.checkresize(t._Mx)&&t.refresh()}}(this),this.wheelHandler=function(t){var e=t._Mx,i=t._Gx,n=a.throttle(100,function(n){var r;"XPAN"===n.command?r=e.scrollbar_x:"YPAN"===n.command&&(r=e.scrollbar_y),i.wheelscroll_mode_natural?r.action=event.deltaY<0?s.SB_WHEELDOWN:s.SB_WHEELUP:r.action=event.deltaY<0?s.SB_WHEELUP:s.SB_WHEELDOWN,r.step=.1*r.srange,r.page=9*r.step,s.scroll(e,r,s.XW_COMMAND,void 0,r),j(t,r.smin,r.smin+r.srange,n.command.slice(0,1))}),r=a.throttle(100,function(){var e=i.wheelZoomPercent||.2;i.wheelscroll_mode_natural?event.deltaY>0&&(e*=-1):event.deltaY<0&&(e*=-1),"x"===i.wheelZoom?t.percent_zoom(e,1,!0):"y"===i.wheelZoom?t.percent_zoom(1,e,!0):t.percent_zoom(e,e,!0)});return function(o){s.ifevent(e,o);var a=U(t);t.mouseOnCanvas&&(o.preventDefault(),a.inPanRegion?n(a):i.wheelZoom&&r())}}(this),window.addWheelListener(window,this.wheelHandler,!1),window.addEventListener("resize",this.onresize,!1),e.nokeypress||(this.onkeypress=function(t){return function(e){var i=t._Mx,r=t._Gx;if(t.mouseOnCanvas){if(i.widget&&"MENU"===i.widget.type)return;if(i.widget&&"ONESHOT"===i.widget.type)return i.widget=null,void t.refresh();var o=n.getKeyCode(e);if((l=document.createEvent("Event")).initEvent("plotkeypress",!0,!0),l.keyCode=o,l.shiftKey=e.shiftKey,l.ctrlKey=e.ctrlKey,l.altKey=e.altKey,l.metaKey=e.metaKey,!s.dispatchEvent(i,l))return;if(97===o)r.iabsc=(r.iabsc+1)%4,N(t);else if(108===o)t.change_settings({legend:!r.legend});else if(103===o)t.change_settings({grid:!r.grid});else if(98===o||2===o)i.warpbox&&("box"===i.warpbox.mode?i.warpbox.mode="horizontal":"horizontal"===i.warpbox.mode?i.warpbox.mode="vertical":i.warpbox.mode="box",s.redraw_warpbox(i));else if(99===o)t.change_settings({xcnt:-1*r.cntrls});else if(114===o)t.change_settings({show_readout:!r.show_readout});else if(115===o)t.change_settings({specs:!r.specs});else if(112===o)t.change_settings({p_cuts:!r.p_cuts});else if(120===o)r.x_cut_press_on?t.xCut():"pop-up"===r.xyKeys?r.x_pop_now?r.x_pop_now=!1:(v(t),r.x_pop_now=!0):1===r.lyr[0].hcb.class&&"automatic"===r.xyKeys?r.x_pop_now?r.x_pop_now=!1:(v(t),r.x_pop_now=!0):"disable"!==r.xyKeys&&2===r.lyr[0].hcb.class&&(r.y_cut_press_on||t.xCut(B(t,0,i.ypos).y));else if(121===o)r.y_cut_press_on?t.yCut():"pop-up"===r.xyKeys?r.y_pop_now?r.y_pop_now=!1:(_(t),r.y_pop_now=!0):1===r.lyr[0].hcb.class&&"automatic"===r.xyKeys?r.y_pop_now?r.y_pop_now=!1:(_(t),r.y_pop_now=!0):"disable"!==r.xyKeys&&2===r.lyr[0].hcb.class&&(r.x_cut_press_on||t.yCut(B(t,i.xpos,0).x));else if(122===o)!function(t){var e=t._Gx,i=t._Mx;if(e.zmin&&e.zmax){var n="";if(1===e.lyr.length)var n="Z = "+e.lyr[0].get_z(e.retx,e.rety).toString();else var n="TODO";s.message(i,n)}}(t);else if(116===o)!function(t){var e=t._Gx,i=t._Mx;if(e.lyr.length>0){var n=e.lyr[0].hcb;1!==n.class||1!==n.xunits&&4!==n.xunits?2!==n.class||1!==n.yunits&&4!==n.yunits?s.message(i,"Time = UNK"):s.message(i,"Time = "+a.sec2tod(n.timecode+e.rety),!0):s.message(i,"Time = "+a.sec2tod(n.timecode+e.retx),!0)}}(t);else if(109===o){var l;if(!r.nomenu)(l=document.createEvent("Event")).initEvent("showmenu",!0,!0),l.x=i.x,l.y=i.y,s.dispatchEvent(i,l)&&b(t)}else 63===o?s.message(i,"To zoom, press and drag the left mouse (LM) over the region of interest and release. To unzoom, press right mouse (RM).  Press the middle mouse (MM) button or press the 'M' key to open the main menu.View the function of all keypresses by selecting 'Keypress Info' from the main menu."):102===o?(s.fullscreen(i),t.refresh()):9===o&&e.ctrlKey?t.change_settings({invert:null}):107===o&&(r.show_marker=!r.show_marker,t.redraw())}}}(this),n.setKeypressHandler(this.onkeypress)),this};f.prototype={add_plugin:function(t,e){if(void 0===e&&(e=Number.MAX_VALUE),e<=0)throw"Invalid plugin zorder";t.init(this);var i=document.createElement("canvas");i.width=this._Mx.canvas.width,i.height=this._Mx.canvas.height,this._Gx.plugins.push({impl:t,zorder:e,canvas:i}),this._Gx.plugins.sort(function(t,e){return t.zorder-e.zorder}),this.refresh()},remove_plugin:function(t){for(var e=this._Gx.plugins.length;e--;)this._Gx.plugins[e].impl===t&&(t.dispose&&t.dispose(),this._Gx.plugins[e].canvas.parentNode&&this._Gx.plugins[e].canvas.parentNode.removeElement(this._Gx.plugins[e].canvas),this._Gx.plugins.splice(e,1));this._Gx.plugins.sort(function(t,e){return t.zorder-e.zorder}),this.refresh()},addListener:function(t,e){var i=this._Mx;s.addEventListener(i,t,e,!1)},removeListener:function(t,e){var i=this._Mx;s.removeEventListener(i,t,e,!1)},change_settings:function(t){for(var e,i=this._Gx,n=this._Mx,r=0;r<i.lyr.length;r++)i.lyr[r].change_settings(t);(void 0!==t.xyKeys&&(null===t.xyKeys?i.xyKeys="automatic":i.xyKeys=t.xyKeys),void 0!==t.grid&&(null===t.grid?i.grid=!i.grid:i.grid=t.grid),void 0!==t.gridBackground&&(i.gridBackground=t.gridBackground),void 0!==t.gridStyle&&(i.gridStyle=t.gridStyle),void 0!==t.wheelZoom&&(i.wheelZoom=t.wheelZoom),void 0!==t.wheelZoomPercent&&(i.wheelZoomPercent=t.wheelZoomPercent),void 0!==t.autol&&(i.autol=t.autol),void 0!==t.index&&t.index!==i.index)&&(null===t.index?i.index=!i.index:i.index=t.index,i.index&&1!==i.iabsc?i.iabsc=1:i.index||1!==i.iabsc||(i.iabsc=0),D(this,{get_data:!1},void 0,void 0),this.unzoom());void 0!==t.all&&(null===t.all?i.all=!i.all:i.all=t.all),void 0!==t.show_x_axis&&(null===t.show_x_axis?i.show_x_axis=!i.show_x_axis:i.show_x_axis=t.show_x_axis,i.specs=i.show_x_axis||i.show_y_axis||i.show_readout),void 0!==t.show_y_axis&&(null===t.show_y_axis?i.show_y_axis=!i.show_y_axis:i.show_y_axis=t.show_y_axis,i.specs=i.show_x_axis||i.show_y_axis||i.show_readout),void 0!==t.show_readout&&(null===t.show_readout?i.show_readout=!i.show_readout:i.show_readout=t.show_readout,i.specs=i.show_x_axis||i.show_y_axis||i.show_readout),void 0!==t.specs&&(null===t.specs?i.specs=!i.specs:i.specs=t.specs,i.specs?(i.show_x_axis=!0,i.show_y_axis=!0,i.show_readout=!0):(i.show_x_axis=!1,i.show_y_axis=!1,i.show_readout=!1)),void 0!==t.xcnt&&("leftmouse"===t.xcnt?i.cntrls=1:"continuous"===t.xcnt?i.cntrls=2:"disable"===t.xcnt&&i.cntrls>0?i.cntrls=-1*i.cntrls:"enable"===t.xcnt&&i.cntrls<0?i.cntrls=-1*i.cntrls:i.cntrls=t.xcnt),void 0!==t.legend&&(null===t.legend?i.legend=!i.legend:i.legend=t.legend),void 0!==t.pan&&(null===t.pan?i.pan=!i.pan:i.pan=t.pan),void 0!==t.cross&&(null===t.cross?i.cross=!i.cross:i.cross=t.cross,i.cross?(i.cross_xpos=void 0,i.cross_ypos=void 0,!n.warpbox&&this.mouseOnCanvas&&G(this)):(void 0!==i.cross_xpos&&s.rubberline(n,i.cross_xpos,n.t,i.cross_xpos,n.b),void 0!==i.cross_ypos&&s.rubberline(n,n.l,i.cross_ypos,n.r,i.cross_ypos),i.cross_xpos=void 0,i.cross_ypos=void 0));var o=void 0===t.cmode?"":t.cmode;e="string"==typeof o?(o+="").toUpperCase():o,void 0!==t.cmode&&("MA"!==e&&"INMA"!==e&&"ABMA"!==e&&"__MA"!==e&&"MAGNITUDE"!==e&&1!==e||(e=1),"PH"!==e&&"INPH"!==e&&"ABPH"!==e&&"__PH"!==e&&"PHASE"!==e&&2!==e||(e=2),"RE"!==e&&"INRE"!==e&&"ABRE"!==e&&"__RE"!==e&&"REAL"!==e&&3!==e||(e=3),"IM"!==e&&"INIM"!==e&&"ABIM"!==e&&"__IM"!==e&&"IMAGINARY"!==e&&4!==e||(e=4),"LO"!==e&&"D1"!==e&&"INLO"!==e&&"IND1"!==e&&"ABIM"!==e&&"ABD1"!==e&&"__LO"!==e&&"__D1"!==e&&"10*LOG10"!==e&&6!==e||(e=6),"L2"!==e&&"D2"!==e&&"INL2"!==e&&"IND2"!==e&&"ABLO"!==e&&"ABD2"!==e&&"__L2"!==e&&"__D2"!==e&&"20*LOG10"!==e&&7!==e||(e=7),"RI"!==e&&"IR"!==e&&"INRI"!==e&&"INIR"!==e&&"ABRI"!==e&&"ABIR"!==e&&"__RI"!==e&&"__IR"!==e&&"IMAG/REAL"!==e&&"REAL/IMAG"!==e&&5!==e||(i.index?alert("Imag/Real mode not permitted in INDEX mode"):e=5),T(this,e)),void 0!==t.phunits&&function(t,e){var i=t._Gx,n=t._Mx,r=i.plab;"R"===e?r=23:"D"===e&&(r=24);"C"===e&&(r=25);if(r!==i.plab){var o=[Math.PI,180,.5],a=o[r-23]/o[i.plab-23];if(i.plab=r,2===i.cmode){for(var s=0;s<=n.level;s++)n.stk[s].ymin=n.stk[s].ymin*a,n.stk[s].ymax=n.stk[s].ymax*a,n.stk[s].yscl=n.stk[s].yscl*a;i.panymin=i.panymin*a,i.panymax=i.panymax*a,t.refresh()}}}(this,t.phunits),void 0!==t.rubberbox_action&&(i.default_rubberbox_action=t.rubberbox_action),void 0!==t.rubberbox_mode&&(i.default_rubberbox_mode=t.rubberbox_mode),void 0!==t.rightclick_rubberbox_action&&(i.default_rightclick_rubberbox_action=t.rightclick_rubberbox_action),void 0!==t.rightclick_rubberbox_mode&&(i.default_rightclick_rubberbox_mode=t.rightclick_rubberbox_mode),void 0!==t.wheelscroll_mode_natural&&(i.wheelscroll_mode_natural=t.wheelscroll_mode_natural),void 0!==t.colors&&(t.colors.fg||(t.colors.fg=n.fg),t.colors.bg||(t.colors.bg=n.bg),s.setbgfg(n,t.colors.bg,t.colors.fg,n.xi)),void 0!==t.cmap&&(null===t.cmap?2===i.cmode?i.cmap=2:i.cmap=1:i.cmap=t.cmap,y(this,i.cmap)),void 0!==t.yinv&&(t.yinv?n.origin=4:n.origin=1),void 0!==t.rasterSmoothing&&(null===t.rasterSmoothing?i.rasterSmoothing=!i.rasterSmoothing:i.rasterSmoothing=t.rasterSmoothing),void 0!==t.fillStyle&&(i.fillStyle=t.fillStyle),void 0!==t.invert&&(null===t.invert?s.invertbgfg(n):!0===t.invert?s.setbgfg(this,"white","black"):s.setbgfg(this,"black","white")),void 0!==t.nomenu&&(null===t.nomenu?i.nomenu=!i.nomenu:i.nomenu=t.nomenu),void 0!==t.ymax&&(null===t.ymax?(i.autoy=2|i.autoy,i.panymax=void 0,D(this,{}),i.ymax=i.panymax):(i.autoy=13&i.autoy,i.ymax=t.ymax,j(this,n.stk[0].ymin,t.ymax,"Y"),this.redraw())),void 0!==t.ymin&&(null===t.ymin?(i.autoy=1|i.autoy,i.panymin=void 0,D(this,{}),i.ymin=i.panymin):(i.autoy=14&i.autoy,i.ymin=t.ymin,j(this,t.ymin,n.stk[0].ymax,"Y"),this.redraw())),void 0!==t.autoy&&(i.autoy=t.autoy,0!=(1&i.autoy)&&(i.ymin=void 0),0!=(2&i.autoy)&&(i.ymax=void 0)),void 0!==t.xmin&&(j(this,t.xmin,n.stk[0].xmax,"X"),i.autox=2&i.autox,this.redraw()),void 0!==t.xmax&&(j(this,n.stk[0].xmin,t.xmax,"X"),i.autox=1&i.autox,this.redraw()),void 0!==t.zmin&&(i.zmin=t.zmin,i.autoz=2&i.autoz),void 0!==t.zmax&&(i.zmax=t.zmax,i.autoz=1&i.autoz),void 0!==t.autoz&&(i.autoz=t.autoz,0!=(1&i.autoz)&&(i.zmin=void 0),0!=(2&i.autoz)&&(i.zmax=void 0)),void 0!==t.note&&(i.note=t.note),void 0!==t.lg_colorbar&&(i.lg_colorbar=!i.lg_colorbar),void 0!==t.p_cuts&&(null===t.p_cuts?i.p_cuts=!i.p_cuts:i.p_cuts=t.p_cuts),void 0!==t.xcut_now&&(i.xcut_now=!i.xcut_now),void 0!==t.ycut_now&&(i.ycut_now=!i.ycut_now),this.refresh(),void 0!==t.pan&&N(this)},reread:function(){for(var t=this._Gx,e=[],i=0;i<t.lyr.length;i++)e[i]=t.lyr[i];var n=t.HCB.slice();this.deoverlay();for(var r=0;r<n.length;r++)this.overlay_bluefile(n[r]);for(var o=0;o<t.lyr.length;o++)t.lyr[o].symbol=e[o].symbol,t.lyr[o].radius=e[o].radius;this.refresh();var a=document.createEvent("Event");a.initEvent("reread",!0,!0),s.dispatchEvent(this._Mx,a)},cleanup:function(){},reload:function(t,e,i,n){var r=this._Mx,o=this._Gx;if(!(t<0||t>=o.lyr.length)&&void 0!==o.lyr[t].reload){var a=o.lyr[t].reload(e,i);0===r.level&&D(this,{get_data:!1},a.xmin,a.xmax),n?this._refresh():this.refresh()}},rescale:function(){0===this._Mx.level&&D(this,{get_data:!1},void 0,void 0),this.refresh()},headermod:function(t,e){this.change_settings(e),this.push(t,[],e)},push:function(t,e,i,n,r){var o=this._Mx,a=this._Gx;if(!(t<0||t>=a.lyr.length)&&void 0!==a.lyr[t].push&&!1!==a.lyr[t].display){var s=i;if(i){s=JSON.parse(JSON.stringify(i));0===e.length&&(s.xmin=o.stk[t].xmin,s.xmax=o.stk[t].xmax,s.ymin=o.stk[t].ymin,s.ymax=o.stk[t].ymax)}var l=a.lyr[t].push(e,s,n);0===o.level&&l&&D(this,{get_data:!1}),r?this._refresh():this.refresh()}},overlay_array:function(t,e,i){a.log.debug("Overlay array");var n=a.initialize(t,e);return this.overlay_bluefile(n,i)},overlay_pipe:function(t,e){a.log.debug("Overlay pipe"),t||(t={}),t.pipe=!0;var i=a.initialize(null,t);return this.overlay_bluefile(i,e)},overlay_websocket:function(t,e,i){a.log.debug("Overlay websocket: "+t);var n=new WebSocket(t,"plot-data");n.binaryType="arraybuffer";var r=this;e||(e={}),e.pipe=!0;var o=a.initialize(null,e);o.ws=n;var s=this.overlay_bluefile(o,i);return n.onopen=function(t){},n.onmessage=function(t){if(t.data instanceof ArrayBuffer){var e=o.createArray(t.data);r.push(s,e)}else if("string"==typeof t.data){r._Gx.lyr[s].hcb||a.log.warning("Couldn't find header for layer "+s);var i=JSON.parse(t.data);r.push(s,[],i)}},s},overlay_href:function(t,e,i){var n=this;t.split("|").forEach(function(t){n.overlay_href_single(t.trim(),e,i)})},overlay_href_single:function(t,e,i){a.log.debug("Overlay href: "+t);try{this.show_spinner();var n=function(e,n){return function(r){try{var o;if(r)o=t.endsWith(".mat")?e.overlay_matfile(r,i):e.overlay_bluefile(r,i),n&&n(r,o);else alert("Failed to load data")}finally{e.hide_spinner()}}}(this,e);(t.endsWith(".mat")?new o.MatFileReader:new r.BlueFileReader).read_http(t,n)}catch(t){console.error(t),alert("Failed to load data"),this.hide_spinner()}},show_spinner:function(){this._Gx.spinner||(d.color=this._Mx.xwfg,this._Gx.spinner=new e(d).spin(this._Gx.parent))},hide_spinner:function(){this._Gx.spinner&&this._Gx.spinner.stop(),this._Gx.spinner=void 0},add_layer:function(t){var e=this._Gx,i=this._Mx,n=document.createEvent("Event");return n.initEvent("lyradd",!0,!0),n.name=t.name,n.layer=t,!!s.dispatchEvent(i,n)&&(e.lyr.push(t),t.index=e.lyr.length-1,!0)},get_layer:function(t){var e=this._Gx;return t>=0&&t<e.lyr.length?e.lyr[t]:null},overlay_matfile:function(t,e){return a.log.debug("Overlay matfile: "+t.file_name),this.overlay_array(t.dview)},overlay_bluefile:function(t,e){a.log.debug("Overlay bluefile: "+t.file_name);var i=this._Mx,n=this._Gx;e=e||{};var r=0===n.HCB.length;n.HCB.push(t),1===n.HCB.length&&k(this,!0);var o=null;if(void 0===e.layerType?1===t.class?o=l.overlay(this,t,e):2===t.class&&(o=h.overlay(this,t,e)):o="1D"===e.layerType?l.overlay(this,t,e):"2D"===e.layerType?h.overlay(this,t,e):e.layerType.overlay(this,t,e),null!==o&&0!==o.length){if(e.user_data&&o.forEach(function(t){t.user_data=e.user_data}),T(this,n.cmode),r||e.expand){var s,c;if(0===n.HCB.length)k(this,!1);else n.basemode=n.cmode,0==(1&n.autox)&&(s=n.xmin),0==(2&n.autox)&&(c=n.xmax),D(this,{get_data:!0},s,c),i.level=0,0!=(1&n.autox)&&(n.xmin=i.stk[0].xmin),0!=(2&n.autox)&&(n.xmax=i.stk[0].xmax),0!=(1&n.autoy)&&(n.ymin=i.stk[0].ymin),0!=(2&n.autoy)&&(n.ymax=i.stk[0].ymax),i.resize=!0,n.lyr[0].preferred_origin?i.origin=n.lyr[0].preferred_origin:i.origin=1}else{var u=this;o.forEach(function(t){C(u,t)})}return S(this),this.refresh(),n.HCB.length-1}a.log.debug("failed to create layers")},load_files:function(t,e){for(var i,n=(i=this,function(t){i.overlay_bluefile(t,e)}),o=0;o<t.length;o++){var a=t[o];(new r.BlueFileReader).read(a,n)}},deoverlay:function(t){var e=this._Gx;this._Mx;if(e.HCB.length>0)if(void 0===t)for(var i=e.HCB.length-1;i>=0;i--)this.remove_layer(i);else if(t<0){if((i=e.HCB.length+t)<0)return;this.remove_layer(i)}else t<e.HCB.length&&this.remove_layer(t);0===e.lyr.length&&(k(this,!1),D(this,{}))},remove_layer:function(t){var e=this._Gx,i="",n=null;if(t>=0&&t<e.HCB.length){i=e.HCB[t].file_name,n=e.HCB[t],e.HCB[t]=null;for(var r=t;r<e.HCB.length-1;r++)e.HCB[r]=e.HCB[r+1];e.HCB.length-=1}for(r=e.lyr.length-1;r>=0;r--)e.lyr[r].hcb===n&&L(this,r);S(this),this.refresh();var o=document.createEvent("Event");o.initEvent("file_deoverlayed",!0,!0),""!==i&&(o.fileName=i),s.dispatchEvent(this._Mx,o)},pixel_zoom:function(t,e,i,n,r){var o=B(this,t,e),a=B(this,i,n);this.zoom(o,a,r)},percent_zoom:function(t,e,i){var n=this._Mx,r=this._Gx,o=0;Math.abs(t)<1&&(o=(o=Math.abs(n.stk[n.level].xmax-n.stk[n.level].xmin))*t/2);var a=0;Math.abs(e)<1&&(a=(a=Math.abs(n.stk[n.level].ymax-n.stk[n.level].ymin))*e/2);var s={x:Math.max(n.stk[n.level].xmin+o,r.panxmin),y:Math.max(n.stk[n.level].ymin+a,r.panymin)},l={x:Math.min(n.stk[n.level].xmax-o,r.panxmax),y:Math.min(n.stk[n.level].ymax-a,r.panymax)};this.zoom(s,l,i)},zoom:function(t,e,i){var n=this._Mx,r=this._Gx;if(!(n.level>=9)){if(void 0===t.x&&(t.x=n.stk[n.level].xmin),void 0===t.y&&(t.y=n.stk[n.level].ymin),void 0===e.x&&(e.x=n.stk[n.level].xmax),void 0===e.y&&(e.y=n.stk[n.level].ymax),e.x<t.x){var o=e.x;e.x=t.x,t.x=o}if(e.y<t.y){var a=e.y;e.y=t.y,t.y=a}var l={};l.xscl=n.stk[n.level].xscl,l.yscl=n.stk[n.level].yscl,l.xmin=t.x,l.xmax=e.x,l.ymin=t.y,l.ymax=e.y,r.index&&(l.xmin=Math.min(l.xmin/r.xdelta),l.xmax=Math.min(l.xmax/r.xdelta)),i&&r.inContinuousZoom?n.stk[n.level]=l:(n.stk.push(l),n.level=n.stk.length-1),r.inContinuousZoom=i,this.inZoom=!0;var h=document.createEvent("Event");h.initEvent("zoom",!0,!0),h.level=n.level,h.inContinuousZoom=r.inContinuousZoom,h.xmin=n.stk[n.level].xmin,h.ymin=n.stk[n.level].ymin,h.xmax=n.stk[n.level].xmax,h.ymax=n.stk[n.level].ymax,s.dispatchEvent(n,h),this.inZoom=!1,this.refresh()}},unzoom:function(t){var e=this._Mx,i=this._Gx;if(0!==e.level){for(t||(t=e.stk.length);t>0&&0!==e.level;)e.stk.pop(),e.level=e.stk.length-1,t-=1;0===e.level&&this.rescale(),i.inContinuousZoom=!1,this.inZoom=!0;var n=document.createEvent("Event");n.initEvent("unzoom",!0,!0),n.level=e.level,n.xmin=e.stk[e.level].xmin,n.ymin=e.stk[e.level].ymin,n.xmax=e.stk[e.level].xmax,n.ymax=e.stk[e.level].ymax,s.dispatchEvent(e,n),this.inZoom=!1,this.refresh()}},mimic:function(t,e){var i=this;if(!e)throw"mimic must be called with at least one event mask";if(this.unmimic(t),e.zoom){var n=function(t){i.inZoom||i.zoom({x:t.xmin,y:t.ymin},{x:t.xmax,y:t.ymax},t.inContinuousZoom)};t.addListener("zoom",n),this.mimicListeners.listeners.zoom=n}else if(e.xzoom){n=function(t){i.inZoom||i.zoom({x:t.xmin,y:void 0},{x:t.xmax,y:void 0},t.inContinuousZoom)};t.addListener("zoom",n),this.mimicListeners.listeners.zoom=n}else if(e.yzoom){n=function(t){i.inZoom||i.zoom({x:void 0,y:t.ymin},{x:void 0,y:t.ymax},t.inContinuousZoom)};t.addListener("zoom",n),this.mimicListeners.listeners.zoom=n}if(e.unzoom){n=function(t){i.inZoom||t.level<i._Mx.level&&i.unzoom(i._Mx.level-t.level)};t.addListener("unzoom",n),this.mimicListeners.listeners.unzoom=n}if(e.pan||e.xpan){n=function(t){i.inPan||j(i,t.xmin,t.xmax,"X")};t.addListener("xpan",n),this.mimicListeners.listeners.xpan=n}if(e.pan||e.ypan){n=function(t){i.inPan||j(i,t.ymin,t.ymax,"Y")};t.addListener("ypan",n),this.mimicListeners.listeners.ypan=n}this.mimicListeners.other=t},unmimic:function(t){if(t=this.mimicListeners.other){var e=this;Object.keys(this.mimicListeners.listeners).forEach(function(i){e.mimicListeners.listeners[i]&&t.removeListener(i,e.mimicListeners.listeners[i])})}this.mimicListeners={other:null,listeners:{zoom:null,unzoom:null,xpan:null,ypan:null}}},redraw:function(){var t=this._Gx,e=this._Mx,i=e.canvas.getContext("2d");t.plotData.valid?(i.drawImage(t.plotData,e.l-1,e.t-1,e.r-e.l+2,e.b-e.t+2,e.l-1,e.t-1,e.r-e.l+2,e.b-e.t+2),M(this),t.cross_xpos=void 0,t.cross_ypos=void 0,!e.warpbox&&this.mouseOnCanvas&&G(this),(t.always_show_marker||t.show_marker)&&P(this)):this.refresh()},refresh:function(){if(this._Gx.initialized&&!(this._Gx.refresh_after_ctr>0)){var t=this;s.render(this._Mx,function(){t._refresh()})}},refresh_after:function(t){this._Gx.refresh_after_ctr+=1;try{t(this)}finally{this._Gx.refresh_after_ctr=Math.max(this._Gx.refresh_after_ctr-1,0),0===this._Gx.refresh_after_ctr&&this.refresh()}},enable_listeners:function(){var t=this._Mx;s.addEventListener(t,"mousedown",this.onmousedown,!1),s.addEventListener(t,"mousemove",this.throttledOnMouseMove,!1),window.addEventListener("mouseup",t.onmouseup,!1),window.addEventListener("keydown",t.onkeydown,!1),window.addEventListener("keyup",t.onkeyup,!1),window.addEventListener("resize",this.onresize,!1),document.addEventListener("mouseup",this.docMouseUp,!1),s.addEventListener(t,"mouseup",this.mouseup,!1),window.addEventListener("mousedown",this.dragMouseDownHandler,!1),window.addEventListener("mousemove",this.throttledDragOnMouseMove,!1),window.addEventListener("mouseup",this.dragMouseUpHandler,!1),window.addEventListener("wheel",this.wheelHandler,!1),window.addEventListener("mousewheel",this.wheelHandler,!1),window.addEventListener("DOMMouseScroll",this.wheelHandler,!1),window.addEventListener("keypress",this.onkeypress,!1)},disable_listeners:function(){var t=this._Mx;s.removeEventListener(t,"mousedown",this.onmousedown,!1),s.removeEventListener(t,"mousemove",this.throttledOnMouseMove,!1),s.removeEventListener(t,"mouseup",this.mouseup,!1),window.removeEventListener("mouseup",t.onmouseup,!1),window.removeEventListener("keydown",t.onkeydown,!1),window.removeEventListener("keyup",t.onkeyup,!1),window.removeEventListener("resize",this.onresize,!1),document.removeEventListener("mouseup",this.docMouseUp,!1),window.removeEventListener("mousedown",this.dragMouseDownHandler,!1),window.removeEventListener("mousemove",this.throttledDragOnMouseMove,!1),window.removeEventListener("mouseup",this.dragMouseUpHandler,!1),window.removeEventListener("wheel",this.wheelHandler,!1),window.removeEventListener("mousewheel",this.wheelHandler,!1),window.removeEventListener("DOMMouseScroll",this.wheelHandler,!1),window.removeEventListener("keypress",this.onkeypress,!1)},checkresize:function(){s.checkresize(this._Mx)&&this.refresh()},addColorMaps:function(t){t.forEach(function(t){t.hasOwnProperty("name")&&a.Mc.colormap.push(t)})},xCut:function(t){var e=this._Gx,i=this._Mx;if(void 0!==t){if(e.cut_stash={},e.cut_stash.ylabel=e.ylabel,e.cut_stash.xlabel=e.xlabel,e.cut_stash.level=i.level,e.cut_stash.stk=JSON.parse(JSON.stringify(i.stk)),e.cut_stash.panymin=e.panymin,e.cut_stash.panymax=e.panymax,e.cut_stash.panxmin=e.panxmin,e.cut_stash.panxmax=e.panxmax,!e.p_cuts){e.x_cut_data=[];var n=e.lyr[0].xframe,r=Math.round((t-e.lyr[0].ystart)/e.lyr[0].ydelta);if(r<0||r>e.lyr[0].lps)return;var o=r*n,s=o+n;e.x_cut_data=e.lyr[0].buf.slice(o,s)}e.old_drawmode=e.lyr[0].drawmode,e.old_autol=e.autol,this.change_settings({drawmode:"undefined",autol:-1});var l=e.lyr.length>0&&e.lyr[0].cx;1===e.cmode?e.ylabel=a.UNITS[28][0]:2===e.cmode?e.ylabel=e.plab:3===e.cmode&&l?e.ylabel=a.UNITS[21][0]:4===e.cmode?e.ylabel=a.UNITS[22][0]:5===e.cmode?e.ylabel=a.UNITS[22][0]:6===e.cmode?e.ylabel=a.UNITS[26][0]:7===e.cmode?e.ylabel=a.UNITS[27][0]:e.ylabel="Intensity","None"!==a.UNITS[e.xlab][0]&&"Unknown"!==a.UNITS[e.xlab][0]?e.xlabel=a.UNITS[e.xlab][0]:e.xlabel="Frequency",e.xlabel+="    CURRENTLY IN X_CUT MODE",i.origin=1,e.xcut_layer=this.overlay_array(e.x_cut_data,{xstart:e.lyr[0].xstart,xdelta:e.lyr[0].xdelta},{name:"x_cut_data",line:3}),e.xcut_layer=e.lyr.length-1;for(var h=0;h<e.xcut_layer;h++)e.lyr[h].display=!e.lyr[h].display;e.x_cut_press_on=!0;var c=a.vmxmn(e.x_cut_data,e.lyr[0].xframe),u=c.smax,d=c.smin,f=u-d;f<0&&(d=(u=d)+f,f=-f),f<=1e-20?(d-=1,u+=1):(d-=.02*f,u+=.02*f),e.panymin=c.smin,e.panymax=c.smax;for(var x=1;x<i.level+1;x++)i.stk[x].ymin=d,i.stk[x].ymax=u,i.stk[x].yscl=(i.stk[x].ymax-i.stk[x].ymin)/(i.b-i.t);this.rescale()}else if(e.x_cut_press_on){e.x_cut_press_on=!1;for(x=0;x<e.xcut_layer;x++)e.lyr[x].display=!e.lyr[x].display;L(this,e.xcut_layer),e.xlabel=e.cut_stash.xlabel,e.ylabel=e.cut_stash.ylabel,i.level=e.cut_stash.level,i.stk=JSON.parse(JSON.stringify(e.cut_stash.stk)),e.panymin=e.cut_stash.panymin,e.panymax=e.cut_stash.panymax,e.panxmin=e.cut_stash.panxmin,e.panxmax=e.cut_stash.panxmax,e.cut_stash=void 0,this.rescale(),this.refresh(),e.xcut_layer=void 0,this.change_settings({drawmode:e.old_drawmode,autol:e.old_autol})}},yCut:function(t){var e=this._Gx,i=this._Mx;if(void 0!==t){if(e.cut_stash={},e.cut_stash.xlabel=e.xlabel,e.cut_stash.ylabel=e.ylabel,e.cut_stash.level=i.level,e.cut_stash.stk=JSON.parse(JSON.stringify(i.stk)),e.cut_stash.ymax=i.stk[i.level].ymax,e.cut_stash.panymin=e.panymin,e.cut_stash.panymax=e.panymax,e.cut_stash.panxmin=e.panxmin,e.cut_stash.panxmax=e.panxmax,!e.p_cuts){var n=e.lyr[0].lps,r=e.lyr[0].xframe,o=0;for(e.y_cut_data=[],o=Math.round((t-e.lyr[0].xstart)/e.lyr[0].xdelta);o<r*n;o+=r)e.y_cut_data.push(e.lyr[0].buf[o])}e.old_drawmode=e.lyr[0].drawmode,e.old_autol=e.autol,this.change_settings({drawmode:"undefined",autol:-1});var s=e.lyr.length>0&&e.lyr[0].cx;1===e.cmode?e.ylabel=a.UNITS[28][0]:2===e.cmode?e.ylabel=e.plab:3===e.cmode&&s?e.ylabel=a.UNITS[21][0]:4===e.cmode?e.ylabel=a.UNITS[22][0]:5===e.cmode?e.ylabel=a.UNITS[22][0]:6===e.cmode?e.ylabel=a.UNITS[26][0]:7===e.cmode?e.ylabel=a.UNITS[27][0]:e.ylabel="Intensity","None"!==a.UNITS[e.ylab][0]&&"Unknown"!==a.UNITS[e.ylab][0]?e.xlabel=a.UNITS[e.ylab][0]:e.xlabel="Time",e.xlabel+="    CURRENTLY IN Y_CUT MODE",i.origin=1,e.ycut_layer=this.overlay_array(e.y_cut_data,{xstart:e.lyr[0].ystart,xdelta:e.lyr[0].ydelta},{name:"y_cut_data",line:3}),e.ycut_layer=e.lyr.length-1;for(var l=0;l<e.ycut_layer;l++)e.lyr[l].display=!e.lyr[l].display;e.y_cut_press_on=!0;var h=a.vmxmn(e.y_cut_data,e.lyr[0].lps),c=h.smax,u=h.smin,d=c-u;d<0&&(u=(c=u)+d,d=-d),d<=1e-20?(u-=1,c+=1):(u-=.02*d,c+=.02*d),e.panymin=h.smin,e.panymax=h.smax;for(var f=1;f<i.level+1;f++)i.stk[f].xmin=i.stk[f].ymin,i.stk[f].xmax=i.stk[f].ymax,i.stk[f].xscl=(i.stk[f].xmax-i.stk[f].xmin)/(i.r-i.t),i.stk[f].ymin=u,i.stk[f].ymax=c,i.stk[f].yscl=(i.stk[f].ymax-i.stk[f].ymin)/(i.b-i.t);this.rescale()}else if(e.y_cut_press_on){e.y_cut_press_on=!1;for(var x=0;x<e.ycut_layer;x++)e.lyr[x].display=!e.lyr[x].display;L(this,e.ycut_layer),e.xlabel=e.cut_stash.xlabel,e.ylabel=e.cut_stash.ylabel,i.level=e.cut_stash.level,i.stk=JSON.parse(JSON.stringify(e.cut_stash.stk)),e.panymin=e.cut_stash.panymin,e.panymax=e.cut_stash.panymax,e.panxmin=e.cut_stash.panxmin,e.panxmax=e.cut_stash.panxmax,e.cut_stash=void 0,this.rescale(),this.refresh(),e.ycut_layer=void 0,this.change_settings({drawmode:e.old_drawmode,autol:e.old_autol})}},_refresh:function(){var t=this._Mx,e=this._Gx;t.canvas.getContext("2d");if(!e.hold){var i=t.font_width;if(t.font_scaled&&(i=Math.min(t.font_width,t.width/64)),s.set_font(t,i),e.pthk=1.5*t.text_w,e.specs){var n=!1;if(4===e.ylab&&(n=!0),!0===e.show_y_axis){if(t.l=6*t.text_w,n)(Math.abs(t.stk[0].ymin)>=31536e3||Math.abs(t.stk[0].ymax)>=31536e3)&&(t.l=11*t.text_w)}else t.l=1;!0===e.pan?t.r=t.width-(e.pthk+2*t.text_w):t.r=t.width-5,e.show_readout?(t.t=2*t.text_h,e.show_x_axis?t.b=t.height-4*t.text_h:t.b=t.height-3*t.text_h):"bottom"===e.x_scrollbar_location?(t.t=2*t.text_h,e.pan?e.show_x_axis?t.b=t.height-3*t.text_h:t.b=t.height-2*t.text_h:e.show_x_axis?t.b=t.height-2*t.text_h:t.b=t.height-5):(e.pan?t.t=e.pthk+2*t.text_w:t.t=1,e.show_x_axis?t.b=t.height-3*t.text_h/2:t.b=t.height-2),e.show_readout?e.pl=50*t.text_w:"bottom"===e.x_scrollbar_location?e.pl=t.l:e.pl=35*t.text_w,e.pr=Math.max(e.pl+9*t.text_w,t.r),e.show_readout?e.show_x_axis?e.pt=t.b+t.text_h+(t.height-t.b-t.text_h-e.pthk)/2:e.pt=t.b+(t.height-t.b-e.pthk)/2:"bottom"===e.x_scrollbar_location?e.show_x_axis?e.pt=t.b+t.text_h+(t.height-t.b-t.text_h-e.pthk)/2:e.pt=t.b+(t.height-t.b-e.pthk)/2:e.pt=(t.t-e.pthk)/2,e.lbtn=t.text_h+t.text_w+2}else e.pan?(t.t=e.pthk+2*t.text_w,t.r=t.width-(e.pthk+t.text_w)):(t.t=1,t.r=t.width-2),t.b=t.height-2,t.l=1,e.pl=t.l,e.pr=t.r,e.pt=(t.t-e.pthk)/2,e.lbtn=0;if(e.pyl=t.r+(t.width-t.r-e.pthk)/2+1,e.lg_colorbar&&2===e.lyr[0].hcb.class){var r=t.r;t.r=r-100}if(e.p_cuts&&1===e.lyr.length&&2===e.lyr[0].hcb.class){e.cross=!0;r=t.r;t.r=r-100;var o=t.b;t.b=o-100}e.xcut_now&&(t.canvas.width=e.x_box_w-1,t.canvas.height=e.x_box_h,t.r=e.x_box_w-1,t.l=0,t.b=e.x_box_h,t.t=0),e.ycut_now&&(t.canvas.width=e.y_box_h-1,t.canvas.height=e.y_box_w,t.r=e.y_box_h-1,t.l=0,t.b=e.y_box_w,t.t=0);var l=t.level;t.stk[l].x1=t.l,t.stk[l].y1=t.t,t.stk[l].x2=t.r,t.stk[l].y2=t.b,t.stk[l].xscl=(t.stk[l].xmax-t.stk[l].xmin)/(t.r-t.l),t.stk[l].yscl=(t.stk[l].ymax-t.stk[l].ymin)/(t.b-t.t);var h=B(this,t.xpos,t.ypos);e.retx=h.x,e.rety=h.y,0!==e.panning&&0===e.panning||(e.plotData.valid=!1,s.clear_window(t));var c=e.xlab,u=e.ylab;if(void 0===c&&(c=30),e.index&&(c=0),void 0===u){var d=e.lyr.length>0&&e.lyr[0].cx;1===e.cmode?u=28:2===e.cmode?u=e.plab:3===e.cmode&&d?u=21:4===e.cmode?u=22:5===e.cmode?(u=22,c=21):u=6===e.cmode?26:7===e.cmode?27:0}if(e.specs){if(0===e.sections){var f={grid:e.grid};2===e.panning&&(f.noxtlab=!0),e.show_x_axis||(f.noxtics=!0,f.noxtlab=!0,f.noxplab=!0),e.show_y_axis||(f.noytics=!0,f.noytlab=!0,f.noyplab=!0),!e.specs||e.show_readout||e.pan||(f.noyplab=!0,f.noxplab=!0),e.gridBackground&&(f.fillStyle=e.gridBackground),e.gridStyle&&(f.gridStyle=e.gridStyle),e.xmult&&(f.xmult=e.xmult),e.ymult&&(f.ymult=e.ymult),4===c&&(f.xtimecode=!0),4===u&&(f.ytimecode=!0),void 0!==e.xlabel&&(f.xlabel=e.xlabel),void 0!==e.ylabel&&(f.ylabel=e.ylabel),s.drawaxis(e,t,e.xdiv,e.ydiv,c,u,f)}var x=e.lbtn-2;e.show_readout&&e.pan?(e.no_legend_button||(e.legend?(e.legendBtnLocation={x:t.width-e.lbtn,y:2,width:x,height:x},s.shadowbox(t,t.width-e.lbtn,2,x,x,1,-2,"L")):(e.legendBtnLocation={x:t.width-e.lbtn,y:2,width:x,height:x},s.shadowbox(t,t.width-e.lbtn,2,x,x,1,2,"L"))),N(this)):e.legendBtnLocation=null}else if(e.grid&&e.sections>=0){f={grid:!0,noaxisbox:!0,noxtics:!0,noxtlab:!0,noxplab:!0,noytics:!0,noytlab:!0,noyplab:!0};s.drawaxis(e,t,e.xdiv,e.ydiv,c,u,f)}!function(t){for(var e=t._Gx.lyr,i=0;i<e.length;i++)C(t,e[i])}(this),function(t,e){var i=t._Mx,n=t._Gx;if(e>0){if(e>=4&&n.show_readout&&!n.hide_note){var r=n.note.length;s.text(i,i.width-n.lbtn-(r+1)*i.text_w,i.text_h,n.note)}e>=4&&O(t),e>=1&&n.legend&&function(t){var e=t._Mx,i=t._Gx,n=e.canvas.getContext("2d"),r=0,o=0,l=0,h=0,c=0,u=0,d=0,f=0,x=0,m=0,p=0;c=e.text_w,f=23*c,x=(i.lyr.length+1)*e.text_h,u=e.r-f,d=e.t;var y={x:u+2,y:d+2,width:f-5,height:x-5},v=0,_=0;for(o=0;o<i.lyr.length;o++){var b=n.measureText(i.lyr[o].name).width;b>v&&(v=b)}v>98&&(_=v-98,y.width+=_,y.x-=_);for(n.strokeStyle=e.fg,n.fillStyle=e.bg,n.fillRect(y.x,y.y,y.width,y.height),n.strokeRect(y.x,y.y,y.width,y.height),o=0;o<i.lyr.length;o++)l=u+4*c,h=d+o*e.text_h+e.text_h,o===i.modlayer&&s.text(e,u+c-_,h+Math.floor(e.text_w/2),"**"),i.lyr[o].display&&(p=i.lyr[o].color,i.lyr[o].line>0&&((m=a.sign(Math.min(c,Math.abs(i.lyr[o].thick)),i.lyr[o].thick))<0||m===s.L_dashed?s.draw_line(e,p,l-_,h-3,l+2*c-_,h-3,Math.abs(m),{mode:"dashed",on:4,off:4}):s.draw_line(e,p,l-_,h-3,l+2*c-_,h-3,Math.abs(m))),i.lyr[o].symbol>0&&(m=i.lyr[o].radius<0?-a.trunc(.6*c):Math.min(i.lyr[o].radius,a.trunc(.6*c)),s.draw_symbol(e,p,l+c-_,h-3,i.lyr[o].symbol,m)),2===i.lyr[o].hcb.class&&s.legend_colorbar(e,y.x+10,y.y+y.height/4,y.width/4-10,y.height/2)),l+=3*c,h+=.3*e.text_h,s.text(e,l-_,h,i.lyr[o].name);var w=y.height/i.lyr.length;for(r=0;r<i.lyr.length;r++)y.x<=e.xpos&&y.x+y.width>=e.xpos&&y.y<=e.ypos&&y.y+w>=e.ypos&&g(t,r),y.y+=w}(t)}}(this,4),M(this),e.cross_xpos=void 0,e.cross_ypos=void 0,!t.warpbox&&this.mouseOnCanvas&&(G(this),e.y_cut_press_on||e.x_cut_press_on||1!==e.lyr.length||2!==e.lyr[0].hcb.class||z(this)),(e.always_show_marker||e.show_marker)&&P(this)}}};var x=["Ma","Ph","Re","Im","IR","Lo","L2"],m=["(absc)","(indx)","(1/ab)","(dydx)"];function p(){this.initialized=!1,this.xptr=void 0,this.yptr=void 0,this.retx=0,this.rety=0,this.xmrk=0,this.ymrk=0,this.aretx=0,this.arety=0,this.xstart=0,this.xdelta=0,this.panxmin=0,this.panxmax=0,this.panymin=0,this.panymax=0,this.xmin=0,this.xmax=0,this.xmult=void 0,this.ymin=0,this.ymax=0,this.ymult=void 0,this.zmin=void 0,this.zmax=void 0,this.zoff=0,this.dbmin=0,this.pxscl=0,this.pyscl=0,this.pmt=0,this.note="",this.format="",this.pl=0,this.pr=0,this.pt=0,this.pb=0,this.px1=0,this.px2=0,this.py1=0,this.py2=0,this.pyl=0,this.pthk=0,this.modlayer=0,this.modsource=0,this.modified=!1,this.modmode=0,this.xdiv=0,this.ydiv=0,this.all=!1,this.expand=!1,this.cross=!1,this.grid=!0,this.gridBackground=void 0,this.index=!1,this.pan=!0,this.specs=!0,this.legend=!0,this.xdata=!1,this.show_x_axis=!0,this.show_y_axis=!0,this.show_readout=!0,this.hide_note=!1,this.autohide_readout=!1,this.autohide_panbars=!1,this.panning=void 0,this.panmode=0,this.hold=!1,this.sections=0,this.iysec=0,this.nsec=0,this.isec=0,this.xlab=void 0,this.xlabel=void 0,this.ylab=void 0,this.ylabel=void 0,this.xcompression=0,this.default_rubberbox_action="zoom",this.default_rubberbox_mode="box",this.wheelscroll_mode_natural=!0,this.scroll_time_interval=10,this.repeatPanning=void 0,this.stillPanning=void 0,this.autol=-1,this.lineSmoothing=!1,this.rasterSmoothing=!1,this.wheelZoom=!1,this.wheelZoomPercent=.2,this.inContinuousZoom=!1,this.lyr=[],this.HCB=[],this.plugins=[],this.plotData=document.createElement("canvas"),this.plotData.valid=!1,this.lg_colorbar=!1,this.cbb_top_x1=0,this.cbb_top_y1=0,this.cbb_bot_x1=0,this.cbb_bot_y1=0,this.cbb_width=0,this.cbb_height=0,this.p_cuts=!1,this.x_box_x=0,this.x_box_y=0,this.x_box_h=0,this.x_box_w=0,this.y_box_x=0,this.y_box_y=0,this.y_box_h=0,this.y_box_w=0,this.p_cuts_xpos=void 0,this.p_cuts_ypos=void 0,this.x_cut_data=[],this.y_cut_data=[],this.xcut=void 0,this.xcut_layer=void 0,this.x_cut_press_on=!1,this.xcut_now=!1,this.ycut=void 0,this.ycut_layer=void 0,this.y_cut_press_on=!1,this.ycut_now=!1,this.ylabel_stash=void 0,this.cut_stash=void 0,this.element1=void 0,this.element2=void 0,this.xyKeys="automatic",this.x_pop_now=!1,this.y_pop_now=!1,this.old_drawmode=void 0,this.old_autol=void 0,this.refresh_after_ctr=0}function y(t,e){var i=t._Gx,n=t._Mx;if(Array.isArray(e)){var r={name:"Custom",colors:e};"Custom"===a.Mc.colormap[a.Mc.colormap.length-1].name?a.Mc.colormap[a.Mc.colormap.length-1].colors=e:a.Mc.colormap.push(r),i.cmap=a.Mc.colormap.length-1}else if("string"==typeof e){i.cmap=-1;for(var o=0;o<a.Mc.colormap.length;o++)if(a.Mc.colormap[o].name===e){i.cmap=o;break}}else i.cmap=e;i.ncolors<0&&(i.ncolors=-1*i.ncolors,i.cmap=Math.max(1,i.cmap)),(i.cmap<0||i.cmap>a.Mc.colormap.length)&&(2===i.cmode?i.cmap=2:i.cmap=1),s.colormap(n,a.Mc.colormap[i.cmap].colors,i.ncolors)}function v(t){var e=t._Gx,i=t._Mx,n=e.aretx.toString();1===e.iabsc?s.message(i,"INDEX = "+n):2===e.iabsc?s.message(i,"1/X = "+n):s.message(i,"X = "+n)}function _(t){var e=t._Gx,i=t._Mx,n=e.arety.toString();2===e.iabsc?s.message(i,"1/Y = "+n):s.message(i,"Y = "+n)}function b(t){var e=t._Gx,i=t._Mx;s.removeEventListener(i,"mousedown",t.onmousedown,!1);for(var n={text:"Cntrls...",menu:{title:"CONTROLS OPTIONS",items:[{text:"Continuous (Disabled)",checked:-2===e.cntrls,handler:function(){t.change_settings({xcnt:-2})}},{text:"LM Click (Disabled)",checked:-1===e.cntrls,handler:function(){t.change_settings({xcnt:-1})}},{text:"Off",checked:0===e.cntrls,handler:function(){t.change_settings({xcnt:0})}},{text:"LM Click",checked:1===e.cntrls,handler:function(){t.change_settings({xcnt:1})}},{text:"Continuous",checked:2===e.cntrls,handler:function(){t.change_settings({xcnt:2})}}]}},r={text:"CX Mode...",menu:{title:"COMPLEX MODE",items:[{text:"Magnitude",checked:1===e.cmode,handler:function(){t.change_settings({cmode:1})}},{text:"Phase",checked:2===e.cmode,handler:function(){t.change_settings({cmode:2})}},{text:"Real",checked:3===e.cmode,handler:function(){t.change_settings({cmode:3})}},{text:"Imaginary",checked:4===e.cmode,handler:function(){t.change_settings({cmode:4})}},{text:"IR: Imag/Real",checked:5===e.cmode,handler:function(){t.change_settings({cmode:5})}},{text:"10*Log10",checked:6===e.cmode,handler:function(){t.change_settings({cmode:6})}},{text:"20*Log10",checked:7===e.cmode,handler:function(){t.change_settings({cmode:7})}}]}},o={text:"Scaling...",menu:{title:"SCALING",items:[{text:"Y Axis",style:"separator"},{text:"Parameters...",checked:0===e.autoy,handler:function(){e.autoy=0;I(t,"Y Axis Min:",s.floatValidator,function(e){parseFloat(e)!==i.stk[i.level].ymin?(""===e&&(e=0),j(t,parseFloat(e),i.stk[i.level].ymax,"Y")):t.refresh()},i.stk[i.level].ymin,void 0,void 0,function(){I(t,"Y Axis Max:",s.floatValidator,function(e){parseFloat(e)!==i.stk[i.level].ymax?(""===e&&(e=0),j(t,i.stk[i.level].ymin,parseFloat(e),"Y")):t.refresh()},i.stk[i.level].ymax,void 0,void 0,void 0)})}},{text:"Min Auto",checked:1===e.autoy,handler:function(){e.autoy=1}},{text:"Max Auto",checked:2===e.autoy,handler:function(){e.autoy=2}},{text:"Full Auto",checked:3===e.autoy,handler:function(){e.autoy=3}},{text:"X Axis",style:"separator"},{text:"Parameters...",checked:0===e.autox,handler:function(){e.autox=0;I(t,"X Axis Min:",s.floatValidator,function(e){parseFloat(e)!==i.stk[i.level].xmin?(""===e&&(e=0),j(t,parseFloat(e),i.stk[i.level].xmax,"X")):t.refresh()},i.stk[i.level].xmin,void 0,void 0,function(){I(t,"X Axis Max:",s.floatValidator,function(e){parseFloat(e)!==i.stk[i.level].xmax?(""===e&&(e=0),j(t,i.stk[i.level].xmin,parseFloat(e),"X")):t.refresh()},i.stk[i.level].xmax,void 0,void 0,void 0)})}},{text:"Min Auto",checked:1===e.autox,handler:function(){e.autox=1}},{text:"Max Auto",checked:2===e.autox,handler:function(){e.autox=2}},{text:"Full Auto",checked:3===e.autox,handler:function(){e.autox=3}},{text:"Z Axis",style:"separator"},{text:"Parameters...",checked:0===e.autoz,handler:function(){e.autoz=0;I(t,"Z Axis Min:",s.floatValidator,function(i){parseFloat(i)!==e.zmin&&(""===i&&(i=0),t.change_settings({zmin:i}))},e.zmin,void 0,void 0,function(){I(t,"Z Axis Max:",s.floatValidator,function(i){parseFloat(i)!==e.zmax&&(""===i&&(i=0),t.change_settings({zmax:i}))},e.zmax,void 0,void 0,void 0)})}},{text:"Min Auto",checked:1===e.autoz,handler:function(){t.change_settings({autoz:1})}},{text:"Max Auto",checked:2===e.autoz,handler:function(){t.change_settings({autoz:2})}},{text:"Full Auto",checked:3===e.autoz,handler:function(){t.change_settings({autoz:3})}}]}},l={text:"Grid",handler:function(){t.change_settings({grid:!e.grid})}},h={text:"Settings...",menu:{title:"SETTINGS",items:[{text:"ALL Mode",checked:e.all,style:"checkbox",handler:function(){t.change_settings({all:!e.all})}},{text:"Controls...",menu:{title:"CONTROLS OPTIONS",items:[{text:"Continuous (Disabled)",checked:-2===e.cntrls,handler:function(){t.change_settings({xcnt:-2})}},{text:"LM Click (Disabled)",checked:-1===e.cntrls,handler:function(){t.change_settings({xcnt:-1})}},{text:"Off",checked:0===e.cntrls,handler:function(){t.change_settings({xcnt:0})}},{text:"LM Click",checked:1===e.cntrls,handler:function(){t.change_settings({xcnt:1})}},{text:"Continuous",checked:2===e.cntrls,handler:function(){t.change_settings({xcnt:2})}}]}},{text:"Mouse...",menu:{title:"MOUSE OPTIONS",items:[{text:"LM Drag (Zoom)",checked:"zoom"===e.default_rubberbox_action,handler:function(){e.default_rubberbox_action="zoom"}},{text:"LM Drag (Select)",checked:"select"===e.default_rubberbox_action,handler:function(){e.default_rubberbox_action="select"}},{text:"LM Drag (Disabled)",checked:null===e.default_rubberbox_action,handler:function(){e.default_rubberbox_action=null}},{text:"RM Drag (Zoom)",checked:"zoom"===e.default_rightclick_rubberbox_action,handler:function(){e.default_rightclick_rubberbox_action="zoom"}},{text:"RM Drag (Select)",checked:"select"===e.default_rightclick_rubberbox_action,handler:function(){e.default_rightclick_rubberbox_action="select"}},{text:"RM Drag (Disabled)",checked:null===e.default_rightclick_rubberbox_action,handler:function(){e.default_rightclick_rubberbox_action=null}},{text:"Mode...",menu:{title:"MOUSE Mode",items:[{text:"Box",checked:"box"===e.default_rubberbox_mode,handler:function(){e.default_rubberbox_mode="box"}},{text:"Horizontal",checked:"horizontal"===e.default_rubberbox_mode,handler:function(){e.default_rubberbox_mode="horizontal"}},{text:"Vertical",checked:"vertical"===e.default_rubberbox_mode,handler:function(){e.default_rubberbox_mode="vertical"}}]}},{text:"CROSShairs...",menu:{title:"Crosshairs Mode",items:[{text:"Off",checked:!e.cross,handler:function(){e.cross=!1}},{text:"On",checked:!0===e.cross,handler:function(){e.cross=!0}},{text:"Horizontal",checked:"horizontal"===e.cross,handler:function(){e.cross="horizontal"}},{text:"Vertical",checked:"vertical"===e.cross,handler:function(){e.cross="vertical"}}]}},{text:"Mousewheel Natural Mode",checked:e.wheelscroll_mode_natural,style:"checkbox",handler:function(){t.change_settings({wheelscroll_mode_natural:!e.wheelscroll_mode_natural})}}]}},{text:"CROSShairs",checked:e.cross,style:"checkbox",handler:function(){t.change_settings({cross:!e.cross})}},{text:"GRID",checked:e.grid,style:"checkbox",handler:function(){t.change_settings({grid:!e.grid})}},{text:"INDEX Mode",checked:e.index,style:"checkbox",handler:function(){t.change_settings({index:!e.index})}},{text:"LEGEND",checked:e.legend,style:"checkbox",handler:function(){t.change_settings({legend:!e.legend})}},{text:"PAN Scrollbars",checked:e.pan,style:"checkbox",handler:function(){t.change_settings({pan:!e.pan})}},{text:"PHase UNITS...",menu:{title:"PHASE UNITS",items:[{text:"Radians",checked:23===e.plab,handler:function(){t.change_settings({phunits:"R"})}},{text:"Degrees",checked:24===e.plab,handler:function(){t.change_settings({phunits:"D"})}},{text:"Cycles",checked:25===e.plab,handler:function(){t.change_settings({phunits:"C"})}}]}},{text:"SPECS",checked:e.specs,style:"checkbox",handler:function(){t.change_settings({specs:!e.specs})}},{text:"P-Cuts",checked:e.p_cuts,style:"checkbox",handler:function(){t.change_settings({p_cuts:!e.p_cuts})}},{text:"Large Colorbar",checked:e.lg_colorbar,style:"checkbox",handler:function(){t.change_settings({lg_colorbar:!e.lg_colorbar})}},{text:"XDIVisions...",handler:function(){I(t,"X Divisions:",function(t){var e=s.intValidator(t),n=a.trunc(i.width/2);return e.valid&&t>n?{valid:!1,reason:"Exceeds maximum number of divisions ("+n+")."}:e},function(i){parseFloat(i)!==e.xdiv&&(""===i&&(i=1),e.xdiv=parseFloat(i)),t.refresh()},e.xdiv,void 0,void 0,void 0)}},{text:"XLABel...",handler:function(){I(t,"X Units:",function(t){return console.log("The value is "+t),s.intValidator(t)},function(i){parseFloat(i)!==e.xlab&&(i<0&&(i=0),e.xlab=parseFloat(i)),t.refresh()},e.xlab,void 0,void 0,void 0)}},{text:"YDIVisions...",handler:function(){I(t,"Y Divisions:",function(t){var e=s.intValidator(t),n=a.trunc(i.height/2);return e.valid&&t>n?{valid:!1,reason:"Exceeds maximum number of divisions ("+n+")."}:e},function(i){parseFloat(i)!==e.ydiv&&(""===i&&(i=1),e.ydiv=parseFloat(i)),t.refresh()},e.ydiv,void 0,void 0,void 0)}},{text:"YINVersion",checked:4===i.origin,style:"checkbox",handler:function(){t.change_settings({yinv:4!==i.origin})}},{text:"YLABel...",handler:function(){I(t,"Y Units:",function(t){return s.intValidator(t)},function(i){parseFloat(i)!==e.ylab&&(i<0&&(i=0),e.ylab=parseFloat(i)),t.refresh()},e.ylab,void 0,void 0,void 0)}},{text:"X-axis",checked:e.show_x_axis,style:"checkbox",handler:function(){t.change_settings({show_x_axis:!e.show_x_axis})}},{text:"Y-axis",checked:e.show_y_axis,style:"checkbox",handler:function(){t.change_settings({show_y_axis:!e.show_y_axis})}},{text:"Readout",checked:e.show_readout,style:"checkbox",handler:function(){t.change_settings({show_readout:!e.show_readout})}},{text:"Invert Colors",checked:i.xi,style:"checkbox",handler:function(){s.invertbgfg(i)}}]}},c={text:"Colormap...",menu:{title:"COLORMAP",items:[]}},d=function(e){t.change_settings({cmap:this.cmap})},f=0;f<a.Mc.colormap.length;f++){var x={text:a.Mc.colormap[f].name,cmap:f,checked:e.cmap===f,handler:d};c.menu.items.push(x)}var m=function(i){return{title:"TRACE OPTIONS",items:[{text:"Dashed...",handler:function(){var n=1;if(void 0!==i)n=Math.abs(t._Gx.lyr[i].thick);else{if(0===e.lyr.length)return;n=Math.abs(t._Gx.lyr[0].thick);for(var r=0;r<e.lyr.length;r++)if(n!==Math.abs(t._Gx.lyr[r].thick)){n=1;break}}I(t,"Line thickness:",s.intValidator,function(n){if(void 0!==i)t._Gx.lyr[i].line=3,t._Gx.lyr[i].thick=-1*n,t._Gx.lyr[i].symbol=0;else for(var r=0;r<e.lyr.length;r++)t._Gx.lyr[r].line=3,t._Gx.lyr[r].thick=-1*n,t._Gx.lyr[r].symbol=0},n)}},{text:"Colors...",menu:{title:"COLORS",items:[{text:"Retain Current"},{text:"Red",checked:void 0!==i?"red"===t._Gx.lyr[i].color:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].color="red";else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].color="red"}},{text:"Pink",checked:void 0!==i?"pink"===t._Gx.lyr[i].color:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].color="pink";else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].color="pink"}},{text:"Hot Pink",checked:void 0!==i?"#ff009e"===t._Gx.lyr[i].color:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].color="#ff009e";else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].color="#ff009e"}},{text:"Orange",checked:void 0!==i?"orange"===t._Gx.lyr[i].color:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].color="orange";else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].color="orange"}},{text:"Yellow",checked:void 0!==i?"yellow"===t._Gx.lyr[i].color:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].color="yellow";else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].color="yellow"}},{text:"Lime Green",checked:void 0!==i?"#80f741"===t._Gx.lyr[i].color:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].color="#80f741";else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].color="#80f741"}},{text:"Green",checked:void 0!==i?"green"===t._Gx.lyr[i].color:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].color="green";else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].color="green"}},{text:"Blue",checked:void 0!==i?"blue"===t._Gx.lyr[i].color:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].color="blue";else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].color="blue"}},{text:"Purple",checked:void 0!==i?"purple"===t._Gx.lyr[i].color:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].color="purple";else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].color="purple"}},{text:"Custom Hexcode",handler:function(){I(t,"Color code (requires #):",s.hexValidator,function(n){if(void 0!==i)t._Gx.lyr[i].color=n;else for(;0<e.lyr.length;i++)t._Gx.lyr[0].color=n},void 0,void 0,void 0,void 0)}}]}},{text:"Dots...",handler:function(){var n=3;if(void 0!==i)n=Math.abs(t._Gx.lyr[i].radius);else{if(0===e.lyr.length)return;var r;for(r=0;r<e.lyr.length;r++)if(n!==Math.abs(t._Gx.lyr[r].radius)){n=3;break}}I(t,"Radius/Shape:",s.intValidator,function(n){var r,o,a;if(n<0?(r=3,o=Math.abs(n)):n>0?(r=2,o=n):(r=1,o=0),void 0!==i)t._Gx.lyr[i].line=0,t._Gx.lyr[i].radius=o,t._Gx.lyr[i].symbol=r;else for(a=0;a<e.lyr.length;a++)t._Gx.lyr[a].line=0,t._Gx.lyr[a].radius=o,t._Gx.lyr[a].symbol=r},n)}},{text:"Radius...",handler:function(){var n=3;if(void 0!==i)n=Math.abs(t._Gx.lyr[i].radius);else{if(0===e.lyr.length)return;for(var r=0;r<e.lyr.length;r++)if(n!==Math.abs(t._Gx.lyr[r].radius)){n=3;break}}I(t,"Radius:",s.intValidator,function(n){var r;if(n<0?r=Math.abs(n):n>0?r=n:(1,r=0),void 0!==i)t._Gx.lyr[i].line=0,t._Gx.lyr[i].radius=r;else for(var o=0;o<e.lyr.length;o++)t._Gx.lyr[o].line=0,t._Gx.lyr[o].radius=r},n)}},{text:"Solid...",handler:function(){var n=1;if(void 0!==i)n=Math.abs(t._Gx.lyr[i].thick);else{if(0===e.lyr.length)return;var r;for(n=Math.abs(t._Gx.lyr[0].thick),r=0;r<e.lyr.length;r++)if(n!==Math.abs(t._Gx.lyr[r].thick)){n=1;break}}I(t,"Line thickness:",s.intValidator,function(n){var r;if(void 0!==i)t._Gx.lyr[i].line=3,t._Gx.lyr[i].thick=n,t._Gx.lyr[i].symbol=0;else for(r=0;r<e.lyr.length;r++)t._Gx.lyr[r].line=3,t._Gx.lyr[r].thick=n,t._Gx.lyr[r].symbol=0},n)}},{text:"Toggle",style:void 0!==i?"checkbox":void 0,checked:void 0!==i?t._Gx.lyr[i].display:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].display=!t._Gx.lyr[i].display;else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].display=!t._Gx.lyr[n].display}},{text:"Symbols...",menu:{title:"SYMBOLS",items:[{text:"Retain Current"},{text:"None",checked:void 0!==i?0===t._Gx.lyr[i].symbol:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].radius=0,t._Gx.lyr[i].symbol=0;else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].radius=0,t._Gx.lyr[n].symbol=0}},{text:"Pixels",checked:void 0!==i?1===t._Gx.lyr[i].symbol:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].radius=1,t._Gx.lyr[i].symbol=1;else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].radius=1,t._Gx.lyr[n].symbol=1}},{text:"Circles",checked:void 0!==i?2===t._Gx.lyr[i].symbol:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].radius=4,t._Gx.lyr[i].symbol=2;else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].radius=4,t._Gx.lyr[n].symbol=2}},{text:"Squares",checked:void 0!==i?3===t._Gx.lyr[i].symbol:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].radius=4,t._Gx.lyr[i].symbol=3;else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].radius=4,t._Gx.lyr[n].symbol=3}},{text:"Plusses",checked:void 0!==i?4===t._Gx.lyr[i].symbol:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].radius=4,t._Gx.lyr[i].symbol=4;else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].radius=4,t._Gx.lyr[n].symbol=4}},{text:"X's",checked:void 0!==i?5===t._Gx.lyr[i].symbol:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].radius=4,t._Gx.lyr[i].symbol=5;else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].radius=4,t._Gx.lyr[n].symbol=5}},{text:"Triangles",checked:void 0!==i?6===t._Gx.lyr[i].symbol:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].radius=6,t._Gx.lyr[i].symbol=6;else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].radius=6,t._Gx.lyr[n].symbol=6}},{text:"Downward Triangles",checked:void 0!==i?7===t._Gx.lyr[i].symbol:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].radius=6,t._Gx.lyr[i].symbol=7;else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].radius=6,t._Gx.lyr[n].symbol=7}}]}},{text:"Line Type...",menu:{title:"LINE TYPE",items:[{text:"Retain Current"},{text:"None",checked:void 0!==i?0===t._Gx.lyr[i].line:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].line=0;else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].line=0}},{text:"Verticals",checked:void 0!==i?1===t._Gx.lyr[i].line:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].line=1;else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].line=1}},{text:"Horizontals",checked:void 0!==i?2===t._Gx.lyr[i].line:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].line=2;else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].line=2}},{text:"Connecting",checked:void 0!==i?3===t._Gx.lyr[i].line:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].line=3;else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].line=3}}]}},{text:"Thickness...",handler:function(){var n=1;void 0!==i&&(n=t._Gx.lyr[i].thick),I(t,"Thickness",s.intValidator,function(n){if(""===n&&(n=1),n=Math.max(0,n),void 0!==i)t._Gx.lyr[i].thick=n;else for(var r=0;r<e.lyr.length;r++)t._Gx.lyr[r].thick=n},n,void 0,void 0,void 0)}},{text:"Opacity...",handler:function(){var n=1;void 0!==i&&(n=t._Gx.lyr[i].opacity),I(t,"Opacity:",s.floatValidator,function(n){if(""===n&&(n=1),n=Math.max(0,n),n=Math.min(1,n),void 0!==i)t._Gx.lyr[i].opacity=n;else for(var r=0;r<e.lyr.length;r++)t._Gx.lyr[r].opacity=n},n,void 0,void 0,void 0)}},{text:"XCompression...",menu:{title:"XCOMPRESSION",items:[{text:"Retain Current"},{text:"Smoothing",checked:void 0!==i?0===t._Gx.lyr[i].xcompression:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].change_settings({xcmp:0});else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[i].change_settings({xcmp:0})}},{text:"Average",checked:void 0!==i?1===t._Gx.lyr[i].xcompression:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].change_settings({xcmp:1});else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[i].change_settings({xcmp:1})}},{text:"Minimum",checked:void 0!==i?2===t._Gx.lyr[i].xcompression:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].change_settings({xcmp:2});else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[i].change_settings({xcmp:2})}},{text:"Maximum",checked:void 0!==i?3===t._Gx.lyr[i].xcompression:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].change_settings({xcmp:3});else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[i].change_settings({xcmp:3})}},{text:"First",checked:void 0!==i?4===t._Gx.lyr[i].xcompression:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].change_settings({xcmp:4});else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[i].change_settings({xcmp:4})}},{text:"Max (Abs)",checked:void 0!==i?5===t._Gx.lyr[i].xcompression:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].change_settings({xcmp:5});else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[i].change_settings({xcmp:5})}}]}}]}},p={title:"SIG-PLOT",finalize:function(){i.prompt||s.addEventListener(i,"mousedown",t.onmousedown,!1),t.refresh()},items:[{text:"Refresh"},n,r,o,{text:"View...",menu:{title:"VIEW",items:[{text:"Reset",handler:function(){t.unzoom()}},{text:"Y Axis",style:"separator"},{text:"Expand Range",handler:function(){W(t,s.SB_EXPAND,"YPAN")}},{text:"Shrink Range",handler:function(){W(t,s.SB_SHRINK,"YPAN")}},{text:"Expand Full",handler:function(){W(t,s.SB_FULL,"YPAN")}},{text:"X Axis",style:"separator"},{text:"Expand Range",handler:function(){W(t,s.SB_EXPAND,"XPAN")}},{text:"Shrink Range",handler:function(){W(t,s.SB_SHRINK,"XPAN")}},{text:"Expand Full",handler:function(){W(t,s.SB_FULL,"XPAN")}}]}},l,h,c,{text:"Traces...",menu:function(){var e=t._Gx,i={title:"TRACE",items:[]};i.items.push({text:"All",menu:m()});for(var n=0;n<e.lyr.length;n++)i.items.push({text:e.lyr[n].name,menu:m(n)});return i}},{text:"Files...",menu:{title:"FILES OPTIONS",items:[{text:"Deoverlay File...",menu:function(){var e=t._Gx,i={title:"DEOVERLAY",items:[]};i.items.push({text:"Deoverlay All",handler:function(){t.deoverlay()}});for(var n=0;n<e.lyr.length;n++){var r=function(e){return function(){t.deoverlay(e)}}(n);i.items.push({text:e.lyr[n].name,handler:r})}return i}}]}},{text:"Plugins...",menu:{title:"PLUGINS",items:function(){for(var t=[],i=0;i<e.plugins.length;i++){var n=e.plugins[i];n.impl.menu&&("function"==typeof n.impl.menu?t.push(n.impl.menu()):t.push(n.impl.menu))}return t}()}},{text:"Keypress Info",handler:function(){s.message(i,u)}},{text:"Save as...",menu:{title:"SAVE AS",items:[{text:"PNG",handler:function(){var e=t._Mx.active_canvas.toDataURL("image/png"),i=document.createElement("a");i.href=e,i.download="SigPlot."+(new Date).getTime()+".png",i.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i)}},{text:"JPG",handler:function(){var e=t._Mx.active_canvas.toDataURL("image/jpg"),i=document.createElement("a");i.href=e,i.download="SigPlot."+(new Date).getTime()+".jpg",i.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i)}},{text:"SVG",handler:function(){var e=t._Mx.active_canvas.toDataURL("image/svg"),i=document.createElement("a");i.href=e,i.download="SigPlot."+(new Date).getTime()+".svg",i.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i)}}]}},{text:"Exit",handler:function(){var t=document.createEvent("Event");t.initEvent("sigplotexit",!0,!0),s.dispatchEvent(i,t)}}]};s.menu(i,p)}function g(t,e){var i=t._Gx,n=t._Mx;s.removeEventListener(n,"mousedown",t.onmousedown,!1);var r={text:"Dashed...",handler:function(){var n=1;if(void 0!==e)n=Math.abs(t._Gx.lyr[e].thick);else{if(0===i.lyr.length)return;n=Math.abs(t._Gx.lyr[0].thick);for(var r=0;r<i.lyr.length;r++)if(n!==Math.abs(t._Gx.lyr[r].thick)){n=1;break}}I(t,"Line thickness:",s.intValidator,function(n){if(void 0!==e)t._Gx.lyr[e].line=3,t._Gx.lyr[e].thick=-1*n,t._Gx.lyr[e].symbol=0;else for(var r=0;r<i.lyr.length;r++)t._Gx.lyr[r].line=3,t._Gx.lyr[r].thick=-1*n,t._Gx.lyr[r].symbol=0},n)}},o={text:"Colors...",menu:{title:"COLORS",items:[{text:"Retain Current"},{text:"Red",checked:void 0!==e?"red"===t._Gx.lyr[e].color:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].color="red";else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].color="red"}},{text:"Pink",checked:void 0!==e?"pink"===t._Gx.lyr[e].color:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].color="pink";else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].color="pink"}},{text:"Hot Pink",checked:void 0!==e?"#ff009e"===t._Gx.lyr[e].color:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].color="#ff009e";else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].color="#ff009e"}},{text:"Orange",checked:void 0!==e?"orange"===t._Gx.lyr[e].color:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].color="orange";else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].color="orange"}},{text:"Yellow",checked:void 0!==e?"yellow"===t._Gx.lyr[e].color:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].color="yellow";else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].color="yellow"}},{text:"Lime Green",checked:void 0!==e?"#80f741"===t._Gx.lyr[e].color:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].color="#80f741";else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].color="#80f741"}},{text:"Green",checked:void 0!==e?"green"===t._Gx.lyr[e].color:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].color="green";else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].color="green"}},{text:"Blue",checked:void 0!==e?"blue"===t._Gx.lyr[e].color:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].color="blue";else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].color="blue"}},{text:"Purple",checked:void 0!==e?"purple"===t._Gx.lyr[e].color:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].color="purple";else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].color="purple"}},{text:"Custom Hexcode",handler:function(){I(t,"Color code (requires #):",s.hexValidator,function(n){if(void 0!==e)t._Gx.lyr[e].color=n;else for(var r=0;r<i.lyr.length;r++)t._Gx.lyr[r].color=n},void 0,void 0,void 0,void 0)}}]}},a={text:"Solid...",handler:function(){var n=1;if(void 0!==e)n=Math.abs(t._Gx.lyr[e].thick);else{if(0===i.lyr.length)return;var r;for(n=Math.abs(t._Gx.lyr[0].thick),r=0;r<i.lyr.length;r++)if(n!==Math.abs(t._Gx.lyr[r].thick)){n=1;break}}I(t,"Line thickness:",s.intValidator,function(n){var r;if(void 0!==e)t._Gx.lyr[e].line=3,t._Gx.lyr[e].thick=n,t._Gx.lyr[e].symbol=0;else for(r=0;r<i.lyr.length;r++)t._Gx.lyr[r].line=3,t._Gx.lyr[r].thick=n,t._Gx.lyr[r].symbol=0},n)}},l={text:"Toggle",style:void 0!==e?"checkbox":void 0,checked:void 0!==e?t._Gx.lyr[e].display:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].display=!t._Gx.lyr[e].display;else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].display=!t._Gx.lyr[n].display}},h={text:"Symbols...",menu:{title:"SYMBOLS",items:[{text:"Retain Current"},{text:"None",checked:void 0!==e?0===t._Gx.lyr[e].symbol:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].radius=0,t._Gx.lyr[e].symbol=0;else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].radius=0,t._Gx.lyr[n].symbol=0}},{text:"Pixels",checked:void 0!==e?1===t._Gx.lyr[e].symbol:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].radius=1,t._Gx.lyr[e].symbol=1;else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].radius=1,t._Gx.lyr[n].symbol=1}},{text:"Circles",checked:void 0!==e?2===t._Gx.lyr[e].symbol:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].radius=4,t._Gx.lyr[e].symbol=2;else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].radius=4,t._Gx.lyr[n].symbol=2}},{text:"Squares",checked:void 0!==e?3===t._Gx.lyr[e].symbol:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].radius=4,t._Gx.lyr[e].symbol=3;else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].radius=4,t._Gx.lyr[n].symbol=3}},{text:"Plusses",checked:void 0!==e?4===t._Gx.lyr[e].symbol:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].radius=4,t._Gx.lyr[e].symbol=4;else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].radius=4,t._Gx.lyr[n].symbol=4}},{text:"X's",checked:void 0!==e?5===t._Gx.lyr[e].symbol:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].radius=4,t._Gx.lyr[e].symbol=5;else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].radius=4,t._Gx.lyr[n].symbol=5}},{text:"Triangles",checked:void 0!==e?6===t._Gx.lyr[e].symbol:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].radius=6,t._Gx.lyr[e].symbol=6;else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].radius=6,t._Gx.lyr[n].symbol=6}},{text:"Downward Triangles",checked:void 0!==e?7===t._Gx.lyr[e].symbol:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].radius=6,t._Gx.lyr[e].symbol=7;else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].radius=6,t._Gx.lyr[n].symbol=7}}]}},c={text:"Line Type...",menu:{title:"LINE TYPE",items:[{text:"Retain Current"},{text:"None",checked:void 0!==e?0===t._Gx.lyr[e].line:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].line=0;else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].line=0}},{text:"Verticals",checked:void 0!==e?1===t._Gx.lyr[e].line:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].line=1;else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].line=1}},{text:"Horizontals",checked:void 0!==e?2===t._Gx.lyr[e].line:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].line=2;else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].line=2}},{text:"Connecting",checked:void 0!==e?3===t._Gx.lyr[e].line:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].line=3;else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].line=3}}]}},u={text:"Thickness...",handler:function(){var n=1;void 0!==e&&(n=t._Gx.lyr[e].thick),I(t,"Thickness",s.intValidator,function(n){if(""===n&&(n=1),n=Math.max(0,n),void 0!==e)t._Gx.lyr[e].thick=n;else for(var r=0;r<i.lyr.length;r++)t._Gx.lyr[r].thick=n},n,void 0,void 0,void 0)}},d={text:"Opacity...",handler:function(){var n=1;void 0!==e&&(n=t._Gx.lyr[e].opacity),I(t,"Opacity:",s.floatValidator,function(n){if(""===n&&(n=1),n=Math.max(0,n),n=Math.min(1,n),void 0!==e)t._Gx.lyr[e].opacity=n;else for(var r=0;r<i.lyr.length;r++)t._Gx.lyr[r].opacity=n},n,void 0,void 0,void 0)}},f={title:i.lyr[e].name,finalize:function(){n.prompt||s.addEventListener(n,"mousedown",t.onmousedown,!1),t.refresh()},items:[r,o,a,l,h,c,u,d]};s.menu(n,f)}function w(t,e){return function(i,n,r,o,a,l,h){t._Gx;var c=t._Mx,u=Math.min(n,o),d=Math.min(r,a),f=Math.abs(o-n),x=Math.abs(a-r),m=!1;if(i.which===e&&(m="horizontal"===h?f>2:"vertical"===h?x>2:f>2&&x>2),m){if(void 0===l||"zoom"===l)t.pixel_zoom(n,r,o,a),t.refresh();else if("select"===l){var p=document.createEvent("Event");p.initEvent("mtag",!0,!0);var y=B(t,u,d),v=B(t,u+f,d+x);p.x=y.x,p.y=y.y,p.xpos=u,p.ypos=d,p.w=Math.abs(v.x-y.x),p.h=Math.abs(v.y-y.y),p.wpxl=f,p.hpxl=x,p.shift=i.shiftKey,s.dispatchEvent(c,p)}}else t.mouseup(i)}}function k(t,e){var i=t._Gx,n=t._Mx;if(e){var r=i.HCB[0];i.xstart=r.xstart,i.xdelta=r.xdelta,n.origin=1}else i.xstart=0,i.xdelta=1,i.autol=-1,n.origin=1}function M(t){for(var e,i=t._Gx,n=t._Mx.canvas.getContext("2d"),r=0;r<i.plugins.length;){i.plugins[r].impl.refresh&&((e=i.plugins[r].canvas).width!==t._Mx.canvas.width&&(e.width=t._Mx.canvas.width),e.height!==t._Mx.canvas.height&&(e.height=t._Mx.canvas.height),0!==e.height&&0!==e.width&&(e.width!==t._Mx.canvas.width&&(e.width=t._Mx.canvas.width),e.height!==t._Mx.canvas.height&&(e.height=t._Mx.canvas.height),e.getContext("2d").clearRect(0,0,e.width,e.height),i.plugins[r].impl.refresh(e),n.drawImage(e,0,0))),r+=1}}function S(t){var e=t._Gx;if(0===e.HCB.length)e.note="";else if(void 0===e.HCB[0].plotnote){for(var i=[],n=0;n<e.HCB.length;n++)e.HCB[n].file_name&&i.push(e.HCB[n].file_name);e.note=i.join("|").toUpperCase()}}function E(t){var e=t._Mx,i=t._Gx;if(void 0!==i.zmin&&void 0!==i.zmax){var n=e.r-e.l;i.x_box_x=Math.floor(e.l-2)+.5,i.x_box_y=Math.floor(e.b+25)+.5,i.x_box_w=Math.floor(n+4),i.x_box_h=Math.floor(5*e.text_h+20),s.draw_box(e,e.fg,i.x_box_x,i.x_box_y,i.x_box_w,i.x_box_h,1,e.bg);var r=e.active_canvas.getContext("2d");r.beginPath(),r.lineWidth=1,r.strokeStyle=e.fg;for(var o=null,a=null,l=0;l<t._Gx.x_cut_data.length;l++){var h=t._Gx.x_cut_data[l];h=Math.min(Math.max(h,i.zmin),i.zmax);var c=t._Gx.x_box_h/(i.zmax-i.zmin),u=Math.round((h-i.zmin)*c),d=t._Gx.x_box_w/t._Gx.x_cut_data.length,f=Math.round(l*d),x=t._Gx.x_box_x+f,m=t._Gx.x_box_y+t._Gx.x_box_h-u;0===l?r.moveTo(x,m):x===o&&m===a||(r.lineTo(x,m),o=x,a=m)}r.stroke()}}function A(t){var e=t._Mx,i=t._Gx;if(void 0!==i.zmin&&void 0!==i.zmax){var n=e.b-e.t;i.y_box_x=Math.floor(e.r+25)+.5,i.y_box_y=Math.floor(e.t-2)+.5,i.y_box_w=Math.floor(5*e.text_w+20),i.y_box_h=Math.floor(n+2),i.lg_colorbar&&(i.y_box_x+=100),s.draw_box(e,e.fg,i.y_box_x,i.y_box_y,i.y_box_w,i.y_box_h,1,e.bg);var r=e.active_canvas.getContext("2d");r.beginPath(),r.lineWidth=1,r.strokeStyle=e.fg;for(var o=null,a=null,l=0;l<t._Gx.y_cut_data.length;l++){var h=t._Gx.y_cut_data[l];h=Math.min(Math.max(h,i.zmin),i.zmax);var c=t._Gx.y_box_w/(i.zmax-i.zmin),u=Math.round((h-i.zmin)*c),d=t._Gx.y_box_h/t._Gx.y_cut_data.length,f=Math.round(l*d),x=t._Gx.y_box_x+u,m=t._Gx.y_box_y+f;0===l?r.moveTo(x,m):x===o&&m===a||(r.lineTo(x,m),o=x,a=m)}r.stroke()}}function C(t,e){var i=t._Mx,n=t._Gx;if(e.display&&0===n.hold){e.draw();var r=document.createEvent("Event");r.initEvent("lyrdraw",!0,!0),r.index=e.index,r.name=e.name,r.layer=e,s.dispatchEvent(i,r)}}function L(t,e){var i=t._Gx,n=t._Mx,r=document.createEvent("Event");if(r.initEvent("lyrdel",!0,!0),r.index=e,r.name=i.lyr[e].name,r.layer=i.lyr[e],s.dispatchEvent(n,r)){if(i.lyr[e].ybufn=0,i.lyr[e].ybuf=null,e<i.lyr.length-1){i.lyr[e];for(var o=e;o<i.lyr.length-1;o++)i.lyr[o]=i.lyr[o+1]}i.lyr.length-=1,i.HCB.length>0&&(i.panxmin=1,i.panxmax=-1,i.panymin=1,i.panymax=-1)}}function z(t){var e=t._Gx,i=t._Mx;if(2===e.lyr[0].hcb.class){var n=i.b-i.t,r=i.r-i.l,o=e.lyr[0].yframe,a=e.lyr[0].xframe;if(e.p_cuts)if(e.lyr[0].hcb.pipe){if(i.xpos>=i.l&&i.xpos<=i.r){s=0;for(o=e.lyr[0].lps,e.y_cut_data=[],s=Math.floor(a*(i.xpos-i.l)/r);s<a*o;s+=a)e.y_cut_data.push(e.lyr[0].zbuf[s]);A(t)}if(i.ypos>=i.t&&i.ypos<=i.b){l=0,h=0;e.x_cut_data=[],h=(l=Math.floor(o*(i.ypos-i.t)/n)*a)+a,e.x_cut_data=e.lyr[0].zbuf.slice(l,h),E(t)}}else{if(i.xpos>=i.l&&i.xpos<=i.r&&e.p_cuts_xpos!==i.xpos){var s=0;for(e.y_cut_data=[],s=Math.floor(a*(i.xpos-i.l)/r);s<a*o;s+=a)e.y_cut_data.push(e.lyr[0].zbuf[s]);A(t),e.p_cuts_xpos=i.xpos}if(i.ypos>=i.t&&i.ypos<=i.b&&e.p_cuts_ypos!==i.ypos){var l=0,h=0,s=0;h=(l=Math.floor(o*(i.ypos-i.t)/n)*a)+a,e.x_cut_data=e.lyr[0].zbuf.slice(l,h),E(t),e.p_cuts_ypos=i.ypos}}}}function G(t){var e=t._Gx,i=t._Mx;e.cross&&("vertical"!==e.cross&&!0!==e.cross||i.xpos>=i.l&&i.xpos<=i.r&&e.cross_xpos!==i.xpos&&(void 0!==e.cross_xpos&&s.rubberline(i,e.cross_xpos,i.t,e.cross_xpos,i.b),s.rubberline(i,i.xpos,i.t,i.xpos,i.b),e.cross_xpos=i.xpos),"horizontal"!==e.cross&&!0!==e.cross||i.ypos>=i.t&&i.ypos<=i.b&&e.cross_ypos!==i.ypos&&(void 0!==e.cross_ypos&&s.rubberline(i,i.l,e.cross_ypos,i.r,e.cross_ypos),s.rubberline(i,i.l,i.ypos,i.r,i.ypos),e.cross_ypos=i.ypos))}function P(t){var e=t._Gx,i=t._Mx;if(null!==e.xmrk&&null!==e.ymrk){var n=s.real_to_pixel(i,e.xmrk,e.ymrk);if(e.lyr.length>0&&1===e.lyr[0].hcb.class){if(n.clipped)return}else if(e.lyr.length>0&&2===e.lyr[0].hcb.class&&(n.clipped_x||!n.clipped_y))return;var r=i.active_canvas.getContext("2d");r.beginPath(),r.strokeStyle=i.xwfg,r.fillStyle=i.xwfg,r.arc(n.x,n.y,2,0,360),r.stroke(),r.textBaseline="alphabetic",r.textAlign="left",r.fillStyle=i.fg,r.font=i.font.font;var o="x:"+s.format_g(e.xmrk,6,3,!0);r.fillText(o,n.x+5,n.y-5),o="y:"+s.format_g(e.ymrk,6,3,!0),r.fillText(o,n.x+5,n.y-5+i.text_h)}}function T(t,e){var i=t._Mx,n=t._Gx;n.xdata=!1;for(var r=0;r<n.lyr.length;r++)n.lyr[r].xdata=5===e,n.lyr[r].xdata&&(n.xdata=!0);if(e!==n.cmode)if(5===e&&n.index)alert("Imag/Real mode not permitted in INDEX mode");else if(n.lyr.length<=0)n.cmode=e,N(t);else if(e>0){var o=n.cmode;n.cmode=e;var a=n.autox,s=n.autoy;if(n.autox=3,n.autoy=3,5===e||5===o)n.panxmin=1,n.panxmax=-1,n.panymin=1,n.panymax=-1,i.level=0,e===n.basemode?(i.stk[0].xmin=n.xmin,i.stk[0].xmax=n.xmax,i.stk[0].ymin=n.ymin,i.stk[0].ymax=n.ymax):5===e||5===n.basemode?D(t,{get_data:!0}):(i.stk[0].xmin=n.xmin,i.stk[0].xmax=n.xmax,D(t,{get_data:!0},n.xmin,n.xmax));else{0===n.HCB.length&&e===n.basemode?(n.panymin=1,n.panymax=-1,i.stk[0].ymin=n.ymin,i.stk[0].ymax=n.ymax):D(t,{},i.stk[i.level].xmin,i.stk[i.level].xmax);for(r=1;r<=i.level;r++)i.stk[r].ymin=i.stk[0].ymin,i.stk[r].ymax=i.stk[0].ymax}n.autox=a,n.autoy=s,t.refresh()}}function O(t){var e,i=t._Mx,n=t._Gx;if(n.pan&&!i.widget){e=i.level;var r={ps:i.stk[e].ymin,pe:i.stk[e].ymax},o=r.ps!==n.panymin||r.pe!==n.panymax;if(o=o&&i.level>0,!n.autohide_panbars||o&&t.mouseOnCanvas||n.panning){s.scrollbar(i,0,n.pyl,n.pyl+n.pthk,i.t,i.b,r,n.panymin,n.panymax,void 0,i.scrollbar_y);i.stk[e].ymin=r.ps,i.stk[e].ymax=r.pe}else{(l=i.canvas.getContext("2d")).fillStyle=i.bg,l.fillRect(n.pyl,i.t,n.pyl+n.pthk,i.b-i.t)}if(n.pl<i.width){var a=(r={ps:i.stk[e].xmin,pe:i.stk[e].xmax}).ps!==n.panxmin||r.pe!==n.panxmax;if(a=a&&(!n.all||i.level>0),!n.autohide_panbars||a&&t.mouseOnCanvas||n.panning){s.scrollbar(i,0,n.pl,n.pr,n.pt,n.pt+n.pthk,r,n.panxmin,n.panxmax,void 0,i.scrollbar_x);i.stk[e].xmin=r.ps,i.stk[e].xmax=r.pe}else{var l;(l=i.canvas.getContext("2d")).fillStyle=i.bg,l.fillRect(n.pl,n.pt-1,n.pr-n.pl,n.pthk+4)}}}}function R(t,e,i,n){var r,o,a,l,h,c,u,d,f=t._Mx,x=t._Gx,m=new s.SCROLLBAR,p=new s.SCROLLBAR,y=!1;if(r=f.level,x.panmode>0?(m.flag=11,p.flag=11):(m.flag=-12,p.flag=-12),0===i&&(m.action=0,p.action=0),!0,"Y"===e.substring(0,1)){if(h=f.stk[r].ymin,u=(c=f.stk[r].ymax)-h,"YPAN"===e){d=f.scrollbar_y;var v={ps:h,pe:c};s.scrollbar(f,p,x.pyl,x.pyl+x.pthk,f.t,f.b,v,x.panymin,x.panymax,n,d),h=v.ps,c=v.pe,0!==p.action&&s.scroll(f,p,s.XW_UPDATE,void 0,d),!1}else"YCENTER"===e&&(c=(h-=u*(f.ypos-(f.t+f.b)/2)/(f.b-f.t))+u,!1);if(h!==f.stk[r].ymin||c!==f.stk[r].ymax)f.stk[r].ymin=h,f.stk[r].ymax=c,x.cmode===x.basemode&&1===f.level&&(x.ymin=Math.min(x.ymin,h),x.ymax=Math.max(x.ymax,c)),this.inPan=!0,(_=document.createEvent("Event")).initEvent("ypan",!0,!0),_.level=f.level,_.xmin=f.stk[f.level].xmin,_.ymin=f.stk[f.level].ymin,_.xmax=f.stk[f.level].xmax,_.ymax=f.stk[f.level].ymax,s.dispatchEvent(f,_),this.inPan=!1,t.refresh(),y=!0}else{if(o=f.stk[r].xmin,l=(a=f.stk[r].xmax)-o,"XPAN"===e){d=f.scrollbar_x;v={ps:o,pe:a};s.scrollbar(f,m,x.pl,x.pr,x.pt,x.pt+x.pthk,v,x.panxmin,x.panxmax,n,d),o=v.ps,a=v.pe,0!==m.action&&s.scroll(f,m,s.XW_UPDATE,void 0,d),!1}else"XCENTER"===e&&((o+=l*(f.xpos-(f.l+f.r)/2)/(f.r-f.l))!==f.stk[r].xmin&&(a=o+l),!1);var _;if(f.stk[r].xmin!==o||f.stk[r].xmax!==a)f.stk[r].xmin=o,f.stk[r].xmax=a,x.xdata||1!==f.level||(x.xmin=f.stk[1].xmin,x.xmax=f.stk[1].xmax),this.inPan=!0,(_=document.createEvent("Event")).initEvent("xpan",!0,!0),_.level=f.level,_.xmin=f.stk[f.level].xmin,_.ymin=f.stk[f.level].ymin,_.xmax=f.stk[f.level].xmax,_.ymax=f.stk[f.level].ymax,s.dispatchEvent(f,_),this.inPan=!1,t.refresh(),y=!0}return y}function I(t,e,i,n,r,o,a,l){var h=t._Mx;if(h.prompt)throw"Prompt already exists! Can only have one prompt at a time!";s.disableListeners(h),t.disable_listeners();try{s.prompt(h,e,i,function(t,e){return function(i){e(i),s.enableListeners(h),t.enable_listeners(),t.refresh(),void 0!==l&&l()}}(t,n),function(){t.refresh()},r,o,a,5e3)}catch(t){console.log("ERROR: Failed to set up prompt due to: "+t)}}function N(t){var e=t._Mx,i=t._Gx,n=e.canvas.getContext("2d");if(0!==i.sections||(i.isec=0),e.warpbox){var r=B(t,e.warpbox.xo,e.warpbox.yo),o=B(t,e.warpbox.xl,e.warpbox.yl);i.aretx=r.x,i.arety=r.y,i.dretx=o.x-r.x,i.drety=o.y-r.y}else i.aretx=i.retx,i.arety=i.rety,i.dretx=i.retx-i.xmrk,i.drety=i.rety-i.ymrk;if(5===i.cmode&&1===i.iabsc&&(i.iabsc=2),1===i.iabsc?(i.aretx=Math.round((i.aretx-i.xstart)/i.xdelta),i.index||(i.aretx+=1),i.dretx=Math.round(i.dretx/i.xdelta)):2===i.iabsc&&(0!==i.aretx&&(i.aretx=1/i.aretx),0!==i.arety&&(i.arety=1/i.arety),0!==i.dretx&&(i.dretx=1/i.dretx),0!==i.drety&&(i.drety=1/i.drety)),i.show_readout&&!e.widget){n.fillStyle=e.bg;var l=Math.floor(e.height-2.5*e.text_h);n.fillRect(e.text_w,l-1,49*e.text_w,l+1.5*e.text_h),l=Math.floor(e.height-.5*e.text_h);var h=Math.max(i.pr+e.text_w,e.width-2*e.text_w);if(n.fillStyle=e.bg,n.fillRect(h,l-e.text_h,e.text_w,e.text_h),!i.autohide_readout||t.mouseOnCanvas||i.panning){var c,u,d,f;0===i.iabsc&&4===i.ylab?(u=(a.sec2tspec(i.arety)+"                ").substring(0,16),f=(a.sec2tspec(i.drety,"delta")+"                ").substring(0,16)):(u=s.format_g(i.arety,16,9,!0),f=s.format_g(i.drety,16,9)),0===i.iabsc&&4===i.xlab?(c=(a.sec2tspec(i.aretx)+"                ").substring(0,16),d=(a.sec2tspec(i.dretx,"delta")+"                ").substring(0,16)):(c=s.format_g(i.aretx,16,9,!0),d=s.format_g(i.dretx,16,9));var p="y: "+u+" dy: "+f+" L="+e.level+" "+x[i.cmode-1],y="x: "+c+" dx: "+d+" "+m[i.iabsc];3===i.iabsc&&(p=0===i.dretx?p.substr(0,20)+"sl: Inf             "+p.substr(40,p.length):p.substr(0,20)+"sl: "+s.format_g(i.drety/i.dretx,16,9)+p.substr(40,p.length)),l=Math.floor(e.height-1.5*e.text_h),s.text(e,e.text_w,l,p),l=Math.floor(e.height-.5*e.text_h),s.text(e,e.text_w,l,y),s.LEGACY_RENDER&&h<e.width&&(i.cntrls>0?s.text(e,h,l,"C"):s.text(e,h,l," "));var v=0,_=0,b=0,g=0;if(i.lg_colorbar&&2===i.lyr[0].hcb.class){var w=e.b-e.t;v=e.r+35,_=e.t+1/8*w,b=5*e.text_w,g=.75*w,(n=e.active_canvas.getContext("2d")).strokeStyle="rgba(124, 123, 121, 0.8)",n.fillStyle=" rgba(124, 123, 121, 0.8)";var k=g,M=b-2,S=M/2,C=v+(b-M)/2,L=_-10;n.beginPath(),n.moveTo(C,L),n.lineTo(C+M,L),n.lineTo(C+.5*M,L-S),n.lineTo(C,L),n.stroke(),n.fill();var z=L+k+20;n.beginPath(),n.moveTo(C,z),n.lineTo(C+M,z),n.lineTo(C+.5*M,z+S),n.lineTo(C,z),n.stroke(),n.fill(),i.cbb_top_x1=C,i.cbb_top_y1=L,i.cbb_bot_x1=C,i.cbb_bot_y1=z,i.cbb_width=M,i.cbb_height=S}else v=49*e.text_w-3,_=e.height-2.5*e.text_h,b=e.text_w,g=2*e.text_h;s.colorbar(e,v,_,b,g),i.p_cuts&&1===i.lyr.length&&2===i.lyr[0].hcb.class&&(A(t),E(t))}}}function D(t,e,i,n,r,o){var s=t._Mx,l=t._Gx,h=!0===e.get_data;l.panxmin=1,l.panxmax=-1,l.panymin=1,l.panymax=-1;var c=i,u=n,d=void 0===c,f=void 0===u;if(0===l.lyr.length)l.panxmin=-1,l.panxmax=1,l.panymin=-1,l.panymax=1;else{void 0===r&&(l.xlab=l.lyr[0].xlab),void 0===o&&(l.ylab=l.lyr[0].ylab);for(var x=0;x<l.lyr.length;x++)if(!1!==l.lyr[x].display)if(c=d?l.lyr[x].xmin:i,u=f?l.lyr[x].xmax:n,l.xlab!==l.lyr[x].xlab&&(l.xlab=0),l.ylab!==l.lyr[x].ylab&&(l.ylab=0),h&&l.lyr[x].get_data(c,u),l.autox>0||l.autoy>0)for(;c<u;){l.lyr[x].get_data(c,u);var m=l.lyr[x].prep(c,u);l.all&&l.expand?0===l.lyr[x].size?c=u:l.index?c+=m:l.lyr[x].xdelta>=0?c+=l.lyr[x].size*l.lyr[x].xdelta:u+=l.lyr[x].size*l.lyr[x].xdelta:c=u}else l.lyr[x].prep(1,-1)}var p=l.panxmax-l.panxmin;if(p<0&&(l.panxmax=l.panxmin,l.panxmin=l.panxmax+p,p=-p),p<=1e-20&&(l.panxmin=l.panxmin-1,l.panxmax=l.panxmax+1),p=l.panxmax-l.panxmin,l.panxmin-=a.pad(p,l.panxpad),l.panxmax+=a.pad(p,l.panxpad),0!=(1&l.autox)&&d&&(s.stk[0].xmin=l.panxmin),0!=(2&l.autox)&&f&&(s.stk[0].xmax=l.panxmax,!l.all&&!l.xdata))for(x=0;x<l.lyr.length;x++){u=Math.min(l.lyr[x].xmax,s.stk[0].xmax);var y=Math.abs((u-l.lyr[x].xmin)/l.lyr[x].xdelta)-l.bufmax+1;y>0&&(s.stk[0].xmax=u-y*Math.abs(l.lyr[x].xdelta))}0!=(1&l.autoy)&&(s.stk[0].ymin=l.panymin),0!=(2&l.autoy)&&(s.stk[0].ymax=l.panymax);var v=l.panymax-l.panymin;l.panymin-=a.pad(v,l.panypad),l.panymax+=a.pad(v,l.panypad)}function B(t,e,i){var n=t._Gx,r=t._Mx,o=s.pixel_to_real(r,e,i);return n.index&&(o.x=o.x*n.xdelta),o}function H(t,e,i,n,r,o,a,s){var l=[a-i,s-n],h=[r-i,o-n],c=[t-i,e-n],u=l[0]*l[0]+l[1]*l[1],d=l[0]*h[0]+l[1]*h[1],f=l[0]*c[0]+l[1]*c[1],x=h[0]*h[0]+h[1]*h[1],m=h[0]*c[0]+h[1]*c[1],p=1/(u*x-d*d),y=(x*f-d*m)*p,v=(u*m-d*f)*p;return y>=0&&v>=0&&y+v<1}function U(t,e){var i=!1,n=t._Gx,r=t._Mx,o=0,s=0;if(void 0===e){if(o=r.xpos,s=r.ypos,!t.mouseOnCanvas)return!1}else o=e.x,s=e.y;var l=" ";if(!n.pan)return!1;var h=o>r.r,c=s<=n.pt+n.pthk+2,u=s>n.pt-2,d=s>=r.t&&s<=r.b,f=o>=n.pl&&o<=n.pr,x=n.show_readout||"bottom"===n.x_scrollbar_location;h&&d?(l="YPAN",n.lg_colorbar&&2===n.lyr[0].hcb.class?i=!!(o>r.r+100):(r.xpos=n.pyl+a.trunc(n.pthk/2),i=!0)):x&&f&&u?(l="XPAN",r.ypos=n.pt+a.trunc(n.pthk/2),i=!0):!x&&f&&c&&(l="XPAN",r.ypos=n.pt+a.trunc(n.pthk/2),i=!0);return{inPanRegion:i,command:l}}function F(t,e){var i,n,r;1&e.origin?(r=t.x-e.x,2&e.origin&&(r=e.w-r)):(r=t.y-e.y,e.origin<=2&&(r=e.h-r));var o=s.scroll_real2pix(e);return i=o.s1,n=o.sw,r>=i&&r<=i+n}function W(t,e,i){var n,r=t._Mx;"XPAN"===i?n=r.scrollbar_x:"YPAN"===i&&(n=r.scrollbar_y),n.action=e,n.step=.1*n.srange,n.page=9*n.step,n.scale=2,s.scroll(r,n,s.XW_COMMAND,void 0,n),j(t,n.smin,n.smin+n.srange,i.slice(0,1)),this.inPan=!0;var o=document.createEvent("Event");"XPAN"===i?o.initEvent("xpan",!0,!0):"YPAN"===i&&o.initEvent("ypan",!0,!0),o.level=r.level,o.xmin=r.stk[r.level].xmin,o.ymin=r.stk[r.level].ymin,o.xmax=r.stk[r.level].xmax,o.ymax=r.stk[r.level].ymax,s.dispatchEvent(r,o),this.inPan=!1}function j(t,e,i,n){var r=t._Mx,o=t._Gx,a=r.level;if("X"===n){var s=e,l=i;r.stk[a].xmin===s&&r.stk[a].xmax===l||(r.stk[a].xmin=s,r.stk[a].xmax=l,o.xdata||1!==r.level||(o.xmin=r.stk[1].xmin,o.xmax=r.stk[1].xmax),t.refresh())}else if("Y"===n){var h=e,c=i;h===r.stk[a].ymin&&c===r.stk[a].ymax||(r.stk[a].ymin=h,r.stk[a].ymax=c,o.cmode===o.basemode&&1===r.level&&(o.ymin=Math.min(o.ymin,h),o.ymax=Math.max(o.ymax,c)),t.refresh())}}c.Plot=f,t.exports=c}()},function(t,e,i){(function(e,i){var n;t.exports={},window.ArrayBuffer&&(ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(t,e){var i=new Uint8Array(this);void 0===e&&(e=i.length);for(var n=new ArrayBuffer(e-t),r=new Uint8Array(n),o=0;o<r.length;o++)r[o]=i[o+t];return n})),window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)},window.cancelAnimFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCanelAnimationFrame||function(t){window.clearTimeout(t)},t.exports.dashOn=function(t,e,i){return t.setLineDash?(t.setLineDash([e,i]),!0):void 0!==t.mozDash?(t.mozDash=[e,i],!0):!(!t.webkitLineDash||0!==t.webkitLineDash.length||(t.webkitLineDash=[e,i],0))},t.exports.dashOff=function(t){t.setLineDash?t.setLineDash([]):t.mozDash?t.mozDash=null:t.webkitLineDash&&(t.webkitLineDash=[])},t.exports.getKeyCode=function(t){return t=(t=window.event||t).charCode||t.keyCode},t.exports.setKeypressHandler=function(t){window.addEventListener?window.addEventListener("keypress",t,!1):window.attachEvent&&window.attachEvent("onkeypress",t)},String.prototype.endsWith||(String.prototype.endsWith=function(t,e){return(void 0===e||e>this.length)&&(e=this.length),this.substring(e-t.length,e)===t}),Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:Array.prototype.slice}),Int8Array.prototype.slice||Object.defineProperty(Int8Array.prototype,"slice",{value:Array.prototype.slice}),Int16Array.prototype.slice||Object.defineProperty(Int16Array.prototype,"slice",{value:Array.prototype.slice}),Int32Array.prototype.slice||Object.defineProperty(Int32Array.prototype,"slice",{value:Array.prototype.slice}),Float32Array.prototype.slice||Object.defineProperty(Float32Array.prototype,"slice",{value:Array.prototype.slice}),Float64Array.prototype.slice||Object.defineProperty(Float64Array.prototype,"slice",{value:Array.prototype.slice}),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),window.Float64Array||(window.Float64Array=window.Float64Array||function(t,e,i){if(!(t instanceof ArrayBuffer))throw"Invalid type";var n=new DataView(t),r=[],o=(t.byteLength-e)/8;r.length=void 0===i?o:Math.min(i,o);for(var a=0;a<r.length;a++)r[a]=n.getFloat64(8*a+e,!0);return r.subarray=function(t,e){return r.slice(t,e)},r}),function(){var t=function(){};if(window.console||(window.console={log:t,info:t,warn:t,debug:t,error:t}),new Int8Array([0,1,0]).subarray(1).subarray(1)[0]){var e=function(t,e){0===arguments.length?(t=0,e=this.length):(t<0&&(t+=this.length),t=Math.max(0,Math.min(this.length,t)),1===arguments.length?e=this.length:(e<0&&(e+=this.length),e=Math.max(t,Math.min(this.length,e))));var i=this.byteOffset+t*this.BYTES_PER_ELEMENT;return new this.constructor(this.buffer,i,e-t)};[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array].forEach(function(t){t.prototype.subarray=e})}}(),function(t,e){var i,n,r="";function o(e,o,a,s){e[i](r+o,"wheel"===n?a:function(e){!e&&(e=t.event);var i={originalEvent:e,target:e.target||e.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"===e.type?0:1,deltaX:0,delatZ:0,preventDefault:function(){e.preventDefault?e.preventDefault():e.returnValue=!1}};return"mousewheel"===n?(i.deltaY=-.025*e.wheelDelta,e.wheelDeltaX&&(i.deltaX=-.025*e.wheelDeltaX)):i.deltaY=e.detail,a(i)},s||!1)}t.addEventListener?i="addEventListener":(i="attachEvent",r="on"),n="onwheel"in e.createElement("div")?"wheel":void 0!==e.onmousewheel?"mousewheel":"DOMMouseScroll",t.addWheelListener=function(t,e,i){o(t,n,e,i),"DOMMouseScroll"===n&&o(t,"MozMousePixelScroll",e,i)}}(window,document),window.Proxy||(n=void 0!==e&&"[object process]"==={}.toString.call(e)||"undefined"!=typeof navigator&&"ReactNative"===navigator.product?i:self).Proxy||(n.Proxy=function(){function t(t){return!!t&&("object"==typeof t||"function"==typeof t)}var e=null,i=function(i,n){function r(){}if(!t(i)||!t(n))throw new TypeError("Cannot create proxy with a non-object as target or handler");e=function(){r=function(t){throw new TypeError("Cannot perform '"+t+"' on a proxy that has been revoked")}};var o=n;for(var a in n={get:null,set:null,apply:null,construct:null},o){if(!(a in n))throw new TypeError("Proxy polyfill does not support trap '"+a+"'");n[a]=o[a]}"function"==typeof o&&(n.apply=o.apply.bind(o));var s=this,l=!1,h=!1;"function"==typeof i?(s=function(){var t=this&&this.constructor===s,e=Array.prototype.slice.call(arguments);return r(t?"construct":"apply"),t&&n.construct?n.construct.call(this,i,e):!t&&n.apply?n.apply(i,this,e):t?(e.unshift(i),new(i.bind.apply(i,e))):i.apply(this,e)},l=!0):i instanceof Array&&(s=[],h=!0);var c=n.get?function(t){return r("get"),n.get(this,t,s)}:function(t){return r("get"),this[t]},u=n.set?function(t,e){r("set"),n.set(this,t,e,s)}:function(t,e){r("set"),this[t]=e},d={};if(Object.getOwnPropertyNames(i).forEach(function(t){if(!((l||h)&&t in s)){var e={enumerable:!!Object.getOwnPropertyDescriptor(i,t).enumerable,get:c.bind(i,t),set:u.bind(i,t)};Object.defineProperty(s,t,e),d[t]=!0}}),o=!0,Object.setPrototypeOf?Object.setPrototypeOf(s,Object.getPrototypeOf(i)):s.__proto__?s.__proto__=i.__proto__:o=!1,n.get||!o)for(var f in i)d[f]||Object.defineProperty(s,f,{get:c.bind(i,f)});return Object.seal(i),Object.seal(s),s};return i.revocable=function(t,n){return{proxy:new i(t,n),revoke:e}},i}(),n.Proxy.revocable=n.Proxy.revocable),t.exports.update=function t(e,i){for(var n in i){var r=i[n];"object"==typeof r?t(e[n],r):e[n]=r}return e}}).call(this,i(15),i(10))},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i.n(n),o=i(0),a=i.n(o),s=i(2);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),n.forEach(function(e){x(t,e,i[e])})}return t}function c(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function x(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var m=function(t){function e(t){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=u(this,d(e).call(this,t))).state={},i}var i,o,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(e,n["Component"]),i=e,(o=[{key:"getChildContext",value:function(){return{plot:this.plot}}},{key:"componentDidMount",value:function(){var t=this.props.options;this.plot=new s.Plot(this.element,t),this.setState({plot:this.plot})}},{key:"componentWillReceiveProps",value:function(t){var e=this.props,i=e.height,n=e.width,r=e.options,o=t.height,a=t.width,s=t.options;o===i&&a===n||this.plot.checkresize(),s!==r&&this.plot.change_settings(s)}},{key:"render",value:function(){var t=this,e=this.props,i=e.height,n=e.width,o=e.display,a=e.styles,s=e.children,l=this.plot,c=l?r.a.Children.map(s,function(t){return t?r.a.cloneElement(t,{plot:l}):null}):null;return r.a.createElement("div",{style:h({height:i,width:n,display:o},a),ref:function(e){return t.element=e}},c)}}])&&c(i.prototype,o),a&&c(i,a),e}();function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function v(t,e){return!e||"object"!==p(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function g(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}x(m,"childContextTypes",{plot:a.a.instanceOf(s.Plot)}),x(m,"propTypes",{children:a.a.node,height:a.a.number,width:a.a.number,display:a.a.string,styles:a.a.object,options:a.a.object}),x(m,"defaultProps",{height:300,width:300,display:"inline-block",options:{all:!0,expand:!0,autol:100,autohide_panbars:!0}});var w=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),v(this,_(e).apply(this,arguments))}var i,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}(e,n["Component"]),i=e,(r=[{key:"componentWillUnmount",value:function(){this.plot.remove_layer(this.layer)}},{key:"render",value:function(){return!1}},{key:"plot",get:function(){return this.context.plot}}])&&y(i.prototype,r),o&&y(i,o),e}();function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function S(t,e){return!e||"object"!==k(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function E(t){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function A(t,e){return(A=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}g(w,"contextTypes",{plot:a.a.instanceOf(s.Plot)}),g(w,"propTypes",{data:a.a.arrayOf(a.a.number),options:a.a.object,layerOptions:a.a.object});var C=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),S(this,E(e).apply(this,arguments))}var i,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&A(t,e)}(e,w),i=e,(n=[{key:"componentDidMount",value:function(){var t=this.props,e=t.data,i=t.options,n=t.layerOptions;this.layer=this.plot.overlay_array(e,i,n)}},{key:"componentWillReceiveProps",value:function(t){var e=this.props,i=e.data,n=e.options,r=e.layerOptions,o=t.data,a=t.options,s=t.layerOptions;return o!==i?this.plot.reload(this.layer,o,a):a!==n?this.plot.headermod(this.layer,a):s!==r&&this.plot.get_layer(this.layer).change_settings(s),!1}}])&&M(i.prototype,n),r&&M(i,r),e}();function L(t){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function z(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function G(t,e){return!e||"object"!==L(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function P(t){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function T(t,e){return(T=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var O=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),G(this,P(e).apply(this,arguments))}var i,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&T(t,e)}(e,w),i=e,(n=[{key:"componentDidMount",value:function(){var t=this.props,e=t.options,i=t.data;this.layer=this.plot.overlay_pipe(e),void 0!==i&&i.length>0&&this.plot.push(this.layer,i)}},{key:"componentWillReceiveProps",value:function(t){var e=this.props,i=e.data,n=e.options,r=e.layerOptions,o=t.data,a=t.options,s=t.layerOptions;return o&&o!==i?this.plot.push(this.layer,o,a):a!==n?this.plot.headermod(this.layer,a):s!==r&&this.plot.get_layer(this.layer).change_settings(s),!1}}])&&z(i.prototype,n),r&&z(i,r),e}();function R(t){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function I(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function N(t){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function D(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function B(t,e){return(B=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function H(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var U=function(t){function e(t){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=function(t,e){return!e||"object"!==R(e)&&"function"!=typeof e?D(t):e}(this,N(e).call(this,t))).onloadWrapper.bind(D(i)),i}var i,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&B(t,e)}(e,w),i=e,(n=[{key:"onloadWrapper",value:function(t){var e=this;return function(i,n){return e.layer=n,t(i,n)}}},{key:"componentDidMount",value:function(){var t=this.props,e=t.href,i=t.onload,n=t.options;this.plot.overlay_href(e,this.onloadWrapper(i),n)}},{key:"componentWillReceiveProps",value:function(t){var e=this.props,i=e.href,n=e.options,r=t.href,o=t.onload,a=t.options;return r!==i?(this.plot.deoverlay(this.layer),this.plot.overlay_href(r,this.onloadWrapper(o),a)):void 0!==this.layer&&a!==n&&this.plot.get_layer(this.layer).change_settings(a),!1}}])&&I(i.prototype,n),r&&I(i,r),e}();function F(t){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function W(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function j(t,e){return!e||"object"!==F(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function X(t){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Y(t,e){return(Y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}H(U,"propTypes",{href:a.a.string,onload:a.a.func,options:a.a.object}),H(U,"defaultProps",{href:"",onload:null});var V=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),j(this,X(e).apply(this,arguments))}var i,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Y(t,e)}(e,w),i=e,(n=[{key:"componentDidMount",value:function(){var t=this.props,e=t.data,i=t.layerOptions;this.layer=this.plot.overlay_bluefile(e,i)}},{key:"componentWillReceiveProps",value:function(t){var e=this.props,i=e.data,n=e.options,r=e.layerOptions,o=t.data,a=t.options,s=t.layerOptions;return o!==i?this.plot.reload(this.layer,o,a):a!==n?this.plot.headermod(this.layer,a):s!==r&&this.plot.get_layer(this.layer).change_settings(s),!1}}])&&W(i.prototype,n),r&&W(i,r),e}();function q(t){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function K(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Z(t,e){return!e||"object"!==q(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $(t){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function J(t,e){return(J=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Q(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var tt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Z(this,$(e).apply(this,arguments))}var i,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&J(t,e)}(e,w),i=e,(n=[{key:"componentDidMount",value:function(){var t=this.props,e=t.wsurl,i=t.overrides,n=t.options;this.layer=this.plot.overlay_websocket(e,i,n)}},{key:"componentWillReceiveProps",value:function(t){var e=this.props,i=e.wsurl,n=e.options,r=t.wsurl,o=t.overrides,a=t.options;return r!==i?(this.plot.deoverlay(this.layer),this.layer=this.plot.overlay_websocket(r,o,a)):void 0!==this.layer&&a!==n&&this.plot.get_layer(this.layer).change_settings(a),!1}}])&&K(i.prototype,n),r&&K(i,r),e}();function et(t){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function it(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function nt(t,e){return!e||"object"!==et(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rt(t){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ot(t,e){return(ot=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function at(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}Q(tt,"propTypes",{wsurl:a.a.string,overrides:a.a.object,options:a.a.object}),Q(tt,"defaultProps",{wsurl:""});var st=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),nt(this,rt(e).apply(this,arguments))}var i,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ot(t,e)}(e,n["Component"]),i=e,(r=[{key:"componentWillUnmount",value:function(){this.plot.remove_plugin(this.plugin)}},{key:"render",value:function(){return!1}},{key:"plot",get:function(){return this.context.plot}}])&&it(i.prototype,r),o&&it(i,o),e}();at(st,"contextTypes",{plot:a.a.instanceOf(s.Plot)}),at(st,"propTypes",{pluginOptions:a.a.object}),i.d(e,"SigPlot",function(){return m}),i.d(e,"ArrayLayer",function(){return C}),i.d(e,"PipeLayer",function(){return O}),i.d(e,"HrefLayer",function(){return U}),i.d(e,"BlueLayer",function(){return V}),i.d(e,"WebsocketLayer",function(){return tt}),i.d(e,"Layer",function(){return w}),i.d(e,"Plugin",function(){return st})},function(t,e,i){
/**
 * @license
 * File: m.js
 * Copyright (c) 2012-2017, LGS Innovations Inc., All rights reserved.
 *
 * This file is part of SigPlot.
 *
 * Licensed to the LGS Innovations (LGS) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  LGS licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */
!function(){"use strict";var e=i(7),n=i(17);function r(){}r.log=n;!!navigator.userAgent.match(/(iPad|iPhone|iPod)/i)||"undefined"==typeof Float64Array||Float64Array.emulated||!Float64Array.BYTES_PER_ELEMENT?r.PointArray=Float32Array:r.PointArray=Float64Array;var o={0:["None","U",!0,!0],1:["Time","sec",!0,!0],2:["Delay","sec",!0,!1],3:["Frequency","Hz",!0,!0],4:["Time code format","",!0,!1],5:["Distance","m",!0,!0],6:["Speed","m/s",!0,!0],7:["Acceleration","m/sec^2",!0,!0],8:["Jerk","m/sec^3",!0,!0],9:["Doppler","Hz",!0,!1],10:["Doppler rate","Hz/sec",!0,!0],11:["Energy","J",!0,!0],12:["Power","W",!0,!0],13:["Mass","g",!0,!0],14:["Volume","l",!0,!0],15:["Angular power density","W/ster",!0,!0],16:["Integrated power density","W/rad",!0,!0],17:["Spatial power density","W/m^2",!0,!0],18:["Integrated power density","W/m",!1,!0],19:["Spectral power density","W/MHz",!0,!0],20:["Amplitude","U",!0,!1],21:["Real","U",!0,!1],22:["Imaginary","U",!0,!1],23:["Phase","rad",!0,!0],24:["Phase","deg",!1,!0],25:["Phase","cycles",!1,!0],26:["10*Log","U",!0,!1],27:["20*Log","U",!0,!1],28:["Magnitude","U",!0,!1],29:["Unknown","U",!0,!1],30:["Unknown","U",!1,!1],31:["General dimensionless","",!0,!0],32:["Counts","",!0,!1],33:["Angle","rad",!0,!1],34:["Angle","deg",!1,!1],35:["Relative power","dB",!0,!0],36:["Relative power","dBm",!1,!0],37:["Relative power","dBW",!1,!0],38:["Solid angle","ster",!0,!0],40:["Distance","ft",!1,!0],41:["Distance","nmi",!1,!0],42:["Speed","ft/sec",!1,!0],43:["Speed","nmi/sec",!1,!0],44:["Speed","knots=nmi/hr",!1,!0],45:["Acceleration","ft/sec^2",!1,!0],46:["Acceleration","nmi/sec^2",!1,!0],47:["Acceleration","knots/sec",!1,!0],48:["Acceleration","G",!1,!0],49:["Jerk","G/sec",!1,!0],50:["Rotation","rps",!0,!1],51:["Rotation","rpm",!1,!1],52:["Angular velocity","rad/sec",!0,!0],53:["Angular velocity","deg/sec",!1,!0],54:["Angular acceleration","rad/sec^2",!0,!0],55:["Angular acceleration","deg/sec^2",!1,!0],60:["Latitude","deg",!0,!1],61:["Longitude","deg",!0,!1],62:["Altitude","ft",!0,!1],63:["Altitude","m",!1,!1]};r.UNITS=o,r.Mc={colormap:[{name:"Greyscale",colors:[{pos:0,red:0,green:0,blue:0},{pos:60,red:50,green:50,blue:50},{pos:100,red:100,green:100,blue:100},{pos:100,red:0,green:0,blue:0},{pos:100,red:0,green:0,blue:0},{pos:100,red:0,green:0,blue:0},{pos:100,red:0,green:0,blue:0}]},{name:"Ramp Colormap",colors:[{pos:0,red:0,green:0,blue:15},{pos:10,red:0,green:0,blue:50},{pos:31,red:0,green:65,blue:75},{pos:50,red:0,green:85,blue:0},{pos:70,red:75,green:80,blue:0},{pos:83,red:100,green:60,blue:0},{pos:100,red:100,green:0,blue:0}]},{name:"Color Wheel",colors:[{pos:0,red:100,green:100,blue:0},{pos:20,red:0,green:80,blue:40},{pos:30,red:0,green:100,blue:100},{pos:50,red:10,green:10,blue:0},{pos:65,red:100,green:0,blue:0},{pos:88,red:100,green:40,blue:0},{pos:100,red:100,green:100,blue:0}]},{name:"Spectrum",colors:[{pos:0,red:0,green:75,blue:0},{pos:22,red:0,green:90,blue:90},{pos:37,red:0,green:0,blue:85},{pos:49,red:90,green:0,blue:85},{pos:68,red:90,green:0,blue:0},{pos:80,red:90,green:90,blue:0},{pos:100,red:95,green:95,blue:95}]},{name:"calewhite",colors:[{pos:0,red:100,green:100,blue:100},{pos:16.666,red:0,green:0,blue:100},{pos:33.333,red:0,green:100,blue:100},{pos:50,red:0,green:100,blue:0},{pos:66.666,red:100,green:100,blue:0},{pos:83.333,red:100,green:0,blue:0},{pos:100,red:100,green:0,blue:100}]},{name:"HotDesat",colors:[{pos:0,red:27.84,green:27.84,blue:85.88},{pos:14.2857,red:0,green:0,blue:35.69},{pos:28.571,red:0,green:100,blue:100},{pos:42.857,red:0,green:49.8,blue:0},{pos:57.14286,red:100,green:100,blue:0},{pos:71.42857,red:100,green:37.65,blue:0},{pos:85.7143,red:41.96,green:0,blue:0},{pos:100,red:87.84,green:29.8,blue:29.8}]},{name:"Sunset",colors:[{pos:0,red:10,green:0,blue:23},{pos:18,red:34,green:0,blue:60},{pos:36,red:58,green:20,blue:47},{pos:55,red:74,green:20,blue:28},{pos:72,red:90,green:43,blue:0},{pos:87,red:100,green:72,blue:0},{pos:100,red:100,green:100,blue:76}]},{name:"Hot",colors:["#000000","#7f0000","#b30000","#d7301f","#ef6548","#fc8d59","#fdbb84","#fdd49e","#fee8c8","#fff7ec","#ffffff"]},{name:"Cold",colors:["#000000","#023858","#045a8d","#0570b0","#3690c0","#74a9cf","#a6bddb","#d0d1e6","#ece7f2","#fff7fb","#ffffff"]},{name:"Purple",colors:["#230022","#4d004b","#810f7c","#88419d","#8c6bb1","#8c96c6","#9ebcda","#bfd3e6","#e0ecf4","#f7fcfd"]},{name:"BuGn",colors:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"]},{name:"YlOrBr",colors:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"]},{name:"YlGnBu",colors:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"]},{name:"YlOrRd",colors:["#000000","#662506","#993404","#cc4c02","#ec7014","#fe9929","#fec44f","#fee391","#fff7bc","#ffffe5","#ffffff"]},{name:"GreyNRed",colors:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"].reverse()}]},r.PIPESIZE=1048576,r.unit_lookup=function(t){for(var e=0;e<64;e++){var i,n=(i=void 0===o[e]?o[0]:o[e])[0],r=i[1],a=i[0]+" "+i[1],s=i[0]+"_"+i[1];if(t===n){if(i[2])return e}else if(t===r){if(i[3])return e}else if(t===a||t===s)return e}return t},r.initialize=function(t,i){var n=new e.BlueHeader(null);for(var o in n.version="BLUE",n.size=0,n.type=1e3,n.format="SF",n.timecode=0,n.xstart=0,n.xdelta=1,n.xunits=0,n.subsize=1,n.ystart=0,n.ydelta=1,n.yunits=0,n.enabled_streaming_pcut=!1,i||(i={}),i)n[o]=i[o];if(n.xunits=r.unit_lookup(n.xunits),n.yunits=r.unit_lookup(n.yunits),n.subsize>1?n.type=2e3:Array.isArray(t)&&Array.isArray(t[0])&&(n.type=2e3,n.subsize=t[0].length,n.size=t.length),n.class=n.type/1e3,2===n.class&&void 0===n.subsize)throw"subsize must be provided with type 2000 files";if(i.pipe){n.pipe=!0,n.in_byte=0,n.out_byte=0;var a=i.pipesize||r.PIPESIZE;n.buf=new ArrayBuffer(a),n.setData(n.buf),n.data_free=n.dview.length}else n.setData(t);return n},r.force1000=function(t){2===t.class&&(t.size&&!t.pipe?t.size=t.subsize*t.size:t.size=0,t.bpe=t.bpe/t.subsize,t.ape=1)},r.grab=function(t,e,i,n){if(!t.dview)return 0;"C"===t.format[0]&&(i*=2),n=t.ape*n;var r=Math.min(e.length,t.dview.length-i);if(void 0===e.set)for(var o=0;o<r;o++)e[o]=t.dview[i+o];else e.set(t.dview.subarray(i,i+r));return"C"===t.format[0]&&(r/=2),r},r.filad=function(t,e,i){if(t.data_free<e.length)throw"Pipe full";var n=t.in_byte/t.dview.BYTES_PER_ELEMENT,r=n+e.length;if(r>t.dview.length){var o=t.dview.length-n,a=e.length-o;e.subarray?(t.dview.set(e.subarray(0,o),n),t.dview.set(e.subarray(o,e.length),0)):(t.dview.set(e.slice(0,o),n),t.dview.set(e.slice(o,e.length),0)),t.in_byte=a*t.dview.BYTES_PER_ELEMENT}else t.dview.set(e,n),t.in_byte=r*t.dview.BYTES_PER_ELEMENT%t.buf.byteLength;if(t.data_free-=e.length,t.onwritelisteners)for(var s=0;s<t.onwritelisteners.length;s++)i?t.onwritelisteners[s]():window.setTimeout(t.onwritelisteners[s],0)},r.pavail=function(t){return t.dview.length-t.data_free},r.grabx=function(t,e,i,n){var r=t.dview.length-t.data_free;if(void 0===n&&(n=0),i){if(i>e.length-n)throw"m.grabx : nget larger then available buffer space"}else i=Math.min(e.length-n,r);if(i<0)throw"m.grabx : nget cannot be negative";if(i>r)return 0;var o=t.out_byte/t.dview.BYTES_PER_ELEMENT,a=o+i;if(a>=t.dview.length){var s=t.dview.length-o;a-=t.dview.length,e.set(t.dview.subarray(o,t.dview.length),n),e.set(t.dview.subarray(0,a),n+s)}else e.set(t.dview.subarray(o,a),n);return t.out_byte=a*t.dview.BYTES_PER_ELEMENT%t.buf.byteLength,t.data_free+=i,i},r.addPipeWriteListener=function(t,e){t.onwritelisteners||(t.onwritelisteners=[]),-1===t.onwritelisteners.indexOf(e)&&t.onwritelisteners.push(e)},r.units_name=function(t){var e=o[t];return e[0]+" ("+e[1]+")"},r.trim_name=function(t){var e=t.indexOf("]");-1===e&&(e=t.indexOf("/")),-1===e&&(e=t.indexOf(":"));var i=t.substr(e+1,t.length).indexOf(".");return i<0&&(i=t.length-e),t.substr(e+1,e+i+1)},r.label=function(t,e){var i=["Unknown","U"];"string"==typeof t?i=[t,null]:Array.isArray(t)?i=t:void 0===(i=o[t])&&(i=["Unknown","U"]);var n=r.mult_prefix(e);return i[1]?i[0]+" ("+n+i[1]+")":i[0]},r.bound=function(t,e,i){return t<e?e:t>i?i:t},r.touch_distance=function(t,e){var i=t.pageX-e.pageX,n=t.pageY-e.pageY;return Math.sqrt(i*i+n*n)},r.mult_prefix=function(t){var e="?";return 1==t?e="":10==t?e="da":.1==t?e="d":100==t?e="h":.01==t?e="c":1e3==t?e="K":.001==t?e="m":1e6==t?e="M":1e-6==t?e="u":1e9==t?e="G":1e-9==t?e="n":1e12==t?e="T":1e-12==t&&(e="p"),e};var a={MV:"F",MS:"F",nbpt:4,view:void 0};function s(t){return(t<10?"0":"")+t}r.vstype=function(t){a.MS=t,a.MV=t,"D"===a.MV?a.nbpt=8:"L"===a.MV||"F"===a.MV?a.nbpt=4:"I"===a.MV?a.nbpt=2:"B"===a.MV?a.nbpt=1:alert("Unsupported vector type")},r.log10=function(t,e){return void 0===e&&(e=1e-20),Math.log(Math.max(t,e))/Math.log(10)},r.vlog10=function(t,e,i){void 0===e&&(e=1e-20),void 0===i&&(i=t);for(var n=0;n<t.length&&!(i.length<=n);n++)i[n]=Math.log(Math.max(t[n],e))/Math.log(10)},r.vlogscale=function(t,e,i,n){void 0===e&&(e=1e-20),void 0===i&&(i=1),void 0===n&&(n=t);for(var r=0;r<t.length&&!(n.length<=r);r++)n[r]=Math.log(Math.abs(Math.max(t[r],e)))/Math.log(10),n[r]=n[r]*i},r.cvmag2logscale=function(t,e,i,n){void 0===e&&(e=1e-20),void 0===i&&(i=1),void 0===n&&(n=t);for(var r=0,o=0;o<n.length&&!((r=2*o+1)>=t.length);o++)n[o]=t[r-1]*t[r-1]+t[r]*t[r],n[o]=Math.log(Math.abs(Math.max(n[o],e)))/Math.log(10),n[o]=n[o]*i},r.vsmul=function(t,e,i,n){void 0===i&&(i=t),void 0===n&&(n=i.length),n=Math.min(i.length,n),n=Math.min(t.length,n);for(var r=0;r<n&&!(i.length<=r);r++)i[r]=t[r]*e},r.vmxmn=function(t,e){var i=t[0],n=t[0],r=0,o=0;e=Math.min(e,t.length);for(var a=0;a<e;a++)t[a]>i&&(i=t[a],r=a),t[a]<n&&(n=t[a],o=a);return{smax:i,smin:n,imax:r,imin:o}},r.vmov=function(t,e,i,n,r){void 0===r&&(r=t.length),r=Math.min(t.length,r);for(var o=0;o<r;o++){var a=o*e,s=o*n;if(a>=t.length)break;if(s>=i.length)break;i[s]=t[a]}},r.vfill=function(t,e,i){void 0===i&&(i=t.length),i=Math.min(t.length,i);for(var n=0;n<i;n++)t[n]=e},r.vabs=function(t,e,i){void 0===i&&(i=t.length),void 0===e&&(e=t);for(var n=0;n<i;n++)e[n]=Math.abs(t[n])},r.cvmag=function(t,e,i){void 0===i&&(i=e.length),i=Math.min(e.length,i);for(var n=0;n<i;n++){var r=2*n+1;if(r>=t.length)break;e[n]=Math.sqrt(t[r-1]*t[r-1]+t[r]*t[r])}},r.cvmag2=function(t,e,i){void 0===i&&(i=e.length),i=Math.min(e.length,i);for(var n=0,r=0;r<i&&!((n=2*r+1)>=t.length);r++)e[r]=t[n-1]*t[n-1]+t[n]*t[n]},r.cvpha=function(t,e,i){void 0===i&&(i=e.length),i=Math.min(e.length,i);for(var n=0,r=0,o=0,a=0;a<i&&!((n=2*a+1)>=t.length);a++)r=t[n-1],o=t[n],0===r&&0===o&&(r=1),e[a]=Math.atan2(o,r)},r.cvphad=function(t,e,i){void 0===i&&(i=e.length),i=Math.min(e.length,i);for(var n=0,r=0,o=0,a=0;a<i&&!((n=2*a+1)>=t.length);a++)r=t[n-1],o=t[n],0===r&&0===o&&(r=1),e[a]=Math.atan2(o,r)*(180/Math.PI)},r.trunc=function(t){return t-t%1},r.sign=function(t,e){return e>=0?Math.abs(t):-Math.abs(t)},r.sec2tod=function(t,e){var i="",n=Date.UTC(1950,0,1),r=(new Date(n),Date.UTC(1949,11,31)),o=(new Date(r),new Date),a=new Date(o.getFullYear(),o.getMonth(),o.getDate(),0,0,0,0);if(t>=0)if(t<86400){var l=a.getTime()+1e3*t;i=s((o=new Date(l)).getHours())+":"+s(o.getMinutes())+":"+s(o.getSeconds())}else if(86400===t)i="24:00:00";else if(t<31536e3){c=[(c=t/86400)>0?Math.floor(c):Math.ceil(c)];o=new Date(1e3*t+a.getTime());i=c.toString()+"::"+s(o.getHours())+":"+s(o.getMinutes())+":"+s(o.getSeconds())}else{var h=Math.floor(1e3*t)+n;i=(o=new Date(h)).getUTCFullYear()+":"+s(o.getUTCMonth()+1)+":"+s(o.getUTCDate())+"::"+s(o.getUTCHours())+":"+s(o.getUTCMinutes())+":"+s(o.getUTCSeconds())}else if(t>-31536e3){var c;c=(c=t/86400)<=0?Math.ceil(c):Math.floor(c);o=new Date(Math.abs(1e3*t)+a.getTime());i=(c=0===c?"-0":c.toString())+"::"+s(o.getHours())+":"+s(o.getMinutes())+":"+s(o.getSeconds())}else{h=Math.floor(1e3*t)+n;i=(o=new Date(h)).getUTCFullYear()+":"+s(o.getUTCMonth()+1)+":"+s(o.getUTCDate())+"::"+s(o.getUTCHours())+":"+s(o.getUTCMinutes())+":"+s(o.getUTCSeconds())}if(i+=0===t%1?".000000":"."+Math.abs(t%1).toPrecision(6).slice(2,8),e){var u=i.indexOf("."),d=-1;-1!==u&&(d=i.substr(u,i.length).indexOf("0")),-1!==d&&(i=i.substr(0,u+d))}return i};r.sec2tspec=function(t,e,i){return e=e||"",t>=0&&t<=86400?r.sec2tod(t,i):(t%=86400,"delta"!==e&&t<=0?r.sec2tod(t+86400,i):"delta"===e&&t<=0?"-"+r.sec2tod(-1*t,i):r.sec2tod(t,i))},r.sec2tod_j1970=function(t){var e,i="";if(t>=0&&t<86400)i=s((e=new Date(1e3*t)).getHours())+":"+s(e.getMinutes())+":"+s(e.getSeconds());else if(t<0&&t>-31536e3){var n=t/86400*-1;e=new Date(1e3*t),i=n.toString()+"::"+s(e.getHours())+":"+s(e.getMinutes())+":"+s(e.getSeconds())}else i=(e=new Date(1e3*(t-631152e3))).getFullYear()+":"+s(e.getMonth())+":"+s(e.getDate())+"::"+s(e.getHours())+":"+s(e.getMinutes())+":"+s(e.getSeconds());return t%1!=0&&(i+="."+(t%1).toPrecision(6).slice(2,8)),i},r.j1970toj1950=function(t){return void 0!==t.getTime?t.getTime()/1e3+631152e3:t+631152e3},r.j1950toj1970=function(t){return t-631152e3},r.throttle=function(t,e){var i=(new Date).getTime();return function(){var n=(new Date).getTime();n-i>=t&&(i=n,e.apply(null,arguments))}},r.pad=function(t,e){return e?("string"==typeof e&&(e=e.endsWith("%")?t*(parseFloat(e)/100):parseFloat(e)),e):0},t.exports=r}()},function(t,e,i){
/**
 * @license
 * File: mx.js
 * Copyright (c) 2012-2017, LGS Innovations Inc., All rights reserved.
 *
 * This file is part of SigPlot.
 *
 * Licensed to the LGS Innovations (LGS) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  LGS licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */
!function(){var e=i(8),n=i(18),r=i(3),o=i(19),a=i(5);function s(){}function l(){this.xo=0,this.yo=0,this.xl=0,this.yl=0,this.xmin=0,this.xmax=0,this.ymin=0,this.ymax=0,this.func=void 0,this.mode=void 0}function h(t){this.root=t,this.parent=document.createElement("div"),this.parent.style.position="relative",this.parent.width=t.clientWidth,this.parent.height=t.clientHeight,t.appendChild(this.parent),this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.top="0px",this.canvas.style.left="0px",this.canvas.width=t.clientWidth,this.canvas.height=t.clientHeight,this.parent.appendChild(this.canvas),this.active_canvas=this.canvas,this.wid_canvas=document.createElement("canvas"),this.wid_canvas.style.position="absolute",this.wid_canvas.style.top="0px",this.wid_canvas.style.left="0px",this.wid_canvas.style.zIndex=1,this.wid_canvas.width=t.clientWidth,this.wid_canvas.height=t.clientHeight,this.parent.appendChild(this.wid_canvas),this.font=void 0,this.font_family="Courier New, monospace",this.font_width=8,this.font_scaled=!1,this.text_w=0,this.text_h=0,this.level=0,this.width=this.parent.width,this.height=this.parent.height,this.xpos=0,this.ypos=0,this.xmrk=0,this.ymrk=0,this.origin=1,this.stk=[new s.STKSTRUCT],s.setbgfg(this,"black","white"),this.event_cb=void 0,this.warpbox=void 0,this.rmode=!1,this.linewidth=1,this.style=void 0,this.xi=!1,this.button_release=0,this.button_press=0,this.state_mask=0,this.l=0,this.r=this.width,this.t=0,this.b=this.height,this.scrollbar_x=new s.SCROLLBAR,this.scrollbar_y=new s.SCROLLBAR,this.prompt=void 0,this.pixel=void 0,this._renderCanvas=document.createElement("canvas"),this._syncRender=!1}function c(t,e,i){var n=!1,r=!1;return t>=e&&(n=!0),t<=i&&(r=!0),!0===n&&!0===r}function u(t,e,i,n,r,o){return(i-t)*(o-e)-(r-t)*(n-e)}function d(t,e,i,n,r,o,a){return r<=i?a>i&&u(e,i,n,r,o,a)>0&&(t+=1):a<=i&&u(e,i,n,r,o,a)<0&&(t-=1),t}s.DomMenu=i(20),s.XW_INIT=-3,s.XW_DRAW=1,s.XW_EVENT=2,s.XW_UPDATE=3,s.XW_COMMAND=5,s.SB_EXPAND=1,s.SB_SHRINK=2,s.SB_FULL=3,s.SB_STEPINC=4,s.SB_STEPDEC=5,s.SB_PAGEINC=6,s.SB_PAGEDEC=7,s.SB_DRAG=8,s.SB_WHEELUP=9,s.SB_WHEELDOWN=10,s.L_ArrowLeft=1001,s.L_ArrowRight=1002,s.L_ArrowUp=1003,s.L_ArrowDown=1004,s.L_dashed=801,s.GBorder=3,s.L_RModeOff=900,s.L_RModeOn=901,s.L_PixelSymbol=1,s.L_CircleSymbol=2,s.L_SquareSymbol=3,s.L_PlusSymbol=4,s.L_XSymbol=5,s.L_TriangleSymbol=6,s.L_ITriangleSymbol=7,s.L_HLineSymbol=8,s.L_VLineSymbol=9,s.LEGACY_RENDER=!1,s.STKSTRUCT=function(){this.xmin=0,this.xmax=0,this.ymin=0,this.ymax=0,this.xscl=0,this.yscl=0,this.x1=0,this.y1=0,this.x2=0,this.y2=0},s.SCROLLBAR=function(){this.flag=null,this.action=null,this.smin=null,this.srange=null,this.tmin=null,this.trange=null,this.step=null,this.page=null,this.scale=null,this.dragoutline=null,this.initial_pause=null,this.repeat_pause=null,this.x=null,this.y=null,this.w=null,this.h=null,this.s1=null,this.sw=null,this.swmin=null,this.soff=null,this.a1=null,this.a2=null,this.arrow=null,this.mxevent=null,this.origin=null,this.repeat_count=null},s.open=function(t){var e=new h(t);return e.wid_canvas.oncontextmenu=function(t){return t.preventDefault(),!1},this._ctx=e.active_canvas.getContext("2d"),e.onmousemove=function(t){return function(e){var i=e.target.getBoundingClientRect();t.x=e.x||e.clientX,t.y=e.y||e.clientY,t.xpos=void 0===e.offsetX?e.pageX-i.left-window.scrollX:e.offsetX,t.ypos=void 0===e.offsetX?e.pageY-i.top-window.scrollY:e.offsetY,t.warpbox&&((e.ctrlKey||e.metaKey)&&void 0!==t.warpbox.alt_style?t.warpbox.style=t.warpbox.alt_style:t.warpbox.style=t.warpbox.def_style,s.redraw_warpbox(t)),s.widget_callback(t,e)}}(e),e.onmouseup=function(t){return function(e){if(t.warpbox){s.onWidgetLayer(t,function(){s.erase_window(t)});var i=t.warpbox;if(t.warpbox=void 0,(1===e.which||3===e.which)&&i.func){var n=i.xo,r=i.yo,o=i.xl,a=i.yl;"vertical"===i.mode?(n=t.l,o=t.r):"horizontal"===i.mode&&(r=t.t,a=t.b),i.func(e,n,r,o,a,i.style.return_value,i.mode)}}s.widget_callback(t,e)}}(e),e.onmousedown=function(t){return function(e){return e.preventDefault(),s.widget_callback(t,e),!1}}(e),e.onkeydown=function(t){return function(e){if(t.warpbox){var i=r.getKeyCode(e);17!==i&&224!==i&&91!==i&&93!==i||t.warpbox.style===t.warpbox.alt_style||(t.warpbox.style=t.warpbox.alt_style,s.redraw_warpbox(t))}s.widget_callback(t,e)}}(e),e.onkeyup=function(t){return function(e){if(t.warpbox){var i=r.getKeyCode(e);17!==i&&224!==i&&91!==i&&93!==i||t.warpbox.style===t.warpbox.def_style||(t.warpbox.style=t.warpbox.def_style,s.redraw_warpbox(t))}}}(e),e.ontouchend=function(t){return function(e){t.onmouseup({which:1})}}(e),e.ontouchmove=function(t){return function(e){var i=t.canvas,n=0,r=0;if(void 0!==i.offsetParent)do{n+=i.offsetLeft,r+=i.offsetTop}while(i=i.offsetParent);t.xpos=e.targetTouches[0].pageX-n,t.ypos=e.targetTouches[0].pageY-r,s.redraw_warpbox(t)}}(e),s.enableListeners(e),e},s.enableListeners=function(t){s.addEventListener(t,"mousemove",t.onmousemove,!1),window.addEventListener("mouseup",t.onmouseup,!1),s.addEventListener(t,"mousedown",t.onmousedown,!1),window.addEventListener("keydown",t.onkeydown,!1),window.addEventListener("keyup",t.onkeyup,!1)},s.disableListeners=function(t){s.removeEventListener(t,"mousemove",t.onmousemove,!1),window.removeEventListener("mouseup",t.onmouseup,!1),s.removeEventListener(t,"mousedown",t.onmousedown,!1),window.removeEventListener("keydown",t.onkeydown,!1),window.removeEventListener("keyup",t.onkeyup,!1)},s.addEventListener=function(t,e,i,n){return t.wid_canvas.addEventListener(e,i,n)},s.removeEventListener=function(t,e,i,n){return t.wid_canvas.removeEventListener(e,i,n)},s.dispatchEvent=function(t,e){return t.wid_canvas.dispatchEvent(e)},s.onWidgetLayer=function(t,e){s.onCanvas(t,t.wid_canvas,e)},s.onCanvas=function(t,e,i){var n=t.active_canvas;t.active_canvas=e;try{if(i)return i()}finally{t.active_canvas=n}},s.withWidgetLayer=function(t,e){return function(){s.onWidgetLayer(t,e)}},s.render=function(t,e){if(e){var i=t.active_canvas;!1===t._syncRender?i._animationFrameHandle||(i._animationFrameHandle=requestAnimFrame(function(){i._animationFrameHandle=void 0,e()})):e()}},s.fullscreen=function(t,e){void 0===e&&(e=!t.fullscreen),e?(t.fullscreen={position:t.root.style.position,height:t.root.style.height,width:t.root.style.width,left:t.root.style.left,top:t.root.style.top,zIndex:t.root.style.zIndex},t.root.style.position="fixed",t.root.style.height="100%",t.root.style.width="100%",t.root.style.left="0px",t.root.style.top="0px",t.root.style.zIndex=16777271):(t.root.style.position=t.fullscreen.position,t.root.style.height=t.fullscreen.height,t.root.style.width=t.fullscreen.width,t.root.style.left=t.fullscreen.left,t.root.style.top=t.fullscreen.top,t.root.style.zIndex=t.fullscreen.zIndex,t.fullscreen=void 0),s.checkresize(t)},s.checkresize=function(t){var e=t.canvas;return(e.height!==t.root.clientHeight||e.width!==t.root.clientWidth)&&(t.height=t.root.clientHeight,t.width=t.root.clientWidth,t.canvas.height=t.height,t.canvas.width=t.width,t.wid_canvas.height=t.height,t.wid_canvas.width=t.width,!0)},s.invertbgfg=function(t){s.setbgfg(t,t.fg,t.bg,!t.xi)},s.mixcolor=function(t,i,n){var r=e(t).toRgb(),o=e(i).toRgb(),a=1-n;return o.r=r.r*a+o.r*n,o.g=r.g*a+o.g*n,o.b=r.b*a+o.b*n,e(o).toHexString(!0)},s.linear_gradient=function(t,e,i,n,r,o){for(var a=t.active_canvas.getContext("2d"),s=1/o.length,l=a.createLinearGradient(e,i,n,r),h=0;h<o.length-1;h++)l.addColorStop(s*h,o[h]);return l.addColorStop(1,o[o.length-1]),l},s.setbgfg=function(t,i,n,r){if(t.bg=e(i).toHexString(),t.fg=e(n).toHexString(),t.xi=e(r).toHexString(),e.equals(t.bg,"black")&&e.equals(t.fg,"white"))t.xwfg=t.fg,t.xwbg="rgb(35%,35%,30%)",t.xwts="rgb(60%,60%,55%)",t.xwbs="rgb(25%,25%,20%)",t.xwms=s.mixcolor(t.xwts,t.xwbs,.5),t.xwlo="rgb(15%,15%,10%)",t.hi=t.xwts;else if(e.equals(t.bg,"white")&&e.equals(t.fg,"black"))t.xwfg=t.fg,t.xwbg="rgb(60%,60%,55%)",t.xwts="rgb(80%,80%,75%)",t.xwbs="rgb(40%,40%,35%)",t.xwms=s.mixcolor(t.xwts,t.xwbs,.5),t.xwlo="rgb(70%,70%,65%)",t.hi=t.xwbs;else{var o=e(t.bg).toRgb();Math.sqrt(o.r*o.r*.299+o.g*o.g*.587+o.b*o.b*.114)>127.5?(t.xwfg="black",t.xwbg="rgb(60%,60%,55%)",t.xwts="rgb(80%,80%,75%)",t.xwbs="rgb(40%,40%,35%)",t.xwms=s.mixcolor(t.xwts,t.xwbs,.5),t.xwlo="rgb(70%,70%,65%)",t.hi=t.xwts):(t.xwfg="white",t.xwbg="rgb(35%,35%,30%)",t.xwts="rgb(60%,60%,55%)",t.xwbs="rgb(25%,25%,20%)",t.xwms=s.mixcolor(t.xwts,t.xwbs,.5),t.xwlo="rgb(15%,15%,10%)",t.hi=t.xwbs)}},s.settheme=function(t,e){t.bg=e.bg,t.fg=e.fg,t.xi=e.xi,t.xwfg=e.xwfg,t.xwbg=e.xwbg,t.xwts=e.xwts,t.xwbs=e.xwbs,t.xwlo=e.xwlo,t.hi=e.hi},s.close=function(t){var e=t.wid_canvas;e.removeEventListener("mousemove",t.onmousemove,!1),e.removeEventListener("mouseup",t.onmouseup,!1),t.parent&&t.parent.parentNode&&t.parent.parentNode.removeChild(t.parent)},s.scrollbar=function(t,e,i,n,r,o,a,l,h,c,u){var d,f,x,m,p,y,v=0,_=new s.SCROLLBAR;switch(d=void 0!==e.flag?e.flag:e,f=Math.abs(d),x=o-r>n-i?t.origin<3?2:4:2&t.origin?3:1,f<10&&(e=_),(f<10||0===e.action)&&(s.scroll(t,e,s.XW_INIT,void 0,u),e.flag=d,e.initial_pause=-1,s.scroll_loc(e,i,r,n-i+1,o-r+1,x,u)),e.srange=a.pe-a.ps,f){case 0:m=p=y=1;break;case 1:case 11:m=p=.9*e.srange,y=2;break;case 2:case 12:p=9*(m=.1*e.srange),y=2;break;case 3:case 13:m=1,p=e.srange-1,y=1;break;default:return 0}return s.scroll_vals(e,a.ps,e.srange,l,h-l,m,p,y,u),0===d?s.scroll(t,e,s.XW_DRAW,void 0,void 0):s.scroll(t,e,s.XW_EVENT,c,u)&&(a.ps!==e.smin&&(a.ps=e.smin,v+=1),a.pe!==e.smin+e.srange&&(a.pe=e.smin+e.srange,v+=2)),v},s.scroll=function(t,e,i,n,r){var o,a,l,h;if(void 0===e)return!1;switch(i){case s.XW_INIT:s.scroll_loc(e,0,0,t.width,20,1,r),s.scroll_vals(e,0,10,0,100,1,10,1,r),e.flag=0,e.action=0,e.initial_pause=.25,e.repeat_pause=.05,e.mxevent=!0,e.repeat_count=0;break;case s.XW_EVENT:if(o=0,e.mxevent)o=t.button_release?-t.button_release:t.button_press;else if("mousedown"===n.type||"mouseup"===n.type){switch(n.which){case 1:o=1;break;case 2:o=2;break;case 3:o=3;break;case 4:o=4;break;case 5:o=5}"mouseup"===n.type&&(o=-o)}else"mousewheel"!==n.type&&"DOM-MouseScroll"!==n.type||(n.wheelDelta&&n.wheelDelta>0?o=4:n.wheelDelta&&n.wheelDelta<0&&(o=5));if(0===e.action){if(4!==o&&5!==o||(t.xpos=e.x),1!==o&&2!==o&&4!==o&&5!==o||t.xpos<e.x||t.ypos<e.y||t.xpos>e.x+e.w||t.ypos>e.y+e.h)return!1}else if(o<0)return e.action=e.repeat_count=0,!0;if(1&e.origin?(h=t.xpos-e.x,2&e.origin&&(h=e.w-h)):(h=t.ypos-e.y,e.origin<=2&&(h=e.h-h)),0===e.action){e.repeat_count=0;var c=s.scroll_real2pix(e);if(e.s1=r.s1=c.s1,e.sw=r.sw=c.sw,e.soff=r.soff=h-e.s1,0===e.trange)e.smin=r.smin=e.tmin,e.srange=r.srange=0;else switch(o){case 1:h>e.a1&&h<e.a2?e.action=e.soff>0?s.SB_PAGEINC:s.SB_PAGEDEC:e.action=e.soff>0?s.SB_STEPINC:s.SB_STEPDEC;break;case 4:e.action=s.SB_WHEELUP;break;case 5:e.action=s.SB_WHEELDOWN}}else switch(e.action){case s.SB_WHEELUP:case s.SB_WHEELDOWN:case s.SB_EXPAND:case s.SB_SHRINK:case s.SB_FULL:e.action=e.repeat_count=0}case s.XW_COMMAND:switch(a=e.smin,l=e.srange,e.action){case s.SB_STEPINC:a+=e.step;break;case s.SB_STEPDEC:a-=e.step;break;case s.SB_PAGEINC:a+=e.page;break;case s.SB_PAGEDEC:a-=e.page;break;case s.SB_FULL:a=e.tmin,l=e.trange;break;case s.SB_EXPAND:l*=e.scale,a<=0&&a+e.srange>=0?a*=e.scale:a-=(l-e.srange)/2;break;case s.SB_SHRINK:l/=e.scale,a<0&&a+e.srange>=0?a+=l/e.scale:0===a&&a+e.srange>=0?a=l/e.scale:a+=(e.srange-l)/2;break;case s.SB_WHEELUP:a-=e.page;break;case s.SB_WHEELDOWN:a+=e.page}e.trange>0?(a=Math.max(e.tmin,Math.min(a,e.tmin+e.trange-l)),l=Math.min(l,e.trange)):(a=Math.min(e.tmin,Math.max(a,e.tmin+e.trange-l)),l=Math.max(l,e.trange)),e.smin===a&&e.srange===l?e.action!==s.SB_DRAG&&(e.action=e.repeat_count=0):(e.smin=r.smin=a,e.srange=r.srange=l,e.repeat_count++),i===s.XW_COMMAND&&(s.scroll(t,e,s.XW_UPDATE,void 0),e.action=0);break;case s.XW_DRAW:case s.XW_UPDATE:s.redrawScrollbar(e,t,i)}return!0},s.scroll_loc=function(t,e,i,n,r,o,l){void 0!==t&&(t.x=l.x=e,t.y=l.y=i,t.w=l.w=n,t.h=l.h=r,t.origin=l.origin=Math.max(1,Math.min(4,o)),1&t.origin?(t.a2=l.a2=t.w,t.arrow=l.arrow=Math.min(a.trunc((t.w-a.trunc(2*s.GBorder))/3),t.h+s.GBorder)):(t.a2=l.a2=t.h,t.arrow=l.arrow=Math.min(a.trunc((t.h-a.trunc(2*s.GBorder))/3),t.w+s.GBorder)),t.a1=l.a1=t.arrow+s.GBorder,t.a2-=t.arrow+s.GBorder,l.a2-=t.arrow+s.GBorder,t.swmin=l.swmin=Math.min(10,t.a2-t.a1),t.s1=l.s1=0,t.sw=l.sw=0,t.action=l.action=0)},s.scroll_vals=function(t,e,i,n,r,o,a,s,l){void 0!==t&&(t.smin=l.smin=e,t.srange=l.srange=i,t.tmin=l.tmin=n,t.trange=l.trange=r,t.step=l.step=o,t.page=l.page=a,t.scale=l.scale=Math.max(s,1))},s.draw_symbol=function(t,e,i,n,r,o,l){for(var h,c=t.active_canvas.getContext("2d"),u=0,d=0,f=0,x=[],m=0;m<4;m++)x[m]={x:0,y:0};var p="";if(h=o<0,d=2*(u=Math.abs(o)),c.fillStyle=e,c.strokeStyle=e,"function"==typeof r)r(c,l,i,n);else switch(r){case s.L_CircleSymbol:c.beginPath(),h?(c.arc(i,n,u,0,360),c.fill()):(c.arc(i,n,u,0,360),c.stroke());break;case s.L_SquareSymbol:h?function(t,e,i,n,r,o,a,s){s&&(t.lineWidth=s);a&&(t.strokeStyle=a);o&&(t.fillStyle=o);t.fillRect(e,i,n,r)}(c,i-u,n-u,d,d):function(t,e,i,n,r,o,a){a&&(t.lineWidth=a);o&&(t.strokeStyle=o);t.strokeRect(e,i,n,r)}(c,i-u,n-u,d,d);break;case s.L_PixelSymbol:d=1,c.beginPath(),c.arc(i,n,1,0,2*Math.PI,!0),c.fill();break;case s.L_ITriangleSymbol:u=-u;case s.L_TriangleSymbol:d=a.trunc(1.5*u),f=a.trunc(.8*u),x[1].x=-f,x[1].y=d,x[2].x=2*f,x[2].y=0,x[3].x=-f,x[3].y=-d;var y=[];for(m=0;m<4;m++)y[m]={x:0,y:0};h?(y[0].x=i,y[0].y=n-u,y[1].x=y[0].x+x[1].x,y[1].y=y[0].y+x[1].y,y[2].x=y[1].x+x[2].x,y[2].y=y[1].y+x[2].y,y[3].x=y[2].x+x[3].x,y[3].y=y[2].y+x[3].y,_(c,y)):(y[0].x=i,y[0].y=n-u,y[1].x=y[0].x+x[1].x,y[1].y=y[0].y+x[1].y,y[2].x=y[1].x+x[2].x,y[2].y=y[1].y+x[2].y,y[3].x=y[2].x+x[3].x,y[3].y=y[2].y+x[3].y,function(t,e,i,n){b(t,e,n),i&&(t.strokeStyle=i);t.stroke(),t.closePath()}(c,y));break;case s.L_PlusSymbol:v(c,i,n+u,i,n-u),v(c,i+u,n,i-u,n);break;case s.L_HLineSymbol:v(c,i+u,n,i-u,n);break;case s.L_VLineSymbol:v(c,i,n+u,i,n-u);break;case s.L_XSymbol:v(c,i-u,n-u,i+u,n+u),v(c,i+u,n-u,i-u,n+u);break;default:p=r,u=a.trunc(t.text_w/2),h&&c.fillText(p.substring(0,2),i-u,n+u)}},s.draw_symbols=function(t,e,i,n,r,o,a,l){for(var h=0;h<r;h++)s.draw_symbol(t,e,i[h],n[h],o,a,h+l)},s.trace=function(t,e,i,n,r,o,l,h,u,f,x){if(void 0===i||void 0===n)throw"mx.trace requires xpoint and ypoint";if(void 0===l&&(l=1),void 0===h&&(h=1),void 0===u&&(u=0),void 0===f&&(f=0),void 0===x&&(x={}),r<=0)a.log.warn("No points to draw");else if(0!==h||0!==u){var m;x.dashed&&(m={mode:"dashed",on:4,off:4});var p=s.origin(t.origin,4,t.stk[t.level]);if(0!==p.xscl&&0!==p.yscl){var v=p.x1,_=p.y1,b=p.xmin,g=1/p.xscl,w=p.ymin,k=1/p.yscl;x.noclip||s.clip(t,v,_,p.x2-v+1,p.y2-_+1);var M=Math.abs(p.xmax-p.xmin),S=Math.abs(p.ymax-p.ymin),E=Math.min(p.xmin,p.xmax),A=Math.min(p.ymin,p.ymax),C=E+M,L=A+S,z=4*Math.ceil(2*i.length),G=new Int32Array(new ArrayBuffer(z)),P=new Int32Array(new ArrayBuffer(z)),T=0;if(0===h&&0!==u)for(var O=l-1;O<r;O+=l){var R=i[O],I=n[O];(X=R>=E&&R<=C&&I>=A&&I<=L)&&(G[0]=Math.round((R-b)*g)+v,P[0]=Math.round((I-w)*k)+_,s.draw_symbol(t,e,G[0],P[0],u,f,o+O))}if(!0===x.vertsym)for(O=l-1;O<r;O+=l){R=i[O],I=n[O];if(R>=E&&R<=C){var N=Math.round((R-b)*g)+v;s.draw_line(t,e,N,0,N,t.height),I>=A&&I<=L&&(G[0]=N,P[0]=Math.round((I-w)*k)+_,s.draw_symbol(t,e,G[0],P[0],u,f,o+O))}}if(!0===x.horzsym)for(O=l-1;O<r;O+=l){R=i[O];if((I=n[O])>=A&&I<=L){N=Math.round((I-w)*k)+_;s.draw_line(t,e,0,N,t.width,N),R>=E&&R<=C&&(G[0]=Math.round((R-b)*g)+v,P[0]=N,s.draw_symbol(t,e,G[0],P[0],u,f,o+O))}}else if(0!==h){var D;if(x&&x.highlight){D=[];for(var B=0;B<x.highlight.length;B++)if(!(x.highlight[B].xstart>=C||x.highlight[B].xend<=E)){var H=Math.max(x.highlight[B].xstart,E),U=Math.min(x.highlight[B].xend,C);if(H<U){for(var F=Math.round((H-b)*g)+v,W=Math.round((U-b)*g)+v,j=D.length-1;j>=0;j--)F<=D[j].start&&W>=D[j].end?D.splice(j,1):(F>=D[j].start&&W<=D[j].end?(D.push({start:W,end:D[j].end,color:D[j].color}),D[j].end=F):F<=D[j].start&&W>=D[j].start?D[j].start=W:F<=D[j].end&&W>=D[j].end&&(D[j].end=F),D[j].end<=D[j].start&&D.splice(j,1));D.push({start:F,end:W,color:x.highlight[B].color})}}D.push({start:v,color:e}),D.sort(function(t,e){return t.start-e.start})}else D=e;var X,Y=0,V=(t.stk[t.level].xmax+t.stk[t.level].xmin)/2,q=(t.stk[t.level].ymax+t.stk[t.level].ymin)/2;R=i[0],I=n[0];Y=d(Y,V,q,t.stk[t.level].xmin,t.stk[t.level].ymin,R,I),(X=R>=E&&R<=C&&I>=A&&I<=L)?(G[T]=Math.round((R-b)*g)+v,P[T]=Math.round((I-w)*k)+_,T+=1,0!==u&&s.draw_symbols(t,e,G,P,1,u,f,o)):T=0;var K=0,Z=!1;for(O=l;O<=l*(r-1);O+=l){var $=R,J=I;if(Y=d(Y,V,q,$,J,R=i[O],I=n[O]),Z=R>=E&&R<=C&&I>=A&&I<=L,X&&Z)G[T]=Math.round((R-b)*g)+v,P[T]=Math.round((I-w)*k)+_,T+=1;else if(X=Z,S=J-I,0!==(M=$-R)||0!==S){var Q={tL:1,tE:0};y(M,E-R,Q)&&y(-M,R-C,Q)&&y(S,A-I,Q)&&y(-S,I-L,Q)&&(Q.tL<1&&(G[T]=Math.round((R-b+Q.tL*M)*g)+v,P[T]=Math.round((I-w+Q.tL*S)*k)+_,T+=1),Q.tE>0?(G[T]=Math.round((R-b+Q.tE*M)*g)+v,P[T]=Math.round((I-w+Q.tE*S)*k)+_,T+=1,s.draw_lines(t,D,G.subarray(K,T),P.subarray(K,T),T-K,h,m),0!==u&&T-K>2&&s.draw_symbols(t,e,G.subarray(K+1,T-1),P.subarray(K+1,T-1),T-K-2,u,f,o+O-(T-K-2)),K=T):(G[T]=Math.round((R-b)*g)+v,P[T]=Math.round((I-w)*k)+_,T+=1))}}if(Y=d(Y,V,q,R,I,t.stk[t.level].xmax,t.stk[t.level].ymin),Y=d(Y,V,q,t.stk[t.level].xmax,t.stk[t.level].ymin,t.stk[t.level].xmin,t.stk[t.level].ymin),T-K>0&&(s.draw_lines(t,D,G.subarray(K,T),P.subarray(K,T),T-K,h,m),Z&&(K+=1),0!==u&&T-K>1&&s.draw_symbols(t,e,G.subarray(K-1,T),P.subarray(K-1,T),T-K-1,u,f,O-T+o)),!x.fillStyle||t.fillMin||t.fillMax||(T>1||0!==Y)&&s.fill_trace(t,x.fillStyle,G,P,T),x.highlight)for(N=0;N<x.highlight.length;N++){var tt=x.highlight[N];if(tt.fill){var et=tt.xstart,it=tt.xend;if(console.log("x start ",et),console.log("x end ",it),!(et>=t.stk[t.level].xmax||it<=t.stk[t.level].xmin||!(T>1||0!==Y))){for(var nt=s.real_to_pixel(t,et,0),rt=s.real_to_pixel(t,it,0),ot=nt.x,at=rt.x,st=[],lt=[],ht=0;ht<T;ht++){var ct=G[ht],ut=P[ht];!0===c(ct,ot,at)&&(st.push(ct),lt.push(ut))}(st.length>0||0!==Y)&&(ot=Math.max(ot,st[0]),at=Math.min(at,st[st.length-1]),s.fill_trace(t,tt.fill,st,lt,st.length,ot,at))}}}}x.noclip||s.clip(t,0,0,0,0)}}else a.log.warn("No line or symbol to draw")},s.draw_mode=function(t,e,i){t.linewidth=void 0===e?1:e,t.style=i},s.draw_line=function(t,e,i,n,r,o,s,l){var h=t.active_canvas.getContext("2d");if(void 0===s&&(s=t.linewidth),void 0===l&&(l=t.style),"number"==typeof e)if(t.pixel){isNaN(e)&&(e=0);Math.max(0,Math.min(t.pixel.map.length,e));e=w((e=t.pixel.getColor(e)).red,e.green,e.blue)}else a.log.warn("COLORMAP not initialized, defaulting to foreground"),e=t.fg;v(h,i,n,r,o,l,e,s)},s.rubberline=function(t,e,i,n,r){v(t.active_canvas.getContext("2d"),e,i,n,r,{mode:"xor"},"white",1)},s.fill_trace=function(t,e,i,n,r,o,a){var l=t.active_canvas.getContext("2d");if(Array.isArray(e)?l.fillStyle=s.linear_gradient(t,0,0,0,t.b-t.t,e):l.fillStyle=e,r<1)l.fillRect(t.l,t.t,t.r-t.l,t.b-t.t);else if(void 0===o&&(o=t.l),void 0===a&&(a=t.r),e){var h=i[0],c=n[0];l.beginPath(),c===t.t?l.lineTo(o,t.t):l.lineTo(o,t.b),l.lineTo(h,c);for(var u=1;u<r;u++)h=i[u],c=n[u],l.lineTo(h,c);c===t.t&&l.lineTo(a,t.t),l.lineTo(a,t.b),n[0]===t.t&&l.lineTo(o,t.b),l.closePath(),l.fill("evenodd")}},s.draw_lines=function(t,e,i,n,o,s,l){var h=t.active_canvas.getContext("2d");if(!(o<1)){var c=i[0],u=n[0];if(void 0===s&&(s=t.linewidth),void 0===l&&(l=t.style),l&&"dashed"===l.mode)r.dashOn(h,l.on,l.off)||a.log.warn("WARNING: Dashed lines aren't supported on your browser");h.lineWidth=s;var d,f=0;for("string"==typeof e?e=[{start:0,color:e}]:e instanceof Array||(void 0===e.start&&(e.start=0),e=[e]),d=e.length-1;d>=0;d--)null!=e[d].end&&e[d].end<c&&e.splice(d,1);for(d=0;d<e.length;d++)e[d].start<c&&(f=d);h.strokeStyle=e[f].color,h.beginPath(),h.moveTo(c,u);for(var x=0;x<o;x++)if(c!==i[x]||u!==n[x]){c=i[x],u=n[x];var m=!1;if(f>0&&null!=e[f].end&&e[f].end<c)for(m=!0;null!=e[f].end&&e[f].end<c&&(e.splice(f,1),0!=(f-=1)););if(f+1<e.length&&e[f+1].start<=c)for(m=!0;f+1<e.length&&e[f+1].start<=c;)f++;h.lineTo(c,u),m&&(h.stroke(),h.strokeStyle=e[f].color,h.beginPath(),h.lineTo(c,u))}h.stroke(),r.dashOff(h),h.beginPath()}},s.clip=function(t,e,i,n,r){var o=t.active_canvas.getContext("2d");0!==e||0!==i||0!==n||0!==r?(o.save(),o.beginPath(),o.rect(e,i,n,r),o.clip()):o.restore()},s.clear_window=function(t){var e=t.active_canvas.getContext("2d");e.fillStyle=t.bg,e.fillRect(0,0,t.width,t.height)},s.erase_window=function(t){t.active_canvas.getContext("2d").clearRect(0,0,t.width,t.height)},s.rubberbox=function(t,e,i,n,r){s.warpbox(t,t.xpos,t.ypos,t.xpos,t.ypos,0,t.width,0,t.height,e,i,n,r)},s.warpbox=function(t,e,i,n,r,o,a,s,h,c,u,d,f){d||(d={}),t.warpbox=new l,t.warpbox.xo=e,t.warpbox.yo=i,t.warpbox.xl=n,t.warpbox.yl=r,t.warpbox.xmin=o,t.warpbox.xmax=a,t.warpbox.ymin=s,t.warpbox.ymax=h,t.warpbox.func=c,t.warpbox.mode=u,t.warpbox.style=d,t.warpbox.def_style=d,t.warpbox.alt_style=f},s.origin=function(t,e,i){t=Math.max(1,t),e=Math.max(1,e);var n=new s.STKSTRUCT;if(n.xmin=i.xmin,n.xmax=i.xmax,n.ymin=i.ymin,n.ymax=i.ymax,n.xscl=i.xscl,n.yscl=i.yscl,n.x1=i.x1,n.y1=i.y1,n.x2=i.x2,n.y2=i.y2,t!==e){var r=Math.abs(e-t),o=e+t;2!==r&&5===o||(n.xmin=i.xmax,n.xmax=i.xmin,n.xscl=-i.xscl),2!==r&&5!==o||(n.ymin=i.ymax,n.ymax=i.ymin,n.yscl=-i.yscl)}return n},s.mult=function(t,e){var i=Math.max(Math.abs(t),Math.abs(e));if(0===i)return 1;var n=.1447648*Math.log(i);return n|=n,i<1&&(n-=1),n<0?1/Math.pow(10,-3*n):Math.pow(10,3*n)},s.widget_callback=function(t,e){t.prompt&&3===e.which&&t.prompt.input.onsubmit(),t.widget&&t.widget.callback(e)},s.prompt=function(t,e,i,n,r,a,l,h,c){if(void 0!==a){var u=i(a);if(!u.valid)throw"Prompt default input value not valid due to '"+u.reason+"'"}s.onWidgetLayer(t,function(){var r=t.active_canvas.getContext("2d"),u=r.font.indexOf("px"),d=u+3,f=r.font.substr(0,u),x=r.font.substr(d,r.font.length).toString(),m=new o({height:t.text_h,fontFamily:x,fontSize:new Number(f),backgroundColor:t.bg,fontColor:t.fg,borderWidth:0,borderRadius:0,padding:0,boxShadow:"none",innerShadow:"none",width:30*t.text_w,value:void 0!==a?a.toString():"",disableBlur:!0,renderOnReturn:!1,tabToClear:!0}),p=function(e,r){return function(){var o=this.value(),a=i(o);a.valid?(t.prompt=void 0,this.cleanup(),s.onWidgetLayer(t,function(){s.erase_window(t)}),n(o)):(s.message(t,"Value: '"+o+"' isn't valid due to '"+a.reason+"' - RETRY",void 0,e,r),setTimeout(function(){s.onWidgetLayer(t,function(){s.erase_window(t)}),t.widget=null},null!=c?c:4e3))}},y=function(t,e,i){return function(n,r){s.onWidgetLayer(t,function(){var o=(i.length+2)*t.text_w,a=o+31*t.text_w+6,l=2*t.text_h+6;n||(n=t.xpos),r||(r=t.ypos);var h=Math.max(0,Math.min(n,t.width-a)),c=Math.max(0,Math.min(r,t.height-l)),u=h+3,d=c+3,f=d+1.5*t.text_h,x=u+t.text_w;s.widgetbox(t,h,c,a,l,u,d,0,""),s.text(t,x,f,i);var m=f-1.15*t.text_h;e.x(u+t.text_w+o-t.text_w),e.y(m),e.onsubmit(p(h,m-75)),e.canvas()?e.render():e.canvas(t.active_canvas)})}}(t,m,e);y(l,h),m.focus(),t.prompt={redraw:y,input:m}})},s.floatValidator=function(t,e){return(void 0!==e&&!1!==e||""!==t)&&isNaN(parseFloat(t))||!isFinite(t)?{valid:!1,reason:"Failed float validation: not a valid floating point number"}:{valid:!0,reason:""}},s.intValidator=function(t,e){return(void 0===e||!1===e)&&""===t||parseFloat(t)===parseInt(t,10)&&!isNaN(t)?{valid:!0,reason:""}:{valid:!1,reason:"Failed integer validation: not a valid integer"}},s.hexValidator=function(t,e){return(void 0===e||!1===e)&&""===t||!1!==/^(#)?([0-9a-fA-F]{3})([0-9a-fA-F]{3})?$/.test(t)?{valid:!0,reason:""}:{valid:!1,reason:"Failed hexcode validation: not a valid hexcode"}},s.message=function(t,e,i,n,r,o){s.onWidgetLayer(t,function(){s.render_message_box(t,e,n,r),t.widget={type:o||"ONESHOT",callback:function(e){"mousedown"!==e.type&&"keydown"!==e.type||(t.widget=null,s.onWidgetLayer(t,function(){s.erase_window(t)}))}}})},s.render_message_box=function(t,e,i,n,r){var o,a=0;if(1===(x=e.split(/\r\n|\r|\n/g)).length){x=[];if((a=Math.min((t.width-6)/t.text_w-2,e.length))<=0)return;for(;a>40&&2.5*t.text_h*e.length<t.height*a;)a-=5;var l=0,h=0,c=0,u=0,d=0,f=0,x=[];for(o=!0;h<e.length;){d=h+a-1,f=d=Math.min(d,e.length-1);var m=!1;for(l=h;l<=d&&!m;l++)switch(e[l]){case",":case";":case" ":case":":f=l;break;case"-":case"/":f!==l-1&&(f=l);break;case"@":case"\n":case"\r":o=!1,m=!0,f=l}if(l===e.length&&(f=d),m)x.push(e.substring(h,f));else{var p=e.substring(h,f+1).replace(/^\s+/,"");x.push(p)}h=f+1,u=Math.max(u,x[c].length)}}else for(c=0;c<x.length;c++)a=Math.min((t.width-6)/t.text_w-2,Math.max(a,x[c].length));var y=x.length;y>6&&(o=!1);l=0;var v=Math.max(1,t.height/t.text_h),_=Math.min(y,l+v-1),b=(a+2)*t.text_w+6,g=(_-l+1)*t.text_h+6;i||(i=t.xpos),n||(n=t.ypos);var w=Math.max(t.l,Math.min(i,t.r-b)),k=Math.max(t.t,Math.min(n,t.b-g)),M=w+3,S=k+3;s.widgetbox(t,w,k,b,g,M,S,0,"");for(u=S+t.text_h/3,c=M+t.text_w;l<_;)u+=t.text_h,o&&(c=w+b/2-x[l].length*t.text_w/2),s.text(t,c,u,x[l],r),l++},s.draw_round_box=function(t,e,i,n,r,o,a,s,l){var h=t.active_canvas.getContext("2d");if(l||(l=5),h.beginPath(),h.moveTo(i+l,n),h.lineTo(i+r-l,n),h.quadraticCurveTo(i+r,n,i+r,n+l),h.lineTo(i+r,n+o-l),h.quadraticCurveTo(i+r,n+o,i+r-l,n+o),h.lineTo(i+l,n+o),h.quadraticCurveTo(i,n+o,i,n+o-l),h.lineTo(i,n+l),h.quadraticCurveTo(i,n,i+l,n),h.closePath(),h.lineWidth=1,h.strokeStyle=e,h.stroke(),void 0!==a&&a>0){var c=h.globalAlpha;h.globalAlpha=a,h.fillStyle=s||e,h.fill(),h.globalAlpha=c}},s.draw_box=function(t,e,i,n,r,o,a,s){var l=t.active_canvas.getContext("2d");if("xor"!==e)l.lineWidth=1,l.strokeStyle=e,l.strokeRect(i,n,r,o);else if("undefined"==typeof Uint8ClampedArray)l.lineWidth=1,l.strokeStyle=t.fg,l.strokeRect(i,n,r,o);else{i=Math.floor(i),n=Math.floor(n),r=Math.floor(r),o=Math.floor(o);for(var h=t.canvas.getContext("2d"),c=(d=h.getImageData(i,n,r,1)).data,u=0;u<d.data.length;u++)c[4*u]=255-c[4*u],c[4*u+1]=255-c[4*u+1],c[4*u+2]=255-c[4*u+2],c[4*u+3]=255;l.putImageData(d,i,n),c=(d=h.getImageData(i,n+o,r,1)).data;for(u=0;u<d.data.length;u++)c[4*u]=255-c[4*u],c[4*u+1]=255-c[4*u+1],c[4*u+2]=255-c[4*u+2],c[4*u+3]=255;l.putImageData(d,i,n+o);var d;for(c=(d=h.getImageData(i,n,1,o)).data,u=0;u<o;u++)c[4*u]=255-c[4*u],c[4*u+1]=255-c[4*u+1],c[4*u+2]=255-c[4*u+2],c[4*u+3]=255;l.putImageData(d,i,n),c=(d=h.getImageData(i+r,n,1,o)).data;for(u=0;u<o;u++)c[4*u]=255-c[4*u],c[4*u+1]=255-c[4*u+1],c[4*u+2]=255-c[4*u+2],c[4*u+3]=255;l.putImageData(d,i+r,n)}if(void 0!==a&&a>0){var f=l.globalAlpha;l.globalAlpha=a,l.fillStyle=s||e,l.fillRect(i+1,n+1,r-1,o-1),l.globalAlpha=f}},s.set_font=function(t,e){var i=t.canvas.getContext("2d"),n=t.wid_canvas.getContext("2d");if(t.font&&t.font.width===e)i.font=t.font.font,n.font=t.font.font;else{var r=1;do{r+=1,i.font=r+"px "+t.font_family,n.font=r+"px "+t.font_family;var o=i.measureText("M");t.text_w=o.width,t.text_h=r}while(t.text_w<e);t.font={font:r+"px "+t.font_family,width:e}}},s.textline=function(t,e,i,n,r,o){var a=t.active_canvas.getContext("2d");o||(o={}),o.color||(o.color=t.fg),o.width||(o.width=1),v(a,e,i,n,r,o,o.color,o.width)},s.tics=function(t,e,i,n){var r=1,o=t;if(e===t)return{dtic:1,dtic1:t};var a,s,l=Math.abs(e-t)/i,h=(a=Math.max(l,1e-36),Math.log(a)/Math.log(10));h<0?(s=Math.ceil(h),s-=1):s=Math.floor(h);var c,u,d=l*Math.pow(10,-s),f=d*(h=Math.pow(10,s));n&&f>=5&&f<=5140800?(c=f<17.5?5:f<37.5?15:f<270?60:f<1050?300:f<2250?900:f<7200?3600:f<16200?10800:f<32400?21600:f<129600?43200:f<518400?86400:604800,r=Math.round(f/c)*c):r=d<1.75?h:d<2.25?2*h:d<3.5?2.5*h:d<7?5*h:10*h;return 0===r&&(r=1),e>=t?(u=t>=0?t/r+.995:t/r-.005,o=(u=Math.floor(u))*r):(u=t>=0?t/r+.005:t/r-.995,o=(u=Math.floor(u))*r,r*=-1),o+r===o&&(r=e-t),{dtic:r,dtic1:o}},s.drawaxis=function(t,e,i,n,r,o,l){var h=s.origin(e.origin,1,e.stk[e.level]),c=0,u=0,d=0,f=0,x=0,m=0;r=void 0===r?30:r,o=void 0===o?30:o,l.exactbox?(c=Math.floor(h.x1),u=Math.floor(h.y1),x=(d=Math.floor(h.x2))-c,m=(f=Math.floor(h.y2))-u):(c=Math.max(Math.floor(h.x1)-2,0),u=Math.max(Math.floor(h.y1)-2,0),x=(d=Math.min(Math.floor(h.x2)+2,e.width))-c-4,m=(f=Math.min(Math.floor(h.y2)+2,e.height))-u-4);var p=e.active_canvas.getContext("2d");l.fillStyle?Array.isArray(l.fillStyle)?p.fillStyle=s.linear_gradient(e,0,0,0,f-u,l.fillStyle):p.fillStyle=l.fillStyle:p.fillStyle=e.bg,p.fillRect(c,u,d-c,f-u),l.noaxisbox||(s.textline(e,c,u,d,u),s.textline(e,d,u,d,f),s.textline(e,d,f,c,f),s.textline(e,c,f,c,u));var y={dtic:0,dtic1:0},v={dtic:0,dtic1:0};i<0?(y.dtic1=h.xmin,y.dtic=(h.xmin-h.xmax)/i):y=s.tics(h.xmin,h.xmax,i,l.xtimecode);var _=1;l.xmult?_=l.xmult:l.xtimecode||(_=s.mult(h.xmin,h.xmax)),n<0?(v.dtic1=h.ymin,v.dtic=(h.ymin-h.ymax)/n):v=s.tics(h.ymin,h.ymax,n,l.ytimecode);var b=1;l.ymult?b=l.ymult:l.ytimecode||(b=s.mult(h.ymin,h.ymax));var g,w,M=!l.noxtlab,S=!l.noytlab,E=Math.max(0,c-4*e.text_w),A=0;if((A=l.ontop?Math.min(e.height,Math.floor(f+1.5*e.text_h)):Math.max(e.text_h,Math.floor(u-.5*e.text_h)))>0){l.noyplab||(w=l.ylabel instanceof Function?l.ylabel(o,b):void 0!==l.ylabel?l.ylabel:a.label(o,b)),l.noxplab||(g=l.xlabel instanceof Function?l.xlabel(r,_):void 0!==l.xlabel?l.xlabel:a.label(r,_))}g&&w?s.text(e,E,A,w+" vs "+g):g?s.text(e,E,A,g):w&&s.text(e,E,A,w);var C,L,z=5.5*e.text_w,G=0;G=l.ontop?l.inside?u+1*e.text_h:u-.2*e.text_h:l.inside?f-.5*e.text_h:f+1*e.text_h+2,C=h.xmin!==h.xmax?x/(h.xmax-h.xmin):x/1,L=0!==_?1/_:1;var P,T,O,R,I,N=Math.min(12,Math.round(C*y.dtic)/e.text_w),D=1,B="";if(M)if(l.xtimecode)D=(B=a.sec2tod(y.dtic1)).length*e.text_w<(d-c)/2;else for(P=y.dtic1;P<=h.xmax;P+=y.dtic){if((B=s.format_f(P*L,N,N/2))===T){D=0;break}T=B}for(0===y.dtic&&(y.dtic=h.xmax-y.dtic1+1),E=0,B="",P=y.dtic1;P<=h.xmax;P+=y.dtic)if(!((O=c+Math.round(C*(P-h.xmin))+2)<c)&&(l.grid&&"y"!==l.grid?(l.gridStyle||(s.LEGACY_RENDER?l.gridStyle={mode:"dashed",on:1,off:3}:l.gridStyle={color:e.xwms,mode:"dashed",on:1,off:3}),s.textline(e,O,f,O,u,l.gridStyle)):(s.textline(e,O,f-2,O,f+2),s.textline(e,O,u-2,O,u+2)),M))if(D){if(B=null,l.xtimecode?O>E&&(B=a.sec2tod(P,!0),E=O+e.text_w*(B.length+1)):B=k(B=s.format_f(P*L,N,N/2),!0),B){var H=Math.round(B.length/2)*e.text_w;l.inside&&(O=Math.max(c+H,O),O=Math.min(d-H,O)),O-H>=0&&s.text(e,O-H,G,B)}}else P===y.dtic1&&(l.xtimecode?(B=a.sec2tod(P,!0),l.inside&&(O=Math.floor(Math.max(c+z,O))),s.text(e,O-z,G,B+" + "+a.sec2tod(y.dtic))):(B=(y.dtic1*L).toString(),l.inside&&(O=Math.floor(Math.max(c+z,O))),s.text(e,O-z,G,B+" + "+y.dtic*L)));z=l.yonright?l.inside?Math.min(d-6*e.text_w,e.width-5*e.text_w):Math.min(d+e.text_w,e.width-5*e.text_w):l.inside?Math.max(0,c+e.text_w):Math.max(0,Math.floor(c-(e.l-.5)*e.text_w)),G=.4*e.text_h,C=h.ymin!==h.ymax?-m/(h.ymax-h.ymin):-m/1,L=0!==b?1/b:1,0===v.dtic&&h.ymax,R=h.ymax>=h.ymin?function(t){return t<=h.ymax}:function(t){return t>=h.ymax};for(var U=v.dtic1;R(U);U+=v.dtic)if(!((O=f+Math.round(C*(U-h.ymin))-2)>f)&&(l.grid&&"x"!==l.grid?(l.gridStyle||(l.gridStyle={mode:"dashed",on:1,off:3}),s.textline(e,c,O,d,O,l.gridStyle)):(s.textline(e,c-2,O,c+2,O),s.textline(e,d-2,O,d+2,O)),S))if(l.inside&&(O<u+e.text_h||O>f-2*e.text_h));else if(l.ytimecode){I=a.sec2tod(U);var F=O+G-e.text_h,W=I.indexOf("::");-1!==W&&(F>u&&F<f&&s.text(e,z,F,I.substring(0,W)),W+=1),s.text(e,z,Math.min(f,O+G),I.substring(W+1,W+6)),(F=O+G+e.text_h)>u&&F<f&&"00"!==I.substring(W+7,W+9)&&(I+=".00",s.text(e,z,F,I.substring(W+7,W+12)))}else I=k(I=s.format_f(U*L,12,6),l.inside),s.text(e,z,Math.min(f,O+G),I)},s.inrect=function(t,e,i,n,r,o){return t>=i&&t<=i+r&&e>=n&&e<=n+o};var f={GBorder:3,sidelab:0,toplab:1,n_show:0};function x(t,e){if(!e.animationFrameHandle){var i=t.canvas.height-70,n=1.5*t.text_h,r=Math.floor(i/n);r>=e.items.length?f.n_show=e.items.length:f.n_show=r,e.animationFrameHandle=requestAnimFrame(s.withWidgetLayer(t,function(){s.erase_window(t),e.animationFrameHandle=void 0;var i=1.5*t.text_h;e.x=Math.max(e.x,0),e.y=Math.max(e.y,0),e.x=Math.min(e.x,t.width-e.w),e.y=Math.min(e.y,t.height-e.h);var n=e.x+f.GBorder+Math.max(0,f.sidelab),r=e.y+f.GBorder+f.toplab*(i+f.GBorder),o=e.w-2*f.GBorder-Math.abs(f.sidelab),a=e.h-2*f.GBorder-f.toplab*(i+f.GBorder);s.widgetbox(t,e.x,e.y,e.w,e.h,n,r,o,a,e.title);var l=t.wid_canvas.getContext("2d");l.lineWidth=1,l.strokeStyle=t.xwbs,l.beginPath(),l.moveTo(n,r-4+.5),l.lineTo(n+o-1,r-4+.5),l.stroke(),l.strokeStyle=t.xwts,l.beginPath(),l.moveTo(n,r-3+.5),l.lineTo(n+o-1,r-3+.5),l.stroke();var h=e.queue[0],c=e.queue[f.n_show-1];if(0===c){for(var u=0;u<f.n_show;u++)e.queue[u]=u;h=e.queue[0],c=e.queue[f.n_show-1]}for(var d=0,x=h;x<=c;x++){var m=e.items[x],p=r+i*d;d+=1,"separator"===m.style?(l.fillStyle=t.xwbs,l.fillRect(n,p,o,i),l.beginPath(),l.moveTo(n,p+.5),l.lineTo(n+o,p+.5),l.stroke(),l.textBaseline="middle",l.textAlign="left",l.fillStyle=t.xwfg,l.fillText(" "+m.text+" ",n+2*t.text_w,p+i/2)):(s.LEGACY_RENDER?(l.fillStyle=t.xwlo,l.fillRect(n,p,o,i),l.beginPath(),l.moveTo(n,p+.5),l.lineTo(n+o,p+.5),l.stroke(),m.selected&&s.shadowbox(t,n-1,p,o+2,i,1,2,"",.75)):(l.save(),l.globalAlpha=.75,m.selected?l.fillStyle=t.xwts:l.fillStyle=t.xwlo,l.fillRect(n,p,o,i),l.restore(),l.strokeStyle=t.bg,l.beginPath(),l.moveTo(n,p+.5),l.lineTo(n+o,p+.5),l.stroke()),l.textBaseline="middle",l.textAlign="left",l.fillStyle=t.xwfg,"checkbox"===m.style?(l.fillText(" "+m.text+" ",n+2*t.text_w,p+i/2),l.strokeStyle=t.xwfg,l.strokeRect(n+1+t.text_w,p+(i-t.text_w)/2,t.text_w,t.text_w),m.checked&&(l.beginPath(),l.moveTo(n+1+t.text_w,p+(i-t.text_w)/2),l.lineTo(n+1+t.text_w+t.text_w,p+(i-t.text_w)/2+t.text_w),l.stroke(),l.beginPath(),l.moveTo(n+1+t.text_w+t.text_w,p+(i-t.text_w)/2),l.lineTo(n+1+t.text_w,p+(i-t.text_w)/2+t.text_w),l.stroke())):(l.fillText(" "+m.text+" ",n,p+i/2),m.checked&&(l.beginPath(),l.moveTo(n+1,p+t.text_h/4),l.lineTo(n+1+t.text_w-2,p+t.text_h/4+t.text_h/2),l.lineTo(n+1,p+t.text_h/4+t.text_h),l.lineTo(n+1,p+t.text_h/4),l.fill())))}}))}}function m(t,e){s.onWidgetLayer(t,function(){s.erase_window(t)}),t.menu=void 0,t.widget=null;for(var i=0;i<e.items.length;i++){var n=e.items[i];if(n.selected){if(n.handler)n.handler();else if(n.menu){var r=n.menu;"function"==typeof n.menu&&(r=n.menu()),r.finalize=e.finalize,s.menu(t,r)}break}}!t.menu&&e.finalize&&e.finalize()}function p(t,e,i){var n=e.queue[0],o=e.queue[f.n_show-1];if(void 0===i)x(t,e);else if("mousemove"===i.type){void 0!==e.drag_x&&void 0!==e.drag_y&&Math.abs(t.xpos-e.drag_x)>2&&Math.abs(t.ypos-e.drag_y)>2&&(e.x+=t.xpos-e.drag_x,e.y+=t.ypos-e.drag_y,e.drag_x=t.xpos,e.drag_y=t.ypos);for(var a=e.x+f.GBorder+Math.max(0,f.sidelab),l=e.w-2*f.GBorder-Math.abs(f.sidelab),h=1.5*t.text_h,c=e.y+f.GBorder+f.toplab*(h+f.GBorder),u=n;u<=o;u++){var d=c+h*u;(b=e.items[u]).selected=!1,s.inrect(t.xpos,t.ypos,a,d,l,h)&&(b.selected=!0)}x(t,e)}else if("mouseup"===i.type)1===i.which?void 0!==e.drag_x&&void 0!==e.drag_y?(e.drag_x=void 0,e.drag_y=void 0):m(t,e):3===i.which&&function(t,e){s.onWidgetLayer(t,function(){s.erase_window(t)}),t.useDomMenu&&t.menu.remove(),t.menu=void 0,t.widget=null,!t.menu&&e.finalize&&e.finalize()}(t,e);else if("mousedown"===i.type)i.preventDefault(),1===i.which?t.xpos>e.x&&t.xpos<e.x+e.w&&t.ypos>e.y&&t.ypos<e.y+1.5*t.text_h&&(e.drag_x=t.xpos,e.drag_y=t.ypos):2===i.which&&m(t,e);else if("keydown"===i.type&&t.menu){e=t.menu;i.preventDefault();var p=r.getKeyCode(i);if(13===p)m(t,e);else if(38===p){for(u=n;u<o;u++){if((b=e.items[u]).selected){b.selected=!1,void 0!==e.items[u-1]&&(e.items[u-1].selected=!0);break}u===n&&0!==n?(e.queue.pop(),e.queue.unshift(n-1),x(t,e),e.items[o-1].selected=!0):0===n&&!0===e.items[n].selected&&(x(t,e),e.items[0].selected=!0)}x(t,e)}else if(40===p){for(u=n;u<o;u++){if((b=e.items[u]).selected){b.selected=!1,void 0!==e.items[u+1]&&(e.items[u+1].selected=!0);break}if(u===o-1){var y=o+1;o+1===e.items.length&&(y=0),e.queue.shift(),e.queue.push(y),e.items[o].selected=!1,e.items[y].selected=!0,x(t,e)}}x(t,e)}else if(p>=48&&p<=57||p>=65&&p<=90){var v=String.fromCharCode(p).toUpperCase();void 0===e.keypresses?e.keypresses=v:e.keypresses=e.keypresses+v;var _=0;for(u=0;u<e.items.length;u++){var b;(b=e.items[u]).selected=!1,b.text&&(0===b.text.toUpperCase().indexOf(e.keypresses)&&(0===_&&(b.selected=!0),_++))}0===_?(e.keypresses=void 0,x(t,e)):1===_?m(t,e):x(t,e)}}}function y(t,e,i){var n,r=!0;return n=e/t,t>0?n>i.tL?r=!1:n>i.tE&&(i.tE=n):t<0?n<i.tE?r=!1:n<i.tL&&(i.tL=n):e>0&&(r=!1),r}function v(t,e,i,n,o,a,s,l){if(e<0&&(e=0),i<0&&(i=0),n<0&&(n=0),o<0&&(o=0),l&&(t.lineWidth=l),s&&(t.strokeStyle=s),t.lineWidth%2==1&&(e===n&&(n=e=Math.floor(e)+.5),i===o&&(o=i=Math.floor(i)+.5)),a&&a.mode){if("dashed"===a.mode){if(r.dashOn(t,a.on,a.off))t.beginPath(),t.moveTo(e,i),t.lineTo(n,o),t.stroke(),r.dashOff(t),t.beginPath();else{if(t.beginPath(),i===o){var h=Math.min(e,n);for(n=Math.max(e,n);h<n;)t.moveTo(h,i),t.lineTo(h+a.on,i),t.stroke(),h+=a.on+a.off}else{if(e!==n)throw"Only horizontal or vertical dashed lines are supported";var c=Math.min(i,o);for(o=Math.max(i,o);c<o;)t.moveTo(e,c),t.lineTo(e,c+a.on),t.stroke(),c+=a.on+a.off}t.beginPath()}}else if("xor"===a.mode)if("undefined"==typeof Uint8ClampedArray)t.beginPath(),t.moveTo(e,i),t.lineTo(n,o),t.stroke(),t.beginPath();else{var u=0,d=0;if(i===o)u=Math.abs(n-e),d=l,e=Math.min(e,n);else{if(e!==n)throw"Only horizontal and vertical lines can be drawn with XOR";u=l,d=Math.abs(o-i),i=Math.min(i,o)}if(0===u||0===d)return;e=Math.floor(e),i=Math.floor(i);for(var f=t.getImageData(e,i,u,d),x=f.data,m=0,p=x.length;m<p;m+=4)x[m]=255-x[m],x[m+1]=255-x[m+1],x[m+2]=255-x[m+2],x[m+3]=255;t.putImageData(f,e,i),t.clearRect(0,0,1,1)}}else t.beginPath(),t.moveTo(e,i),t.lineTo(n,o),t.stroke(),t.beginPath()}function _(t,e,i,n,r){b(t,e,r),i&&(t.strokeStyle=i),n&&(t.fillStyle=n),t.fill(),t.closePath()}function b(t,e,i){if(!(e.length<1)){var n=e[0].x,r=e[0].y;t.lineWidth=i||1,t.beginPath(),t.moveTo(n,r);for(var o=0;o<e.length;o++)n=e[o].x,r=e[o].y,t.lineTo(n,r)}}function g(t){return Math.floor(Math.round(t/100*255))}function w(t,e,i){return"rgb("+Math.round(t)+", "+Math.round(e)+", "+Math.round(i)+")"}function k(t,e){var i,n;if(".000000"===t.substring(5,8))i=4;else for(i=t.length-1;"0"===t[i];)i-=1;for(n=0;" "===t[n]&&(i-n+1>5||e);)n+=1;var r=t.substring(n,i+1);return-1===r.indexOf(".")&&(r+="."),r}function M(t,e,i,n,r,o){var a=new Uint32Array(e);r||(r=e.width),o||(o=e.height),i||(i=0),n||(n=0);for(var s=t.width,l=t.height,h=t.getContext("2d"),c=h.createImageData(s,l),u=new ArrayBuffer(c.data.length),d=new Uint8ClampedArray(u),f=new Uint32Array(u),x=r/s,m=o/l,p=0,y=0,v=0,_=0;_<f.length;_++)p=Math.round(Math.floor(_%s)*x)+i,y=Math.round(Math.floor(_/s)*m)+n,v=Math.floor(y*e.width+p),f[_]=a[v];c.data.set(d),h.putImageData(c,0,0)}s.menu=function(t,e){if(t.useDomMenu)new s.DomMenu(t,e);else{var i=1.5*t.text_h,n=t.canvas.height-70,r=1.5*t.text_h,o=Math.floor(n/r);if(o>=e.items.length?f.n_show=e.items.length:f.n_show=o,e){if(!t.widget){e.x=t.xpos,e.y=t.ypos,e.val=0,e.h=2*f.GBorder+i*f.n_show+f.toplab*(i+f.GBorder)-1,e.y=e.y-((f.toplab+Math.max(1,e.val)-.5)*i+(1+f.toplab)*f.GBorder)+1;for(var a=e.title.length,l=0,h=0;h<e.items.length;h++){var c=e.items[h];a=Math.max(a,c.text.length),"checkbox"===c.style&&(a+=2),"separator"===c.style&&(a+=2),c.checked&&"checkbox"!==c.style&&(l=i*h)}e.queue=[];for(var u=0;u<f.n_show;u++)e.queue.push(u);e.y=e.y-l,a+=2,a*=t.text_w,e.w=2*f.GBorder+Math.abs(f.sidelab)+a-1,e.x=e.x-e.w/2,t.menu=e,t.widget={type:"MENU",callback:function(i){p(t,e,i)}}}x(t,e)}}},s.widgetbox=function(t,e,i,n,r,o,a,l,h,c){if(s.shadowbox(t,e,i,n,r,1,2,"",.75),c){var u=c.length;u=Math.min(u,n/t.text_w);var d=e+(n-(u=Math.max(u,1))*t.text_w)/2,f=(i+=3)+(a-i+.7*t.text_h)/2;s.text(t,d,f,c,t.xwfg)}if(l>0&&h>0){var x=t.active_canvas.getContext("2d");s.LEGACY_RENDER?(x.fillStyle=t.bg,x.fillRect(o,a,l,h)):(x.save(),x.globalAlpha=.1,x.fillStyle=t.bg,x.fillRect(o,a,l,h),x.restore())}},s.text=function(t,e,i,n,r){var o=t.active_canvas.getContext("2d");if(e=Math.max(0,e),i=Math.max(0,i),e<0||i<0)throw"On No!";o.textBaseline="bottom",o.textAlign="left",o.font=t.font.font,o.fillStyle=void 0===r?t.fg:r,o.fillText(n,e,i)},s.getcolor=function(t,e,i){for(var n=0;n<6&&0===e[n+1].pos;n++);for(;i>e[n].pos&&n<6;)n++;if(0===n||i>=e[n].pos)return w(g(e[n].red),g(e[n].green),g(e[n].blue));var r=g(100*((i-e[n-1].pos)/(e[n].pos-e[n-1].pos))),o=255-r;return w(r*(e[n].red/100)+o*(e[n-1].red/100),r*(e[n].green/100)+o*(e[n-1].green/100),r*(e[n].blue/100)+o*(e[n-1].blue/100))},s.redraw_warpbox=function(t){t.warpbox&&(t._animationFrameHandle&&cancelAnimFrame(t._animationFrameHandle),t._animationFrameHandle=requestAnimFrame(function(){!function(t){t._animationFrameHandle=void 0;var e=t.warpbox;t.active_canvas.getContext("2d");if(!e)return;if(t.xpos>=e.xmin&&t.xpos<=e.xmax&&t.ypos>=e.ymin&&t.ypos<=e.ymax){e.xl=t.xpos,e.yl=t.ypos;var i=Math.min(e.xo,e.xl),n=Math.min(e.yo,e.yl),r=Math.abs(e.xl-e.xo),o=Math.abs(e.yl-e.yo);if(0===r||0===o)return;"vertical"===e.mode?(i=t.l,r=t.r-t.l):"horizontal"===e.mode&&(n=t.t,o=t.b-t.t),s.onWidgetLayer(t,function(){s.erase_window(t),s.draw_box(t,"xor",i,n,r,o,e.style.opacity,e.style.fill_color)})}}(t)}))},s.format_g=function(t,e,i,n){e=Math.min(e,i+7);var r=Math.abs(t).toString(),o=r.indexOf(".");-1===o&&(o=(r+=".").length);var a=0,l=r.indexOf("e");-1!==l&&(a=parseInt(r.slice(l+1,r.length),10),r=r.slice(0,l));for(var h=Math.min(i-(r.length-o)+1,i),c=0;c<h;c++)r+="0";if(0!==t)if(Math.abs(t)<1)if("0."===r.slice(0,2))for(c=2;c<r.length;c++){if("0"!==r[c]){r="0."+r.slice(c,c+i);break}a-=1}else r=r.slice(0,i+2);else if(o>i){a=Math.max(0,o-1);r=r[0]+"."+r.slice(1,i+1)}else r=r.slice(0,i+2);if(0===a)r+="    ";else{var u=s.pad(Math.abs(a).toString(),2,"0");r=a<0?r+"E-"+u:r+"E+"+u}return r=t<0?"-"+r:" "+r},s.format_f=function(t,e,i){i=Math.max(Math.min(i,20),0);var n=t.toFixed(i).toString();return n=s.pad(n,e+i," ")},s.pad=function(t,e,i){for(;t.length<e;)t=i+t;return t},s.legacy_shadowbox=function(t,e,i,n,r,o,l,h){for(var c=h.length,u=0,d=0,f=0,x=[],m=0;m<11;m++)x[m]={x:0,y:0};var p=!(1===l||-1===l);o===s.L_ArrowLeft||s.L_ArrowUp;if(0!==l&&s.GBorder>0&&(f=a.trunc(Math.min(n,r)/3),f=Math.max(1,Math.min(f,s.GBorder))),f>0){switch(x[0].x=x[1].x=e,x[8].x=x[9].x=e+n,x[1].y=x[8].y=i,x[0].y=x[9].y=i+r,o){case s.L_ArrowLeft:x[0].y=x[1].y=i+a.trunc(r/2),e+=2,--n;break;case s.L_ArrowRight:x[8].y=x[9].y=i+a.trunc(r/2),--e,--n;break;case s.L_ArrowUp:x[1].x=x[8].x=e+a.trunc(n/2),i+=2,--r;break;case s.L_ArrowDown:x[0].x=x[9].x=e+a.trunc(n/2),--i,--r}x[2]=x[8],x[10]=x[0],e+=f,i+=f,n-=2*f,r-=2*f}switch(x[4].x=x[5].x=e,x[3].x=x[6].x=e+n,x[3].y=x[4].y=i,x[5].y=x[6].y=i+r,o){case s.L_ArrowLeft:x[4].y=x[5].y=i+a.trunc(r/2);break;case s.L_ArrowRight:x[3].y=x[6].y=i+a.trunc(r/2);break;case s.L_ArrowUp:x[3].x=x[4].x=e+a.trunc(n/2);break;case s.L_ArrowDown:x[5].x=x[6].x=e+a.trunc(n/2)}x[7]=x[3];var y=t.active_canvas.getContext("2d");f>0&&(y.fillStyle=l>0?t.xwts:t.xwbs,_(y,x.slice(0,7)),y.fillStyle=l<0?t.xwts:t.xwbs,_(y,x.slice(5,11))),p&&(y.fillStyle=t.xwbg,_(y,x.slice(3,8))),y.fillStyle=t.xwfg,y.textBaseline="alphabetic",p&&c>0&&(c=Math.min(c,a.trunc(n/t.text_w)),c=Math.max(c,1),u=e+a.trunc((n-c*t.text_w)/2),d=i+a.trunc((r+.7*t.text_h)/2),y.fillText(h,u,d))},s.sigplot_shadowbox=function(t,e,i,n,r,o,l,h,c){var u=t.active_canvas.getContext("2d"),d=h.length,f=l<0?t.xwts:t.xwbs;c=c||1;for(var x=[],m=0;m<11;m++)x[m]={x:0,y:0};switch(o){case s.L_ArrowLeft:case s.L_ArrowRight:case s.L_ArrowUp:case s.L_ArrowDown:x=s.chevron(o,e,i,n,r);u.fillStyle=l>0?t.xwts:t.xwbs,_(u,x.slice(0,6));break;default:s.draw_round_box(t,f,e,i,n,r,c,t.xwbg,5,t.xwbs)}if(u.fillStyle=t.xwfg,u.textBaseline="alphabetic",!(1===l||-1===l)&&d>0){d=Math.min(d,a.trunc(n/t.text_w)),d=Math.max(d,1);var p=e+a.trunc((n-d*t.text_w)/2),y=i+a.trunc((r+.7*t.text_h)/2);u.fillText(h,p,y)}},s.LEGACY_RENDER?s.shadowbox=s.legacy_shadowbox:s.shadowbox=s.sigplot_shadowbox,s.chevron=function(t,e,i,n,r,o){var l=Math.min(n,r);o||(o=.25*l);for(var h=[],c=0;c<6;c++)h[c]={x:0,y:0};var u=a.trunc((n-l)/2+l/4-o/2.828),d=a.trunc((r-l)/2+l/4-o/2.828);switch(t){case s.L_ArrowLeft:h[0].x=e+u,h[0].y=i+a.trunc(l/2),h[1].x=e+u+a.trunc(l/2),h[1].y=i,h[2].x=e+u+a.trunc(l/2+o/1.414),h[2].y=i+a.trunc(o/1.414),h[3].x=e+u+a.trunc(2*o/1.414),h[3].y=i+a.trunc(l/2),h[4].x=e+u+a.trunc(l/2+o/1.414),h[4].y=i+r-a.trunc(o/1.414),h[5].x=e+u+a.trunc(l/2),h[5].y=i+l;break;case s.L_ArrowRight:h[0].x=e+n-u,h[0].y=i+a.trunc(l/2),h[1].x=e+n-u-a.trunc(l/2),h[1].y=i,h[2].x=e+n-u-a.trunc(l/2+o/1.414),h[2].y=i+a.trunc(o/1.414),h[3].x=e+n-u-a.trunc(2*o/1.414),h[3].y=i+a.trunc(l/2),h[4].x=e+n-u-a.trunc(l/2+o/1.414),h[4].y=i+r-a.trunc(o/1.414),h[5].x=e+n-u-a.trunc(l/2),h[5].y=i+l;break;case s.L_ArrowUp:h[0].x=e+a.trunc(l/2),h[0].y=i+d,h[1].x=e,h[1].y=i+d+a.trunc(l/2),h[2].x=e+a.trunc(o/1.414),h[2].y=i+d+a.trunc(l/2+o/1.414),h[3].x=e+a.trunc(l/2),h[3].y=i+d+a.trunc(2*o/1.414),h[4].x=e+n-a.trunc(o/1.414),h[4].y=i+d+a.trunc(l/2+o/1.414),h[5].x=e+l,h[5].y=i+d+a.trunc(l/2);break;case s.L_ArrowDown:h[0].x=e+a.trunc(l/2),h[0].y=i+r-d,h[1].x=e,h[1].y=i+r-d-a.trunc(l/2),h[2].x=e+a.trunc(o/1.414),h[2].y=i+r-d-a.trunc(l/2+o/1.414),h[3].x=e+a.trunc(l/2),h[3].y=i+r-d-a.trunc(2*o/1.414),h[4].x=e+n-a.trunc(o/1.414),h[4].y=i+r-d-a.trunc(l/2+o/1.414),h[5].x=e+l,h[5].y=i+r-d-a.trunc(l/2)}return h},s.ifevent=function(t,e){t.button_press=0,t.button_release=0,t.state_mask=0;var i=e.target.getBoundingClientRect(),n=void 0===e.offsetX?e.pageX-i.left-window.scrollX:e.offsetX,r=void 0===e.offsetX?e.pageY-i.top-window.scrollY:e.offsetY;switch(e.type){case"mousedown":switch(t.xpos=a.bound(n,0,t.width),t.ypos=a.bound(r,0,t.height),e.which){case 1:t.button_press=1;break;case 2:t.button_press=2;break;case 3:t.button_press=3;break;case 4:t.button_press=4;break;case 5:t.button_press=5}break;case"mouseup":switch(t.xpos=a.bound(n,0,t.width),t.ypos=a.bound(r,0,t.height),e.which){case 1:t.button_release=1;break;case 2:t.button_release=2;break;case 3:t.button_release=3;break;case 4:t.button_release=4;break;case 5:t.button_release=5}}},s.scroll_real2pix=function(t){return 0===t.range?{s1:t.a1,sw:t.a2-t.a1}:(e=(t.a2-t.a1)/t.trange,n=(i=t.a1+Math.floor(.5+(t.smin-t.tmin)*e))+Math.floor(.5+t.srange*e),i=i>t.a2-t.swmin?t.a2-t.swmin:Math.max(i,t.a1),n=n<t.a1+t.swmin?t.a1+t.swmin:Math.min(n,t.a2),{s1:i,sw:Math.max(n-i,t.swmin)});var e,i,n},s.redrawScrollbar=function(t,e,i){var n,r,o,l,h,c,u,d,f,x,m=e.active_canvas.getContext("2d"),p=s.scroll_real2pix(t);if(f=p.s1,x=p.sw,u=f,d=t.s1,o=t.x,l=t.y,h=t.w,c=t.h,1&t.origin){if(r=l+c/2,2&t.origin&&(d=h-d-t.sw,u=h-u-x),i===s.XW_DRAW){var y=t.arrow;s.shadowbox(e,o,l,y,c-1,s.L_ArrowLeft,2,"",0),s.shadowbox(e,o+h-y,l,y-1,c,s.L_ArrowRight,2,"",0)}if(s.LEGACY_RENDER)s.draw_line(e,e.fg,o+t.a1,r,o+t.a2,r),s.shadowbox(e,o+u,l,x+1,c,1,2,"",0);else(v=m.createLinearGradient(o+t.a1,0,o+t.a2,0)).addColorStop(0,e.xwbs),v.addColorStop(.5,e.xwts),v.addColorStop(1,e.xwbs),s.draw_line(e,v,o+t.a1,r,o+t.a2,r,1),(v=m.createLinearGradient(0,l,0,l+c)).addColorStop(.1,e.xwts),v.addColorStop(.75,e.xwbs),s.draw_round_box(e,e.xwbg,o+u,l,x+1,c,1,v,8,e.xwbs)}else{if(n=o+a.trunc(h/2),t.origin<=2&&(d=c-d-t.sw,u=c-u-x),i===s.XW_DRAW){y=t.arrow;s.shadowbox(e,o,l,h-1,y,s.L_ArrowUp,2,"",0),s.shadowbox(e,o,l+c-y,h-1,y,s.L_ArrowDown,2,"",0)}var v;if(s.LEGACY_RENDER)s.draw_line(e,e.fg,n,l+t.a1,n,l+t.a2),s.shadowbox(e,o,l+u,h,x+1,1,2,"",0);else(v=m.createLinearGradient(0,l+t.a1,0,l+t.a2)).addColorStop(0,e.xwbs),v.addColorStop(.5,e.xwts),v.addColorStop(1,e.xwbs),s.draw_line(e,v,n,l+t.a1,n,l+t.a2,1),(v=m.createLinearGradient(o,0,o+h,0)).addColorStop(.1,e.xwts),v.addColorStop(.75,e.xwbs),s.draw_round_box(e,e.xwbg,o-1,l+u,h,x+1,1,v,8,e.xwbs)}t.s1=f,t.sw=x},s.real_to_pixel=function(t,e,i,n){var r=s.origin(t.origin,4,t.stk[t.level]);if(0===r.xscl||0===r.yscl)return{x:0,y:0};var o=r.x1,a=r.y1,l=r.xmin,h=1/r.xscl,c=r.ymin,u=1/r.yscl,d=!1,f=!1;return null!==e&&(d=e>r.xmax||e<r.xmin,n&&(e=Math.min(e,r.xmax),e=Math.max(e,r.xmin)),e=Math.round((e-l)*h)+o),null!==i&&(f=i>r.ymin||i<r.ymax,n&&(i=Math.min(i,r.ymin),i=Math.max(i,r.ymax)),i=Math.round((i-c)*u)+a),{x:e=Math.round(e),y:i=Math.round(i),clipped_x:d,clipped_y:f,clipped:d||f}},s.pixel_to_real=function(t,e,i){var n=Math.min(t.r,Math.max(t.l,e)),r=Math.min(t.b,Math.max(t.t,i)),o=t.level;return{x:2!==t.origin&&3!==t.origin?t.stk[o].xmin+(n-t.stk[o].x1)*t.stk[o].xscl:t.stk[o].xmin+(t.stk[o].x2-n)*t.stk[o].xscl,y:t.origin>2?t.stk[o].ymin+(r-t.stk[o].y1)*t.stk[o].yscl:t.stk[o].ymin+(t.stk[o].y2-r)*t.stk[o].yscl}},s.colormap=function(t,e,i){t.pixel=new n(e,{ncolors:i})},s.colorbar=function(t,e,i,n,r){if(t.pixel){t.pixel.setRange(0,t.pixel.map.length);for(var o=1;o<r;o++){var l=Math.floor(t.pixel.map.length*(o-1)/r);s.draw_line(t,l,e,i+r-o,e+n,i+r-o)}s.draw_box(t,t.fg,e+.5,i,n,r)}else a.log.warn("COLORMAP not initialized, cannot draw colorbar")},s.legend_colorbar=function(t,e,i,n,r){for(var o=1;o<n;o++){var a=Math.floor(t.pixel.length*(o-1)/n);s.draw_line(t,a,e+n-o,i,e+n-o,i+r)}s.draw_box(t,t.fg,e+.5,i,n,r)};var S="undefined"==typeof Uint8ClampedArray?function(t,e,i,n,r,o,a,s,l,h,c,u,d){void 0===h&&(h=0),void 0===c&&(c=0),void 0===u&&(u=i.width-h),void 0===d&&(d=i.height-c),t._renderCanvas.width=i.width,t._renderCanvas.height=i.height;for(var f=t._renderCanvas.getContext("2d"),x=f.createImageData(t._renderCanvas.width,t._renderCanvas.height),m=new Uint8Array(i),p=0;p<i.height;++p)for(var y=0;y<i.width;++y){var v=4*(p*i.width+y);x.data[v]=m[v],x.data[v+1]=m[v+1],x.data[v+2]=m[v+2],x.data[v+3]=255}f.putImageData(x,0,0),e.save(),e.globalAlpha=n,r||(e.imageSmoothingEnabled=!1,e.mozImageSmoothingEnabled=!1,e.webkitImageSmoothingEnabled=!1),e.drawImage(t._renderCanvas,h,c,u,d,o,a,s,l),e.restore()}:function(t,e,i,n,r,o,a,s,l,h,c,u,d){if(void 0===h&&(h=0),void 0===c&&(c=0),void 0===u&&(u=i.width-h),void 0===d&&(d=i.height-c),i.width<32768&&i.height<32768){t._renderCanvas.width=i.width,t._renderCanvas.height=i.height;var f=t._renderCanvas.getContext("2d"),x=f.createImageData(t._renderCanvas.width,t._renderCanvas.height),m=new Uint8ClampedArray(i);x.data.set(m),f.putImageData(x,0,0)}else u<32768&&d<32768?(t._renderCanvas.width=u,t._renderCanvas.height=d,M(t._renderCanvas,i,h,c,u,d)):(t._renderCanvas.width=Math.min(2*s,i.width),t._renderCanvas.height=Math.min(2*l,i.height),M(t._renderCanvas,i,h,c,u,d),u=t._renderCanvas.width,d=t._renderCanvas.height),h=0,c=0;e.save(),e.globalAlpha=n,r||(e.imageSmoothingEnabled=!1,e.mozImageSmoothingEnabled=!1,e.webkitImageSmoothingEnabled=!1),e.drawImage(t._renderCanvas,h,c,u,d,o,a,s,l),e.restore()};s.shift_image_rows=function(t,e,i){var n=new Uint32Array(e);return i>0?(i*=e.width,n.set(n.subarray(0,n.length-i),i)):i<0&&(i=Math.abs(i)*e.width,n.set(n.subarray(i))),e},s.update_image_row=function(t,e,i,n,r,o,a){var s=new Uint32Array(e,n*e.width*4,e.width);t.pixel.setRange(r,o);for(var l=Math.max(1,i.length/e.width),h=0;h<e.width;h++){var c=Math.floor(h*l),u=i[c];if(l>1)if(1===a){for(var d=1;d<l;d++)u+=i[c+d];u/=l}else if(2===a)for(d=1;d<l;d++)u=Math.min(u,i[c+d]);else if(3===a)for(d=1;d<l;d++)u=Math.max(u,i[c+d]);else if(4===a)u=i[h];else if(5===a)for(d=1;d<l;d++)u=Math.max(Math.abs(u),Math.abs(i[c+d]));var f=t.pixel.getColor(u);f&&(s[h]=f.color)}return s},s.create_image=function(t,e,i,r,o,s,l,h){t.active_canvas.getContext("2d");t.pixel||(console.log("COLORMAP not initialized, defaulting to foreground"),t.pixel=new n(a.Mc.colormap[1].colors)),t.pixel.setRange(s,l),r=Math.ceil(r),o=Math.ceil(o);var c=new ArrayBuffer(r*o*4);c.width=r,c.height=o;var u=Math.max(1,i/r),d=new Uint32Array(c);if(e)for(var f=0;f<d.length;f++){var x,m;if(x=1===t.origin||4===t.origin?Math.floor(f%r):r-Math.floor(f%r)-1,1===(m=3===t.origin||4===t.origin?Math.floor(f/r):o-Math.floor(f/r)-1));var p=m*i+Math.floor(x*u),y=e[p];if(u>1)if(1===h){for(var v=1;v<u;v++)y+=e[p+v];y/=u}else if(2===h)for(v=1;v<u;v++)y=Math.min(y,e[p+v]);else if(3===h)for(v=1;v<u;v++)y=Math.max(y,e[p+v]);else if(4===h)y=e[p];else if(5===h)for(v=1;v<u;v++)y=Math.max(Math.abs(y),Math.abs(e[p+v]));var _=t.pixel.getColor(y);_&&(d[f]=_.color)}return c},s.put_image=function(t,e,i,r,o,s,l,h,c,u,d){var f,x,m=t.active_canvas.getContext("2d");t.pixel||(a.log.warn("COLORMAP not initialized, defaulting to foreground"),t.pixel=new n(a.Mc.colormap[1].colors)),f=o>0?i*o:-o,f=Math.floor(f),x=Math.floor(r*s);var p=new ArrayBuffer(f*x*4);p.width=f,p.height=x;for(var y=new Uint32Array(p),v=0;v<y.length;v++){var _=t.pixel.getColor(e[v]);_&&(y[v]=_.color)}return S(t,m,p,u,d,l,h,f,x),p},s.draw_image=function(t,e,i,n,r,o,a,l){var h=Math.max(i,t.stk[t.level].xmin),c=Math.min(r,t.stk[t.level].xmax),u=Math.max(n,t.stk[t.level].ymin),d=Math.min(o,t.stk[t.level].ymax);if(!(e.width<=1||0===Math.abs(r-i)||e.height<=1||0===Math.abs(o-n))){var f,x,m,p,y,v,_=e.width/(r-i),b=e.height/(o-n);h=Math.floor(h*_)/_,c=Math.ceil(c*_)/_,u=Math.floor(u*b)/b,d=Math.ceil(d*b)/b,1===t.origin?(m=Math.max(0,Math.floor((o-d)*b)),v=Math.min(e.height-m,Math.floor((d-u)*b)),p=Math.max(0,Math.floor((h-i)*_)),y=Math.min(e.width-p,Math.floor((c-h)*_)),f=s.real_to_pixel(t,h,d),x=s.real_to_pixel(t,c,u)):2===t.origin?(m=Math.max(0,Math.floor((o-d)*b)),v=Math.min(e.height-m,Math.floor((d-u)*b)),p=Math.max(0,Math.ceil((h-i)*_)),y=Math.min(e.width-p,Math.floor((c-h)*_)),f=s.real_to_pixel(t,c,d),x=s.real_to_pixel(t,h,u)):3===t.origin?(m=Math.max(0,Math.ceil((u-n)*b)),v=Math.min(e.height-m,Math.floor((d-u)*b)),p=Math.max(0,Math.ceil((h-i)*_)),y=Math.min(e.width-p,Math.floor((c-h)*_)),f=s.real_to_pixel(t,c,u),x=s.real_to_pixel(t,h,d)):4===t.origin&&(m=Math.max(0,Math.ceil((u-n)*b)),v=Math.min(e.height-m,Math.floor((d-u)*b)),p=Math.max(0,Math.floor((h-i)*_)),y=Math.min(e.width-p,Math.floor((c-h)*_)),f=s.real_to_pixel(t,h,u),x=s.real_to_pixel(t,c,d));var g=x.x-f.x,w=x.y-f.y;if(y=Math.max(1,y),v=Math.max(1,v),"number"==typeof l)l=(t.r-t.l)/y<=l;var k=t.active_canvas.getContext("2d");k.save(),k.beginPath(),k.rect(t.l,t.t,t.r-t.l,t.b-t.t),k.clip(),S(t,k,e,a,l,f.x,f.y,g,w,p,m,y,v),k.restore()}},t.exports=s}()},function(t,e,i){
/**
 * @license
 * File: bluefile.js
 * Copyright (c) 2012-2017, LGS Innovations Inc., All rights reserved.
 *
 * This file is part of SigPlot.
 *
 * Licensed to the LGS Innovations (LGS) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  LGS licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 *
 */
!function(){"use strict";var e=function(t,e,i){return t instanceof ArrayBuffer||"number"!=typeof t?(this.buffer=e&&i?t.slice(e,e+i/8):t,this.u8=new Uint8Array(this.buffer)):(this.buffer=new ArrayBuffer(t/8),this.u8=new Uint8Array(this.buffer)),new Proxy(this,{get:(t,e)=>t[e]?t[e]:t.getBit(e)})};e.prototype.getBit=function(t){return this.u8[t>>3]>>7-(7&t)&1},Object.defineProperty(e.prototype,"length",{get:function(){return 8*this.u8.byteLength}}),e.prototype.setBit=function(t,e){var i=7&t;e?this.u8[t>>3]|=128>>i:this.u8[t>>3]&=~(128>>i)},e.prototype.set=function(t){for(let e=0,i=t.length;e<i;e++)this.setBit(e,t[e])},e.prototype.subarray=function(t,e){let i=[];t=t||0,e=(e=e||this.length)>this.length?this.length:e;for(let n=t;n<e;n++)i.push(this.getBit(n));return i};var n=i(3);function r(){}navigator.userAgent.match(/(iPad|iPhone|iPod)/i);var o=function(){var t=new ArrayBuffer(4),e=new Uint32Array(t),i=new Uint8Array(t);if(e[0]=3735928559,239===i[0])return"LE";if(222===i[0])return"BE";throw new Error("unknown endianness")}(),a={S:1,C:2,V:3,Q:4,M:9,X:10,T:16,U:1,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9},s={P:.125,A:1,O:1,B:1,I:2,L:4,X:8,F:4,D:8},l={P:e,A:null,O:Uint8Array,B:Int8Array,I:Int16Array,L:Int32Array,X:null,F:Float32Array,D:Float64Array};var h={P:null,A:null,O:"getUint8",B:"getInt8",I:"getInt16",L:"getInt32",X:function(t,e,i){var n,r,o=Math.pow(2,53);i?(n=4,r=0):(n=0,r=4);var a=t.getInt32(e+n,i),s=t.getInt32(e+r,i)+f(32)*a;return s>=o?(window.console.info("Int is bigger than JS can represent."),1/0):s},F:"getFloat32",D:"getFloat64"},c=!0;try{var u=new Uint8Array(new ArrayBuffer(4));u[0]=66,u[1]=76,u[2]=85,u[3]=69,"BLUE"!==String.fromCharCode.apply(null,u)&&(c=!1)}catch(t){c=!1}function d(t){var e=new Uint8Array(t);if(c)return String.fromCharCode.apply(null,e);for(var i="",n=0;n<e.length;n++)i+=String.fromCharCode(e[n]);return i}function f(t){return t>=0&&t<31?1<<t:f[t]||(f[t]=Math.pow(2,t))}function x(t){var e=document.createElement("a");return e.href=t,{source:t,protocol:e.protocol.replace(":",""),host:e.hostname,port:e.port,query:e.search,params:function(){for(var t,i={},n=e.search.replace(/^\?/,"").split("&"),r=n.length,o=0;o<r;o++)n[o]&&(i[(t=n[o].split("="))[0]]=t[1]);return i}(),file:(e.pathname.match(/\/([^\/?#]+)$/i)||[null,""])[1],hash:e.hash.replace("#",""),path:e.pathname.replace(/^([^\/])/,"/$1"),relative:(e.href.match(/tps?:\/\/[^\/]+(.+)/)||[null,""])[1],segments:e.pathname.replace(/^\//,"").split("/")}}r.BlueHeader=function(t,e){if(this.options={ext_header_type:"dict"},n.update(this.options,e),this.buf=t,null!=this.buf){var i=new DataView(this.buf);this.version=d(this.buf.slice(0,4)),this.headrep=d(this.buf.slice(4,8)),this.datarep=d(this.buf.slice(8,12));var r="EEEI"===this.headrep,o="EEEI"===this.datarep;this.ext_start=i.getInt32(24,r),this.ext_size=i.getInt32(28,r),this.type=i.getUint32(48,r),this.class=this.type/1e3,this.format=d(this.buf.slice(52,54)),this.timecode=i.getFloat64(56,r),1===this.class?(this.xstart=i.getFloat64(256,r),this.xdelta=i.getFloat64(264,r),this.xunits=i.getInt32(272,r),this.yunits=i.getInt32(296,r),this.subsize=1):2===this.class&&(this.xstart=i.getFloat64(256,r),this.xdelta=i.getFloat64(264,r),this.xunits=i.getInt32(272,r),this.subsize=i.getInt32(276,r),this.ystart=i.getFloat64(280,r),this.ydelta=i.getFloat64(288,r),this.yunits=i.getInt32(296,r)),this.data_start=i.getFloat64(32,r),this.data_size=i.getFloat64(40,r);var a=this.data_start,s=this.data_start+this.data_size;this.ext_size&&(this.ext_header=this.unpack_keywords(this.buf,this.ext_size,512*this.ext_start,r)),this.setData(this.buf,a,s,o)}},r.BlueHeader.prototype={setData:function(t,e,i,n){if(1===this.class?(this.spa=a[this.format[0]],this.bps=s[this.format[1]],this.bpa=this.spa*this.bps,this.ape=1,this.bpe=this.ape*this.bpa):2===this.class&&(this.spa=a[this.format[0]],this.bps=s[this.format[1]],this.bpa=this.spa*this.bps,this.ape=this.subsize,this.bpe=this.ape*this.bpa),void 0===n&&(n="LE"===o),"LE"===o&&!n)throw"Not supported "+o+" "+n;if("BE"===o&&this.littleEndianData)throw"Not supported "+o+" "+n;t?(this.dview=e&&i?this.createArray(t,e,(i-e)/this.bps):this.createArray(t),this.size=this.dview.length/(this.spa*this.ape)):this.dview=this.createArray(null,null,this.size)},unpack_keywords:function(t,e,i,n){var r,o,a,s,l,c,u,f,x,m=[],p={},y={},v=0;window.buf=t,t=t.slice(i,t.byteLength);var _=new DataView(t);for(t=d(t);v<e;)x=v+8,r=_.getUint32(v,n),o=_.getInt16(v+4,n),a=_.getInt8(v+6,n),s=t.slice(v+7,v+8),f=x+(u=r-o),l=t.slice(f,f+a),"A"===s?c=t.slice(x,x+u):h[s]?c="string"==typeof h[s]?_[h[s]](x,n):h[s](_,x,n):window.console.info("Unsupported keyword format "+s+" for tag "+l),void 0===p[l]?p[l]=1:(p[l]++,l=""+l+p[l]),y[l]=c,m.push({tag:l,value:c}),v+=r;var b=["dict","json",{},"XMTable","JSON","DICT"];for(var g in b)if(b[g]===this.options.ext_header_type)return y;return m},createArray:function(t,e,i){var n=l[this.format[1]];if(void 0===n)throw"unknown format "+this.format[1];return void 0===e&&(e=0),void 0===i&&(i=t.length||t.byteLength/s[this.format[1]]),t?(Array.isArray(t)&&Array.isArray(t[0])&&(t=[].concat.apply([],t)),new n(t,e,i)):new n(i)}},r.BlueFileReader=function(t){this.options=t},r.BlueFileReader.prototype={readheader:function(t,e){var i=this,n=new FileReader,o=t.webkitSlice(0,512);n.onloadend=function(t){return function(o){if(o.target.error)e(null);else{var a=n.result,s=new r.BlueHeader(a,i.options);s.file=t,e(s)}}}(t),n.readAsArrayBuffer(o)},read:function(t,e){var i=this,n=new FileReader;n.onloadend=function(t){return function(o){if(o.target.error)e(null);else{var a=n.result,s=new r.BlueHeader(a,i.options);s.file=t,s.file_name=t.name,e(s)}}}(t),n.readAsArrayBuffer(t)},read_http:function(t,e){var i=this,n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.overrideMimeType("text/plain; charset=x-user-defined"),n.onload=function(o){if(4!==n.readyState||200!==n.status&&0!==n.status)e(null);else{var a=null;if(n.response){a=n.response;var s=new r.BlueHeader(a,i.options);x(t);var l=x(t);s.file_name=l.file,e(s)}else n.responseText&&function(t,e,i){i=i||1024;var n=0,r=new ArrayBuffer(t.length),o=new Uint8Array(r),a=function(){for(var s=n+i;n<s;n++)o[n]=255&t.charCodeAt(n);n>=t.length?e(r):setTimeout(a,0)};setTimeout(a,0)}(n.responseText,function(n){var o=new r.BlueHeader(n,i.options);x(t);var a=x(t);o.file_name=a.file,e(o)})}},n.onerror=function(t){e(null)},n.send(null)}},t.exports=r}()},function(t,e,i){var n;!function(r){var o=/^\s+/,a=/\s+$/,s=0,l=r.round,h=r.min,c=r.max,u=r.random;function d(t,e){if(e=e||{},(t=t||"")instanceof d)return t;if(!(this instanceof d))return new d(t,e);var i=function(t){var e={r:0,g:0,b:0},i=1,n=null,s=null,l=null,u=!1,d=!1;"string"==typeof t&&(t=function(t){t=t.replace(o,"").replace(a,"").toLowerCase();var e,i=!1;if(z[t])t=z[t],i=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};if(e=W.rgb.exec(t))return{r:e[1],g:e[2],b:e[3]};if(e=W.rgba.exec(t))return{r:e[1],g:e[2],b:e[3],a:e[4]};if(e=W.hsl.exec(t))return{h:e[1],s:e[2],l:e[3]};if(e=W.hsla.exec(t))return{h:e[1],s:e[2],l:e[3],a:e[4]};if(e=W.hsv.exec(t))return{h:e[1],s:e[2],v:e[3]};if(e=W.hsva.exec(t))return{h:e[1],s:e[2],v:e[3],a:e[4]};if(e=W.hex8.exec(t))return{r:R(e[1]),g:R(e[2]),b:R(e[3]),a:B(e[4]),format:i?"name":"hex8"};if(e=W.hex6.exec(t))return{r:R(e[1]),g:R(e[2]),b:R(e[3]),format:i?"name":"hex"};if(e=W.hex4.exec(t))return{r:R(e[1]+""+e[1]),g:R(e[2]+""+e[2]),b:R(e[3]+""+e[3]),a:B(e[4]+""+e[4]),format:i?"name":"hex8"};if(e=W.hex3.exec(t))return{r:R(e[1]+""+e[1]),g:R(e[2]+""+e[2]),b:R(e[3]+""+e[3]),format:i?"name":"hex"};return!1}(t));"object"==typeof t&&(j(t.r)&&j(t.g)&&j(t.b)?(f=t.r,x=t.g,m=t.b,e={r:255*T(f,255),g:255*T(x,255),b:255*T(m,255)},u=!0,d="%"===String(t.r).substr(-1)?"prgb":"rgb"):j(t.h)&&j(t.s)&&j(t.v)?(n=N(t.s),s=N(t.v),e=function(t,e,i){t=6*T(t,360),e=T(e,100),i=T(i,100);var n=r.floor(t),o=t-n,a=i*(1-e),s=i*(1-o*e),l=i*(1-(1-o)*e),h=n%6;return{r:255*[i,s,a,a,l,i][h],g:255*[l,i,i,s,a,a][h],b:255*[a,a,l,i,i,s][h]}}(t.h,n,s),u=!0,d="hsv"):j(t.h)&&j(t.s)&&j(t.l)&&(n=N(t.s),l=N(t.l),e=function(t,e,i){var n,r,o;function a(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}if(t=T(t,360),e=T(e,100),i=T(i,100),0===e)n=r=o=i;else{var s=i<.5?i*(1+e):i+e-i*e,l=2*i-s;n=a(l,s,t+1/3),r=a(l,s,t),o=a(l,s,t-1/3)}return{r:255*n,g:255*r,b:255*o}}(t.h,n,l),u=!0,d="hsl"),t.hasOwnProperty("a")&&(i=t.a));var f,x,m;return i=P(i),{ok:u,format:t.format||d,r:h(255,c(e.r,0)),g:h(255,c(e.g,0)),b:h(255,c(e.b,0)),a:i}}(t);this._originalInput=t,this._r=i.r,this._g=i.g,this._b=i.b,this._a=i.a,this._roundA=l(100*this._a)/100,this._format=e.format||i.format,this._gradientType=e.gradientType,this._r<1&&(this._r=l(this._r)),this._g<1&&(this._g=l(this._g)),this._b<1&&(this._b=l(this._b)),this._ok=i.ok,this._tc_id=s++}function f(t,e,i){t=T(t,255),e=T(e,255),i=T(i,255);var n,r,o=c(t,e,i),a=h(t,e,i),s=(o+a)/2;if(o==a)n=r=0;else{var l=o-a;switch(r=s>.5?l/(2-o-a):l/(o+a),o){case t:n=(e-i)/l+(e<i?6:0);break;case e:n=(i-t)/l+2;break;case i:n=(t-e)/l+4}n/=6}return{h:n,s:r,l:s}}function x(t,e,i){t=T(t,255),e=T(e,255),i=T(i,255);var n,r,o=c(t,e,i),a=h(t,e,i),s=o,l=o-a;if(r=0===o?0:l/o,o==a)n=0;else{switch(o){case t:n=(e-i)/l+(e<i?6:0);break;case e:n=(i-t)/l+2;break;case i:n=(t-e)/l+4}n/=6}return{h:n,s:r,v:s}}function m(t,e,i,n){var r=[I(l(t).toString(16)),I(l(e).toString(16)),I(l(i).toString(16))];return n&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function p(t,e,i,n){return[I(D(n)),I(l(t).toString(16)),I(l(e).toString(16)),I(l(i).toString(16))].join("")}function y(t,e){e=0===e?0:e||10;var i=d(t).toHsl();return i.s-=e/100,i.s=O(i.s),d(i)}function v(t,e){e=0===e?0:e||10;var i=d(t).toHsl();return i.s+=e/100,i.s=O(i.s),d(i)}function _(t){return d(t).desaturate(100)}function b(t,e){e=0===e?0:e||10;var i=d(t).toHsl();return i.l+=e/100,i.l=O(i.l),d(i)}function g(t,e){e=0===e?0:e||10;var i=d(t).toRgb();return i.r=c(0,h(255,i.r-l(-e/100*255))),i.g=c(0,h(255,i.g-l(-e/100*255))),i.b=c(0,h(255,i.b-l(-e/100*255))),d(i)}function w(t,e){e=0===e?0:e||10;var i=d(t).toHsl();return i.l-=e/100,i.l=O(i.l),d(i)}function k(t,e){var i=d(t).toHsl(),n=(i.h+e)%360;return i.h=n<0?360+n:n,d(i)}function M(t){var e=d(t).toHsl();return e.h=(e.h+180)%360,d(e)}function S(t){var e=d(t).toHsl(),i=e.h;return[d(t),d({h:(i+120)%360,s:e.s,l:e.l}),d({h:(i+240)%360,s:e.s,l:e.l})]}function E(t){var e=d(t).toHsl(),i=e.h;return[d(t),d({h:(i+90)%360,s:e.s,l:e.l}),d({h:(i+180)%360,s:e.s,l:e.l}),d({h:(i+270)%360,s:e.s,l:e.l})]}function A(t){var e=d(t).toHsl(),i=e.h;return[d(t),d({h:(i+72)%360,s:e.s,l:e.l}),d({h:(i+216)%360,s:e.s,l:e.l})]}function C(t,e,i){e=e||6,i=i||30;var n=d(t).toHsl(),r=360/i,o=[d(t)];for(n.h=(n.h-(r*e>>1)+720)%360;--e;)n.h=(n.h+r)%360,o.push(d(n));return o}function L(t,e){e=e||6;for(var i=d(t).toHsv(),n=i.h,r=i.s,o=i.v,a=[],s=1/e;e--;)a.push(d({h:n,s:r,v:o})),o=(o+s)%1;return a}d.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,e,i,n=this.toRgb();return t=n.r/255,e=n.g/255,i=n.b/255,.2126*(t<=.03928?t/12.92:r.pow((t+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:r.pow((e+.055)/1.055,2.4))+.0722*(i<=.03928?i/12.92:r.pow((i+.055)/1.055,2.4))},setAlpha:function(t){return this._a=P(t),this._roundA=l(100*this._a)/100,this},toHsv:function(){var t=x(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=x(this._r,this._g,this._b),e=l(360*t.h),i=l(100*t.s),n=l(100*t.v);return 1==this._a?"hsv("+e+", "+i+"%, "+n+"%)":"hsva("+e+", "+i+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var t=f(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=f(this._r,this._g,this._b),e=l(360*t.h),i=l(100*t.s),n=l(100*t.l);return 1==this._a?"hsl("+e+", "+i+"%, "+n+"%)":"hsla("+e+", "+i+"%, "+n+"%, "+this._roundA+")"},toHex:function(t){return m(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return function(t,e,i,n,r){var o=[I(l(t).toString(16)),I(l(e).toString(16)),I(l(i).toString(16)),I(D(n))];if(r&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1))return o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0);return o.join("")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:l(this._r),g:l(this._g),b:l(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+l(this._r)+", "+l(this._g)+", "+l(this._b)+")":"rgba("+l(this._r)+", "+l(this._g)+", "+l(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:l(100*T(this._r,255))+"%",g:l(100*T(this._g,255))+"%",b:l(100*T(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+l(100*T(this._r,255))+"%, "+l(100*T(this._g,255))+"%, "+l(100*T(this._b,255))+"%)":"rgba("+l(100*T(this._r,255))+"%, "+l(100*T(this._g,255))+"%, "+l(100*T(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(G[m(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+p(this._r,this._g,this._b,this._a),i=e,n=this._gradientType?"GradientType = 1, ":"";if(t){var r=d(t);i="#"+p(r._r,r._g,r._b,r._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+e+",endColorstr="+i+")"},toString:function(t){var e=!!t;t=t||this._format;var i=!1,n=this._a<1&&this._a>=0;return e||!n||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(i=this.toRgbString()),"prgb"===t&&(i=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(i=this.toHexString()),"hex3"===t&&(i=this.toHexString(!0)),"hex4"===t&&(i=this.toHex8String(!0)),"hex8"===t&&(i=this.toHex8String()),"name"===t&&(i=this.toName()),"hsl"===t&&(i=this.toHslString()),"hsv"===t&&(i=this.toHsvString()),i||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return d(this.toString())},_applyModification:function(t,e){var i=t.apply(null,[this].concat([].slice.call(e)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(b,arguments)},brighten:function(){return this._applyModification(g,arguments)},darken:function(){return this._applyModification(w,arguments)},desaturate:function(){return this._applyModification(y,arguments)},saturate:function(){return this._applyModification(v,arguments)},greyscale:function(){return this._applyModification(_,arguments)},spin:function(){return this._applyModification(k,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(C,arguments)},complement:function(){return this._applyCombination(M,arguments)},monochromatic:function(){return this._applyCombination(L,arguments)},splitcomplement:function(){return this._applyCombination(A,arguments)},triad:function(){return this._applyCombination(S,arguments)},tetrad:function(){return this._applyCombination(E,arguments)}},d.fromRatio=function(t,e){if("object"==typeof t){var i={};for(var n in t)t.hasOwnProperty(n)&&(i[n]="a"===n?t[n]:N(t[n]));t=i}return d(t,e)},d.equals=function(t,e){return!(!t||!e)&&d(t).toRgbString()==d(e).toRgbString()},d.random=function(){return d.fromRatio({r:u(),g:u(),b:u()})},d.mix=function(t,e,i){i=0===i?0:i||50;var n=d(t).toRgb(),r=d(e).toRgb(),o=i/100;return d({r:(r.r-n.r)*o+n.r,g:(r.g-n.g)*o+n.g,b:(r.b-n.b)*o+n.b,a:(r.a-n.a)*o+n.a})},d.readability=function(t,e){var i=d(t),n=d(e);return(r.max(i.getLuminance(),n.getLuminance())+.05)/(r.min(i.getLuminance(),n.getLuminance())+.05)},d.isReadable=function(t,e,i){var n,r,o=d.readability(t,e);switch(r=!1,(n=function(t){var e,i;e=((t=t||{level:"AA",size:"small"}).level||"AA").toUpperCase(),i=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA");"small"!==i&&"large"!==i&&(i="small");return{level:e,size:i}}(i)).level+n.size){case"AAsmall":case"AAAlarge":r=o>=4.5;break;case"AAlarge":r=o>=3;break;case"AAAsmall":r=o>=7}return r},d.mostReadable=function(t,e,i){var n,r,o,a,s=null,l=0;r=(i=i||{}).includeFallbackColors,o=i.level,a=i.size;for(var h=0;h<e.length;h++)(n=d.readability(t,e[h]))>l&&(l=n,s=d(e[h]));return d.isReadable(t,s,{level:o,size:a})||!r?s:(i.includeFallbackColors=!1,d.mostReadable(t,["#fff","#000"],i))};var z=d.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},G=d.hexNames=function(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[t[i]]=i);return e}(z);function P(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function T(t,e){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(t)&&(t="100%");var i=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(t);return t=h(e,c(0,parseFloat(t))),i&&(t=parseInt(t*e,10)/100),r.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function O(t){return h(1,c(0,t))}function R(t){return parseInt(t,16)}function I(t){return 1==t.length?"0"+t:""+t}function N(t){return t<=1&&(t=100*t+"%"),t}function D(t){return r.round(255*parseFloat(t)).toString(16)}function B(t){return R(t)/255}var H,U,F,W=(U="[\\s|\\(]+("+(H="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+H+")[,|\\s]+("+H+")\\s*\\)?",F="[\\s|\\(]+("+H+")[,|\\s]+("+H+")[,|\\s]+("+H+")[,|\\s]+("+H+")\\s*\\)?",{CSS_UNIT:new RegExp(H),rgb:new RegExp("rgb"+U),rgba:new RegExp("rgba"+F),hsl:new RegExp("hsl"+U),hsla:new RegExp("hsla"+F),hsv:new RegExp("hsv"+U),hsva:new RegExp("hsva"+F),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function j(t){return!!W.CSS_UNIT.exec(t)}t.exports?t.exports=d:void 0===(n=function(){return d}.call(e,i,e,t))||(t.exports=n)}(Math)},function(t,e,i){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var i,a,s=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),l=1;l<arguments.length;l++){for(var h in i=Object(arguments[l]))r.call(i,h)&&(s[h]=i[h]);if(n){a=n(i);for(var c=0;c<a.length;c++)o.call(i,a[c])&&(s[a[c]]=i[a[c]])}}return s}},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";
/** @license React v16.8.6
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=i(9),r="function"==typeof Symbol&&Symbol.for,o=r?Symbol.for("react.element"):60103,a=r?Symbol.for("react.portal"):60106,s=r?Symbol.for("react.fragment"):60107,l=r?Symbol.for("react.strict_mode"):60108,h=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,u=r?Symbol.for("react.context"):60110,d=r?Symbol.for("react.concurrent_mode"):60111,f=r?Symbol.for("react.forward_ref"):60112,x=r?Symbol.for("react.suspense"):60113,m=r?Symbol.for("react.memo"):60115,p=r?Symbol.for("react.lazy"):60116,y="function"==typeof Symbol&&Symbol.iterator;function v(t){for(var e=arguments.length-1,i="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=0;n<e;n++)i+="&args[]="+encodeURIComponent(arguments[n+1]);!function(t,e,i,n,r,o,a,s){if(!t){if(t=void 0,void 0===e)t=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[i,n,r,o,a,s],h=0;(t=Error(e.replace(/%s/g,function(){return l[h++]}))).name="Invariant Violation"}throw t.framesToPop=1,t}}(!1,"Minified React error #"+t+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",i)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function g(t,e,i){this.props=t,this.context=e,this.refs=b,this.updater=i||_}function w(){}function k(t,e,i){this.props=t,this.context=e,this.refs=b,this.updater=i||_}g.prototype.isReactComponent={},g.prototype.setState=function(t,e){"object"!=typeof t&&"function"!=typeof t&&null!=t&&v("85"),this.updater.enqueueSetState(this,t,e,"setState")},g.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},w.prototype=g.prototype;var M=k.prototype=new w;M.constructor=k,n(M,g.prototype),M.isPureReactComponent=!0;var S={current:null},E={current:null},A=Object.prototype.hasOwnProperty,C={key:!0,ref:!0,__self:!0,__source:!0};function L(t,e,i){var n=void 0,r={},a=null,s=null;if(null!=e)for(n in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(a=""+e.key),e)A.call(e,n)&&!C.hasOwnProperty(n)&&(r[n]=e[n]);var l=arguments.length-2;if(1===l)r.children=i;else if(1<l){for(var h=Array(l),c=0;c<l;c++)h[c]=arguments[c+2];r.children=h}if(t&&t.defaultProps)for(n in l=t.defaultProps)void 0===r[n]&&(r[n]=l[n]);return{$$typeof:o,type:t,key:a,ref:s,props:r,_owner:E.current}}function z(t){return"object"==typeof t&&null!==t&&t.$$typeof===o}var G=/\/+/g,P=[];function T(t,e,i,n){if(P.length){var r=P.pop();return r.result=t,r.keyPrefix=e,r.func=i,r.context=n,r.count=0,r}return{result:t,keyPrefix:e,func:i,context:n,count:0}}function O(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>P.length&&P.push(t)}function R(t,e,i){return null==t?0:function t(e,i,n,r){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case o:case a:l=!0}}if(l)return n(r,e,""===i?"."+I(e,0):i),1;if(l=0,i=""===i?".":i+":",Array.isArray(e))for(var h=0;h<e.length;h++){var c=i+I(s=e[h],h);l+=t(s,c,n,r)}else if(c=null===e||"object"!=typeof e?null:"function"==typeof(c=y&&e[y]||e["@@iterator"])?c:null,"function"==typeof c)for(e=c.call(e),h=0;!(s=e.next()).done;)l+=t(s=s.value,c=i+I(s,h++),n,r);else"object"===s&&v("31","[object Object]"==(n=""+e)?"object with keys {"+Object.keys(e).join(", ")+"}":n,"");return l}(t,"",e,i)}function I(t,e){return"object"==typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,function(t){return e[t]})}(t.key):e.toString(36)}function N(t,e){t.func.call(t.context,e,t.count++)}function D(t,e,i){var n=t.result,r=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?B(t,n,i,function(t){return t}):null!=t&&(z(t)&&(t=function(t,e){return{$$typeof:o,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,r+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(G,"$&/")+"/")+i)),n.push(t))}function B(t,e,i,n,r){var o="";null!=i&&(o=(""+i).replace(G,"$&/")+"/"),R(t,D,e=T(e,o,n,r)),O(e)}function H(){var t=S.current;return null===t&&v("321"),t}var U={Children:{map:function(t,e,i){if(null==t)return t;var n=[];return B(t,n,null,e,i),n},forEach:function(t,e,i){if(null==t)return t;R(t,N,e=T(null,null,e,i)),O(e)},count:function(t){return R(t,function(){return null},null)},toArray:function(t){var e=[];return B(t,e,null,function(t){return t}),e},only:function(t){return z(t)||v("143"),t}},createRef:function(){return{current:null}},Component:g,PureComponent:k,createContext:function(t,e){return void 0===e&&(e=null),(t={$$typeof:u,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:t},t.Consumer=t},forwardRef:function(t){return{$$typeof:f,render:t}},lazy:function(t){return{$$typeof:p,_ctor:t,_status:-1,_result:null}},memo:function(t,e){return{$$typeof:m,type:t,compare:void 0===e?null:e}},useCallback:function(t,e){return H().useCallback(t,e)},useContext:function(t,e){return H().useContext(t,e)},useEffect:function(t,e){return H().useEffect(t,e)},useImperativeHandle:function(t,e,i){return H().useImperativeHandle(t,e,i)},useDebugValue:function(){},useLayoutEffect:function(t,e){return H().useLayoutEffect(t,e)},useMemo:function(t,e){return H().useMemo(t,e)},useReducer:function(t,e,i){return H().useReducer(t,e,i)},useRef:function(t){return H().useRef(t)},useState:function(t){return H().useState(t)},Fragment:s,StrictMode:l,Suspense:x,createElement:L,cloneElement:function(t,e,i){null==t&&v("267",t);var r=void 0,a=n({},t.props),s=t.key,l=t.ref,h=t._owner;if(null!=e){void 0!==e.ref&&(l=e.ref,h=E.current),void 0!==e.key&&(s=""+e.key);var c=void 0;for(r in t.type&&t.type.defaultProps&&(c=t.type.defaultProps),e)A.call(e,r)&&!C.hasOwnProperty(r)&&(a[r]=void 0===e[r]&&void 0!==c?c[r]:e[r])}if(1===(r=arguments.length-2))a.children=i;else if(1<r){c=Array(r);for(var u=0;u<r;u++)c[u]=arguments[u+2];a.children=c}return{$$typeof:o,type:t.type,key:s,ref:l,props:a,_owner:h}},createFactory:function(t){var e=L.bind(null,t);return e.type=t,e},isValidElement:z,version:"16.8.6",unstable_ConcurrentMode:d,unstable_Profiler:h,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:S,ReactCurrentOwner:E,assign:n}},F={default:U},W=F&&U||F;t.exports=W.default||W},function(t,e,i){"use strict";var n=i(13);function r(){}function o(){}o.resetWarningCache=r,t.exports=function(){function t(t,e,i,r,o,a){if(a!==n){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var i={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:o,resetWarningCache:r};return i.PropTypes=i,i}},function(t,e,i){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e){var i,n=["webkit","Moz","ms","O"],r={};function o(t,e){var i,n=document.createElement(t||"div");for(i in e)n[i]=e[i];return n}function a(t){for(var e=1,i=arguments.length;e<i;e++)t.appendChild(arguments[e]);return t}var s,l=(s=o("style"),a(document.getElementsByTagName("head")[0],s),s.sheet||s.styleSheet);function h(t,e,n,o){var a=["opacity",e,~~(100*t),n,o].join("-"),s=.01+n/o*100,h=Math.max(1-(1-t)/e*(100-s),t),c=i.substring(0,i.indexOf("Animation")).toLowerCase(),u=c&&"-"+c+"-"||"";return r[a]||(l.insertRule("@"+u+"keyframes "+a+"{0%{opacity:"+h+"}"+s+"%{opacity:"+t+"}"+(s+.01)+"%{opacity:1}"+(s+e)%100+"%{opacity:"+t+"}100%{opacity:"+h+"}}",0),r[a]=1),a}function c(t,e){var i,r,o=t.style;if(void 0!==o[e])return e;for(e=e.charAt(0).toUpperCase()+e.slice(1),r=0;r<n.length;r++)if(void 0!==o[i=n[r]+e])return i}function u(t,e){for(var i in e)t.style[c(t,i)||i]=e[i];return t}function d(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)void 0===t[n]&&(t[n]=i[n])}return t}function f(t){for(var e={x:t.offsetLeft,y:t.offsetTop};t=t.offsetParent;)e.x+=t.offsetLeft,e.y+=t.offsetTop;return e}var x={lines:12,length:7,width:5,radius:10,rotate:0,color:"#000",speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto"},m=function t(e){if(!this.spin)return new t(e);this.opts=d(e||{},t.defaults,x)};m.defaults={},d(m.prototype,{spin:function(t){this.stop();var e,n,r=this,a=r.opts,s=r.el=u(o(0,{className:a.className}),{position:"relative",zIndex:a.zIndex}),l=a.radius+a.length+a.width;if(t&&(t.insertBefore(s,t.firstChild||null),n=f(t),e=f(s),u(s,{left:("auto"==a.left?n.x-e.x+(t.offsetWidth>>1):a.left+l)+"px",top:("auto"==a.top?n.y-e.y+(t.offsetHeight>>1):a.top+l)+"px"})),s.setAttribute("aria-role","progressbar"),r.lines(s,r.opts),!i){var h=0,c=a.fps,d=c/a.speed,x=(1-a.opacity)/(d*a.trail/100),m=d/a.lines;!function t(){h++;for(var e=a.lines;e;e--){var i=Math.max(1-(h+e*m)%d*x,a.opacity);r.opacity(s,a.lines-e,i,a)}r.timeout=r.el&&setTimeout(t,~~(1e3/c))}()}return r},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=void 0),this},lines:function(t,e){var n,r=0;function s(t,i){return u(o(),{position:"absolute",width:e.length+e.width+"px",height:e.width+"px",background:t,boxShadow:i,transformOrigin:"left",transform:"rotate("+~~(360/e.lines*r+e.rotate)+"deg) translate("+e.radius+"px,0)",borderRadius:(e.width>>1)+"px"})}for(;r<e.lines;r++)n=u(o(),{position:"absolute",top:1+~(e.width/2)+"px",transform:e.hwaccel?"translate3d(0,0,0)":"",opacity:e.opacity,animation:i&&h(e.opacity,e.trail,r,e.lines)+" "+1/e.speed+"s linear infinite"}),e.shadow&&a(n,u(s("#000","0 0 4px #000"),{top:"2px"})),a(t,a(n,s(e.color,"0 0 1px rgba(0,0,0,.1)")));return t},opacity:function(t,e,i){e<t.childNodes.length&&(t.childNodes[e].style.opacity=i)}}),function(){function t(t,e){return o("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',e)}var e=u(o("group"),{behavior:"url(#default#VML)"});!c(e,"transform")&&e.adj?(l.addRule(".spin-vml","behavior:url(#default#VML)"),m.prototype.lines=function(e,i){var n=i.length+i.width,r=2*n;function o(){return u(t("group",{coordsize:r+" "+r,coordorigin:-n+" "+-n}),{width:r,height:r})}var s,l=2*-(i.width+i.length)+"px",h=u(o(),{position:"absolute",top:l,left:l});function c(e,r,s){a(h,a(u(o(),{rotation:360/i.lines*e+"deg",left:~~r}),a(u(t("roundrect",{arcsize:1}),{width:n,height:i.width,left:i.radius,top:-i.width>>1,filter:s}),t("fill",{color:i.color,opacity:i.opacity}),t("stroke",{opacity:0}))))}if(i.shadow)for(s=1;s<=i.lines;s++)c(s,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(s=1;s<=i.lines;s++)c(s);return a(e,h)},m.prototype.opacity=function(t,e,i,n){var r=t.firstChild;n=n.shadow&&n.lines||0,r&&e+n<r.childNodes.length&&(r=(r=(r=r.childNodes[e+n])&&r.firstChild)&&r.firstChild)&&(r.opacity=i)}):i=c(e,"animation")}(),t.exports=m},function(t,e){var i,n,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(i===setTimeout)return setTimeout(t,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:o}catch(t){i=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var l,h=[],c=!1,u=-1;function d(){c&&l&&(c=!1,l.length?h=l.concat(h):u=-1,h.length&&f())}function f(){if(!c){var t=s(d);c=!0;for(var e=h.length;e;){for(l=h,h=[];++u<e;)l&&l[u].run();u=-1,e=h.length}l=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function x(t,e){this.fun=t,this.array=e}function m(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];h.push(new x(t,e)),1!==h.length||c||s(f)},x.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,i){
/**
 * @license
 * File: matfile.js
 * Copyright (c) 2012-2017, LGS Innovations Inc., All rights reserved.
 *
 * This file is part of SigPlot.
 *
 * Licensed to the LGS Innovations (LGS) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  LGS licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */
!function(){"use strict";i(3);function e(){}navigator.userAgent.match(/(iPad|iPhone|iPod)/i);!function(){var t=new ArrayBuffer(4),e=new Uint32Array(t),i=new Uint8Array(t);if(e[0]=3735928559,239===i[0])return"LE";if(222===i[0])return"BE";throw new Error("unknown endianness")}();var n={256:"MAT-file"},r={1:{name:"miINT8",size:1},2:{name:"miUINT8",size:1},3:{name:"miINT16",size:2},4:{name:"miUINT16",size:2},5:{name:"miINT32",size:4},6:{name:"miUINT32",size:4},7:{name:"miSINGLE",size:4},9:{name:"miDOUBLE",size:8},12:{name:"miINT64",size:8},13:{name:"miUINT64",size:8},14:{name:"miMATRIX",size:null},15:{name:"miCOMPRESSED",size:null},16:{name:"miUTF8",size:null},17:{name:"miUTF16",size:null},18:{name:"miUTF32",size:null}};Uint8Array,Int8Array,Int16Array,Int32Array,Float32Array,Float64Array;var o=!0;try{var a=new Uint8Array(new ArrayBuffer(4));a[0]=66,a[1]=76,a[2]=85,a[3]=69,"BLUE"!==String.fromCharCode.apply(null,a)&&(o=!1)}catch(t){o=!1}function s(t){var e=new Uint8Array(t);if(o)return String.fromCharCode.apply(null,e);for(var i="",n=0;n<e.length;n++)i+=String.fromCharCode(e[n]);return i}function l(t){return t>=0&&t<31?1<<t:l[t]||(l[t]=Math.pow(2,t))}function h(t,e,i,n){var r;switch(e){case"miINT8":case"miUINT8":r=t.getInt8(i,n);break;case"miINT16":r=t.getInt16(i,n);break;case"miUINT16":r=t.getUint16(i,n);break;case"miINT32":r=t.getInt32(i,n);break;case"miUINT32":r=t.getUint32(i,n);break;case"miSINGLE":r=t.getFloat32(i,n);break;case"miDOUBLE":r=t.getFloat64(i,n);break;case"miINT64":r=function(t,e,i){var n,r,o=Math.pow(2,53);i?(n=4,r=0):(n=0,r=4);var a=t.getInt32(e+n,i),s=t.getInt32(e+r,i)+l(32)*a;return s>=o?(window.console.info("Int is bigger than JS can represent."),1/0):s}(t,i,n);break;default:window.console.warn(e+" not supported at thsi time")}return r}function c(t){var e=document.createElement("a");return e.href=t,{source:t,protocol:e.protocol.replace(":",""),host:e.hostname,port:e.port,query:e.search,params:function(){for(var t,i={},n=e.search.replace(/^\?/,"").split("&"),r=n.length,o=0;o<r;o++)n[o]&&(i[(t=n[o].split("="))[0]]=t[1]);return i}(),file:(e.pathname.match(/\/([^\/?#]+)$/i)||[null,""])[1],hash:e.hash.replace("#",""),path:e.pathname.replace(/^([^\/])/,"/$1"),relative:(e.href.match(/tps?:\/\/[^\/]+(.+)/)||[null,""])[1],segments:e.pathname.replace(/^\//,"").split("/")}}e.MatHeader=function(t,e){if(this.file=null,this.file_name=null,this.buf=t,null!=this.buf){var i=new DataView(this.buf);this.headerStr=s(this.buf.slice(0,116)),this.datarep=s(this.buf.slice(126,128));var o="IM"===this.datarep,a="IM"===this.datarep;this.headerList=this.headerStr.split(",").map(function(t){return t.trim()}),this.matfile=this.headerList[0],this.platform=this.headerList[1],this.createdOn=this.headerList[2],this.subsystemOffset=s(this.buf.slice(116,124)),this.version=i.getUint16(124,o),this.versionName=n[this.version],this.dataType=i.getUint32(128,o),this.dataTypeName=r[this.dataType].name,this.arraySize=i.getUint32(132,o);var l=137,c=i.getUint32(l-1,o),u=r[c].name,d=r[c].size;h(i,u,(l+=4)-1,a),h(i,u,(l+=d)-1,a);l+=d;l+=d;var f=i.getUint32(l-1,a);l+=4;var x=r[f].name,m=r[f].size,p=(i.getUint32(l-1,a),h(i,x,(l+=4)-1,a));l+=m,p>1&&window.console.warn("Only 1D arrays are currently supported.");h(i,x,l-1,a);l+=d;var y=i.getUint32(l-1,a);l+=4;var v=0,_=!1;y>15&&(y&=255,_=!0,v=i.getUint16(l-5,a));var b=r[y].name;r[y].size;_||(v=h(i,b,l-1,a),l+=4);s(this.buf.slice(l-1,l+v-1));l+=v+(_?(4-v%4)%4:(8-v%8)%8),this.setData(this.buf,i,l,a)}},e.MatHeader.prototype={setData:function(t,e,i,n){var o,a=e.getUint32(i-1,n),s=!1;a>15?(a&=255,s=!0,o=e.getUint16(i+1,2,n)):i+=4;var l=r[a].name,h=r[a].size;s||(o=e.getUint32(i-1,n),s=!1),i+=4,this.dview=function(t,e,i,n){var r,o=[];if(new DataView(t,e,i),"miINT8"===n)r=new Int8Array(t,e,i);else if("miUINT8"===n)r=new Uint8Array(t,e,i);else if("miINT16"===n)r=new Int16Array(t,e,i);else if("miUINT16"===n)r=new Uint16Array(t,e,i);else if("miINT32"===n)r=new Int32Array(t,e,i);else if("miUINT32"===n)r=new Uint32Array(t,e,i);else{if("miDOUBLE"!==n)return void window.console.warn("Array data type not supported yet.");r=new Float64Array(t,e,i)}return r.forEach(function(t){o.push(t)}),o}(t,i-1,o/h,l)}},e.MatFileReader=function(t){this.options=t},e.MatFileReader.prototype={readheader:function(t,i){var n=this,r=new FileReader,o=t.webkitSlice(0,116);r.onloadend=function(t){return function(o){if(o.target.error)i(null);else{var a=r.result,s=new e.MatHeader(a,n.options);s.file=t,i(s)}}}(t),r.readAsArrayBuffer(o)},read:function(t,i){var n=this,r=new FileReader;r.onloadend=function(t){return function(o){if(o.target.error)i(null);else{var a=r.result,s=new e.MatHeader(a,n.options);s.file=t,s.file_name=t.name,i(s)}}}(t),r.readAsArrayBuffer(t)},read_http:function(t,i){var n=this,r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.overrideMimeType("text/plain; charset=x-user-defined"),r.onload=function(o){if(4!==r.readyState||200!==r.status&&0!==r.status)i(null);else{var a=null;if(r.response){a=r.response;var s=new e.MatHeader(a,n.options);c(t);var l=c(t);s.file_name=l.file,i(s)}else r.responseText&&function(t,e,i){i=i||1024;var n=0,r=new ArrayBuffer(t.length),o=new Uint8Array(r),a=function(){for(var s=n+i;n<s;n++)o[n]=255&t.charCodeAt(n);n>=t.length?e(r):setTimeout(a,0)};setTimeout(a,0)}(r.responseText,function(r){var o=new e.MatHeader(r,n.options);c(t);var a=c(t);o.file_name=a.file,i(o)})}},r.onerror=function(t){i(null)},r.send(null)}},t.exports=e}()},function(t,e,i){var n,r;!function(o,a){"use strict";void 0===(r="function"==typeof(n=function(){var t=function(){},e="undefined",i=["trace","debug","info","warn","error"];function n(t,e){var i=t[e];if("function"==typeof i.bind)return i.bind(t);try{return Function.prototype.bind.call(i,t)}catch(e){return function(){return Function.prototype.apply.apply(i,[t,arguments])}}}function r(e,n){for(var r=0;r<i.length;r++){var o=i[r];this[o]=r<e?t:this.methodFactory(o,e,n)}this.log=this.debug}function o(i,o,a){return function(i){"debug"===i&&(i="log");return typeof console!==e&&(void 0!==console[i]?n(console,i):void 0!==console.log?n(console,"log"):t)}(i)||function(t,i,n){return function(){typeof console!==e&&(r.call(this,i,n),this[t].apply(this,arguments))}}.apply(this,arguments)}function a(t,n,a){var s,l=this,h="loglevel";function c(){var t;if(typeof window!==e){try{t=window.localStorage[h]}catch(t){}if(typeof t===e)try{var i=window.document.cookie,n=i.indexOf(encodeURIComponent(h)+"=");-1!==n&&(t=/^([^;]+)/.exec(i.slice(n))[1])}catch(t){}return void 0===l.levels[t]&&(t=void 0),t}}t&&(h+=":"+t),l.name=t,l.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},l.methodFactory=a||o,l.getLevel=function(){return s},l.setLevel=function(n,o){if("string"==typeof n&&void 0!==l.levels[n.toUpperCase()]&&(n=l.levels[n.toUpperCase()]),!("number"==typeof n&&n>=0&&n<=l.levels.SILENT))throw"log.setLevel() called with invalid level: "+n;if(s=n,!1!==o&&function(t){var n=(i[t]||"silent").toUpperCase();if(typeof window===e)return;try{return void(window.localStorage[h]=n)}catch(t){}try{window.document.cookie=encodeURIComponent(h)+"="+n+";"}catch(t){}}(n),r.call(l,n,t),typeof console===e&&n<l.levels.SILENT)return"No console available for logging"},l.setDefaultLevel=function(t){c()||l.setLevel(t,!1)},l.enableAll=function(t){l.setLevel(l.levels.TRACE,t)},l.disableAll=function(t){l.setLevel(l.levels.SILENT,t)};var u=c();null==u&&(u=null==n?"WARN":n),l.setLevel(u,!1)}var s=new a,l={};s.getLogger=function(t){if("string"!=typeof t||""===t)throw new TypeError("You must supply a name when creating a logger.");var e=l[t];return e||(e=l[t]=new a(t,s.getLevel(),s.methodFactory)),e};var h=typeof window!==e?window.log:void 0;return s.noConflict=function(){return typeof window!==e&&window.log===s&&(window.log=h),s},s.getLoggers=function(){return l},s})?n.call(e,i,e,t):n)||(t.exports=r)}()},function(t,e,i){!function(){var e=i(8);"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,e){"use strict";if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(i[o]=r[o])}return i},writable:!0,configurable:!0});var n=window.ColorMap=function(t,e){this.options={ncolors:500,alpha:255},this.options=Object.assign(this.options,e),this.map=[];this._low=0,this._high=1;var i=this.options.ncolors;this._fscale=i/(this._high-this._low);var n=1,r=1;t=JSON.parse(JSON.stringify(t)),t=this._parseColors(t),this.colors=t;var o=t[0],a=t[1],s=i*((t[1].pos-t[0].pos)/100);this.colorsInBlock=s;for(var l=1/s,h=0;h<i-2;h++){if(r>s){if(o=t[n],void 0===(a=t[n+1]))break;s=i*((a.pos-o.pos)/100);this.colorsInBlock=s;l=1/s,r=1;n+=1}this._addColor(this.interpolate(o,a,l*r)),r+=1}this._addColor(t[t.length-1]),this._addColor(t[0],!0)};n.prototype={_addColor:function(t,e){t.hex=this._rgbToHex(t.red,t.green,t.blue),t.color=t.alpha<<24|t.blue<<16|t.green<<8|t.red,e?this.map.unshift(t):this.map.push(t)},_parseColors:function(t){for(var i=0,n=t.length;i<n;i++){var r=t[i];if("string"==typeof r)t[i]=this._hexToRgb(r),r=(r=e(r)).toRgb(),t[i]={red:r.r,green:r.g,blue:r.b,alpha:this.options.alpha};else if(r.hasOwnProperty("color")){var o=e(r.color);o={red:(o=o.toRgb()).r,green:o.g,blue:o.b,alpha:this.options.alpha},r.hasOwnProperty("pos")&&(o.pos=r.pos),t[i]=o}else t[i].red=Math.floor(Math.round(r.red/100*255)),t[i].green=Math.floor(Math.round(r.green/100*255)),t[i].blue=Math.floor(Math.round(r.blue/100*255));t[i].hasOwnProperty("alpha")||(t[i].alpha=this.options.alpha)}return this._checkColorStops(t)},_checkColorStops:function(t){for(var e=0,i=0,n=t.length;i<n;i++){var r=t[i];if(r.hasOwnProperty("pos")){if(e)for(var o=(r.pos-0)/e,a=r.pos,s=1;s<=e;s++)t[i-s].pos=a-o,a-=o;e=0}else e+=1}if(e){a=100;t[t.length-1].pos=a,t[0].pos=0;for(o=(a-0)/(e-=1),i=t.length-1,s=1;s<e;s++)t[i-s].pos=a-o,a-=o}return t},_componentToHex:function(t){var e=t.toString(16);return 1===e.length?"0"+e:e},_rgbToHex:function(t,e,i){return"#"+this._componentToHex(t)+this._componentToHex(e)+this._componentToHex(i)},_hexToRgb:function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{red:parseInt(e[1],16),green:parseInt(e[2],16),blue:parseInt(e[3],16)}:null},getColor:function(t){var e=~~((t-this._low)*this._fscale);return e>this.map.length-1?e=this.map.length-1:e<0&&(e=0),this.map[e]},setRange:function(t,e){this._low===t&&this._high===e||(this._low=t,this._high=e,this._fscale=this.map.length/Math.abs(this._high-this._low))},interpolate:function(t,e,i){return{red:t.red+i*(e.red-t.red),green:t.green+i*(e.green-t.green),blue:t.blue+i*(e.blue-t.blue),alpha:t.alpha+i*(e.alpha-t.alpha)}}},t.exports=n}()},function(t,e){
/**
 * @license
 * File: CanvasInput.js
 *  CanvasInput v1.0.10
 *  http://goldfirestudios.com/blog/108/CanvasInput-HTML5-Canvas-Text-Input
 *
 *  (c) 2013, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  (c) 2013, Axios, Inc.
 *  Modifications made by Axios, Inc.
 *  axiosengineering.com
 *
 *  MIT License
 */
var i,n;i=[],(n=window.CanvasInput=function(t){var e=this;t=t||{},e._canvas=t.canvas||null,e._ctx=e._canvas?e._canvas.getContext("2d"):null,e._x=t.x||0,e._y=t.y||0,e._extraX=t.extraX||0,e._extraY=t.extraY||0,e._fontSize=t.fontSize||14,e._fontFamily=t.fontFamily||"Arial",e._fontColor=t.fontColor||"#000",e._placeHolderColor=t.placeHolderColor||"#bfbebd",e._fontWeight=t.fontWeight||"normal",e._fontStyle=t.fontStyle||"normal",e._readonly=t.readonly||!1,e._maxlength=t.maxlength||null,e._width=t.width||150,e._height=t.height||e._fontSize,e._padding=t.padding>=0?t.padding:5,e._borderWidth=t.borderWidth>=0?t.borderWidth:1,e._borderColor=t.borderColor||"#959595",e._borderRadius=t.borderRadius>=0?t.borderRadius:3,e._backgroundImage=t.backgroundImage||"",e._boxShadow=t.boxShadow||"1px 1px 0px rgba(255, 255, 255, 1)",e._innerShadow=t.innerShadow||"0px 0px 4px rgba(0, 0, 0, 0.4)",e._selectionColor=t.selectionColor||"rgba(179, 212, 253, 0.8)",e._placeHolder=t.placeHolder||"",e._value=t.value||e._placeHolder,e._onsubmit=t.onsubmit||function(){},e._onkeydown=t.onkeydown||function(){},e._onkeyup=t.onkeyup||function(){},e._onfocus=t.onfocus||function(){},e._onblur=t.onblur||function(){},e._cursor=!1,e._cursorPos=0,e._hasFocus=!1,e._selection=[0,0],e._wasOver=!1,e._renderOnReturn=void 0===t.renderOnReturn||t.renderOnReturn,e._disableBlur=t.disableBlur||!1,e._tabToClear=t.tabToClear||!1,e.boxShadow(e._boxShadow,!0),e._calcWH(),e._renderCanvas=document.createElement("canvas"),e._renderCanvas.setAttribute("width",e.outerW),e._renderCanvas.setAttribute("height",e.outerH),e._renderCtx=e._renderCanvas.getContext("2d"),e._shadowCanvas=document.createElement("canvas"),e._shadowCanvas.setAttribute("width",e._width+2*e._padding),e._shadowCanvas.setAttribute("height",e._height+2*e._padding),e._shadowCtx=e._shadowCanvas.getContext("2d"),void 0!==t.backgroundGradient?(e._backgroundColor=e._renderCtx.createLinearGradient(0,0,0,e.outerH),e._backgroundColor.addColorStop(0,t.backgroundGradient[0]),e._backgroundColor.addColorStop(1,t.backgroundGradient[1])):e._backgroundColor=t.backgroundColor||"#fff",e._canvas&&(e.mousemoveCanvasListener=function(t){t=t||window.event,e.mousemove(t,e)},e._canvas.addEventListener("mousemove",e.mousemoveCanvasListener,!1),e.mousedownCanvasListener=function(t){t=t||window.event,e.mousedown(t,e)},e._canvas.addEventListener("mousedown",e.mousedownCanvasListener,!1),e.mouseupCanvasListener=function(t){t=t||window.event,e.mouseup(t,e)},e._canvas.addEventListener("mouseup",e.mouseupCanvasListener,!1)),e.mouseupWindowListener=function(t){t=t||window.event,e._hasFocus&&!e._mouseDown&&e.blur()},window.addEventListener("mouseup",e.mouseupWindowListener,!0),e.keydownWindowListener=function(t){t=t||window.event,e._hasFocus&&e.keydown(t,e)},window.addEventListener("keydown",e.keydownWindowListener,!1),e.keyupWindowListener=function(t){t=t||window.event,e._hasFocus&&e._onkeyup(t,e)},window.addEventListener("keyup",e.keyupWindowListener,!1),e.pasteWindowListener=function(t){if(t=t||window.event,e._hasFocus){var i=t.clipboardData.getData("text/plain"),n=e._value.substr(0,e._cursorPos),r=e._value.substr(e._cursorPos);e._value=n+i+r,e._cursorPos+=i.length,e.render()}},window.addEventListener("paste",e.pasteWindowListener,!1),i.push(e),e._inputsIndex=i.length-1,e.render()}).prototype={canvas:function(t){return void 0!==t?(this._canvas=t,this._ctx=this._canvas.getContext("2d"),this.render()):this._canvas},x:function(t){return void 0!==t?(this._x=t,this.render()):this._x},y:function(t){return void 0!==t?(this._y=t,this.render()):this._y},extraX:function(t){return void 0!==t?(this._extraX=t,this.render()):this._extraX},extraY:function(t){return void 0!==t?(this._extraY=t,this.render()):this._extraY},fontSize:function(t){return void 0!==t?(this._fontSize=t,this.render()):this._fontSize},fontFamily:function(t){return void 0!==t?(this._fontFamily=t,this.render()):this._fontFamily},fontColor:function(t){return void 0!==t?(this._fontColor=t,this.render()):this._fontColor},placeHolderColor:function(t){return void 0!==t?(this._placeHolderColor=t,this.render()):this._placeHolderColor},fontWeight:function(t){return void 0!==t?(this._fontWeight=t,this.render()):this._fontWeight},fontStyle:function(t){return void 0!==t?(this._fontStyle=t,this.render()):this._fontStyle},width:function(t){return void 0!==t?(this._width=t,this._calcWH(),this._updateCanvasWH(),this.render()):this._width},height:function(t){return void 0!==t?(this._height=t,this._calcWH(),this._updateCanvasWH(),this.render()):this._height},padding:function(t){return void 0!==t?(this._padding=t,this._calcWH(),this._updateCanvasWH(),this.render()):this._padding},borderWidth:function(t){return void 0!==t?(this._borderWidth=t,this._calcWH(),this._updateCanvasWH(),this.render()):this._borderWidth},borderColor:function(t){return void 0!==t?(this._borderColor=t,this.render()):this._borderColor},borderRadius:function(t){return void 0!==t?(this._borderRadius=t,this.render()):this._borderRadius},backgroundColor:function(t){return void 0!==t?(this._backgroundColor=t,this.render()):this._backgroundColor},backgroundGradient:function(t){return void 0!==t?(this._backgroundColor=this._renderCtx.createLinearGradient(0,0,0,this.outerH),this._backgroundColor.addColorStop(0,t[0]),this._backgroundColor.addColorStop(1,t[1]),this.render()):this._backgroundColor},boxShadow:function(t,e){if(void 0===t)return this._boxShadow;var i=t.split("px ");return this._boxShadow={x:"none"===this._boxShadow?0:parseInt(i[0],10),y:"none"===this._boxShadow?0:parseInt(i[1],10),blur:"none"===this._boxShadow?0:parseInt(i[2],10),color:"none"===this._boxShadow?"":i[3]},this._boxShadow.x<0?(this.shadowL=Math.abs(this._boxShadow.x)+this._boxShadow.blur,this.shadowR=this._boxShadow.blur+this._boxShadow.x):(this.shadowL=Math.abs(this._boxShadow.blur-this._boxShadow.x),this.shadowR=this._boxShadow.blur+this._boxShadow.x),this._boxShadow.y<0?(this.shadowT=Math.abs(this._boxShadow.y)+this._boxShadow.blur,this.shadowB=this._boxShadow.blur+this._boxShadow.y):(this.shadowT=Math.abs(this._boxShadow.blur-this._boxShadow.y),this.shadowB=this._boxShadow.blur+this._boxShadow.y),this.shadowW=this.shadowL+this.shadowR,this.shadowH=this.shadowT+this.shadowB,this._calcWH(),e?void 0:(this._updateCanvasWH(),this.render())},innerShadow:function(t){return void 0!==t?(this._innerShadow=t,this.render()):this._innerShadow},selectionColor:function(t){return void 0!==t?(this._selectionColor=t,this.render()):this._selectionColor},placeHolder:function(t){return void 0!==t?(this._placeHolder=t,this.render()):this._placeHolder},value:function(t){return void 0!==t?(this._value=t,this.focus()):this._value},onsubmit:function(t){if(void 0!==t)return this._onsubmit=t,this;this._onsubmit()},onkeydown:function(t){if(void 0!==t)return this._onkeydown=t,this;this._onkeydown()},onkeyup:function(t){if(void 0!==t)return this._onkeyup=t,this;this._onkeyup()},focus:function(t){var e,i=this;if(!i._readonly){i._hasFocus||i._onfocus(i),i._selectionUpdated?delete i._selectionUpdated:i._selection=[0,0],i._cursorPos="number"==typeof t?t:i._clipText().length,i._placeHolder===i._value&&(i._value=""),i._hasFocus=!0,i._cursor=!0,i._cursorInterval&&clearInterval(i._cursorInterval),i._cursorInterval=setInterval(function(){i._cursor=!i._cursor,i.render()},500);var n=navigator.userAgent.toLowerCase(),r=n.indexOf("chrome")>=0&&n.indexOf("mobile")>=0&&n.indexOf("android")>=0,o=void 0!==window.orientation;return o&&!r&&document&&document.createElement&&(e=document.createElement("input"))?(e.type="text",e.style.opacity=0,e.style.position="absolute",e.style.left=i._x+i._extraX+(i._canvas?i._canvas.offsetLeft:0)+"px",e.style.top=i._y+i._extraY+(i._canvas?i._canvas.offsetTop:0)+"px",e.style.width=i._width,e.style.height=0,document.body.appendChild(e),e.focus(),e.addEventListener("blur",function(){i.blur(i)},!1)):o&&i.value(prompt(i._placeHolder)||""),i.render()}},blur:function(t){var e=t||this;return e._disableBlur||(e._onblur(e),e._cursorInterval&&clearInterval(e._cursorInterval),e._hasFocus=!1,e._cursor=!1,e._selection=[0,0],""===e._value&&(e._value=e._placeHolder)),e.render()},disableBlur:function(t){(t||this)._disableBlur=!0},enableBlur:function(t){(t||this)._disableBlur=!1},keydown:function(t,e){var n,r,o=t.which,a=t.shiftKey,s=null;if(e._hasFocus){if(e._onkeydown(t,e),65===o&&(t.ctrlKey||t.metaKey))return e._selection=[0,e._value.length],t.preventDefault(),e.render();if(17===o||t.metaKey||t.ctrlKey)return e;if(t.preventDefault(),8===o)e._clearSelection()||e._cursorPos>0&&(n=e._value.substr(0,e._cursorPos-1),r=e._value.substr(e._cursorPos,e._value.length),e._value=n+r,e._cursorPos--);else if(37===o)e._cursorPos>0&&(e._cursorPos--,e._cursor=!0,e._selection=[0,0]);else if(39===o)e._cursorPos<e._value.length&&(e._cursorPos++,e._cursor=!0,e._selection=[0,0]);else if(13===o)e._onsubmit(t,e);else if(9===o)if(e._tabToClear)e._value="",e._cursorPos=0;else{var l=i[e._inputsIndex+1]?e._inputsIndex+1:0;l!==e._inputsIndex&&(e.blur(),setTimeout(function(){i[l].focus()},10))}else if(s=e._mapCodeToKey(a,o)){if(e._clearSelection(),e._maxlength&&e._maxlength<=e._value.length)return;n=e._value?e._value.substr(0,e._cursorPos):"",r=e._value?e._value.substr(e._cursorPos):"",e._value=n+s+r,e._cursorPos++}return 13==o&&e._renderOnReturn||13!==o?e.render():function(){}}},click:function(t,e){var i=e._mousePos(t),n=i.x,r=i.y;return e._endSelection?(delete e._endSelection,void delete e._selectionUpdated):e._canvas&&e._overInput(n,r)||!e._canvas?e._mouseDown?(e._mouseDown=!1,e.click(t,e),e.focus(e._clickPos(n,r))):void 0:e.blur()},mousemove:function(t,e){var i=e._mousePos(t),n=i.x,r=i.y,o=e._overInput(n,r);if(o&&e._canvas?(e._canvas.style.cursor="text",e._wasOver=!0):e._wasOver&&e._canvas&&(e._canvas.style.cursor="default",e._wasOver=!1),e._hasFocus&&e._selectionStart>=0){var a=e._clickPos(n,r),s=Math.min(e._selectionStart,a),l=Math.max(e._selectionStart,a);if(!o)return e._selectionUpdated=!0,e._endSelection=!0,delete e._selectionStart,void e.render();e._selection[0]===s&&e._selection[1]===l||(e._selection=[s,l],e.render())}},mousedown:function(t,e){var i=e._mousePos(t),n=i.x,r=i.y,o=e._overInput(n,r);e._mouseDown=o,e._hasFocus&&o&&(e._selectionStart=e._clickPos(n,r))},mouseup:function(t,e){var i=e._mousePos(t),n=i.x,r=i.y,o=e._clickPos(n,r)!==e._selectionStart;e._hasFocus&&e._selectionStart>=0&&e._overInput(n,r)&&o?(e._selectionUpdated=!0,delete e._selectionStart,e.render()):delete e._selectionStart,e.click(t,e)},renderCanvas:function(){return this._renderCanvas},cleanup:function(){this._canvas.removeEventListener("mouseup",this.mouseupCanvasListener,!1),this._canvas.removeEventListener("mousedown",this.mousedownCanvasListener,!1),this._canvas.removeEventListener("mousemove",this.mousemoveCanvasListener,!1),window.removeEventListener("keydown",this.keydownWindowListener,!1),window.removeEventListener("keyup",this.keyupWindowListener,!1),window.removeEventListener("mouseup",this.mouseupWindowListener,!0),window.removeEventListener("paste",this.pasteWindowListener,!1),clearInterval(this._cursorInterval),this._canvas.style.cursor="default";for(var t=i.length-1;t>=0;t--)i[t]===this&&i.splice(t,1)},render:function(){var t=this,e=t._renderCtx,i=t.outerW,n=t.outerH,r=t._borderRadius,o=t._borderWidth,a=t.shadowW,s=t.shadowH;e.clearRect(0,0,e.canvas.width,e.canvas.height),e.shadowOffsetX=t._boxShadow.x,e.shadowOffsetY=t._boxShadow.y,e.shadowBlur=t._boxShadow.blur,e.shadowColor=t._boxShadow.color,t._borderWidth>0&&(e.fillStyle=t._borderColor,t._roundedRect(e,t.shadowL,t.shadowT,i-a,n-s,r),e.fill(),e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0),t._drawTextBox(function(){e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0;var l=t._clipText(),h=t._padding+t._borderWidth+t.shadowT;if(t._selection[1]>0){var c=t._textWidth(l.substring(0,t._selection[0])),u=t._textWidth(l.substring(t._selection[0],t._selection[1]));e.fillStyle=t._selectionColor,e.fillRect(h+c,h,u,t._height)}if(e.fillStyle=t._placeHolder===t._value&&""!==t._value?t._placeHolderColor:t._fontColor,t._cursor){var d=t._textWidth(l.substring(0,t._cursorPos));e.fillRect(h+d,h,1,t._height)}var f=t._padding+t._borderWidth+t.shadowL,x=Math.round(h+t._height/2);e.font=t._fontStyle+" "+t._fontWeight+" "+t._fontSize+"px "+t._fontFamily,e.textAlign="left",e.textBaseline="middle",e.fillText(l,f,x);var m=t._innerShadow.split("px "),p="none"===t._innerShadow?0:parseInt(m[0],10),y="none"===t._innerShadow?0:parseInt(m[1],10),v="none"===t._innerShadow?0:parseInt(m[2],10),_="none"===t._innerShadow?"":m[3];if(v>0){var b=t._shadowCtx,g=b.canvas.width,w=b.canvas.height;b.clearRect(0,0,g,w),b.shadowBlur=v,b.shadowColor=_,b.shadowOffsetX=0,b.shadowOffsetY=y,b.fillRect(-1*i,-100,3*i,100),b.shadowOffsetX=p,b.shadowOffsetY=0,b.fillRect(g,-1*n,100,3*n),b.shadowOffsetX=0,b.shadowOffsetY=y,b.fillRect(-1*i,w,3*i,100),b.shadowOffsetX=p,b.shadowOffsetY=0,b.fillRect(-100,-1*n,100,3*n),t._roundedRect(e,o+t.shadowL,o+t.shadowT,i-2*o-a,n-2*o-s,r),e.clip(),e.drawImage(t._shadowCanvas,0,0,g,w,o+t.shadowL,o+t.shadowT,g,w)}return t._ctx&&(t._ctx.clearRect(t._x,t._y,e.canvas.width,e.canvas.height),t._ctx.drawImage(t._renderCanvas,t._x,t._y)),t})},_drawTextBox:function(t){var e=this,i=e._renderCtx,n=e.outerW,r=e.outerH,o=e._borderRadius,a=e._borderWidth,s=e.shadowW,l=e.shadowH;if(""===e._backgroundImage)i.fillStyle=e._backgroundColor,e._roundedRect(i,a+e.shadowL,a+e.shadowT,n-2*a-s,r-2*a-l,o),i.fill(),t();else{var h=new Image;h.src=e._backgroundImage,h.onload=function(){i.drawImage(h,0,0,h.width,h.height,a+e.shadowL,a+e.shadowT,n,r),t()}}},_clearSelection:function(){if(this._selection[1]>0){var t=this._selection[0],e=this._selection[1];return this._value=this._value.substr(0,t)+this._value.substr(e),this._cursorPos=t,this._cursorPos=this._cursorPos<0?0:this._cursorPos,this._selection=[0,0],!0}return!1},_clipText:function(t){t=void 0===t?this._value:t;var e=this._textWidth(t)/(this._width-this._padding);return(e>1?t.substr(-1*Math.floor(t.length/e)):t)+""},_textWidth:function(t){var e=this._renderCtx;return e.font=this._fontStyle+" "+this._fontWeight+" "+this._fontSize+"px "+this._fontFamily,e.textAlign="left",e.measureText(t).width},_calcWH:function(){this.outerW=this._width+2*this._padding+2*this._borderWidth+this.shadowW,this.outerH=this._height+2*this._padding+2*this._borderWidth+this.shadowH},_updateCanvasWH:function(){var t=this._renderCanvas.width,e=this._renderCanvas.height;this._renderCanvas.setAttribute("width",this.outerW),this._renderCanvas.setAttribute("height",this.outerH),this._shadowCanvas.setAttribute("width",this._width+2*this._padding),this._shadowCanvas.setAttribute("height",this._height+2*this._padding),this._ctx&&this._ctx.clearRect(this._x,this._y,t,e)},_roundedRect:function(t,e,i,n,r,o){n<2*o&&(o=n/2),r<2*o&&(o=r/2),t.beginPath(),t.moveTo(e+o,i),t.lineTo(e+n-o,i),t.quadraticCurveTo(e+n,i,e+n,i+o),t.lineTo(e+n,i+r-o),t.quadraticCurveTo(e+n,i+r,e+n-o,i+r),t.lineTo(e+o,i+r),t.quadraticCurveTo(e,i+r,e,i+r-o),t.lineTo(e,i+o),t.quadraticCurveTo(e,i,e+o,i),t.closePath()},_overInput:function(t,e){var i=t>=this._x+this._extraX,n=t<=this._x+this._extraX+this._width+2*this._padding,r=e>=this._y+this._extraY,o=e<=this._y+this._extraY+this._height+2*this._padding;return i&&n&&r&&o},_clickPos:function(t,e){var i=this._value;this._value===this._placeHolder&&(i="");var n=this._clipText(i),r=0,o=n.length;if(t-(this._x+this._extraX)<this._textWidth(n))for(var a=0;a<n.length;a++)if((r+=this._textWidth(n[a]))>=t-(this._x+this._extraX)){o=a;break}return o},_mousePos:function(t){var e=t.target,i=document.defaultView.getComputedStyle(e,void 0),n=parseInt(i.paddingLeft,10)||0,r=parseInt(i.paddingLeft,10)||0,o=parseInt(i.borderLeftWidth,10)||0,a=parseInt(i.borderLeftWidth,10)||0,s=document.body.parentNode.offsetTop||0,l=document.body.parentNode.offsetLeft||0,h=0,c=0;if("unefined"!=typeof e.offsetParent)do{h+=e.offsetLeft,c+=e.offsetTop}while(e=e.offsetParent);return h+=n+o+l,c+=r+a+s,{x:t.pageX-h,y:t.pageY-c}},_mapCodeToKey:function(t,e){for(var i=[8,9,13,16,17,18,20,27,91,92],n=0;n<i.length;n++)if(e===i[n])return;if("boolean"==typeof t&&"number"==typeof e)return t?e>=65&&e<=90?String.fromCharCode(e):{32:" ",48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",107:"+",173:"_",189:"_",186:":",187:"+",188:"<",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'}[e]:e>=65&&e<=90?String.fromCharCode(e).toLowerCase():96===e?"0":97===e?"1":98===e?"2":99===e?"3":100===e?"4":101===e?"5":102===e?"6":103===e?"7":104===e?"8":105===e?"9":188===e?",":190===e?".":191===e?"/":192===e?"`":220===e?"\\":187===e?"=":189===e||173===e?"-":222===e?"'":186===e?";":219===e?"[":221===e?"]":String.fromCharCode(e)}},t.exports=n},function(t,e,i){var n,r;n=i(3),(r=function(t,e,i){this.options={itemClass:"sigplot-menu-item"},n.update(this.options,i),this._Mx=t,this._container=t.root,this._menu=document.createElement("div");var r="z-index:2;float:left;position:relative;left:"+t.xpos+"px;top:"+t.ypos+"px;";this._menu.classList.add("sigplot-menu");var o=new Date;this._menuId="menu-"+o.getSeconds()+o.getMilliseconds(),this._menu.classList.add(this._menuId),this._menu.style=r,this._items=[],this.setCSS(),this.createMenu(e)}).prototype={createMenu:function(t){var e=this,i=this._Mx,n=t.finalize;t.finalize=function(){e.remove(),n()},this.finalize=t.finalize;var r=document.createElement("div");r.addEventListener("mousedown",function(t){t.preventDefault(),e._movingOffsetX=t.offsetX,e._movingOffsetY=t.offsetY,e._moving=!0}),r.addEventListener("mouseup",function(t){t.preventDefault(),e._moving=!1}),e._moveMenu=function(t){e._moving&&(e._menu.style.position="fixed",e._menu.style.top=t.clientY-e._movingOffsetY+"px",e._menu.style.left=t.clientX-e._movingOffsetX+"px")},document.body.addEventListener("mousemove",e._moveMenu),r.classList.add("sigplot-menu-title"),r.innerText=t.title,this._menu.append(r);var o=document.createElement("ul");o.classList.add("sigplot-menu-list"),t.items.forEach(function(i){var n=e._createMenuItem(i,t);o.append(n)}),this._menu.append(o),this._container.append(this._menu),this._menu.addEventListener("contextmenu",function(t){t.preventDefault(),e.finalize()}),i.menu=this,i.widget={type:"MENU",callback:function(t){"mousedown"===t.type&&(1!==t.which&&2!==t.which&&3!==t.which||(e._Mx.menu!==e||t.target.classList.contains(e.options.itemClass)||e.finalize(),e._Mx.menu||e.finalize())),"mouseup"===t.type&&(e._moving=!1),"keydown"===t.type&&e._handleKeyEvents(t)}}},_handleKeyEvents:function(t){if("ArrowDown"===t.key)if(t.preventDefault(),this._active){if((e=this._items.indexOf(this._active)+1)>this._items.length-1)return;this._setActive(this._items[e])}else this._setActive(this._items[0]);if("ArrowUp"===t.key)if(t.preventDefault(),this._active){var e;if((e=this._items.indexOf(this._active)-1)<0)return;this._setActive(this._items[e])}else this._setActive(this._items[0]);if("Enter"===t.key){t.preventDefault(),this._active||this._setActive(this._items[0]);var i=this._active;i.onclick?i.onclick():i.click&&i.click()}},_setActive:function(t){this._active&&this._clearActive(),this._active=t,t.classList.add("active")},_clearActive:function(){this._active.classList.remove("active"),this._active=null},_createMenuItem:function(t,e){var i=this,n=this._Mx,o=document.createElement("li");return o.className+=" "+i.options.itemClass,o.innerText=t.text,t.style&&(o.className+=" "+t.style),t.hasOwnProperty("checked")&&(o.className+=" sigplot-menu-checkbox",t.checked&&(o.className+=" checked")),o.addEventListener("click",function(){if(i.remove(),n.menu=void 0,n.widget=null,t.handler)t.handler();else if(t.menu){var o=t.menu;"function"==typeof t.menu&&(o=t.menu()),o.finalize=e.finalize,new r(n,o)}!n.menu&&e.finalize&&e.finalize()}),o.addEventListener("mouseenter",function(t){i._setActive(t.target)}),o.addEventListener("mouseleave",function(t){i._clearActive()}),i._items.push(o),o},remove:function(){var t=this._Mx;t.menu=void 0,t.widget=null,this._menu.remove(),document.body.removeEventListener("mousemove",this._moveMenu)},setCSS:function(){var t,e,i=this._Mx;(e=document.createElement("style")).id="mx-menu-css",t="."+this._menuId+"{\nbackground-color: "+i.xwbg+";\nfont: "+i.font.font+";\ncolor:"+i.xwfg+"\n}   \n.sigplot-menu-list {\n    margin: 0px;\n    list-style: none;\n    padding: 0px;\n}\n."+this._menuId+">div {\n    cursor: move;\n    text-align: center;\n    border-bottom: 2px solid "+i.xwts+";\n}\n."+this._menuId+">ul>li{\n    border-top: 2px solid "+i.bg+";\n    background-color: "+i.xwlo+";\n    padding: 1px;\n    padding-right: 5px;\n    padding-left: 5px;\n    cursor:default;\n}\n."+this._menuId+">ul>li.active{\n    background-color: "+i.hi+";\n}\n."+this._menuId+" {\n    position: relative;\n    color: white;\n    float: left;\n    border-radius: 5px;\n    padding: 3px;\n    font: "+i.font.font+";\n    color:"+i.xwfg+"\n}\n."+this._menuId+">ul>li.separator {\n    background-color: "+i.xwbs+";\n}\n.sigplot-menu-checkbox:before{\n    margin-right: 3px; \n}\n.sigplot-menu-checkbox.checked:before {\n    content: '\\25b8';\n    width: 2px;\n    height: 3px;\n}\n.sigplot-menu-checkbox.checkbox:before {\n    content: '\\25A1';\n    width: 2px;\n    height: 3px;\n}\n.sigplot-menu-checkbox.checkbox.checked:before {\n    content: '\\25A3';\n    width: 2px;\n    height: 3px;\n}\n",this._container.getElementsByTagName("style").length?(e=this._container.getElementsByTagName("style")[0]).textContent=t:((e=document.createElement("style")).textContent=t,this._container.appendChild(e))}},t.exports=r},function(t,e,i){
/**
 * @license
 * File: sigplot.layer1d.js
 * Copyright (c) 2012-2017, LGS Innovations Inc., All rights reserved.
 *
 * This file is part of SigPlot.
 *
 * Licensed to the LGS Innovations (LGS) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  LGS licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */
!function(){var e=i(5),n=i(6),r=function(t){this.plot=t,this.xbuf=void 0,this.ybuf=void 0,this.offset=0,this.xstart=0,this.xdelta=0,this.imin=0,this.xmin=0,this.xmax=0,this.name="",this.cx=!1,this.hcb=void 0,this.size=0,this.display=!0,this.color=0,this.line=3,this.thick=1,this.symbol=0,this.radius=3,this.skip=0,this.xsub=0,this.ysub=0,this.xdata=!1,this.modified=!1,this.opacity=1,this.fillStyle=null,this.preferred_origin=1,this.pointbufsize=0,this.xptr=null,this.yptr=null,this.xpoint=null,this.ypoint=null,this.options={}};r.prototype={init:function(t,i){this.plot._Gx;if(this.hcb=t,this.hcb.buf_type="D",this.offset=0,this.size=0,this.xbufn=0,this.ybufn=0,this.hcb.pipe?2===t.class&&(e.force1000(t),this.size=t.subsize):2===t.class?(e.force1000(t),this.size=t.subsize):this.size=t.size,i.framesize&&(this.size=i.framesize),this.hcb.pipe&&!this.size)throw"1D layer could not determine appropriate size for pipe, use framesize option";t.class<=2&&(this.xsub=-1,this.ysub=1,this.cx="C"===t.format[0]),this.skip=1,this.cx&&(this.skip=2),this.xstart=t.xstart,this.xdelta=t.xdelta;var n=t.xstart+t.xdelta*(this.size-1);if(this.xmin=Math.min(t.xstart,n),this.xmax=Math.max(t.xstart,n),this.xlab=t.xunits,this.ylab=t.yunits,this.hcb.pipe){this.drawmode="scrolling",this.position=0,this.tle=i.tl,this.ybufn=this.size*Math.max(this.skip*e.PointArray.BYTES_PER_ELEMENT,e.PointArray.BYTES_PER_ELEMENT),this.ybuf=new ArrayBuffer(this.ybufn);var r=this;e.addPipeWriteListener(this.hcb,function(){r._onpipewrite()})}},_onpipewrite:function(){var t=new e.PointArray(this.ybuf),i=this.tle;void 0===i&&(i=Math.floor(e.pavail(this.hcb))/this.hcb.spa);for(var n=i*this.hcb.spa;e.pavail(this.hcb)>=n;){if("lefttoright"===this.drawmode)this.position=0,t.set(t.subarray(0,this.size-n),n);else if("righttoleft"===this.drawmode)this.position=this.size-i,t.set(t.subarray(n),0);else if("scrolling"!==this.drawmode)throw"Invalid draw mode";if(0===e.grabx(this.hcb,t,Math.min(i,this.size-this.position)*this.hcb.spa,this.position*this.hcb.spa))break;this.position=(this.position+i)%this.size,void 0===this.tle&&(i=Math.floor(e.pavail(this.hcb))/this.hcb.spa),n=i*this.hcb.spa}0!==this.plot._Gx.autol&&this.plot.rescale()},get_data:function(t,i){var n,r=this.plot._Gx,o=this.hcb,a=this.skip;n=2===o.class?o.subsize:o.size;var s=0,l=0;r.index?(s=Math.floor(t),l=Math.floor(i+.5)):o.xdelta>=0?(s=Math.floor((t-o.xstart)/o.xdelta)-1,l=Math.floor((i-o.xstart)/o.xdelta+.5)):(s=Math.floor((i-o.xstart)/o.xdelta)-1,l=Math.floor((t-o.xstart)/o.xdelta+.5)),s=Math.max(0,s),l=Math.min(n,l);var h=Math.max(0,Math.min(l-s+1,r.bufmax));if(o.xdelta<0&&(s=l-h+1),s>=this.imin&&s+h<=this.imin+this.size&&void 0!==this.ybuf);else if(this.modified);else if(o.class<=2){var c=this.offset+s;a=this.skip;this.ybufn=h*Math.max(a*e.PointArray.BYTES_PER_ELEMENT,e.PointArray.BYTES_PER_ELEMENT),(void 0===this.ybuf||this.ybuf.byteLength<this.ybufn)&&(this.ybuf=new ArrayBuffer(this.ybufn));var u=new e.PointArray(this.ybuf),d=e.grab(o,u,c,h);this.imin=s,this.xstart=o.xstart+s*this.xdelta,this.size=d}},change_settings:function(t){if(void 0!==t.index)if(t.index)this.xstart=1,this.xdelta=1,this.xmin=1,this.xmax=this.size;else{this.xstart=this.hcb.xstart+this.imin*this.xdelta,this.xdelta=this.hcb.xdelta;var i=this.hcb.xstart+this.hcb.xdelta*(this.size-1);this.xmin=Math.min(this.hcb.xstart,i),this.xmax=Math.max(this.hcb.xstart,i)}if(void 0!==t.drawmode&&(this.drawmode=t.drawmode,this.position=0,this.ybufn=this.size*Math.max(this.skip*e.PointArray.BYTES_PER_ELEMENT,e.PointArray.BYTES_PER_ELEMENT),this.ybuf=new ArrayBuffer(this.ybufn)),void 0!==t.framesize){this.size=t.framesize,this.xstart=this.hcb.xstart+this.imin*this.xdelta,this.xdelta=this.hcb.xdelta;i=this.hcb.xstart+this.hcb.xdelta*(this.size-1);this.xmin=Math.min(this.hcb.xstart,i),this.xmax=Math.max(this.hcb.xstart,i),this.ybufn=this.size*Math.max(this.skip*e.PointArray.BYTES_PER_ELEMENT,e.PointArray.BYTES_PER_ELEMENT),this.ybuf=new ArrayBuffer(this.ybufn)}},reload:function(t,i){if(this.hcb.pipe)throw"reload cannot be used with pipe, use push instead";var n=this.hcb.dview.length!==t.length||i;if(i)for(var r in i)this.hcb[r]=i[r],"xstart"!==r&&"xdelta"!==r||(n=!0);this.hcb.setData(t),this.imin=0,this.xstart=void 0,this.size=0;var o=this.xmin,a=this.xmax;if(n){2===this.hcb.class&&e.force1000(this.hcb);var s=this.hcb.xstart+this.hcb.xdelta*(this.hcb.size-1);this.xmin=Math.min(this.hcb.xstart,s),this.xmax=Math.max(this.hcb.xstart,s),this.xdelta=this.hcb.xdelta,this.xstart=this.hcb.xstart,o=void 0,a=void 0}return{xmin:o,xmax:a}},push:function(t,i,n){if(i){for(var r in i)this.hcb[r]=i[r],"type"===r&&(this.hcb.class=i[r]/1e3);i.subsize&&2===this.hcb.class&&(e.force1000(this.hcb),this.size=this.hcb.subsize,this.position=null,this.ybufn=this.size*Math.max(this.skip*e.PointArray.BYTES_PER_ELEMENT,e.PointArray.BYTES_PER_ELEMENT),this.ybuf=new ArrayBuffer(this.ybufn));var o=this.hcb.xstart+this.hcb.xdelta*(this.size-1);this.xmin=this.hcb.xmin||Math.min(this.hcb.xstart,o),this.xmax=this.hcb.xmax||Math.max(this.hcb.xstart,o),this.xdelta=this.hcb.xdelta,this.xstart=this.hcb.xstart}return t.length>0&&e.filad(this.hcb,t,n),!!i},prep:function(t,i){var n=this.plot._Gx,r=this.plot._Mx,o=Math.ceil(this.size),a=this.skip;if(0===o)return{num:0,start:0,end:0};o*e.PointArray.BYTES_PER_ELEMENT>this.pointbufsize&&(this.pointbufsize=o*e.PointArray.BYTES_PER_ELEMENT,this.xptr=new ArrayBuffer(this.pointbufsize),this.yptr=new ArrayBuffer(this.pointbufsize),this.xpoint=new e.PointArray(this.xptr),this.ypoint=new e.PointArray(this.yptr));var s,l,h,c=new e.PointArray(this.ybuf),u=this.xmin,d=this.xmax;if(5===n.cmode||this.xsub>0)o<=0?(u=n.panxmin,d=n.panxmax):5!==n.cmode?this.xpoint=new e.PointArray(this.xbuf):this.cx?e.vmov(c,a,this.xpoint,1,o):0!==this.line?(h=e.vmxmn(c,o),this.xpoint[0]=h.smax,this.xpoint[1]=h.smin,s=0,l=2,o=2):this.xpoint=c,o>0&&(d=(h=e.vmxmn(this.xpoint,o)).smax,u=h.smin,s=0,l=o);else if(o>0){var f=this.xstart,x=this.xdelta,m=o;n.index?(s=0,l=o-1):x>=0?(s=Math.max(1,Math.min(m,Math.round((t-f)/x)))-1,l=Math.max(1,Math.min(m,Math.round((i-f)/x)+2))-1):(s=Math.max(1,Math.min(m,Math.round((i-f)/x)-1))-1,l=Math.max(1,Math.min(m,Math.round((t-f)/x)+2))-1),(o=l-s+1)<0&&(e.log.debug("Nothing to plot"),o=0),c=new e.PointArray(this.ybuf).subarray(s*a),f+=x*s;for(var p=0;p<o;p++)n.index?this.xpoint[p]=this.imin+p+1:this.xpoint[p]=f+p*x}if(n.panxmin>n.panxmax?(n.panxmin=u,n.panxmax=d):(n.panxmin=Math.min(n.panxmin,u),n.panxmax=Math.max(n.panxmax,d)),o<=0)return e.log.debug("Nothing to plot"),{num:o,start:s,end:l};if(this.cx)1===n.cmode?e.cvmag(c,this.ypoint,o):2===n.cmode?25===n.plab?(e.cvpha(c,this.ypoint,o),e.vsmul(this.ypoint,1/(2*Math.PI),this.ypoint,o)):24!==n.plab?e.cvpha(c,this.ypoint,o):e.cvphad(c,this.ypoint,o):3===n.cmode?e.vmov(c,a,this.ypoint,1,o):n.cmode>=6?e.cvmag2(c,this.ypoint,o):n.cmode>=4&&e.vmov(c.subarray(1),a,this.ypoint,1,o);else if(5===n.cmode)e.vfill(this.ypoint,0,o);else if(1===n.cmode||n.cmode>=6)for(p=0;p<o;p++)this.ypoint[p]=Math.abs(c[p]);else for(p=0;p<o;p++)this.ypoint[p]=c[p];if(n.cmode>=6){e.vlog10(this.ypoint,n.dbmin,this.ypoint);var y=10;7===n.cmode&&(y=20),n.lyr.length>0&&n.lyr[0].cx&&(y/=2),e.vsmul(this.ypoint,y,this.ypoint)}var v=(d=(h=e.vmxmn(this.ypoint,o)).smax)-(u=h.smin);if(v<0&&(u=(d=u)+v,v=-v),v<=1e-20?(u-=1,d+=1):(u-=.02*v,d+=.02*v),0===r.level&&(n.panymin>n.panymax?(n.panymin=u,n.panymax=d):(n.panymin=Math.min(n.panymin,u),n.panymax=Math.max(n.panymax,d)),n.autol>1)){var _=1/Math.max(n.autol,1);n.panymin=n.panymin*_+r.stk[0].ymin*(1-_),n.panymax=n.panymax*_+r.stk[0].ymax*(1-_)}return{num:o,start:s,end:l}},draw:function(){var t=this.plot._Mx,i=this.plot._Gx,r=this.color,o=this.symbol,a=this.radius,s=0,l={};this.fillStyle?l.fillStyle=this.fillStyle:i.fillStyle&&(l.fillStyle=i.fillStyle),this.options&&(l.highlight=this.options.highlight,l.noclip=this.options.noclip),0===this.line?s=0:(s=1,this.thick>0?s=this.thick:this.thick<0&&(s=Math.abs(this.thick),l.dashed=!0),1===this.line&&(l.vertsym=!0),2===this.line&&(l.horzsym=!0),4===this.line&&(l.horzsym=!0,l.vertsym=!0));var h,c,u=i.segment&&5!==i.cmode&&this.xsub>0&&!0,d=this.xdelta;if(this.xdata?(h=this.xmin,c=this.xmax):(h=Math.max(this.xmin,t.stk[t.level].xmin))>=(c=Math.min(this.xmax,t.stk[t.level].xmax))&&(i.panxmin=Math.min(i.panxmin,this.xmin),i.panxmax=Math.max(i.panxmax,this.xmax)),!i.all){var f=(i.bufmax-1)*d;f>=-0?c=Math.min(c,h+f):h=Math.max(h,c+f)}if(0!==s||0!==o){for(;h<c;){this.hcb.pipe||this.get_data(h,c);var x=this.prep(h,c);x.num>0&&(u||n.trace(t,r,new e.PointArray(this.xptr),new e.PointArray(this.yptr),x.num,x.start,1,s,o,a,l)),i.all?0===this.size?h=c:i.index?h+=x.num:d>=0?h+=this.size*d:c+=this.size*d:h=c}if(this.position&&"scrolling"===this.drawmode){var m=n.real_to_pixel(t,this.position*this.xdelta,0);m.x>t.l&&m.x<t.r&&n.draw_line(t,"white",m.x,t.t,m.x,t.b)}}},add_highlight:function(t){this.options.highlight||(this.options.highlight=[]);var e=t.xstart,i=t.xend,n=isNaN(e),r=isNaN(i);!0!==n&&null!=e||(this.options.highlight=[]),!0!==r&&null!=i||(this.options.highlight=[]),t instanceof Array?this.options.highlight.push.apply(this.options.highlight,t):this.options.highlight.push(t),this.plot.refresh()},remove_highlight:function(t){if(this.options.highlight){for(var e=this.options.highlight.length;e--;)t!==this.options.highlight[e]&&t!==this.options.highlight[e].id||this.options.highlight.splice(e,1);this.plot.refresh()}},get_highlights:function(){return this.options.highlight?this.options.highlight.slice(0):[]},clear_highlights:function(){this.options.highlight&&(this.options.highlight=void 0,this.plot.refresh())}};var o=[0,53,27,80,13,40,67,93,7,60,33,87,20,47,73,100];r.overlay=function(t,i,a){var s=t._Gx,l=t._Mx;2===i.class&&e.force1000(i),i.buf_type="D";var h=1;if(2===i.class&&i.size>0){var c=i.size/i.subsize;h=Math.min(c,16-s.lyr.length)}var u=a.name;delete a.name;for(var d=[],f=0;f<h;f++){var x=new r(t);x.init(i,a);var m=s.lyr.length%o.length;for(var p in x.color=n.getcolor(l,e.Mc.colormap[3].colors,o[m]),2===i.class?(void 0!==u&&(Array.isArray(u)?x.name=u[f]:(x.name=u,x.name=x.name+"."+n.pad((f+1).toString(),3,"0"))),x.name||(i.file_name?x.name=e.trim_name(i.file_name):x.name="layer_"+s.lyr.length,x.name=x.name+"."+n.pad((f+1).toString(),3,"0")),x.offset=f*i.subsize):(void 0!==u?x.name=u:i.file_name?x.name=e.trim_name(i.file_name):x.name="layer_"+s.lyr.length,x.offset=0),a)void 0!==x[p]&&(x[p]=a[p]);t.add_layer(x)&&d.push(x)}return d},t.exports=r}()},function(t,e,i){
/**
 * @license
 * File: sigplot.layer2d.js
 * Copyright (c) 2012-2017, LGS Innovations Inc., All rights reserved.
 *
 * This file is part of SigPlot.
 *
 * Licensed to the LGS Innovations (LGS) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  LGS licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License
 */var n,r,o;n=i(5),r=i(6),(o=function(t){this.plot=t,this.offset=0,this.xstart=0,this.xdelta=0,this.ystart=0,this.ydelta=0,this.imin=0,this.xmin=0,this.xmax=0,this.name="",this.cx=!1,this.hcb=void 0,this.display=!0,this.color=0,this.line=3,this.thick=1,this.symbol=0,this.radius=3,this.skip=0,this.xsub=0,this.ysub=0,this.xdata=!1,this.modified=!1,this.preferred_origin=4,this.opacity=1,this.xcompression=t._Gx.xcompression,this.lpb=void 0,this.yc=1,this.options={}}).prototype={init:function(t){var e=this.plot._Gx,i=this.plot._Mx;if(this.hcb=t,this.hcb.buf_type="D",this.hcb.pipe){var r=this;this.position=0,this.frame=0,this.lps=this.hcb.lps||Math.ceil(Math.max(1,i.b-i.t)),n.addPipeWriteListener(this.hcb,function(){r._onpipewrite()})}else this.lps=this.hcb.lps||Math.ceil(t.size);if(this.offset=0,this.xbufn=0,this.ybufn=0,this.drawmode="scrolling",t.class<=2&&(this.xsub=-1,this.ysub=1,this.cx="C"===t.format[0]),this.skip=1,this.cx&&(this.skip=2),e.index)this.xstart=1,this.xdelta=1,this.xmin=1,this.xmax=t.subsize,this.ystart=1,this.ydelta=1,this.ymin=1,this.ymax=this.size;else{this.xstart=t.xstart,this.xdelta=t.xdelta;var o=t.xstart+t.xdelta*t.subsize;this.xmin=this.hcb.xmin||Math.min(t.xstart,o),this.xmax=this.hcb.xmax||Math.max(t.xstart,o),this.ystart=t.ystart,this.ydelta=t.ydelta,o=t.ystart+t.ydelta*this.lps,this.ymin=this.hcb.ymin||Math.min(t.ystart,o),this.ymax=this.hcb.ymax||Math.max(t.ystart,o)}this.xframe=this.hcb.subsize,this.yframe=this.lps*this.hcb.subsize/this.xframe,0===this.lpb&&(this.lpb=this.yframe),(!this.lpb||this.lpb<=0)&&(this.lpb=16),this.lpb=Math.max(1,this.lpb/this.yc)*this.yc,this.xlab=t.xunits,this.ylab=t.yunits},_onpipewrite:function(){for(var t=this.plot._Gx,e=this.plot._Mx;n.pavail(this.hcb)>=this.hcb.subsize*this.hcb.spa;){if("scrolling"!==this.drawmode&&(this.hcb.ystart+=this.hcb.ydelta,this.ystart=this.hcb.ystart,this.ymin=this.hcb.ystart-this.hcb.ydelta*this.lps,this.ymax=this.hcb.ystart),"falling"===this.drawmode)this.position=0,this.img&&r.shift_image_rows(e,this.img,1);else if("rising"===this.drawmode)this.position=this.lps-1,this.img&&r.shift_image_rows(e,this.img,-1);else{if("scrolling"!==this.drawmode)throw"Invalid draw mode";var i=Math.abs(this.ymax-this.ymin);this.ystart=0,this.ymin=0,this.ymax=i,this.position>=this.lps&&(this.position=0)}if(!this.buf)return;if(0===n.grabx(this.hcb,this.buf,this.hcb.subsize*this.hcb.spa))return void n.log.error("Internal error");var o=new n.PointArray(this.hcb.subsize);this.cx?1===t.cmode?n.cvmag(this.buf,o,o.length):2===t.cmode?25===t.plab?(n.cvpha(this.buf,o,o.length),n.vsmul(o,1/(2*Math.PI),o,o.length)):24!==t.plab?n.cvpha(this.buf,o,o.length):n.cvphad(this.buf,o,o.length):3===t.cmode?n.vmov(this.buf,this.skip,o,1,o.length):4===t.cmode?n.vmov(this.buf.subarray(1),this.skip,o,1,o.length):5===t.cmode?n.vfill(o,0,o.length):6===t.cmode?n.cvmag2logscale(this.buf,t.dbmin,10,o):7===t.cmode&&n.cvmag2logscale(this.buf,t.dbmin,20,o):1===t.cmode?n.vabs(this.buf,o):2===t.cmode?n.vfill(o,0,o.length):3===t.cmode?n.vmov(this.buf,this.skip,o,1,o.length):4===t.cmode?n.vfill(o,0,o.length):5===t.cmode?n.vfill(o,0,o.length):6===t.cmode?n.vlogscale(this.buf,t.dbmin,10,o):7===t.cmode&&n.vlogscale(this.buf,t.dbmin,20,o);for(var a,s,l=o[0],h=o[0],c=0;c<o.length;c++)o[c]<l&&(l=o[c]),o[c]>h&&(h=o[c]);if(1===t.autol)a=l,s=h;else if(t.autol>1){var u=1/Math.max(t.autol,1);a=t.zmin*u+l*(1-u),s=t.zmax*u+h*(1-u)}else t.autol<0&&(u=1/Math.max(5,1),a=t.zmin*u+l*(1-u),s=t.zmax*u+h*(1-u));if(0!=(1&t.autoz)&&(t.zmin=a),0!=(2&t.autoz)&&(t.zmax=s),t.p_cuts){if("scrolling"===this.drawmode){var d=this.position*this.hcb.subsize,f=d+this.hcb.subsize,x=0;for(c=d;c<f;c++)this.zbuf[c]=o[x],x++}if("falling"===this.drawmode){var m=(this.lps-1)*this.hcb.subsize,p=this.zbuf.slice(0,m);for(this.zbuf=[],c=0;c<this.hcb.subsize;c++)this.zbuf.push(o[c]);this.zbuf.push.apply(this.zbuf,p),p=[]}if("rising"===this.drawmode){for(m=this.lps*this.hcb.subsize,p=this.zbuf.slice(this.hcb.subsize,m),this.zbuf=[],this.zbuf.push.apply(this.zbuf,p),c=0;c<this.hcb.subsize;c++)this.zbuf.push(o[c]);p=[]}}this.img&&r.update_image_row(e,this.img,o,this.position,t.zmin,t.zmax,this.xcompression),this.frame+=1,"scrolling"===this.drawmode&&(this.position=(this.position+1)%this.lps),0===e.level&&(t.panymin=this.ymin,t.panymax=this.ymax,e.stk[0].ymin=this.ymin,e.stk[0].ymax=this.ymax)}},get_data:function(){var t=this.hcb;this.buf||(this.hcb.pipe?(this.buf=this.hcb.createArray(null,0,this.hcb.subsize*this.hcb.spa),this.zbuf=new n.PointArray(this.hcb.subsize)):(this.buf=this.hcb.createArray(null,0,this.lps*this.hcb.subsize*this.hcb.spa),this.zbuf=new n.PointArray(this.lps*this.hcb.subsize))),this.hcb.pipe||n.grab(t,this.buf,0,t.subsize)},get_z:function(t,e){var i=Math.floor(t/this.hcb.xdelta),n=Math.floor(e/this.hcb.ydelta)*this.hcb.subsize+i;return this.zbuf[n]},change_settings:function(t){var e=this.plot._Gx;if(t.subsize){this.hcb.subsize=t.subsize,this.hcb.ape=t.subsize,this.hcb.size=this.hcb.dview.length/(this.hcb.spa*this.hcb.ape),this.lps=Math.ceil(this.hcb.size);var i=this.hcb.ystart+this.hcb.ydelta*this.lps;this.ymin=this.hcb.ymin||Math.min(this.hcb.ystart,i),this.ymax=this.hcb.ymax||Math.max(this.hcb.ystart,i)}if(void 0!==t.cmode&&(this.img=void 0,0!=(1&e.autoz)&&(e.zmin=void 0),0!=(2&e.autoz)&&(e.zmax=void 0)),void 0===t.zmin&&void 0===t.zmax&&void 0===t.autoz||(this.img=void 0),void 0!==t.cmap&&(this.img=void 0),void 0===t.drawmode&&void 0===t.xmin&&void 0===t.xmax&&void 0===t.xdelta&&void 0===t.xstart||(void 0===t.drawmode&&(t.drawmode=this.drawmode),this.drawmode=t.drawmode,this.position=0,this.frame=0,this.hcb.pipe?(this.buf=this.hcb.createArray(null,0,this.hcb.subsize*this.hcb.spa),this.zbuf=new n.PointArray(this.hcb.subsize)):(this.buf=this.hcb.createArray(null,0,this.lps*this.hcb.subsize*this.hcb.spa),this.zbuf=new n.PointArray(this.lps*this.hcb.subsize)),this.img=void 0,"falling"===this.drawmode?(this.plot._Mx.origin=1,this.preferred_origin=1):(this.plot._Mx.origin=4,this.preferred_origin=4)),void 0!==t.opacity&&(this.opacity=t.opacity),void 0!==t.p_cuts){var r=e.p_cuts;r=null===t.p_cuts?!r:t.p_cuts,this.hcb.pipe&&(r?(this.buf=this.hcb.createArray(null,0,this.hcb.subsize*this.hcb.spa),this.zbuf=new n.PointArray(this.hcb.subsize)):(this.buf=this.hcb.createArray(null,0,this.lps*this.hcb.subsize*this.hcb.spa),this.zbuf=new n.PointArray(this.lps*this.hcb.subsize)))}void 0!==t.xcmp&&("smooth"===t.xcmp?this.xcompression=0:"avg"===t.xcmp?this.xcompression=1:"min"===t.xcmp?this.xcompression=2:"max"===t.xcmp?this.xcompression=3:"first"===t.xcmp?this.xcompression=4:"maxabs"===t.xcmp?this.xcompression=5:this.xcompression=t.xcmp)},reload:function(t,e){if(this.hcb.pipe)throw"reload cannot be used with pipe, use push instead";var i=this.hcb.dview.length!==t.length||e;if(e)for(var n in e)this.hcb[n]=e[n],("xstart"===n||"xdelta"===n|"ystart"===n||"ydelta"===n||"subsize"===n)&&(i=!0);Array.isArray(t)&&Array.isArray(t[0])&&(this.hcb.type=2e3,this.hcb.class=2,this.hcb.subsize=t[0].length,this.hcb.size=t.length,i=!0),this.hcb.setData(t),this.init(this.hcb),this.img=null,this.buf=null;var r=this.xmin,o=this.xmax;if(i){var a=this.hcb.xstart+this.hcb.xdelta*this.hcb.subsize;this.xmin=Math.min(this.hcb.xstart,a),this.xmax=Math.max(this.hcb.xstart,a),this.xdelta=this.hcb.xdelta,this.xstart=this.hcb.xstart,r=void 0,o=void 0}return{xmin:r,xmax:o}},push:function(t,e,i){var r=this.plot._Gx,o=!1,a=null;if(e){for(var s in e.timestamp&&(a=e.timestamp,delete e.timestamp),e.subsize&&e.subsize!==this.hcb.subsize&&(this.hcb.subsize=e.subsize,this.hcb.pipe&&!r.p_cuts?(this.buf=this.hcb.createArray(null,0,this.hcb.subsize*this.hcb.spa),this.zbuf=new n.PointArray(this.hcb.subsize)):(this.buf=this.hcb.createArray(null,0,this.lps*this.hcb.subsize*this.hcb.spa),this.zbuf=new n.PointArray(this.lps*this.hcb.subsize)),o=!0),e)this.hcb[s]!==e[s]&&(this.hcb[s]=e[s],"type"===s&&(this.hcb.class=e[s]/1e3),o=!0);if(e.lps&&(this.lps=e.lps),o){var l=this.hcb.xstart+this.hcb.xdelta*this.hcb.subsize;this.xmin=Math.min(this.hcb.xstart,l),this.xmax=Math.max(this.hcb.xstart,l),this.xdelta=this.hcb.xdelta,this.xstart=this.hcb.xstart,this.ystart=this.hcb.ystart,this.ydelta=this.hcb.ydelta,l=this.hcb.ystart+this.hcb.ydelta*this.lps,this.ymin=Math.min(this.hcb.ystart,l),this.ymax=Math.max(this.hcb.ystart,l)}}return 1!==this.hcb.yunits&&4!==this.hcb.yunits||!this.hcb.timecode&&a&&(this.hcb.timecode=n.j1970toj1950(a),this.hcb.ystart=0,o=!0),t.length>0&&n.filad(this.hcb,t,i),o},prep:function(t,e){var i,o,a=this.plot._Gx,s=this.plot._Mx,l=this.lps,h=(this.skip,this.xmin),c=this.xmax,u=this.hcb.subsize;if(this.xcompression>0&&(u=Math.ceil(s.r-s.l)),this.get_data(t,e),this.hcb.pipe)a.panxmin>a.panxmax?(a.panxmin=h,a.panxmax=c):(a.panxmin=Math.min(a.panxmin,h),a.panxmax=Math.max(a.panxmax,c)),a.panymin>a.panxmax?(a.panymin=this.ymin,a.panymax=this.ymax):(a.panymin=Math.min(a.panymin,this.ymin),a.panymax=Math.max(a.panymax,this.ymax)),this.img||(void 0===a.zmin&&(a.zmin=0),void 0===a.zmax&&(a.zmax=0),this.img=r.create_image(s,null,this.hcb.subsize,u,this.lps,a.zmin+a.zoff,a.zmax+a.zoff,this.xcompression));else{if(5===a.cmode||this.xsub>0);else if(l>0){var d=this.xstart,f=this.xdelta,x=l;a.index?(i=0,o=l-1):f>=0?(i=Math.max(1,Math.min(x,Math.round((t-d)/f)))-1,o=Math.max(1,Math.min(x,Math.round((e-d)/f)+2))-1):(i=Math.max(1,Math.min(x,Math.round((e-d)/f)-1))-1,o=Math.max(1,Math.min(x,Math.round((t-d)/f)+2))-1),(l=o-i+1)<0&&(n.log.debug("Nothing to plot"),l=0)}if(a.panxmin>a.panxmax?(a.panxmin=h,a.panxmax=c):(a.panxmin=Math.min(a.panxmin,h),a.panxmax=Math.max(a.panxmax,c)),l<=0)return void n.log.debug("Nothing to plot");if(5===a.cmode||this.ysub>0);else if(l>0){var m=this.ystart,p=this.ydelta;x=l,a.index?(i=0,o=l-1):p>=0?(i=Math.max(1,Math.min(x,Math.round((t-m)/p)))-1,o=Math.max(1,Math.min(x,Math.round((e-m)/p)+2))-1):(i=Math.max(1,Math.min(x,Math.round((e-m)/p)-1))-1,o=Math.max(1,Math.min(x,Math.round((t-m)/p)+2))-1),(l=o-i+1)<0&&(n.log.debug("Nothing to plot"),l=0)}a.panymin>a.panymax?(a.panymin=this.ymin,a.panymax=this.ymax):(a.panymin=Math.min(a.panymin,this.ymin),a.panymax=Math.max(a.panymax,this.ymax)),this.cx?1===a.cmode?n.cvmag(this.buf,this.zbuf,this.zbuf.length):2===a.cmode?25===a.plab?(n.cvpha(this.buf,this.zbuf,this.zbuf.length),n.vsmul(this.zbuf,1/(2*Math.PI),this.zbuf,this.zbuf.length)):24!==a.plab?n.cvpha(this.buf,this.zbuf,this.zbuf.length):n.cvphad(this.buf,this.zbuf,this.zbuf.length):3===a.cmode?n.vmov(this.buf,this.skip,this.zbuf,1,this.zbuf.length):4===a.cmode?n.vmov(this.buf.subarray(1),this.skip,this.zbuf,1,this.zbuf.length):5===a.cmode?n.vfill(this.zbuf,0,this.zbuf.length):6===a.cmode?n.cvmag2logscale(this.buf,a.dbmin,10,this.zbuf):7===a.cmode&&n.cvmag2logscale(this.buf,a.dbmin,20,this.zbuf):1===a.cmode?n.vabs(this.buf,this.zbuf):2===a.cmode?n.vfill(this.zbuf,0,this.zbuf.length):3===a.cmode?n.vmov(this.buf,this.skip,this.zbuf,1,this.zbuf.length):4===a.cmode?n.vfill(this.zbuf,0,this.zbuf.length):5===a.cmode?n.vfill(this.zbuf,0,this.zbuf.length):6===a.cmode?n.vlogscale(this.buf,a.dbmin,10,this.zbuf):7===a.cmode&&n.vlogscale(this.buf,a.dbmin,20,this.zbuf);var y=this.zbuf,v=0,_=0;if(a.autol<=0||this.hcb.pipe){if(y.length>0){v=y[0],_=y[0];for(var b=0;b<y.length&&!(b/this.xframe>=this.lpb);b++)y[b]<v&&(v=y[b]),y[b]>_&&(_=y[b])}0!=(1&a.autoz)&&(void 0!==a.zmin?a.zmin=Math.min(a.zmin,v):a.zmin=v),0!=(2&a.autoz)&&(void 0!==a.zmax?a.zmax=Math.min(a.zmax,_):a.zmax=_),this.img=r.create_image(s,this.zbuf,this.hcb.subsize,u,this.lps,a.zmin+a.zoff,a.zmax+a.zoff,this.xcompression)}else{var g=this.hcb.size,w=1/Math.max(a.autol,1);if(this.img||(this.img=r.create_image(s,this.zbuf,this.hcb.subsize,u,this.lps,a.zmin+a.zoff,a.zmax+a.zoff)),a.zmin=0,a.zmax=0,y.length>0)for(var k=0;k<g;k++){var M=k*this.xframe;for(v=y[M],_=y[M],b=0;b<this.xframe;b++)v=Math.min(y[M+b],v),_=Math.max(y[M+b],_);2!==a.autoz&&void 0!==v&&(a.zmin=v*w+a.zmin*(1-w)),1!==a.autoz&&void 0!==_&&(a.zmax=_*w+a.zmax*(1-w)),r.update_image_row(s,this.img,y.subarray(M,M+this.xframe),k,a.zmin,a.zmax)}}}if(this.img.cmode=a.cmode,this.img.cmap=a.cmap,this.img.origin=s.origin,this.hcb.pipe&&this.frame<this.lps){var S=new Uint32Array(this.img);if("rising"===this.drawmode)for(b=0;b<S.length-this.frame*u;b++)S[b]=0;else for(b=this.frame*u;b<S.length;b++)S[b]=0}return l},draw:function(){var t=this.plot._Mx,e=this.plot._Gx,i=this.hcb;if(this.hcb.pipe){var n=this.hcb.lps||Math.ceil(Math.max(1,t.b-t.t));if(n!==this.lps&&this.buf){this.lps=n,this.position>=this.lps&&(this.position=0);var o=i.ystart+i.ydelta*this.lps;this.ymin=Math.min(i.ystart,o),this.ymax=Math.max(i.ystart,o),this.img=null,this.plot.rescale()}}var a=Math.max(this.xmin,t.stk[t.level].xmin),s=Math.min(this.xmax,t.stk[t.level].xmax);if(a>=s)return e.panxmin=Math.min(e.panxmin,this.xmin),void(e.panxmax=Math.max(e.panxmax,this.xmax));var l=Math.max(this.ymin,t.stk[t.level].ymin),h=Math.min(this.ymax,t.stk[t.level].ymax),c=Math.abs(s-a)+1,u=Math.abs(h-l)+1;c=Math.floor(c/i.xdelta),u=Math.floor(u/i.ydelta),c=Math.min(c,i.subsize),u=Math.min(u,i.size);var d=r.real_to_pixel(t,a,l),f=r.real_to_pixel(t,s,h),x=(f.x-d.x)/c,m=(f.y-d.y)/u;if(e.xe=Math.max(1,Math.round(x)),e.ye=Math.max(1,Math.round(m)),this.img&&this.buf&&e.cmode===this.img.cmode&&e.cmap===this.img.cmap&&t.origin===this.img.origin||this.prep(a,s),this.img&&r.draw_image(t,this.img,this.xmin,this.ymin,this.xmax,this.ymax,this.opacity,e.rasterSmoothing),null!==this.position&&"scrolling"===this.drawmode){var p=r.real_to_pixel(t,0,this.position*this.ydelta);p.y>t.t&&p.y<t.b&&r.draw_line(t,"white",t.l,p.y,t.r,p.y)}}},o.overlay=function(t,e,i){var r=t._Gx;t._Mx,e.buf_type="D",e.ystart||(e.ystart=0),e.ydelta||(e.ydelta=1);var a=new o(t);a.init(e),e.file_name?a.name=n.trim_name(e.file_name):a.name="layer_"+r.lyr.length,a.change_settings(i);var s=[];return t.add_layer(a)&&s.push(a),s},t.exports=o},,function(t,e,i){t.exports=i(4)}])});
//# sourceMappingURL=react-sigplot.js.map