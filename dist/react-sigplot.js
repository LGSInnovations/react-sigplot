!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["react-sigplot"]=e():t["react-sigplot"]=e()}(window,function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=21)}([function(t,e,i){t.exports=i(11)()},function(t,e,i){"use strict";t.exports=i(10)},function(t,e,i){
/**
 * @license
 * File: sigplot.js
 * Copyright (c) 2012-2017, LGS Innovations Inc., All rights reserved.
 *
 * This file is part of SigPlot.
 *
 * Licensed to the LGS Innovations (LGS) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  LGS licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */
!function(){var e=i(13),n=i(5),o=i(7),r=i(14),a=i(3),s=i(6),l=i(18),h=i(19);function c(t,e){if(!(this instanceof c))return new c.Plot(t,e)}c.bluefile=o,c.matfile=r,c.m=a,c.mx=s,c.Layer1D=l,c.Layer2D=h,c.version="version-PLACEHOLDER";var d="Keypress Table:\n--------------\n?       - Main help box.\nA       - Toggle display x,y readouts:\n          (absc) -> (index) -> (1/absc) -> (time).\nB       - Toggle LM Drag Mode:\n          (box) -> (horizontal) -> (vertical).\nC       - Toggle controls.\nK       - Show Marker.\nL       - Toggle legend.\nM       - Pops up main menu\nR       - Toggle display specs (x/y readout)\nS       - Toggle display specs and axes.\nT       - Popup box with timecode value at mouse.\nX       - In 1D mode, popup box with X value at mouse.\n        - In 2D mode, toggle x-cut display.\nY       - In 1D mode, popup box with Y value at mouse.\n        - In 2D mode, toggle y-cut display.\nP       - In 2D mode, displays p-cuts along side and bottom.\nF       - Toggle fullscreen.\nCntrl+I - Invert colors.",u={lines:13,length:7,width:4,radius:10,corners:1,rotate:0,color:"#FFF",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"auto",left:"auto"};c.browserIsCompatible=function(){var t=!!document.createElement("canvas").getContext,e="ArrayBuffer"in window;return t&&e},c.Plot=function(t,e){if(!c.browserIsCompatible())throw"Browser is not compatible";this._Mx=s.open(t);var i=this._Mx;return this._Gx=new function(){this.xptr=void 0,this.yptr=void 0,this.retx=0,this.rety=0,this.xmrk=0,this.ymrk=0,this.aretx=0,this.arety=0,this.xstart=0,this.xdelta=0,this.panxmin=0,this.panxmax=0,this.panymin=0,this.panymax=0,this.xmin=0,this.xmax=0,this.xmult=void 0,this.ymin=0,this.ymax=0,this.ymult=void 0,this.zmin=void 0,this.zmax=void 0,this.zoff=0,this.dbmin=0,this.pxscl=0,this.pyscl=0,this.pmt=0,this.note="",this.format="",this.pl=0,this.pr=0,this.pt=0,this.pb=0,this.px1=0,this.px2=0,this.py1=0,this.py2=0,this.pyl=0,this.pthk=0,this.modlayer=0,this.modsource=0,this.modified=!1,this.modmode=0,this.xdiv=0,this.ydiv=0,this.all=!1,this.expand=!1,this.cross=!1,this.grid=!0,this.gridBackground=void 0,this.index=!1,this.pan=!0,this.specs=!0,this.legend=!0,this.xdata=!1,this.show_x_axis=!0,this.show_y_axis=!0,this.show_readout=!0,this.hide_note=!1,this.autohide_readout=!1,this.autohide_panbars=!1,this.panning=void 0,this.panmode=0,this.hold=!1,this.sections=0,this.iysec=0,this.nsec=0,this.isec=0,this.xlab=void 0,this.xlabel=void 0,this.ylab=void 0,this.ylabel=void 0,this.xcompression=0,this.default_rubberbox_action="zoom",this.default_rubberbox_mode="box",this.wheelscroll_mode_natural=!0,this.scroll_time_interval=10,this.repeatPanning=void 0,this.stillPanning=void 0,this.autol=-1,this.lineSmoothing=!1,this.rasterSmoothing=!1,this.wheelZoom=!1,this.wheelZoomPercent=.2,this.inContinuousZoom=!1,this.lyr=[],this.HCB=[],this.plugins=[],this.plotData=document.createElement("canvas"),this.plotData.valid=!1,this.lg_colorbar=!1,this.cbb_top_x1=0,this.cbb_top_y1=0,this.cbb_bot_x1=0,this.cbb_bot_y1=0,this.cbb_width=0,this.cbb_height=0,this.p_cuts=!1,this.x_box_x=0,this.x_box_y=0,this.x_box_h=0,this.x_box_w=0,this.y_box_x=0,this.y_box_y=0,this.y_box_h=0,this.y_box_w=0,this.p_cuts_xpos=void 0,this.p_cuts_ypos=void 0,this.x_cut_data=[],this.y_cut_data=[],this.xcut=void 0,this.xcut_layer=void 0,this.x_cut_press_on=!1,this.xcut_now=!1,this.ycut=void 0,this.ycut_layer=void 0,this.y_cut_press_on=!1,this.ycut_now=!1,this.ylabel_stash=void 0,this.xlabel_stash=void 0,this.element1=void 0,this.element2=void 0,this.xyKeys="automatic",this.x_pop_now=!1,this.y_pop_now=!1,this.old_drawmode=void 0,this.old_autol=void 0},this._Gx.parent=t,this.mouseOnCanvas=!1,e||(e={}),function(t,e){var i=t._Mx,n=t._Gx;e.xlab||(e.xlab=0);e.ylab||(e.ylab=0);e.xlab=a.unit_lookup(e.xlab),e.ylab=a.unit_lookup(e.ylab),n.xmin=void 0===e.xmin?0:e.xmin,n.xmax=void 0===e.xmax?0:e.xmax;var o=void 0!==e.xmin,r=void 0!==e.xmax,l=void 0===e.cmode?"":e.cmode.toUpperCase();void 0===e.line||e.line;n.ylab=e.ylab,n.ylabel=e.ylabel,n.ymin=void 0===e.ymin?0:e.ymin,n.ymax=void 0===e.ymax?0:e.ymax;var h=void 0!==e.ymin,c=void 0!==e.ymax;n.zmin=e.zmin,n.zmax=e.zmax;var d=void 0!==e.zmin,u=void 0!==e.zmax;void 0!==e.colors&&s.setbgfg(i,e.colors.bg,e.colors.fg,i.xi);void 0!==e.xi&&s.invertbgfg(i);n.forcelab=void 0===e.forcelab||e.forcelab,n.all=void 0!==e.all&&e.all,n.expand=void 0!==e.expand&&e.expand,n.xlab=e.xlab,n.xlabel=e.xlabel,n.segment=void 0!==e.segment&&e.segment,n.plab=24;var f=void 0===e.phunits?"D":e.phunits;"R"===f[0]?n.plab=23:"C"===f[0]&&(n.plab=25);n.xdiv=void 0===e.xdiv?5:e.xdiv,n.ydiv=void 0===e.ydiv?5:e.ydiv,n.xcompression=e.xcmp||0,n.rasterSmoothing=e.smoothing||!1,i.origin=1,e.yinv&&(i.origin=4);n.pmt=void 0===e.pmt?1:e.pmt,n.bufmax=void 0===e.bufmax?32768:e.bufmax,n.sections=void 0===e.nsec?0:e.nsec,n.anno_type=void 0===e.anno_type?0:e.anno_type,n.xfmt=void 0===e.xfmt?"":e.xfmt,n.yfmt=void 0===e.yfmt?"":e.yfmt,n.index=void 0!==e.index&&e.index;var x=n.index||"IN"===l.slice(0,2);x&&(o&&1===n.xmin&&(o=!1),r&&1===n.xmin&&(r=!1));n.xdata=!1,n.note="",n.hold=0,n.always_show_marker=e.always_show_marker||!1,a.vstype("D"),e.inputs||g(t,!1);var p=l;n.lyr.length>0&&n.lyr[0].cx?n.cmode=1:n.cmode=3;"MA"!==p&&"INMA"!==p&&"ABMA"!==p&&"__MA"!==p&&"MAGNITUDE"!==p||(n.cmode=1);"PH"!==p&&"INPH"!==p&&"ABPH"!==p&&"__PH"!==p&&"PHASE"!==p||(n.cmode=2);"RE"!==p&&"INRE"!==p&&"ABRE"!==p&&"__RE"!==p&&"REAL"!==p||(n.cmode=3);"IM"!==p&&"INIM"!==p&&"ABIM"!==p&&"__IM"!==p&&"IMAGINARY"!==p||(n.cmode=4);"LO"!==p&&"D1"!==p&&"INLO"!==p&&"IND1"!==p&&"ABIM"!==p&&"ABD1"!==p&&"__LO"!==p&&"__D1"!==p&&"10*LOG10"!==p||(n.cmode=6);"L2"!==p&&"D2"!==p&&"INL2"!==p&&"IND2"!==p&&"ABLO"!==p&&"ABD2"!==p&&"__L2"!==p&&"__D2"!==p&&"20*LOG10"!==p||(n.cmode=7);"RI"!==p&&"IR"!==p&&"INRI"!==p&&"INIR"!==p&&"ABRI"!==p&&"ABIR"!==p&&"__RI"!==p&&"__IR"!==p&&"IMAG/REAL"!==p&&"REAL/IMAG"!==p||(n.index?alert("Imag/Real mode not permitted in INDEX mode"):n.cmode=5);if(n.basemode=n.cmode,t.change_settings({cmode:n.cmode}),n.dbmin=1e-20,n.cmode>=6){var y=10;7===n.cmode&&(y=20),"L"===p[0]||"1"===p[0]||"2"===p[0]?(n.lyr.length>0&&n.lyr[0].cx?(n.ymin=Math.max(n.ymin,1e-10),n.ymax=Math.max(n.ymax,1e-10)):(n.ymin=Math.max(n.ymin,1e-20),n.ymax=Math.max(n.ymax,1e-20)),n.ymin=a.log10(n.ymin)*y,n.ymax=a.log10(n.ymax)*y):n.lyr.length>0&&n.lyr[0].cx?(n.ymin=Math.max(-18*y,n.ymin),n.ymax=Math.max(-18*y,n.ymax),n.dbmin=1e-37):Math.min(n.ymin,n.ymax)<-20*y&&(n.ymin=Math.max(-37*y,n.ymin),n.ymax=Math.max(-37*y,n.ymax),n.dbmin=Math.pow(10,Math.min(n.ymin,n.ymax)/y))}i.level=0,x&&!n.index&&(o&&(n.xmin=n.xstart+n.xdelta*(n.xmin-1)),o&&(n.xmax=n.xstart+n.xdelta*(n.xmax-1)));switch(n.xmult=e.xmult,n.ymult=e.xmult,e.autox){case"none":e.autox=-1;break;case"min":e.autox=1;break;case"max":e.autox=2;break;case"full":e.autox=3}n.autox=void 0===e.autox?-1:e.autox,n.autox<0&&(n.autox=0,o||(n.autox+=1),r||(n.autox+=2));switch(e.autoy){case"none":e.autoy=-1;break;case"min":e.autoy=1;break;case"max":e.autoy=2;break;case"full":e.autoy=3}n.autoy=void 0===e.autoy?-1:e.autoy,n.autoy<0&&(n.autoy=0,h||(n.autoy+=1),c||(n.autoy+=2));switch(e.autoz){case"none":e.autoz=-1;break;case"min":e.autoz=1;break;case"max":e.autoz=2;break;case"full":e.autoz=3}n.autoz=void 0===e.autoz?-1:e.autoz,n.autoz<0&&(n.autoz=0,d||(n.autoz+=1),u||(n.autoz+=2));n.autol=void 0===e.autol?-1:e.autol,o||(n.xmin=void 0);r||(n.xmax=void 0);O(t,{get_data:!0},n.xmin,n.xmax,n.xlab,n.ylab),o||(n.xmin=i.stk[0].xmin);r||(n.xmax=i.stk[0].xmax);h||(n.ymin=i.stk[0].ymin);c||(n.ymax=i.stk[0].ymax);n.xmin>n.xmax&&(i.stk[0].xmin=n.xmax,n.xmax=n.xmin,n.xmin=i.stk[0].xmin);n.ymin>n.ymax&&(i.stk[0].ymin=n.ymax,n.ymax=n.ymin,n.ymin=i.stk[0].ymin);i.stk[0].xmin=n.xmin,i.stk[0].xmax=n.xmax,i.stk[0].ymin=n.ymin,i.stk[0].ymax=n.ymax,n.panxmin=Math.min(n.panxmin,n.xmin),n.panxmax=Math.max(n.panxmax,n.xmax),n.panymin=Math.min(n.panymin,n.ymin),n.panymax=Math.max(n.panymax,n.ymax),n.xmin=i.stk[0].xmin,n.ymin=i.stk[0].ymin,e.font_family&&(i.font_family=e.font_family);e.font_width&&(i.font_width=e.font_width);e.font_scaled&&(i.font_scaled=!0);var v=i.font_width;i.font_scaled&&(v=Math.min(i.font_width,i.width/64));s.set_font(i,v),n.ncolors=void 0===e.ncolors?500:e.ncolors,n.cmap=null,e.cmap?n.cmap=e.cmap:n.cmap=void 0===e.xc?-1:e.xc;m(t,n.cmap),"leftmouse"===e.xcnt?n.cntrls=1:"continuous"===e.xcnt?n.cntrls=2:n.cntrls=void 0===e.xcnt?1:e.xcnt;n.default_rubberbox_mode=void 0===e.rubberbox_mode?"box":e.rubberbox_mode,n.default_rubberbox_action=void 0===e.rubberbox_action?"zoom":e.rubberbox_action,n.default_rightclick_rubberbox_mode=void 0===e.rightclick_rubberbox_mode?"box":e.rightclick_rubberbox_mode,n.default_rightclick_rubberbox_action=void 0===e.rightclick_rubberbox_action?null:e.rightclick_rubberbox_action,n.cross=void 0!==e.cross&&e.cross,n.grid=void 0===e.nogrid||!e.nogrid,n.fillStyle=e.fillStyle,n.gridBackground=e.gridBackground,n.gridStyle=e.gridStyle,n.wheelZoom=e.wheelZoom,n.wheelZoomPercent=e.wheelZoomPercent,n.legend=void 0!==e.legend&&e.legend,n.no_legend_button=void 0!==e.no_legend_button&&e.no_legend_button,n.legendBtnLocation=null,n.pan=void 0===e.nopan||!e.nopan,n.nomenu=void 0!==e.nomenu&&e.nomenu,n.modmode=0,n.modlayer=-1,n.modsource=0,n.modified=e.mod&&n.lyr.length>0,n.nmark=0,n.iabsc=0,n.index&&(n.iabsc=1);n.specs=!e.nospecs,n.scroll_time_interval=void 0===e.scroll_time_interval?n.scroll_time_interval:e.scroll_time_interval,n.autohide_readout=e.autohide_readout,n.autohide_panbars=e.autohide_panbars,n.x_scrollbar_location=e.x_scrollbar_location,n.specs?(n.show_x_axis=!e.noxaxis,n.show_y_axis=!e.noyaxis,n.show_readout=!e.noreadout,n.show_x_axis||n.show_y_axis||n.show_readout?n.specs=!0:n.specs=!1):(n.show_x_axis=!1,n.show_y_axis=!1,n.show_readout=!1);n.hide_note=e.hide_note||!1,n.xmrk=0,n.ymrk=0,e.nodragdrop||(s.addEventListener(i,"dragover",function(t){t.preventDefault()},!1),s.addEventListener(i,"drop",function(t){return function(e){var i=e.dataTransfer.files;i.length>0&&(e.preventDefault(),t.load_files(i))}}(t),!1))}(this,e),this.mimicListeners={other:null,listeners:{zoom:null,unzoom:null,xpan:null,ypan:null}},this._refresh(),this.onmousemove=function(t){return function(e){var i,n=t._Mx,o=t._Gx,r=e.target.getBoundingClientRect(),a=void 0===e.offsetX?e.pageX-r.left-window.scrollX:e.offsetX,l=void 0===e.offsetX?e.pageY-r.top-window.scrollY:e.offsetY,h=N(t,a,l);(o.retx=h.x,o.rety=h.y,n.widget)||(I(t),(i=document.createEvent("Event")).initEvent("mmove",!0,!0),i.xpos=a,i.ypos=l,i.x=o.retx,i.y=o.rety,s.dispatchEvent(n,i)&&(o.cross&&(n.warpbox?(void 0!==o.cross_xpos&&s.rubberline(n,o.cross_xpos,n.t,o.cross_xpos,n.b),void 0!==o.cross_ypos&&s.rubberline(n,n.l,o.cross_ypos,n.r,o.cross_ypos),o.cross_xpos=void 0,o.cross_ypos=void 0):t.mouseOnCanvas&&(L(t),o.p_cuts&&1===o.lyr.length&&2===o.lyr[0].hcb.class&&(o.y_cut_press_on||o.x_cut_press_on||C(t)))),2===o.cntrls&&((i=document.createEvent("Event")).initEvent("mtag",!0,!0),i.x=o.retx,i.y=o.rety,i.xpos=a,i.ypos=l,s.dispatchEvent(n,i))))}}(this),this.throttledOnMouseMove=a.throttle(this._Gx.scroll_time_interval,this.onmousemove),s.addEventListener(i,"mousemove",this.throttledOnMouseMove,!1),this.onmouseout=function(t){return function(e){var i=t._Gx,n=t._Mx;t.mouseOnCanvas&&(t.mouseOnCanvas=!1,i.autohide_readout&&I(t),i.autohide_panbars&&T(t),n.prompt&&n.prompt.input.enableBlur())}}(this),s.addEventListener(i,"mouseout",this.onmouseout,!1),this.onmouseover=function(t){return function(e){var i=t._Gx,n=t._Mx;t.mouseOnCanvas=!0,i.autohide_panbars&&T(t),n.prompt&&n.prompt.input.disableBlur()}}(this),s.addEventListener(i,"mouseover",this.onmouseover,!1),this.onmousedown=function(t){return function(e){e.preventDefault();var i=t._Mx,n=t._Gx;i.widget&&"ONESHOT"===i.widget.type&&(i.widget=null,t.refresh()),s.ifevent(i,e);var o=document.createEvent("Event");if(o.initEvent("mdown",!0,!0),o.xpos=i.xpos,o.ypos=i.ypos,o.x=n.retx,o.y=n.rety,o.which=e.which,!s.dispatchEvent(i,o))return!1;var r=B(t);if(r.inPanRegion){if(e.preventDefault()," "!==r.command){var l=null,h=null;if("XPAN"===r.command?l=i.scrollbar_x:"YPAN"===r.command&&(l=i.scrollbar_y),2===e.which)h={x:i.xpos,y:i.ypos},void 0!==l&&U(h,l)&&function(t,e){var i=t._Mx;s.removeEventListener(i,"mousedown",t.onmousedown,!1),s.menu(i,{title:"SCROLLBAR",refresh:function(){t.refresh()},finalize:function(){s.addEventListener(i,"mousedown",t.onmousedown,!1),t.refresh()},items:[{text:"Expand Range",handler:function(){H(t,s.SB_EXPAND,e)}},{text:"Shrink Range",handler:function(){H(t,s.SB_SHRINK,e)}},{text:"Expand Full",handler:function(){H(t,s.SB_FULL,e)}}]})}(t,r.command);else if(" "!==r.command&&!U(h={x:i.xpos,y:i.ypos},l)&&1===e.which){P(t,r.command,0,e);var c=function(){U({x:i.xpos,y:i.ypos},l)?n.stillPanning&&(window.clearInterval(n.stillPanning),n.repeatPanning=void 0):P(t,r.command,0,e)};n.stillPanning=window.setTimeout(function(){n.repeatPanning=window.setInterval(c,50)},250)}}}else if(1===e.which||3===e.which){var d=!1;if(n.legendBtnLocation&&(d=function(t,e,i,n,o,r){return t>=i&&t<=i+o&&e>=n&&e<=n+r}(i.xpos,i.ypos,n.legendBtnLocation.x,n.legendBtnLocation.y,n.legendBtnLocation.width,n.legendBtnLocation.height)),n.lg_colorbar&&2===n.lyr[0].hcb.class&&(1===e.which||3===e.which)){var u=i.xpos,f=i.ypos,x=n.cbb_top_x1,m=n.cbb_top_y1;if(D(u,f,x,m,x+n.cbb_width,m,x+.5*n.cbb_width,m-n.cbb_height)){var p=n.cmap;t.get_layer(0).img=void 0,console.log(a.Mc.colormap[p]);for(var y=a.Mc.colormap[p],_=0;_<y.colors.length;_++)y.colors[_].pos+=5;s.colormap(i,y.colors,16),t.refresh()}var g=n.cbb_bot_x1,w=n.cbb_bot_y1;if(D(u,f,g,w,g+n.cbb_width,w,g+.5*n.cbb_width,w+n.cbb_height)){p=n.cmap,y=a.Mc.colormap[p];t.get_layer(0).img=void 0;for(_=0;_<y.colors.length;_++)y.colors[_].pos-=5;s.colormap(i,y.colors,16),t.refresh()}}if(d)t.change_settings({legend:!n.legend});else{I(t);var M={opacity:0,return_value:"zoom"},k={opacity:.4,fill_color:i.hi,return_value:"select"};1===e.which?"zoom"===n.default_rubberbox_action?s.rubberbox(i,b(t,e.which),n.default_rubberbox_mode,M,k):"select"===n.default_rubberbox_action&&s.rubberbox(i,b(t,e.which),n.default_rubberbox_mode,k,M):3===e.which&&("zoom"===n.default_rightclick_rubberbox_action?s.rubberbox(i,b(t,e.which),n.default_rightclick_rubberbox_mode,M,k):"select"===n.default_rightclick_rubberbox_action&&s.rubberbox(i,b(t,e.which),n.default_rightclick_rubberbox_mode,k,M))}}else 2===e.which&&(n.nomenu||v(t));return!1}}(this),s.addEventListener(i,"mousedown",this.onmousedown,!1),this.ontouchstart=function(t){return function(e){if(e.preventDefault(),1===e.targetTouches.length)if(i.touchClear&&i.touches)window.clearTimeout(i.touchClear),t.unzoom(),H(t,s.SB_FULL,"XPAN"),H(t,s.SB_FULL,"YPAN");else{var n=e.targetTouches[0],o=n.target.getBoundingClientRect(),r={x:n.pageX-o.left-window.scrollX,y:n.pageY-o.top-window.scrollY};i.xpos=a.bound(r.x,0,i.width),i.ypos=a.bound(r.y,0,i.height),B(t,r).inPanRegion||(i.touches=e.targetTouches)}else 2===e.targetTouches.length&&(i.touch_distance=a.touch_distance(e.targetTouches[0],e.targetTouches[1]))}}(this),s.addEventListener(i,"touchstart",this.ontouchstart,!1),this.ontouchmove=function(t){return function(e){var i=t._Mx,n=t._Gx,o=i.level;if(e.preventDefault(),1===e.targetTouches.length){var r=i.touches[0],s=r.target.getBoundingClientRect(),l=(r.pageX,s.left,window.scrollX,r.pageY,s.top,window.scrollY,e.targetTouches[0]),h=(s=l.target.getBoundingClientRect(),{x:l.pageX-s.left-window.scrollX,y:l.pageY-s.top-window.scrollY}),c=a.bound(h.x,0,i.width),d=a.bound(h.y,0,i.height),u=c-i.xpos,f=d-i.ypos;if(i.xpos=c,i.ypos=d,B(t,h).inPanRegion)return;var x=i.stk[o].xscl*u,m=i.stk[o].yscl*f;1===i.origin?x*=-1:2===i.origin?m*=-1:3===i.origin?m*=-1:4===i.origin&&(x*=-1,m*=-1);var p=i.stk[o].xmin+x,y=i.stk[o].xmax+x,v=i.stk[o].ymin+m,_=i.stk[o].ymax+m;p>=n.xmin&&y<=n.xmax&&(i.stk[o].xmin=p,i.stk[o].xmax=y),v>=n.ymin&&_<=n.ymax&&(i.stk[o].ymin=v,i.stk[o].ymax=_),n.cmode===n.basemode&&1===i.level&&(n.xmin=Math.min(n.xmin,p),n.xmax=Math.max(n.xmax,y),n.ymin=Math.min(n.ymin,v),n.ymax=Math.max(n.ymax,_)),t.refresh()}else if(2===e.targetTouches.length){var b=a.touch_distance(e.targetTouches[0],e.targetTouches[1]),g=.05*(1-i.touch_distance/b),w=i.stk[o].xmax-i.stk[o].xmin,M=i.stk[o].ymax-i.stk[o].ymin;p=i.stk[o].xmin+g*w,y=i.stk[o].xmax-g*w,v=i.stk[o].ymin+g*M,_=i.stk[o].ymax-g*M;i.stk[o].xmin=Math.max(n.xmin,p),i.stk[o].xmax=Math.min(n.xmax,y),i.stk[o].ymin=Math.max(n.ymin,v),i.stk[o].ymax=Math.min(n.ymax,_),t.refresh()}}}(this),this.throttledOnTouchMove=a.throttle(this._Gx.scroll_time_interval,this.ontouchmove),s.addEventListener(i,"touchmove",this.throttledOnTouchMove,!1),this.ontouchend=function(t){return function(e){var i=t._Gx,n=t._Mx;e.preventDefault(),console.log("on touch end ",e.targetTouches.length),i.panning=void 0,t._Mx.scrollbar_x.action=0,t._Mx.scrollbar_y.action=0,n.touch_distance=void 0,s.widget_callback(n,e),n.touchClear=window.setTimeout(function(){n.touches=void 0,n.touchClear=void 0},100)}}(this),s.addEventListener(i,"touchend",this.ontouchend,!1),this.docMouseUp=function(t){return function(e){var i=t._Gx;return 1===e.which&&(i.panning=void 0,t._Mx.scrollbar_x.action=0,t._Mx.scrollbar_y.action=0),i.stillPanning&&(window.clearTimeout(i.stillPanning),i.stillPanning=void 0),i.repeatPanning&&(window.clearInterval(i.repeatPanning),i.repeatPanning=void 0),!1}}(this),document.addEventListener("mouseup",this.docMouseUp,!1),this.mouseup=function(t){return function(e){e.preventDefault();var i=t._Gx,n=t._Mx;if(s.ifevent(t._Mx,e),(l=document.createEvent("Event")).initEvent("mup",!0,!0),l.xpos=n.xpos,l.ypos=n.ypos,l.x=i.retx,l.y=i.rety,l.which=e.which,s.dispatchEvent(n,l)){if(n.warpbox||n.widget||n.prompt)return;if(1===e.which){var o=function(t){var e=!1,i=t._Mx,n=i.xpos,o=i.ypos,r=i.text_h,s=i.text_w,l=" ";n<i.l-s&&o<=i.b&&o>=i.t?(l="YCENTER",e=!0):o>i.b+a.trunc(.5*s)&&o<=i.b+a.trunc(a.trunc(3*r)/2)&&n>=i.l&&n<=i.r&&(l="XCENTER",e=!0);return{inCenterRegion:e,command:l}}(t);if(o.inCenterRegion)" "!==o.command&&P(t,o.command,0,e);else if(1===i.cntrls){i.xmrk=i.retx,i.ymrk=i.rety;var r=document.createEvent("Event");r.initEvent("mtag",!0,!0),r.x=i.xmrk,r.y=i.ymrk,r.xpos=e.x||e.clientX,r.ypos=e.y||e.clientY,r.w=void 0,r.h=void 0,r.shift=e.shiftKey,s.dispatchEvent(n,r),t.redraw()}}else if(2===e.which){var l;if(i.nomenu)if((l=document.createEvent("Event")).initEvent("showmenu",!0,!0),l.x=e.x||e.clientX,l.y=e.y||e.clientY,s.dispatchEvent(n,l)){e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,s.removeEventListener(n,"mousedown",t.onmousedown,!1);var h=function(){try{var e=document.createEvent("Event");e.initEvent("hidemenu",!0,!0),s.dispatchEvent(n,e)&&s.addEventListener(n,"mousedown",t.onmousedown,!1)}finally{document.removeEventListener("mouseup",h,!1)}};document.addEventListener("mouseup",h,!1)}}else 3===e.which&&(e.preventDefault(),t.unzoom(1),t.refresh())}}}(this),s.addEventListener(i,"mouseup",this.mouseup,!1),this.mouseclick=function(t){return function(e){e.preventDefault();var i=t._Gx,n=t._Mx;s.ifevent(t._Mx,e);var o=document.createEvent("Event");return o.initEvent("mclick",!0,!0),o.xpos=n.xpos,o.ypos=n.ypos,o.x=i.retx,o.y=i.rety,o.which=e.which,s.dispatchEvent(n,o),!1}}(this),s.addEventListener(i,"click",this.mouseclick,!1),this.mousedblclick=function(t){return function(e){e.preventDefault();var i=t._Gx,n=t._Mx;s.ifevent(t._Mx,e);var o=document.createEvent("Event");return o.initEvent("mdblclick",!0,!0),o.xpos=n.xpos,o.ypos=n.ypos,o.x=i.retx,o.y=i.rety,o.which=e.which,s.dispatchEvent(n,o),!1}}(this),s.addEventListener(i,"dblclick",this.mousedblclick,!1),this.dragMouseDownHandler=function(t){return function(e){var i=t._Mx,n=t._Gx,o=B(t);if(o.inPanRegion&&(e.preventDefault()," "!==o.command)){var r;"XPAN"===o.command?r=i.scrollbar_x:"YPAN"===o.command&&(r=i.scrollbar_y);var a={x:i.xpos,y:i.ypos};void 0!==r&&U(a,r)&&1===e.which&&(n.panning={axis:o.command,xpos:e.screenX,ypos:e.screenY,xmin:i.stk[i.level].xmin,xmax:i.stk[i.level].xmax,ymin:i.stk[i.level].ymin,ymax:i.stk[i.level].ymax})}}}(this),window.addEventListener("mousedown",this.dragMouseDownHandler,!1),this.dragMouseMoveHandler=function(t){return function(e){var i=t._Gx;if(void 0!==i.panning)try{!function(t,e,i){var n,o,r,a=t._Mx,l=t._Gx;if("XPAN"===e)r=t._Mx.scrollbar_x;else{if("YPAN"!==e)throw"Unable to drag scrollbar - scrollAction is not 'XPAN' or 'YPAN'!!";r=t._Mx.scrollbar_y}r.flag=-12;var h=a.level;"XPAN"===e?(n=a.stk[h].xmin,o=a.stk[h].xmax):"YPAN"===e?(n=a.stk[h].ymin,o=a.stk[h].ymax):(n=void 0,o=void 0);var c={min:n,max:o};(function(t,e,i,n,o,r){if(i.action=s.SB_DRAG,"YPAN"===n){var a=t.scrollbar_y.trange/t.scrollbar_y.h;4===i.origin&&(a*=-1);var l=r.screenY-e.panning.ypos,h=l*a;e.panning.ymin-h<e.panymin?(o.max=e.panymin+(o.max-o.min),o.min=e.panymin):e.panning.ymax-h>e.panymax?(o.min=e.panymax-(o.max-o.min),o.max=e.panymax):(o.min=e.panning.ymin-h,o.max=e.panning.ymax-h)}else if("XPAN"===n){var a=t.scrollbar_x.trange/t.scrollbar_x.w;3===i.origin&&(a*=-1);var l=r.screenX-e.panning.xpos,h=l*a;e.panning.xmin+h<e.panxmin?(o.max=e.panxmin+(o.max-o.min),o.min=e.panxmin):e.panning.xmax+h>e.panxmax?(o.min=e.panxmax-(o.max-o.min),o.max=e.panxmax):(o.min=e.panning.xmin+h,o.max=e.panning.xmax+h)}})(a,l,r,e,c,i),n=c.min,o=c.max,r.smin=n,r.srange=o-n,s.redrawScrollbar(r,a,void 0),F(t,r.smin,r.smin+r.srange,e.slice(0,1)),this.inPan=!0;var d=document.createEvent("Event");"XPAN"===e?d.initEvent("xpan",!0,!0):"YPAN"===e&&d.initEvent("ypan",!0,!0);d.level=a.level,d.xmin=a.stk[a.level].xmin,d.ymin=a.stk[a.level].ymin,d.xmax=a.stk[a.level].xmax,d.ymax=a.stk[a.level].ymax,s.dispatchEvent(a,d),this.inPan=!1,r.action=0,t.refresh()}(t,i.panning.axis,e)}catch(t){console.log("Error: "+t)}}}(this),this.throttledDragOnMouseMove=a.throttle(this._Gx.scroll_time_interval,this.dragMouseMoveHandler),window.addEventListener("mousemove",this.throttledDragOnMouseMove,!1),this.dragMouseUpHandler=function(t){return function(e){var i=t._Gx;1===e.which&&(i.panning=void 0)}}(this),window.addEventListener("mouseup",this.dragMouseUpHandler,!1),this.onresize=function(t){return function(e){s.checkresize(t._Mx)&&t.refresh()}}(this),this.wheelHandler=function(t){var e=t._Mx,i=t._Gx,n=a.throttle(100,function(n){var o;"XPAN"===n.command?o=e.scrollbar_x:"YPAN"===n.command&&(o=e.scrollbar_y),i.wheelscroll_mode_natural?o.action=event.deltaY<0?s.SB_WHEELDOWN:s.SB_WHEELUP:o.action=event.deltaY<0?s.SB_WHEELUP:s.SB_WHEELDOWN,o.step=.1*o.srange,o.page=9*o.step,s.scroll(e,o,s.XW_COMMAND,void 0,o),F(t,o.smin,o.smin+o.srange,n.command.slice(0,1))}),o=a.throttle(100,function(){var e=i.wheelZoomPercent||.2;i.wheelscroll_mode_natural?event.deltaY>0&&(e*=-1):event.deltaY<0&&(e*=-1),"x"===i.wheelZoom?t.percent_zoom(e,1,!0):"y"===i.wheelZoom?t.percent_zoom(1,e,!0):t.percent_zoom(e,e,!0)});return function(r){s.ifevent(e,r);var a=B(t);t.mouseOnCanvas&&(r.preventDefault(),a.inPanRegion?n(a):i.wheelZoom&&o())}}(this),window.addWheelListener(window,this.wheelHandler,!1),window.addEventListener("resize",this.onresize,!1),e.nokeypress||(this.onkeypress=function(t){return function(e){var i=t._Mx,o=t._Gx;if(t.mouseOnCanvas){if(i.widget&&"MENU"===i.widget.type)return;if(i.widget&&"ONESHOT"===i.widget.type)return i.widget=null,void t.refresh();var r=n.getKeyCode(e);if((w=document.createEvent("Event")).initEvent("plotkeypress",!0,!0),w.keyCode=r,w.shiftKey=e.shiftKey,w.ctrlKey=e.ctrlKey,w.altKey=e.altKey,w.metaKey=e.metaKey,!s.dispatchEvent(i,w))return;if(97===r)o.iabsc=(o.iabsc+1)%4,I(t);else if(108===r)t.change_settings({legend:!o.legend});else if(103===r)t.change_settings({grid:!o.grid});else if(98===r||2===r)i.warpbox&&("box"===i.warpbox.mode?i.warpbox.mode="horizontal":"horizontal"===i.warpbox.mode?i.warpbox.mode="vertical":i.warpbox.mode="box",s.redraw_warpbox(i));else if(99===r)t.change_settings({xcnt:-1*o.cntrls});else if(114===r)t.change_settings({show_readout:!o.show_readout});else if(115===r)t.change_settings({specs:!o.specs});else if(112===r)t.change_settings({p_cuts:!o.p_cuts});else if(120===r){if(o.x_cut_press_on){o.x_cut_press_on=!1,o.ylabel=o.ylabel_stash,o.xlabel=o.xlabel_stash;for(var l=0;l<o.xcut_layer;l++)t._Gx.lyr[l].display=!t._Gx.lyr[l].display;A(t,t._Gx.xcut_layer),t.rescale(),t.refresh(),o.xcut_layer=void 0,t.change_settings({drawmode:o.old_drawmode,autol:o.old_autol})}else if("pop-up"===o.xyKeys)o.x_pop_now?o.x_pop_now=!1:(p(t),o.x_pop_now=!0);else if(1===o.lyr[0].hcb.class&&"automatic"===o.xyKeys)o.x_pop_now?o.x_pop_now=!1:(p(t),o.x_pop_now=!0);else if("disable"!==o.xyKeys&&2===o.lyr[0].hcb.class&&!o.y_cut_press_on){if(!o.p_cuts){o.x_cut_data=[];var h,c,d=i.b-i.t,u=i.r-i.l,f=o.lyr[0].lps,x=o.lyr[0].xframe;c=(h=Math.floor(f*(i.ypos-i.t)/d)*x)+x,o.x_cut_data=o.lyr[0].zbuf.slice(h,c)}o.old_drawmode=o.lyr[0].drawmode,o.old_autol=o.autol,t.change_settings({drawmode:"undefined",autol:-1}),o.ylabel_stash=o.ylabel;var m=o.lyr.length>0&&o.lyr[0].cx;1===o.cmode?o.ylabel=a.UNITS[28][0]:2===o.cmode?o.ylabel=o.plab:3===o.cmode&&m?o.ylabel=a.UNITS[21][0]:4===o.cmode?o.ylabel=a.UNITS[22][0]:5===o.cmode?o.ylabel=a.UNITS[22][0]:6===o.cmode?o.ylabel=a.UNITS[26][0]:7===o.cmode?o.ylabel=a.UNITS[27][0]:o.ylabel="Intensity",o.xlabel_stash=o.xlabel,"None"!==a.UNITS[o.xlab][0]&&"Unknown"!==a.UNITS[o.xlab][0]?o.xlabel=a.UNITS[o.xlab][0]:o.xlabel="Frequency",o.xlabel+="    CURRENTLY IN X_CUT MODE",i.origin=1,o.xcut_layer=t.overlay_array(o.x_cut_data,{xstart:o.lyr[0].xstart,xdelta:o.lyr[0].xdelta},{name:"x_cut_data",line:3}),o.xcut_layer=o.lyr.length-1;for(var _=0;_<o.xcut_layer;_++)t._Gx.lyr[_].display=!t._Gx.lyr[_].display;o.x_cut_press_on=!0,t.rescale()}}else if(121===r){if(o.y_cut_press_on){o.y_cut_press_on=!1,o.ylabel=o.ylabel_stash,o.xlabel=o.xlabel_stash;for(var b=0;b<o.ycut_layer;b++)t._Gx.lyr[b].display=!t._Gx.lyr[b].display;A(t,t._Gx.ycut_layer),t.rescale(),t.refresh(),o.ycut_layer=void 0,t.change_settings({drawmode:o.old_drawmode,autol:o.old_autol})}else if("pop-up"===o.xyKeys)o.y_pop_now?o.y_pop_now=!1:(y(t),o.y_pop_now=!0);else if(1===o.lyr[0].hcb.class&&"automatic"===o.xyKeys)o.y_pop_now?o.y_pop_now=!1:(y(t),o.y_pop_now=!0);else if("disable"!==o.xyKeys&&2===o.lyr[0].hcb.class&&!o.x_cut_press_on){if(!o.p_cuts){o.y_cut_data=[];d=i.b-i.t,u=i.r-i.l,f=o.lyr[0].lps,x=o.lyr[0].xframe,_=0;for(o.y_cut_data=[],_=Math.floor(x*(i.xpos-i.l)/u);_<x*f;_+=x)o.y_cut_data.push(o.lyr[0].zbuf[_])}o.old_drawmode=o.lyr[0].drawmode,o.old_autol=o.autol,t.change_settings({drawmode:"undefined",autol:-1}),o.ylabel_stash=o.ylabel;m=o.lyr.length>0&&o.lyr[0].cx;1===o.cmode?o.ylabel=a.UNITS[28][0]:2===o.cmode?o.ylabel=o.plab:3===o.cmode&&m?o.ylabel=a.UNITS[21][0]:4===o.cmode?o.ylabel=a.UNITS[22][0]:5===o.cmode?o.ylabel=a.UNITS[22][0]:6===o.cmode?o.ylabel=a.UNITS[26][0]:7===o.cmode?o.ylabel=a.UNITS[27][0]:o.ylabel="Intensity",o.xlabel_stash=o.xlabel,"None"!==a.UNITS[o.ylab][0]&&"Unknown"!==a.UNITS[o.ylab][0]?o.xlabel=a.UNITS[o.ylab][0]:o.xlabel="Time",o.xlabel+="    CURRENTLY IN Y_CUT MODE",i.origin=1,o.ycut_layer=t.overlay_array(o.y_cut_data,{xstart:o.lyr[0].ystart,xdelta:o.lyr[0].ydelta},{name:"y_cut_data",line:3}),o.ycut_layer=o.lyr.length-1;for(var g=0;g<o.ycut_layer;g++)t._Gx.lyr[g].display=!t._Gx.lyr[g].display;o.y_cut_press_on=!0,t.rescale()}}else if(122===r)!function(t){var e=t._Gx,i=t._Mx;if(e.zmin&&e.zmax){var n="";if(1===e.lyr.length)var n="Z = "+e.lyr[0].get_z(e.retx,e.rety).toString();else var n="TODO";s.message(i,n)}}(t);else if(116===r)!function(t){var e=t._Gx,i=t._Mx;if(e.lyr.length>0){var n=e.lyr[0].hcb;1!==n.class||1!==n.xunits&&4!==n.xunits?2!==n.class||1!==n.yunits&&4!==n.yunits?s.message(i,"Time = UNK"):s.message(i,"Time = "+a.sec2tod(n.timecode+e.rety),!0):s.message(i,"Time = "+a.sec2tod(n.timecode+e.retx),!0)}}(t);else if(109===r){var w;if(!o.nomenu)(w=document.createEvent("Event")).initEvent("showmenu",!0,!0),w.x=i.x,w.y=i.y,s.dispatchEvent(i,w)&&v(t)}else 63===r?s.message(i,"To zoom, press and drag the left mouse (LM) over the region of interest and release. To unzoom, press right mouse (RM).  Press the middle mouse (MM) button or press the 'M' key to open the main menu.View the function of all keypresses by selecting 'Keypress Info' from the main menu."):102===r?(s.fullscreen(i),t.refresh()):9===r&&e.ctrlKey?t.change_settings({invert:null}):107===r&&(o.show_marker=!o.show_marker,t.redraw())}}}(this),n.setKeypressHandler(this.onkeypress)),this},c.Plot.prototype={add_plugin:function(t,e){if(void 0===e&&(e=Number.MAX_VALUE),e<=0)throw"Invalid plugin zorder";t.init(this);var i=document.createElement("canvas");i.width=this._Mx.canvas.width,i.height=this._Mx.canvas.height,this._Gx.plugins.push({impl:t,zorder:e,canvas:i}),this._Gx.plugins.sort(function(t,e){return t.zorder-e.zorder}),this.refresh()},remove_plugin:function(t){for(var e=this._Gx.plugins.length;e--;)this._Gx.plugins[e].impl===t&&(t.dispose&&t.dispose(),this._Gx.plugins[e].canvas.parentNode&&this._Gx.plugins[e].canvas.parentNode.removeElement(this._Gx.plugins[e].canvas),this._Gx.plugins.splice(e,1));this._Gx.plugins.sort(function(t,e){return t.zorder-e.zorder}),this.refresh()},addListener:function(t,e){var i=this._Mx;s.addEventListener(i,t,e,!1)},removeListener:function(t,e){var i=this._Mx;s.removeEventListener(i,t,e,!1)},change_settings:function(t){for(var e,i=this._Gx,n=this._Mx,o=0;o<i.lyr.length;o++)i.lyr[o].change_settings(t);(void 0!==t.xyKeys&&(null===t.xyKeys?i.xyKeys="automatic":i.xyKeys=t.xyKeys),void 0!==t.grid&&(null===t.grid?i.grid=!i.grid:i.grid=t.grid),void 0!==t.gridBackground&&(i.gridBackground=t.gridBackground),void 0!==t.gridStyle&&(i.gridStyle=t.gridStyle),void 0!==t.wheelZoom&&(i.wheelZoom=t.wheelZoom),void 0!==t.wheelZoomPercent&&(i.wheelZoomPercent=t.wheelZoomPercent),void 0!==t.autol&&(i.autol=t.autol),void 0!==t.index&&t.index!==i.index)&&(null===t.index?i.index=!i.index:i.index=t.index,i.index&&1!==i.iabsc?i.iabsc=1:i.index||1!==i.iabsc||(i.iabsc=0),O(this,{get_data:!1},void 0,void 0),this.unzoom());void 0!==t.all&&(null===t.all?i.all=!i.all:i.all=t.all),void 0!==t.show_x_axis&&(null===t.show_x_axis?i.show_x_axis=!i.show_x_axis:i.show_x_axis=t.show_x_axis,i.specs=i.show_x_axis||i.show_y_axis||i.show_readout),void 0!==t.show_y_axis&&(null===t.show_y_axis?i.show_y_axis=!i.show_y_axis:i.show_y_axis=t.show_y_axis,i.specs=i.show_x_axis||i.show_y_axis||i.show_readout),void 0!==t.show_readout&&(null===t.show_readout?i.show_readout=!i.show_readout:i.show_readout=t.show_readout,i.specs=i.show_x_axis||i.show_y_axis||i.show_readout),void 0!==t.specs&&(null===t.specs?i.specs=!i.specs:i.specs=t.specs,i.specs?(i.show_x_axis=!0,i.show_y_axis=!0,i.show_readout=!0):(i.show_x_axis=!1,i.show_y_axis=!1,i.show_readout=!1)),void 0!==t.xcnt&&("leftmouse"===t.xcnt?i.cntrls=1:"continuous"===t.xcnt?i.cntrls=2:"disable"===t.xcnt&&i.cntrls>0?i.cntrls=-1*i.cntrls:"enable"===t.xcnt&&i.cntrls<0?i.cntrls=-1*i.cntrls:i.cntrls=t.xcnt),void 0!==t.legend&&(null===t.legend?i.legend=!i.legend:i.legend=t.legend),void 0!==t.pan&&(null===t.pan?i.pan=!i.pan:i.pan=t.pan),void 0!==t.cross&&(null===t.cross?i.cross=!i.cross:i.cross=t.cross,i.cross?(i.cross_xpos=void 0,i.cross_ypos=void 0,!n.warpbox&&this.mouseOnCanvas&&L(this)):(void 0!==i.cross_xpos&&s.rubberline(n,i.cross_xpos,n.t,i.cross_xpos,n.b),void 0!==i.cross_ypos&&s.rubberline(n,n.l,i.cross_ypos,n.r,i.cross_ypos),i.cross_xpos=void 0,i.cross_ypos=void 0));var r=void 0===t.cmode?"":t.cmode;e="string"==typeof r?(r+="").toUpperCase():r,void 0!==t.cmode&&(i.lyr.length>0&&i.lyr[0].cx?i.cmode=1:i.cmode=3,"MA"!==e&&"INMA"!==e&&"ABMA"!==e&&"__MA"!==e&&"MAGNITUDE"!==e&&1!==e||(i.cmode=1),"PH"!==e&&"INPH"!==e&&"ABPH"!==e&&"__PH"!==e&&"PHASE"!==e&&2!==e||(i.cmode=2),"RE"!==e&&"INRE"!==e&&"ABRE"!==e&&"__RE"!==e&&"REAL"!==e&&3!==e||(i.cmode=3),"IM"!==e&&"INIM"!==e&&"ABIM"!==e&&"__IM"!==e&&"IMAGINARY"!==e&&4!==e||(i.cmode=4),"LO"!==e&&"D1"!==e&&"INLO"!==e&&"IND1"!==e&&"ABIM"!==e&&"ABD1"!==e&&"__LO"!==e&&"__D1"!==e&&"10*LOG10"!==e&&6!==e||(i.cmode=6),"L2"!==e&&"D2"!==e&&"INL2"!==e&&"IND2"!==e&&"ABLO"!==e&&"ABD2"!==e&&"__L2"!==e&&"__D2"!==e&&"20*LOG10"!==e&&7!==e||(i.cmode=7),"RI"!==e&&"IR"!==e&&"INRI"!==e&&"INIR"!==e&&"ABRI"!==e&&"ABIR"!==e&&"__RI"!==e&&"__IR"!==e&&"IMAG/REAL"!==e&&"REAL/IMAG"!==e&&5!==e||(i.index?alert("Imag/Real mode not permitted in INDEX mode"):i.cmode=5),i.basemode=i.cmode,G(this,i.cmode)),void 0!==t.phunits&&function(t,e){var i=t._Gx,n=t._Mx,o=i.plab;"R"===e?o=23:"D"===e&&(o=24);"C"===e&&(o=25);if(o!==i.plab){var r=[Math.PI,180,.5],a=r[o-23]/r[i.plab-23];if(i.plab=o,2===i.cmode){for(var s=0;s<=n.level;s++)n.stk[s].ymin=n.stk[s].ymin*a,n.stk[s].ymax=n.stk[s].ymax*a,n.stk[s].yscl=n.stk[s].yscl*a;i.panymin=i.panymin*a,i.panymax=i.panymax*a,t.refresh()}}}(this,t.phunits),void 0!==t.rubberbox_action&&(i.default_rubberbox_action=t.rubberbox_action),void 0!==t.rubberbox_mode&&(i.default_rubberbox_mode=t.rubberbox_mode),void 0!==t.rightclick_rubberbox_action&&(i.default_rightclick_rubberbox_action=t.rightclick_rubberbox_action),void 0!==t.rightclick_rubberbox_mode&&(i.default_rightclick_rubberbox_mode=t.rightclick_rubberbox_mode),void 0!==t.wheelscroll_mode_natural&&(i.wheelscroll_mode_natural=t.wheelscroll_mode_natural),void 0!==t.colors&&(t.colors.fg||(t.colors.fg=n.fg),t.colors.bg||(t.colors.bg=n.bg),s.setbgfg(n,t.colors.bg,t.colors.fg,n.xi)),void 0!==t.cmap&&(null===t.cmap?2===i.cmode?i.cmap=2:i.cmap=1:i.cmap=t.cmap,m(this,i.cmap)),void 0!==t.yinv&&(t.yinv?n.origin=4:n.origin=1),void 0!==t.rasterSmoothing&&(null===t.rasterSmoothing?i.rasterSmoothing=!i.rasterSmoothing:i.rasterSmoothing=t.rasterSmoothing),void 0!==t.fillStyle&&(i.fillStyle=t.fillStyle),void 0!==t.invert&&(null===t.invert?s.invertbgfg(n):!0===t.invert?s.setbgfg(this,"white","black"):s.setbgfg(this,"black","white")),void 0!==t.nomenu&&(null===t.nomenu?i.nomenu=!i.nomenu:i.nomenu=t.nomenu),void 0!==t.ymax&&(null===t.ymax?(i.autoy=2|i.autoy,i.panymax=void 0,O(this,{}),i.ymax=i.panymax):(i.autoy=13&i.autoy,i.ymax=t.ymax,F(this,n.stk[0].ymin,t.ymax,"Y"),this.redraw())),void 0!==t.ymin&&(null===t.ymin?(i.autoy=1|i.autoy,i.panymin=void 0,O(this,{}),i.ymin=i.panymin):(i.autoy=14&i.autoy,i.ymin=t.ymin,F(this,t.ymin,n.stk[0].ymax,"Y"),this.redraw())),void 0!==t.autoy&&(i.autoy=t.autoy,0!=(1&i.autoy)&&(i.ymin=void 0),0!=(2&i.autoy)&&(i.ymax=void 0)),void 0!==t.xmin&&(F(this,t.xmin,n.stk[0].xmax,"X"),i.autox=2&i.autox,this.redraw()),void 0!==t.xmax&&(F(this,n.stk[0].xmin,t.xmax,"X"),i.autox=1&i.autox,this.redraw()),void 0!==t.zmin&&(i.zmin=t.zmin,i.autoz=2&i.autoz),void 0!==t.zmax&&(i.zmax=t.zmax,i.autoz=1&i.autoz),void 0!==t.autoz&&(i.autoz=t.autoz,0!=(1&i.autoz)&&(i.zmin=void 0),0!=(2&i.autoz)&&(i.zmax=void 0)),void 0!==t.note&&(i.note=t.note),void 0!==t.lg_colorbar&&(i.lg_colorbar=!i.lg_colorbar),void 0!==t.p_cuts&&(null===t.p_cuts?i.p_cuts=!i.p_cuts:i.p_cuts=t.p_cuts),void 0!==t.xcut_now&&(i.xcut_now=!i.xcut_now),void 0!==t.ycut_now&&(i.ycut_now=!i.ycut_now),this.refresh(),void 0!==t.pan&&I(this)},reread:function(){for(var t=this._Gx,e=[],i=0;i<t.lyr.length;i++)e[i]=t.lyr[i];var n=t.HCB.slice();this.deoverlay();for(var o=0;o<n.length;o++)this.overlay_bluefile(n[o]);for(var r=0;r<t.lyr.length;r++)t.lyr[r].symbol=e[r].symbol,t.lyr[r].radius=e[r].radius;this.refresh();var a=document.createEvent("Event");a.initEvent("reread",!0,!0),s.dispatchEvent(this._Mx,a)},cleanup:function(){},reload:function(t,e,i,n){var o=this._Mx,r=this._Gx;if(!(t<0||t>=r.lyr.length)&&void 0!==r.lyr[t].reload){var a=r.lyr[t].reload(e,i);0===o.level&&O(this,{get_data:!1},a.xmin,a.xmax),n?this._refresh():this.refresh()}},rescale:function(t){(0===this._Mx.level||t)&&O(this,{get_data:!1},void 0,void 0),this.refresh()},headermod:function(t,e){this.change_settings(e),this.push(t,[],e)},push:function(t,e,i,n,o){var r=this._Mx,a=this._Gx;if(!(t<0||t>=a.lyr.length)&&void 0!==a.lyr[t].push&&!1!==a.lyr[t].display){var s=i;if(i){s=JSON.parse(JSON.stringify(i));0===e.length&&(s.xmin=r.stk[t].xmin,s.xmax=r.stk[t].xmax,s.ymin=r.stk[t].ymin,s.ymax=r.stk[t].ymax)}var l=a.lyr[t].push(e,s,n);0===r.level&&l&&O(this,{get_data:!1}),o?this._refresh():this.refresh()}},overlay_array:function(t,e,i){a.log.debug("Overlay array");var n=a.initialize(t,e);return this.overlay_bluefile(n,i)},overlay_pipe:function(t,e){a.log.debug("Overlay pipe"),t||(t={}),t.pipe=!0;var i=a.initialize(null,t);return this.overlay_bluefile(i,e)},overlay_websocket:function(t,e,i){a.log.debug("Overlay websocket: "+t);var n=new WebSocket(t,"plot-data");n.binaryType="arraybuffer";var o=this;e||(e={}),e.pipe=!0;var r=a.initialize(null,e);r.ws=n;var s=this.overlay_bluefile(r,i);return n.onopen=function(t){},n.onmessage=function(t){if(t.data instanceof ArrayBuffer){var e=r.createArray(t.data);o.push(s,e)}else if("string"==typeof t.data){o._Gx.lyr[s].hcb||a.log.warning("Couldn't find header for layer "+s);var i=JSON.parse(t.data);o.push(s,[],i)}},s},overlay_href:function(t,e,i){a.log.debug("Overlay href: "+t);try{this.show_spinner();var n=function(e,n){return function(o){try{var r;if(o)r=t.endsWith(".mat")?e.overlay_matfile(o,i):e.overlay_bluefile(o,i),n&&n(o,r);else alert("Failed to load data")}finally{e.hide_spinner()}}}(this,e);(t.endsWith(".mat")?new r.MatFileReader:new o.BlueFileReader).read_http(t,n)}catch(t){console.error(t),alert("Failed to load data"),this.hide_spinner()}},show_spinner:function(){this._Gx.spinner||(u.color=this._Mx.xwfg,this._Gx.spinner=new e(u).spin(this._Gx.parent))},hide_spinner:function(){this._Gx.spinner&&this._Gx.spinner.stop(),this._Gx.spinner=void 0},add_layer:function(t){var e=this._Gx,i=this._Mx,n=document.createEvent("Event");return n.initEvent("lyradd",!0,!0),n.name=t.name,n.layer=t,!!s.dispatchEvent(i,n)&&(e.lyr.push(t),t.index=e.lyr.length-1,!0)},get_layer:function(t){var e=this._Gx;return t>=0&&t<e.lyr.length?e.lyr[t]:null},overlay_matfile:function(t,e){return a.log.debug("Overlay matfile: "+t.file_name),this.overlay_array(t.dview)},overlay_bluefile:function(t,e){a.log.debug("Overlay bluefile: "+t.file_name);var i=this._Mx,n=this._Gx;e=e||{};var o=0===n.HCB.length;n.HCB.push(t),1===n.HCB.length&&g(this,!0);var r=null;if(void 0===e.layerType?1===t.class?r=l.overlay(this,t,e):2===t.class&&(r=h.overlay(this,t,e)):r="1D"===e.layerType?l.overlay(this,t,e):"2D"===e.layerType?h.overlay(this,t,e):e.layerType.overlay(this,t,e),r){var s,c;if(e.user_data&&(r.user_data=e.user_data),G(this,n.cmode),o||e.expand)if(0===n.HCB.length)g(this,!1);else n.basemode=n.cmode,0==(1&n.autox)&&(s=n.xmin),0==(2&n.autox)&&(c=n.xmax),O(this,{get_data:!0},s,c),i.level=0,0!=(1&n.autox)&&(n.xmin=i.stk[0].xmin),0!=(2&n.autox)&&(n.xmax=i.stk[0].xmax),0!=(1&n.autoy)&&(n.ymin=i.stk[0].ymin),0!=(2&n.autoy)&&(n.ymax=i.stk[0].ymax),i.resize=!0,n.lyr[0].preferred_origin?i.origin=n.lyr[0].preferred_origin:i.origin=1;else E(this,r);return M(this),this.refresh(),n.HCB.length-1}a.log.debug("failed to create layer")},load_files:function(t,e){for(var i=function(t){return function(i){t.overlay_bluefile(i,e)}}(this),n=0;n<t.length;n++){var r=t[n];(new o.BlueFileReader).read(r,i)}},deoverlay:function(t){var e=this._Gx;this._Mx;if(e.HCB.length>0)if(void 0===t)for(var i=e.HCB.length-1;i>=0;i--)this.remove_layer(i);else if(t<0){if((i=e.HCB.length+t)<0)return;this.remove_layer(i)}else t<e.HCB.length&&this.remove_layer(t);0===e.lyr.length&&(g(this,!1),O(this,{}))},remove_layer:function(t){var e=this._Gx,i="",n=null;if(t>=0&&t<e.HCB.length){i=e.HCB[t].file_name,n=e.HCB[t],e.HCB[t]=null;for(var o=t;o<e.HCB.length-1;o++)e.HCB[o]=e.HCB[o+1];e.HCB.length-=1}for(o=e.lyr.length-1;o>=0;o--)e.lyr[o].hcb===n&&A(this,o);M(this),this.refresh();var r=document.createEvent("Event");r.initEvent("file_deoverlayed",!0,!0),""!==i&&(r.fileName=i),s.dispatchEvent(this._Mx,r)},pixel_zoom:function(t,e,i,n,o){var r=N(this,t,e),a=N(this,i,n);this.zoom(r,a,o)},percent_zoom:function(t,e,i){var n=this._Mx,o=this._Gx,r=0;Math.abs(t)<1&&(r=(r=Math.abs(n.stk[n.level].xmax-n.stk[n.level].xmin))*t/2);var a=0;Math.abs(e)<1&&(a=(a=Math.abs(n.stk[n.level].ymax-n.stk[n.level].ymin))*e/2);var s={x:Math.max(n.stk[n.level].xmin+r,o.panxmin),y:Math.max(n.stk[n.level].ymin+a,o.panymin)},l={x:Math.min(n.stk[n.level].xmax-r,o.panxmax),y:Math.min(n.stk[n.level].ymax-a,o.panymax)};this.zoom(s,l,i)},zoom:function(t,e,i){var n=this._Mx,o=this._Gx;if(!(n.level>=9)){if(void 0===t.x&&(t.x=n.stk[n.level].xmin),void 0===t.y&&(t.y=n.stk[n.level].ymin),void 0===e.x&&(e.x=n.stk[n.level].xmax),void 0===e.y&&(e.y=n.stk[n.level].ymax),e.x<t.x){var r=e.x;e.x=t.x,t.x=r}if(e.y<t.y){var a=e.y;e.y=t.y,t.y=a}var l={};l.xscl=n.stk[n.level].xscl,l.yscl=n.stk[n.level].yscl,l.xmin=t.x,l.xmax=e.x,l.ymin=t.y,l.ymax=e.y,o.index&&(l.xmin=Math.min(l.xmin/o.xdelta),l.xmax=Math.min(l.xmax/o.xdelta)),i&&o.inContinuousZoom?n.stk[n.level]=l:(n.stk.push(l),n.level=n.stk.length-1),o.inContinuousZoom=i,this.inZoom=!0;var h=document.createEvent("Event");h.initEvent("zoom",!0,!0),h.level=n.level,h.inContinuousZoom=o.inContinuousZoom,h.xmin=n.stk[n.level].xmin,h.ymin=n.stk[n.level].ymin,h.xmax=n.stk[n.level].xmax,h.ymax=n.stk[n.level].ymax,s.dispatchEvent(n,h),this.inZoom=!1,this.refresh()}},unzoom:function(t){var e=this._Mx,i=this._Gx;if(0!==e.level){for(t||(t=e.stk.length);t>0&&0!==e.level;)e.stk.pop(),e.level=e.stk.length-1,t-=1;0===e.level&&this.rescale(),i.inContinuousZoom=!1,this.inZoom=!0;var n=document.createEvent("Event");n.initEvent("unzoom",!0,!0),n.level=e.level,n.xmin=e.stk[e.level].xmin,n.ymin=e.stk[e.level].ymin,n.xmax=e.stk[e.level].xmax,n.ymax=e.stk[e.level].ymax,s.dispatchEvent(e,n),this.inZoom=!1,this.refresh()}},mimic:function(t,e){var i=this;if(!e)throw"mimic must be called with at least one event mask";if(this.unmimic(t),e.zoom){var n=function(t){i.inZoom||i.zoom({x:t.xmin,y:t.ymin},{x:t.xmax,y:t.ymax},t.inContinuousZoom)};t.addListener("zoom",n),this.mimicListeners.listeners.zoom=n}else if(e.xzoom){n=function(t){i.inZoom||i.zoom({x:t.xmin,y:void 0},{x:t.xmax,y:void 0},t.inContinuousZoom)};t.addListener("zoom",n),this.mimicListeners.listeners.zoom=n}else if(e.yzoom){n=function(t){i.inZoom||i.zoom({x:void 0,y:t.ymin},{x:void 0,y:t.ymax},t.inContinuousZoom)};t.addListener("zoom",n),this.mimicListeners.listeners.zoom=n}if(e.unzoom){n=function(t){i.inZoom||t.level<i._Mx.level&&i.unzoom(i._Mx.level-t.level)};t.addListener("unzoom",n),this.mimicListeners.listeners.unzoom=n}if(e.pan||e.xpan){n=function(t){i.inPan||F(i,t.xmin,t.xmax,"X")};t.addListener("xpan",n),this.mimicListeners.listeners.xpan=n}if(e.pan||e.ypan){n=function(t){i.inPan||F(i,t.ymin,t.ymax,"Y")};t.addListener("ypan",n),this.mimicListeners.listeners.ypan=n}this.mimicListeners.other=t},unmimic:function(t){if(t=this.mimicListeners.other){var e=this;Object.keys(this.mimicListeners.listeners).forEach(function(i){e.mimicListeners.listeners[i]&&t.removeListener(i,e.mimicListeners.listeners[i])})}this.mimicListeners={other:null,listeners:{zoom:null,unzoom:null,xpan:null,ypan:null}}},redraw:function(){var t=this._Gx,e=this._Mx,i=e.canvas.getContext("2d");t.plotData.valid?(i.drawImage(t.plotData,e.l-1,e.t-1,e.r-e.l+2,e.b-e.t+2,e.l-1,e.t-1,e.r-e.l+2,e.b-e.t+2),w(this),t.cross_xpos=void 0,t.cross_ypos=void 0,!e.warpbox&&this.mouseOnCanvas&&L(this),(t.always_show_marker||t.show_marker)&&z(this)):this.refresh()},refresh:function(){var t=this;s.render(this._Mx,function(){t._refresh()})},enable_listeners:function(){var t=this._Mx;s.addEventListener(t,"mousedown",this.onmousedown,!1),s.addEventListener(t,"mousemove",this.throttledOnMouseMove,!1),window.addEventListener("mouseup",t.onmouseup,!1),window.addEventListener("keydown",t.onkeydown,!1),window.addEventListener("keyup",t.onkeyup,!1),window.addEventListener("resize",this.onresize,!1),document.addEventListener("mouseup",this.docMouseUp,!1),s.addEventListener(t,"mouseup",this.mouseup,!1),window.addEventListener("mousedown",this.dragMouseDownHandler,!1),window.addEventListener("mousemove",this.throttledDragOnMouseMove,!1),window.addEventListener("mouseup",this.dragMouseUpHandler,!1),window.addEventListener("wheel",this.wheelHandler,!1),window.addEventListener("mousewheel",this.wheelHandler,!1),window.addEventListener("DOMMouseScroll",this.wheelHandler,!1),window.addEventListener("keypress",this.onkeypress,!1)},disable_listeners:function(){var t=this._Mx;s.removeEventListener(t,"mousedown",this.onmousedown,!1),s.removeEventListener(t,"mousemove",this.throttledOnMouseMove,!1),s.removeEventListener(t,"mouseup",this.mouseup,!1),window.removeEventListener("mouseup",t.onmouseup,!1),window.removeEventListener("keydown",t.onkeydown,!1),window.removeEventListener("keyup",t.onkeyup,!1),window.removeEventListener("resize",this.onresize,!1),document.removeEventListener("mouseup",this.docMouseUp,!1),window.removeEventListener("mousedown",this.dragMouseDownHandler,!1),window.removeEventListener("mousemove",this.throttledDragOnMouseMove,!1),window.removeEventListener("mouseup",this.dragMouseUpHandler,!1),window.removeEventListener("wheel",this.wheelHandler,!1),window.removeEventListener("mousewheel",this.wheelHandler,!1),window.removeEventListener("DOMMouseScroll",this.wheelHandler,!1),window.removeEventListener("keypress",this.onkeypress,!1)},checkresize:function(){s.checkresize(this._Mx)&&this.refresh()},addColorMaps:function(t){t.forEach(function(t){t.hasOwnProperty("name")&&a.Mc.colormap.push(t)})},_refresh:function(){var t=this._Mx,e=this._Gx;t.canvas.getContext("2d");if(!e.hold){var i=t.font_width;if(t.font_scaled&&(i=Math.min(t.font_width,t.width/64)),s.set_font(t,i),e.pthk=1.5*t.text_w,e.specs){var n=!1;if(4===e.ylab&&(n=!0),!0===e.show_y_axis){if(t.l=6*t.text_w,n)(Math.abs(t.stk[0].ymin)>=31536e3||Math.abs(t.stk[0].ymax)>=31536e3)&&(t.l=11*t.text_w)}else t.l=1;!0===e.pan?t.r=t.width-(e.pthk+2*t.text_w):t.r=t.width-5,e.show_readout?(t.t=2*t.text_h,e.show_x_axis?t.b=t.height-4*t.text_h:t.b=t.height-3*t.text_h):"bottom"===e.x_scrollbar_location?(t.t=2*t.text_h,e.pan?e.show_x_axis?t.b=t.height-3*t.text_h:t.b=t.height-2*t.text_h:e.show_x_axis?t.b=t.height-2*t.text_h:t.b=t.height-5):(e.pan?t.t=e.pthk+2*t.text_w:t.t=1,e.show_x_axis?t.b=t.height-3*t.text_h/2:t.b=t.height-2),e.show_readout?e.pl=50*t.text_w:"bottom"===e.x_scrollbar_location?e.pl=t.l:e.pl=35*t.text_w,e.pr=Math.max(e.pl+9*t.text_w,t.r),e.show_readout?e.show_x_axis?e.pt=t.b+t.text_h+(t.height-t.b-t.text_h-e.pthk)/2:e.pt=t.b+(t.height-t.b-e.pthk)/2:"bottom"===e.x_scrollbar_location?e.show_x_axis?e.pt=t.b+t.text_h+(t.height-t.b-t.text_h-e.pthk)/2:e.pt=t.b+(t.height-t.b-e.pthk)/2:e.pt=(t.t-e.pthk)/2,e.lbtn=t.text_h+t.text_w+2}else e.pan?(t.t=e.pthk+2*t.text_w,t.r=t.width-(e.pthk+t.text_w)):(t.t=1,t.r=t.width-2),t.b=t.height-2,t.l=1,e.pl=t.l,e.pr=t.r,e.pt=(t.t-e.pthk)/2,e.lbtn=0;if(e.pyl=t.r+(t.width-t.r-e.pthk)/2+1,e.lg_colorbar&&2===e.lyr[0].hcb.class){var o=t.r;t.r=o-100}if(e.p_cuts&&1===e.lyr.length&&2===e.lyr[0].hcb.class){e.cross=!0;o=t.r;t.r=o-100;var r=t.b;t.b=r-100}e.xcut_now&&(t.canvas.width=e.x_box_w-1,t.canvas.height=e.x_box_h,t.r=e.x_box_w-1,t.l=0,t.b=e.x_box_h,t.t=0),e.ycut_now&&(t.canvas.width=e.y_box_h-1,t.canvas.height=e.y_box_w,t.r=e.y_box_h-1,t.l=0,t.b=e.y_box_w,t.t=0);var l=t.level;t.stk[l].x1=t.l,t.stk[l].y1=t.t,t.stk[l].x2=t.r,t.stk[l].y2=t.b,t.stk[l].xscl=(t.stk[l].xmax-t.stk[l].xmin)/(t.r-t.l),t.stk[l].yscl=(t.stk[l].ymax-t.stk[l].ymin)/(t.b-t.t);var h=N(this,t.xpos,t.ypos);e.retx=h.x,e.rety=h.y,0!==e.panning&&0===e.panning||(e.plotData.valid=!1,s.clear_window(t));var c=e.xlab,d=e.ylab;if(void 0===c&&(c=30),e.index&&(c=0),void 0===d){var u=e.lyr.length>0&&e.lyr[0].cx;1===e.cmode?d=28:2===e.cmode?d=e.plab:3===e.cmode&&u?d=21:4===e.cmode?d=22:5===e.cmode?(d=22,c=21):d=6===e.cmode?26:7===e.cmode?27:0}if(e.specs){if(0===e.sections){var f={grid:e.grid};2===e.panning&&(f.noxtlab=!0),e.show_x_axis||(f.noxtics=!0,f.noxtlab=!0,f.noxplab=!0),e.show_y_axis||(f.noytics=!0,f.noytlab=!0,f.noyplab=!0),!e.specs||e.show_readout||e.pan||(f.noyplab=!0,f.noxplab=!0),e.gridBackground&&(f.fillStyle=e.gridBackground),e.gridStyle&&(f.gridStyle=e.gridStyle),e.xmult&&(f.xmult=e.xmult),e.ymult&&(f.ymult=e.ymult),4===c&&(f.xtimecode=!0),4===d&&(f.ytimecode=!0),void 0!==e.xlabel&&(f.xlabel=e.xlabel),void 0!==e.ylabel&&(f.ylabel=e.ylabel),s.drawaxis(e,t,e.xdiv,e.ydiv,c,d,f)}var x=e.lbtn-2;e.show_readout&&e.pan&&!e.no_legend_button?(e.legend?(e.legendBtnLocation={x:t.width-e.lbtn,y:2,width:x,height:x},s.shadowbox(t,t.width-e.lbtn,2,x,x,1,-2,"L")):(e.legendBtnLocation={x:t.width-e.lbtn,y:2,width:x,height:x},s.shadowbox(t,t.width-e.lbtn,2,x,x,1,2,"L")),I(this)):e.legendBtnLocation=null}else if(e.grid&&e.sections>=0){f={grid:!0,noaxisbox:!0,noxtics:!0,noxtlab:!0,noxplab:!0,noytics:!0,noytlab:!0,noyplab:!0};s.drawaxis(e,t,e.xdiv,e.ydiv,c,d,f)}!function(t){for(var e=t._Gx.lyr,i=0;i<e.length;i++)E(t,e[i])}(this),function(t,e){var i=t._Mx,n=t._Gx;if(e>0){if(e>=4&&n.show_readout&&!n.hide_note){var o=n.note.length;s.text(i,i.width-n.lbtn-(o+1)*i.text_w,i.text_h,n.note)}e>=4&&T(t),e>=1&&n.legend&&function(t){var e=t._Mx,i=t._Gx,n=e.canvas.getContext("2d"),o=0,r=0,l=0,h=0,c=0,d=0,u=0,f=0,x=0,m=0,p=0;c=e.text_w,f=23*c,x=(i.lyr.length+1)*e.text_h,d=e.r-f,u=e.t;var y={x:d+2,y:u+2,width:f-5,height:x-5},v=0,b=0;for(r=0;r<i.lyr.length;r++){var g=n.measureText(i.lyr[r].name).width;g>v&&(v=g)}v>98&&(b=v-98,y.width+=b,y.x-=b);for(n.strokeStyle=e.fg,n.fillStyle=e.bg,n.fillRect(y.x,y.y,y.width,y.height),n.strokeRect(y.x,y.y,y.width,y.height),r=0;r<i.lyr.length;r++)l=d+4*c,h=u+r*e.text_h+e.text_h,r===i.modlayer&&s.text(e,d+c-b,h+Math.floor(e.text_w/2),"**"),i.lyr[r].display&&(p=i.lyr[r].color,i.lyr[r].line>0&&((m=a.sign(Math.min(c,Math.abs(i.lyr[r].thick)),i.lyr[r].thick))<0||m===s.L_dashed?s.draw_line(e,p,l-b,h-3,l+2*c-b,h-3,Math.abs(m),{mode:"dashed",on:4,off:4}):s.draw_line(e,p,l-b,h-3,l+2*c-b,h-3,Math.abs(m))),i.lyr[r].symbol>0&&(m=i.lyr[r].radius<0?-a.trunc(.6*c):Math.min(i.lyr[r].radius,a.trunc(.6*c)),s.draw_symbol(e,p,l+c-b,h-3,i.lyr[r].symbol,m)),2===i.lyr[r].hcb.class&&s.legend_colorbar(e,y.x+10,y.y+y.height/4,y.width/4-10,y.height/2)),l+=3*c,h+=.3*e.text_h,s.text(e,l-b,h,i.lyr[r].name);var w=y.height/i.lyr.length;for(o=0;o<i.lyr.length;o++)y.x<=e.xpos&&y.x+y.width>=e.xpos&&y.y<=e.ypos&&y.y+w>=e.ypos&&_(t,o),y.y+=w}(t)}}(this,4),w(this),e.cross_xpos=void 0,e.cross_ypos=void 0,!t.warpbox&&this.mouseOnCanvas&&(L(this),e.y_cut_press_on||e.x_cut_press_on||1!==e.lyr.length||2!==e.lyr[0].hcb.class||C(this)),(e.always_show_marker||e.show_marker)&&z(this)}}};var f=["Ma","Ph","Re","Im","IR","Lo","L2"],x=["(absc)","(indx)","(1/ab)","(dydx)"];function m(t,e){var i=t._Gx,n=t._Mx;if(Array.isArray(e)){var o={name:"Custom",colors:e};"Custom"===a.Mc.colormap[a.Mc.colormap.length-1].name?a.Mc.colormap[a.Mc.colormap.length-1].colors=e:a.Mc.colormap.push(o),i.cmap=a.Mc.colormap.length-1}else if("string"==typeof e){i.cmap=-1;for(var r=0;r<a.Mc.colormap.length;r++)if(a.Mc.colormap[r].name===e){i.cmap=r;break}}else i.cmap=e;i.ncolors<0&&(i.ncolors=-1*i.ncolors,i.cmap=Math.max(1,i.cmap)),(i.cmap<0||i.cmap>a.Mc.colormap.length)&&(2===i.cmode?i.cmap=2:i.cmap=1),s.colormap(n,a.Mc.colormap[i.cmap].colors,i.ncolors)}function p(t){var e=t._Gx,i=t._Mx,n=e.aretx.toString();1===e.iabsc?s.message(i,"INDEX = "+n):2===e.iabsc?s.message(i,"1/X = "+n):s.message(i,"X = "+n)}function y(t){var e=t._Gx,i=t._Mx,n=e.arety.toString();2===e.iabsc?s.message(i,"1/Y = "+n):s.message(i,"Y = "+n)}function v(t){var e=t._Gx,i=t._Mx;s.removeEventListener(i,"mousedown",t.onmousedown,!1);for(var n={text:"Cntrls...",menu:{title:"CONTROLS OPTIONS",items:[{text:"Continuous (Disabled)",checked:-2===e.cntrls,handler:function(){t.change_settings({xcnt:-2})}},{text:"LM Click (Disabled)",checked:-1===e.cntrls,handler:function(){t.change_settings({xcnt:-1})}},{text:"Off",checked:0===e.cntrls,handler:function(){t.change_settings({xcnt:0})}},{text:"LM Click",checked:1===e.cntrls,handler:function(){t.change_settings({xcnt:1})}},{text:"Continuous",checked:2===e.cntrls,handler:function(){t.change_settings({xcnt:2})}}]}},o={text:"CX Mode...",menu:{title:"COMPLEX MODE",items:[{text:"Magnitude",checked:1===e.cmode,handler:function(){t.change_settings({cmode:1})}},{text:"Phase",checked:2===e.cmode,handler:function(){t.change_settings({cmode:2})}},{text:"Real",checked:3===e.cmode,handler:function(){t.change_settings({cmode:3})}},{text:"Imaginary",checked:4===e.cmode,handler:function(){t.change_settings({cmode:4})}},{text:"IR: Imag/Real",checked:5===e.cmode,handler:function(){t.change_settings({cmode:5})}},{text:"10*Log10",checked:6===e.cmode,handler:function(){t.change_settings({cmode:6})}},{text:"20*Log10",checked:7===e.cmode,handler:function(){t.change_settings({cmode:7})}}]}},r={text:"Scaling...",menu:{title:"SCALING",items:[{text:"Y Axis",style:"separator"},{text:"Parameters...",checked:0===e.autoy,handler:function(){e.autoy=0;R(t,"Y Axis Min:",s.floatValidator,function(e){parseFloat(e)!==i.stk[i.level].ymin?(""===e&&(e=0),F(t,parseFloat(e),i.stk[i.level].ymax,"Y")):t.refresh()},i.stk[i.level].ymin,void 0,void 0,function(){R(t,"Y Axis Max:",s.floatValidator,function(e){parseFloat(e)!==i.stk[i.level].ymax?(""===e&&(e=0),F(t,i.stk[i.level].ymin,parseFloat(e),"Y")):t.refresh()},i.stk[i.level].ymax,void 0,void 0,void 0)})}},{text:"Min Auto",checked:1===e.autoy,handler:function(){e.autoy=1}},{text:"Max Auto",checked:2===e.autoy,handler:function(){e.autoy=2}},{text:"Full Auto",checked:3===e.autoy,handler:function(){e.autoy=3}},{text:"X Axis",style:"separator"},{text:"Parameters...",checked:0===e.autox,handler:function(){e.autox=0;R(t,"X Axis Min:",s.floatValidator,function(e){parseFloat(e)!==i.stk[i.level].xmin?(""===e&&(e=0),F(t,parseFloat(e),i.stk[i.level].xmax,"X")):t.refresh()},i.stk[i.level].xmin,void 0,void 0,function(){R(t,"X Axis Max:",s.floatValidator,function(e){parseFloat(e)!==i.stk[i.level].xmax?(""===e&&(e=0),F(t,i.stk[i.level].xmin,parseFloat(e),"X")):t.refresh()},i.stk[i.level].xmax,void 0,void 0,void 0)})}},{text:"Min Auto",checked:1===e.autox,handler:function(){e.autox=1}},{text:"Max Auto",checked:2===e.autox,handler:function(){e.autox=2}},{text:"Full Auto",checked:3===e.autox,handler:function(){e.autox=3}},{text:"Z Axis",style:"separator"},{text:"Parameters...",checked:0===e.autoz,handler:function(){e.autoz=0;R(t,"Z Axis Min:",s.floatValidator,function(i){parseFloat(i)!==e.zmin&&(""===i&&(i=0),t.change_settings({zmin:i}))},e.zmin,void 0,void 0,function(){R(t,"Z Axis Max:",s.floatValidator,function(i){parseFloat(i)!==e.zmax&&(""===i&&(i=0),t.change_settings({zmax:i}))},e.zmax,void 0,void 0,void 0)})}},{text:"Min Auto",checked:1===e.autoz,handler:function(){t.change_settings({autoz:1})}},{text:"Max Auto",checked:2===e.autoz,handler:function(){t.change_settings({autoz:2})}},{text:"Full Auto",checked:3===e.autoz,handler:function(){t.change_settings({autoz:3})}}]}},l={text:"Grid",handler:function(){t.change_settings({grid:!e.grid})}},h={text:"Settings...",menu:{title:"SETTINGS",items:[{text:"ALL Mode",checked:e.all,style:"checkbox",handler:function(){t.change_settings({all:!e.all})}},{text:"Controls...",menu:{title:"CONTROLS OPTIONS",items:[{text:"Continuous (Disabled)",checked:-2===e.cntrls,handler:function(){t.change_settings({xcnt:-2})}},{text:"LM Click (Disabled)",checked:-1===e.cntrls,handler:function(){t.change_settings({xcnt:-1})}},{text:"Off",checked:0===e.cntrls,handler:function(){t.change_settings({xcnt:0})}},{text:"LM Click",checked:1===e.cntrls,handler:function(){t.change_settings({xcnt:1})}},{text:"Continuous",checked:2===e.cntrls,handler:function(){t.change_settings({xcnt:2})}}]}},{text:"Mouse...",menu:{title:"MOUSE OPTIONS",items:[{text:"LM Drag (Zoom)",checked:"zoom"===e.default_rubberbox_action,handler:function(){e.default_rubberbox_action="zoom"}},{text:"LM Drag (Select)",checked:"select"===e.default_rubberbox_action,handler:function(){e.default_rubberbox_action="select"}},{text:"LM Drag (Disabled)",checked:null===e.default_rubberbox_action,handler:function(){e.default_rubberbox_action=null}},{text:"RM Drag (Zoom)",checked:"zoom"===e.default_rightclick_rubberbox_action,handler:function(){e.default_rightclick_rubberbox_action="zoom"}},{text:"RM Drag (Select)",checked:"select"===e.default_rightclick_rubberbox_action,handler:function(){e.default_rightclick_rubberbox_action="select"}},{text:"RM Drag (Disabled)",checked:null===e.default_rightclick_rubberbox_action,handler:function(){e.default_rightclick_rubberbox_action=null}},{text:"Mode...",menu:{title:"MOUSE Mode",items:[{text:"Box",checked:"box"===e.default_rubberbox_mode,handler:function(){e.default_rubberbox_mode="box"}},{text:"Horizontal",checked:"horizontal"===e.default_rubberbox_mode,handler:function(){e.default_rubberbox_mode="horizontal"}},{text:"Vertical",checked:"vertical"===e.default_rubberbox_mode,handler:function(){e.default_rubberbox_mode="vertical"}}]}},{text:"CROSShairs...",menu:{title:"Crosshairs Mode",items:[{text:"Off",checked:!e.cross,handler:function(){e.cross=!1}},{text:"On",checked:!0===e.cross,handler:function(){e.cross=!0}},{text:"Horizontal",checked:"horizontal"===e.cross,handler:function(){e.cross="horizontal"}},{text:"Vertical",checked:"vertical"===e.cross,handler:function(){e.cross="vertical"}}]}},{text:"Mousewheel Natural Mode",checked:e.wheelscroll_mode_natural,style:"checkbox",handler:function(){t.change_settings({wheelscroll_mode_natural:!e.wheelscroll_mode_natural})}}]}},{text:"CROSShairs",checked:e.cross,style:"checkbox",handler:function(){t.change_settings({cross:!e.cross})}},{text:"GRID",checked:e.grid,style:"checkbox",handler:function(){t.change_settings({grid:!e.grid})}},{text:"INDEX Mode",checked:e.index,style:"checkbox",handler:function(){t.change_settings({index:!e.index})}},{text:"LEGEND",checked:e.legend,style:"checkbox",handler:function(){t.change_settings({legend:!e.legend})}},{text:"PAN Scrollbars",checked:e.pan,style:"checkbox",handler:function(){t.change_settings({pan:!e.pan})}},{text:"PHase UNITS...",menu:{title:"PHASE UNITS",items:[{text:"Radians",checked:23===e.plab,handler:function(){t.change_settings({phunits:"R"})}},{text:"Degrees",checked:24===e.plab,handler:function(){t.change_settings({phunits:"D"})}},{text:"Cycles",checked:25===e.plab,handler:function(){t.change_settings({phunits:"C"})}}]}},{text:"SPECS",checked:e.specs,style:"checkbox",handler:function(){t.change_settings({specs:!e.specs})}},{text:"P-Cuts",checked:e.p_cuts,style:"checkbox",handler:function(){t.change_settings({p_cuts:!e.p_cuts})}},{text:"Large Colorbar",checked:e.lg_colorbar,style:"checkbox",handler:function(){t.change_settings({lg_colorbar:!e.lg_colorbar})}},{text:"XDIVisions...",handler:function(){R(t,"X Divisions:",function(t){var e=s.intValidator(t),n=a.trunc(i.width/2);return e.valid&&t>n?{valid:!1,reason:"Exceeds maximum number of divisions ("+n+")."}:e},function(i){parseFloat(i)!==e.xdiv&&(""===i&&(i=1),e.xdiv=parseFloat(i)),t.refresh()},e.xdiv,void 0,void 0,void 0)}},{text:"XLABel...",handler:function(){R(t,"X Units:",function(t){return console.log("The value is "+t),s.intValidator(t)},function(i){parseFloat(i)!==e.xlab&&(i<0&&(i=0),e.xlab=parseFloat(i)),t.refresh()},e.xlab,void 0,void 0,void 0)}},{text:"YDIVisions...",handler:function(){R(t,"Y Divisions:",function(t){var e=s.intValidator(t),n=a.trunc(i.height/2);return e.valid&&t>n?{valid:!1,reason:"Exceeds maximum number of divisions ("+n+")."}:e},function(i){parseFloat(i)!==e.ydiv&&(""===i&&(i=1),e.ydiv=parseFloat(i)),t.refresh()},e.ydiv,void 0,void 0,void 0)}},{text:"YINVersion",checked:4===i.origin,style:"checkbox",handler:function(){t.change_settings({yinv:4!==i.origin})}},{text:"YLABel...",handler:function(){R(t,"Y Units:",function(t){return s.intValidator(t)},function(i){parseFloat(i)!==e.ylab&&(i<0&&(i=0),e.ylab=parseFloat(i)),t.refresh()},e.ylab,void 0,void 0,void 0)}},{text:"X-axis",checked:e.show_x_axis,style:"checkbox",handler:function(){t.change_settings({show_x_axis:!e.show_x_axis})}},{text:"Y-axis",checked:e.show_y_axis,style:"checkbox",handler:function(){t.change_settings({show_y_axis:!e.show_y_axis})}},{text:"Readout",checked:e.show_readout,style:"checkbox",handler:function(){t.change_settings({show_readout:!e.show_readout})}},{text:"Invert Colors",checked:i.xi,style:"checkbox",handler:function(){s.invertbgfg(i)}}]}},c={text:"Colormap...",menu:{title:"COLORMAP",items:[]}},u=function(e){t.change_settings({cmap:this.cmap})},f=0;f<a.Mc.colormap.length;f++){var x={text:a.Mc.colormap[f].name,cmap:f,checked:e.cmap===f,handler:u};c.menu.items.push(x)}var m=function(i){return{title:"TRACE OPTIONS",items:[{text:"Dashed...",handler:function(){var n=1;if(void 0!==i)n=Math.abs(t._Gx.lyr[i].thick);else{if(0===e.lyr.length)return;n=Math.abs(t._Gx.lyr[0].thick);for(var o=0;o<e.lyr.length;o++)if(n!==Math.abs(t._Gx.lyr[o].thick)){n=1;break}}R(t,"Line thickness:",s.intValidator,function(n){if(void 0!==i)t._Gx.lyr[i].line=3,t._Gx.lyr[i].thick=-1*n,t._Gx.lyr[i].symbol=0;else for(var o=0;o<e.lyr.length;o++)t._Gx.lyr[o].line=3,t._Gx.lyr[o].thick=-1*n,t._Gx.lyr[o].symbol=0},n)}},{text:"Colors...",menu:{title:"COLORS",items:[{text:"Retain Current"},{text:"Red",checked:void 0!==i?"red"===t._Gx.lyr[i].color:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].color="red";else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].color="red"}},{text:"Pink",checked:void 0!==i?"pink"===t._Gx.lyr[i].color:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].color="pink";else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].color="pink"}},{text:"Hot Pink",checked:void 0!==i?"#ff009e"===t._Gx.lyr[i].color:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].color="#ff009e";else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].color="#ff009e"}},{text:"Orange",checked:void 0!==i?"orange"===t._Gx.lyr[i].color:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].color="orange";else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].color="orange"}},{text:"Yellow",checked:void 0!==i?"yellow"===t._Gx.lyr[i].color:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].color="yellow";else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].color="yellow"}},{text:"Lime Green",checked:void 0!==i?"#80f741"===t._Gx.lyr[i].color:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].color="#80f741";else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].color="#80f741"}},{text:"Green",checked:void 0!==i?"green"===t._Gx.lyr[i].color:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].color="green";else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].color="green"}},{text:"Blue",checked:void 0!==i?"blue"===t._Gx.lyr[i].color:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].color="blue";else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].color="blue"}},{text:"Purple",checked:void 0!==i?"purple"===t._Gx.lyr[i].color:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].color="purple";else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].color="purple"}},{text:"Custom Hexcode",handler:function(){R(t,"Color code (requires #):",s.hexValidator,function(n){if(void 0!==i)t._Gx.lyr[i].color=n;else for(;0<e.lyr.length;i++)t._Gx.lyr[0].color=n},void 0,void 0,void 0,void 0)}}]}},{text:"Dots...",handler:function(){var n=3;if(void 0!==i)n=Math.abs(t._Gx.lyr[i].radius);else{if(0===e.lyr.length)return;var o;for(o=0;o<e.lyr.length;o++)if(n!==Math.abs(t._Gx.lyr[o].radius)){n=3;break}}R(t,"Radius/Shape:",s.intValidator,function(n){var o,r,a;if(n<0?(o=3,r=Math.abs(n)):n>0?(o=2,r=n):(o=1,r=0),void 0!==i)t._Gx.lyr[i].line=0,t._Gx.lyr[i].radius=r,t._Gx.lyr[i].symbol=o;else for(a=0;a<e.lyr.length;a++)t._Gx.lyr[a].line=0,t._Gx.lyr[a].radius=r,t._Gx.lyr[a].symbol=o},n)}},{text:"Radius...",handler:function(){var n=3;if(void 0!==i)n=Math.abs(t._Gx.lyr[i].radius);else{if(0===e.lyr.length)return;for(var o=0;o<e.lyr.length;o++)if(n!==Math.abs(t._Gx.lyr[o].radius)){n=3;break}}R(t,"Radius:",s.intValidator,function(n){var o;if(n<0?o=Math.abs(n):n>0?o=n:(1,o=0),void 0!==i)t._Gx.lyr[i].line=0,t._Gx.lyr[i].radius=o;else for(var r=0;r<e.lyr.length;r++)t._Gx.lyr[r].line=0,t._Gx.lyr[r].radius=o},n)}},{text:"Solid...",handler:function(){var n=1;if(void 0!==i)n=Math.abs(t._Gx.lyr[i].thick);else{if(0===e.lyr.length)return;var o;for(n=Math.abs(t._Gx.lyr[0].thick),o=0;o<e.lyr.length;o++)if(n!==Math.abs(t._Gx.lyr[o].thick)){n=1;break}}R(t,"Line thickness:",s.intValidator,function(n){var o;if(void 0!==i)t._Gx.lyr[i].line=3,t._Gx.lyr[i].thick=n,t._Gx.lyr[i].symbol=0;else for(o=0;o<e.lyr.length;o++)t._Gx.lyr[o].line=3,t._Gx.lyr[o].thick=n,t._Gx.lyr[o].symbol=0},n)}},{text:"Toggle",style:void 0!==i?"checkbox":void 0,checked:void 0!==i?t._Gx.lyr[i].display:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].display=!t._Gx.lyr[i].display;else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].display=!t._Gx.lyr[n].display}},{text:"Symbols...",menu:{title:"SYMBOLS",items:[{text:"Retain Current"},{text:"None",checked:void 0!==i?0===t._Gx.lyr[i].symbol:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].radius=0,t._Gx.lyr[i].symbol=0;else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].radius=0,t._Gx.lyr[n].symbol=0}},{text:"Pixels",checked:void 0!==i?1===t._Gx.lyr[i].symbol:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].radius=1,t._Gx.lyr[i].symbol=1;else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].radius=1,t._Gx.lyr[n].symbol=1}},{text:"Circles",checked:void 0!==i?2===t._Gx.lyr[i].symbol:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].radius=4,t._Gx.lyr[i].symbol=2;else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].radius=4,t._Gx.lyr[n].symbol=2}},{text:"Squares",checked:void 0!==i?3===t._Gx.lyr[i].symbol:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].radius=4,t._Gx.lyr[i].symbol=3;else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].radius=4,t._Gx.lyr[n].symbol=3}},{text:"Plusses",checked:void 0!==i?4===t._Gx.lyr[i].symbol:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].radius=4,t._Gx.lyr[i].symbol=4;else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].radius=4,t._Gx.lyr[n].symbol=4}},{text:"X's",checked:void 0!==i?5===t._Gx.lyr[i].symbol:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].radius=4,t._Gx.lyr[i].symbol=5;else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].radius=4,t._Gx.lyr[n].symbol=5}},{text:"Triangles",checked:void 0!==i?6===t._Gx.lyr[i].symbol:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].radius=6,t._Gx.lyr[i].symbol=6;else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].radius=6,t._Gx.lyr[n].symbol=6}},{text:"Downward Triangles",checked:void 0!==i?7===t._Gx.lyr[i].symbol:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].radius=6,t._Gx.lyr[i].symbol=7;else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].radius=6,t._Gx.lyr[n].symbol=7}}]}},{text:"Line Type...",menu:{title:"LINE TYPE",items:[{text:"Retain Current"},{text:"None",checked:void 0!==i?0===t._Gx.lyr[i].line:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].line=0;else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].line=0}},{text:"Verticals",checked:void 0!==i?1===t._Gx.lyr[i].line:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].line=1;else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].line=1}},{text:"Horizontals",checked:void 0!==i?2===t._Gx.lyr[i].line:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].line=2;else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].line=2}},{text:"Connecting",checked:void 0!==i?3===t._Gx.lyr[i].line:void 0,handler:function(){if(void 0!==i)t._Gx.lyr[i].line=3;else for(var n=0;n<e.lyr.length;n++)t._Gx.lyr[n].line=3}}]}},{text:"Thickness...",handler:function(){var n=1;void 0!==i&&(n=t._Gx.lyr[i].thick),R(t,"Thickness",s.intValidator,function(n){if(""===n&&(n=1),n=Math.max(0,n),void 0!==i)t._Gx.lyr[i].thick=n;else for(var o=0;o<e.lyr.length;o++)t._Gx.lyr[o].thick=n},n,void 0,void 0,void 0)}},{text:"Opacity...",handler:function(){var n=1;void 0!==i&&(n=t._Gx.lyr[i].opacity),R(t,"Opacity:",s.floatValidator,function(n){if(""===n&&(n=1),n=Math.max(0,n),n=Math.min(1,n),void 0!==i)t._Gx.lyr[i].opacity=n;else for(var o=0;o<e.lyr.length;o++)t._Gx.lyr[o].opacity=n},n,void 0,void 0,void 0)}}]}},p={title:"SIG-PLOT",finalize:function(){i.prompt||s.addEventListener(i,"mousedown",t.onmousedown,!1),t.refresh()},items:[{text:"Refresh"},n,o,r,{text:"View...",menu:{title:"VIEW",items:[{text:"Reset",handler:function(){t.unzoom()}},{text:"Y Axis",style:"separator"},{text:"Expand Range",handler:function(){H(t,s.SB_EXPAND,"YPAN")}},{text:"Shrink Range",handler:function(){H(t,s.SB_SHRINK,"YPAN")}},{text:"Expand Full",handler:function(){H(t,s.SB_FULL,"YPAN")}},{text:"X Axis",style:"separator"},{text:"Expand Range",handler:function(){H(t,s.SB_EXPAND,"XPAN")}},{text:"Shrink Range",handler:function(){H(t,s.SB_SHRINK,"XPAN")}},{text:"Expand Full",handler:function(){H(t,s.SB_FULL,"XPAN")}}]}},l,h,c,{text:"Traces...",menu:function(){var e=t._Gx,i={title:"TRACE",items:[]};i.items.push({text:"All",menu:m()});for(var n=0;n<e.lyr.length;n++)i.items.push({text:e.lyr[n].name,menu:m(n)});return i}},{text:"Files...",menu:{title:"FILES OPTIONS",items:[{text:"Deoverlay File...",menu:function(){var e=t._Gx,i={title:"DEOVERLAY",items:[]};i.items.push({text:"Deoverlay All",handler:function(){t.deoverlay()}});for(var n=0;n<e.lyr.length;n++){var o=function(e){return function(){t.deoverlay(e)}}(n);i.items.push({text:e.lyr[n].name,handler:o})}return i}}]}},{text:"Plugins...",menu:{title:"PLUGINS",items:function(){for(var t=[],i=0;i<e.plugins.length;i++){var n=e.plugins[i];n.impl.menu&&("function"==typeof n.impl.menu?t.push(n.impl.menu()):t.push(n.impl.menu))}return t}()}},{text:"Keypress Info",handler:function(){s.message(i,d)}},{text:"Save as...",menu:{title:"SAVE AS",items:[{text:"PNG",handler:function(){var e=t._Mx.active_canvas.toDataURL("image/png"),i=document.createElement("a");i.href=e,i.download="SigPlot."+(new Date).getTime()+".png",i.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i)}},{text:"JPG",handler:function(){var e=t._Mx.active_canvas.toDataURL("image/jpg"),i=document.createElement("a");i.href=e,i.download="SigPlot."+(new Date).getTime()+".jpg",i.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i)}},{text:"SVG",handler:function(){var e=t._Mx.active_canvas.toDataURL("image/svg"),i=document.createElement("a");i.href=e,i.download="SigPlot."+(new Date).getTime()+".svg",i.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i)}}]}},{text:"Exit",handler:function(){var t=document.createEvent("Event");t.initEvent("sigplotexit",!0,!0),s.dispatchEvent(i,t)}}]};s.menu(i,p)}function _(t,e){var i=t._Gx,n=t._Mx;s.removeEventListener(n,"mousedown",t.onmousedown,!1);var o={text:"Dashed...",handler:function(){var n=1;if(void 0!==e)n=Math.abs(t._Gx.lyr[e].thick);else{if(0===i.lyr.length)return;n=Math.abs(t._Gx.lyr[0].thick);for(var o=0;o<i.lyr.length;o++)if(n!==Math.abs(t._Gx.lyr[o].thick)){n=1;break}}R(t,"Line thickness:",s.intValidator,function(n){if(void 0!==e)t._Gx.lyr[e].line=3,t._Gx.lyr[e].thick=-1*n,t._Gx.lyr[e].symbol=0;else for(var o=0;o<i.lyr.length;o++)t._Gx.lyr[o].line=3,t._Gx.lyr[o].thick=-1*n,t._Gx.lyr[o].symbol=0},n)}},r={text:"Colors...",menu:{title:"COLORS",items:[{text:"Retain Current"},{text:"Red",checked:void 0!==e?"red"===t._Gx.lyr[e].color:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].color="red";else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].color="red"}},{text:"Pink",checked:void 0!==e?"pink"===t._Gx.lyr[e].color:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].color="pink";else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].color="pink"}},{text:"Hot Pink",checked:void 0!==e?"#ff009e"===t._Gx.lyr[e].color:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].color="#ff009e";else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].color="#ff009e"}},{text:"Orange",checked:void 0!==e?"orange"===t._Gx.lyr[e].color:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].color="orange";else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].color="orange"}},{text:"Yellow",checked:void 0!==e?"yellow"===t._Gx.lyr[e].color:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].color="yellow";else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].color="yellow"}},{text:"Lime Green",checked:void 0!==e?"#80f741"===t._Gx.lyr[e].color:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].color="#80f741";else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].color="#80f741"}},{text:"Green",checked:void 0!==e?"green"===t._Gx.lyr[e].color:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].color="green";else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].color="green"}},{text:"Blue",checked:void 0!==e?"blue"===t._Gx.lyr[e].color:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].color="blue";else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].color="blue"}},{text:"Purple",checked:void 0!==e?"purple"===t._Gx.lyr[e].color:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].color="purple";else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].color="purple"}},{text:"Custom Hexcode",handler:function(){R(t,"Color code (requires #):",s.hexValidator,function(n){if(void 0!==e)t._Gx.lyr[e].color=n;else for(var o=0;o<i.lyr.length;o++)t._Gx.lyr[o].color=n},void 0,void 0,void 0,void 0)}}]}},a={text:"Solid...",handler:function(){var n=1;if(void 0!==e)n=Math.abs(t._Gx.lyr[e].thick);else{if(0===i.lyr.length)return;var o;for(n=Math.abs(t._Gx.lyr[0].thick),o=0;o<i.lyr.length;o++)if(n!==Math.abs(t._Gx.lyr[o].thick)){n=1;break}}R(t,"Line thickness:",s.intValidator,function(n){var o;if(void 0!==e)t._Gx.lyr[e].line=3,t._Gx.lyr[e].thick=n,t._Gx.lyr[e].symbol=0;else for(o=0;o<i.lyr.length;o++)t._Gx.lyr[o].line=3,t._Gx.lyr[o].thick=n,t._Gx.lyr[o].symbol=0},n)}},l={text:"Toggle",style:void 0!==e?"checkbox":void 0,checked:void 0!==e?t._Gx.lyr[e].display:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].display=!t._Gx.lyr[e].display;else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].display=!t._Gx.lyr[n].display}},h={text:"Symbols...",menu:{title:"SYMBOLS",items:[{text:"Retain Current"},{text:"None",checked:void 0!==e?0===t._Gx.lyr[e].symbol:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].radius=0,t._Gx.lyr[e].symbol=0;else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].radius=0,t._Gx.lyr[n].symbol=0}},{text:"Pixels",checked:void 0!==e?1===t._Gx.lyr[e].symbol:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].radius=1,t._Gx.lyr[e].symbol=1;else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].radius=1,t._Gx.lyr[n].symbol=1}},{text:"Circles",checked:void 0!==e?2===t._Gx.lyr[e].symbol:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].radius=4,t._Gx.lyr[e].symbol=2;else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].radius=4,t._Gx.lyr[n].symbol=2}},{text:"Squares",checked:void 0!==e?3===t._Gx.lyr[e].symbol:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].radius=4,t._Gx.lyr[e].symbol=3;else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].radius=4,t._Gx.lyr[n].symbol=3}},{text:"Plusses",checked:void 0!==e?4===t._Gx.lyr[e].symbol:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].radius=4,t._Gx.lyr[e].symbol=4;else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].radius=4,t._Gx.lyr[n].symbol=4}},{text:"X's",checked:void 0!==e?5===t._Gx.lyr[e].symbol:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].radius=4,t._Gx.lyr[e].symbol=5;else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].radius=4,t._Gx.lyr[n].symbol=5}},{text:"Triangles",checked:void 0!==e?6===t._Gx.lyr[e].symbol:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].radius=6,t._Gx.lyr[e].symbol=6;else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].radius=6,t._Gx.lyr[n].symbol=6}},{text:"Downward Triangles",checked:void 0!==e?7===t._Gx.lyr[e].symbol:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].radius=6,t._Gx.lyr[e].symbol=7;else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].radius=6,t._Gx.lyr[n].symbol=7}}]}},c={text:"Line Type...",menu:{title:"LINE TYPE",items:[{text:"Retain Current"},{text:"None",checked:void 0!==e?0===t._Gx.lyr[e].line:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].line=0;else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].line=0}},{text:"Verticals",checked:void 0!==e?1===t._Gx.lyr[e].line:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].line=1;else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].line=1}},{text:"Horizontals",checked:void 0!==e?2===t._Gx.lyr[e].line:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].line=2;else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].line=2}},{text:"Connecting",checked:void 0!==e?3===t._Gx.lyr[e].line:void 0,handler:function(){if(void 0!==e)t._Gx.lyr[e].line=3;else for(var n=0;n<i.lyr.length;n++)t._Gx.lyr[n].line=3}}]}},d={text:"Thickness...",handler:function(){var n=1;void 0!==e&&(n=t._Gx.lyr[e].thick),R(t,"Thickness",s.intValidator,function(n){if(""===n&&(n=1),n=Math.max(0,n),void 0!==e)t._Gx.lyr[e].thick=n;else for(var o=0;o<i.lyr.length;o++)t._Gx.lyr[o].thick=n},n,void 0,void 0,void 0)}},u={text:"Opacity...",handler:function(){var n=1;void 0!==e&&(n=t._Gx.lyr[e].opacity),R(t,"Opacity:",s.floatValidator,function(n){if(""===n&&(n=1),n=Math.max(0,n),n=Math.min(1,n),void 0!==e)t._Gx.lyr[e].opacity=n;else for(var o=0;o<i.lyr.length;o++)t._Gx.lyr[o].opacity=n},n,void 0,void 0,void 0)}},f={title:i.lyr[e].name,finalize:function(){n.prompt||s.addEventListener(n,"mousedown",t.onmousedown,!1),t.refresh()},items:[o,r,a,l,h,c,d,u]};s.menu(n,f)}function b(t,e){return function(i,n,o,r,a,l,h){t._Gx;var c=t._Mx,d=Math.min(n,r),u=Math.min(o,a),f=Math.abs(r-n),x=Math.abs(a-o),m=!1;if(i.which===e&&(m="horizontal"===h?f>2:"vertical"===h?x>2:f>2&&x>2),m){if(void 0===l||"zoom"===l)t.pixel_zoom(n,o,r,a),t.refresh();else if("select"===l){var p=document.createEvent("Event");p.initEvent("mtag",!0,!0);var y=N(t,d,u),v=N(t,d+f,u+x);p.x=y.x,p.y=y.y,p.xpos=d,p.ypos=u,p.w=Math.abs(v.x-y.x),p.h=Math.abs(v.y-y.y),p.wpxl=f,p.hpxl=x,p.shift=i.shiftKey,s.dispatchEvent(c,p)}}else t.mouseup(i)}}function g(t,e){var i=t._Gx,n=t._Mx;if(e){var o=i.HCB[0];i.xstart=o.xstart,i.xdelta=o.xdelta,n.origin=1}else i.xstart=0,i.xdelta=1,i.autol=-1,n.origin=1}function w(t){for(var e,i=t._Gx,n=t._Mx.canvas.getContext("2d"),o=0;o<i.plugins.length;){i.plugins[o].impl.refresh&&((e=i.plugins[o].canvas).width!==t._Mx.canvas.width&&(e.width=t._Mx.canvas.width),e.height!==t._Mx.canvas.height&&(e.height=t._Mx.canvas.height),0!==e.height&&0!==e.width&&(e.width!==t._Mx.canvas.width&&(e.width=t._Mx.canvas.width),e.height!==t._Mx.canvas.height&&(e.height=t._Mx.canvas.height),e.getContext("2d").clearRect(0,0,e.width,e.height),i.plugins[o].impl.refresh(e),n.drawImage(e,0,0))),o+=1}}function M(t){var e=t._Gx;if(0===e.HCB.length)e.note="";else if(void 0===e.HCB[0].plotnote){for(var i=[],n=0;n<e.HCB.length;n++)e.HCB[n].file_name&&i.push(e.HCB[n].file_name);e.note=i.join("|").toUpperCase()}}function k(t){var e=t._Mx,i=t._Gx;if(void 0!==i.zmin&&void 0!==i.zmax){var n=e.r-e.l;i.x_box_x=Math.floor(e.l-2)+.5,i.x_box_y=Math.floor(e.b+25)+.5,i.x_box_w=Math.floor(n+4),i.x_box_h=Math.floor(5*e.text_h+20),s.draw_box(e,e.fg,i.x_box_x,i.x_box_y,i.x_box_w,i.x_box_h,1,e.bg);var o=e.active_canvas.getContext("2d");o.beginPath(),o.lineWidth=1,o.strokeStyle=e.fg;for(var r=null,a=null,l=0;l<t._Gx.x_cut_data.length;l++){var h=t._Gx.x_cut_data[l];h=Math.min(Math.max(h,i.zmin),i.zmax);var c=t._Gx.x_box_h/(i.zmax-i.zmin),d=Math.round((h-i.zmin)*c),u=t._Gx.x_box_w/t._Gx.x_cut_data.length,f=Math.round(l*u),x=t._Gx.x_box_x+f,m=t._Gx.x_box_y+t._Gx.x_box_h-d;0===l?o.moveTo(x,m):x===r&&m===a||(o.lineTo(x,m),r=x,a=m)}o.stroke()}}function S(t){var e=t._Mx,i=t._Gx;if(void 0!==i.zmin&&void 0!==i.zmax){var n=e.b-e.t;i.y_box_x=Math.floor(e.r+25)+.5,i.y_box_y=Math.floor(e.t-2)+.5,i.y_box_w=Math.floor(5*e.text_w+20),i.y_box_h=Math.floor(n+2),i.lg_colorbar&&(i.y_box_x+=100),s.draw_box(e,e.fg,i.y_box_x,i.y_box_y,i.y_box_w,i.y_box_h,1,e.bg);var o=e.active_canvas.getContext("2d");o.beginPath(),o.lineWidth=1,o.strokeStyle=e.fg;for(var r=null,a=null,l=0;l<t._Gx.y_cut_data.length;l++){var h=t._Gx.y_cut_data[l];h=Math.min(Math.max(h,i.zmin),i.zmax);var c=t._Gx.y_box_w/(i.zmax-i.zmin),d=Math.round((h-i.zmin)*c),u=t._Gx.y_box_h/t._Gx.y_cut_data.length,f=Math.round(l*u),x=t._Gx.y_box_x+d,m=t._Gx.y_box_y+f;0===l?o.moveTo(x,m):x===r&&m===a||(o.lineTo(x,m),r=x,a=m)}o.stroke()}}function E(t,e){var i=t._Mx,n=t._Gx;if(e.display&&0===n.hold){e.draw();var o=document.createEvent("Event");o.initEvent("lyrdraw",!0,!0),o.index=e.index,o.name=e.name,o.layer=e,s.dispatchEvent(i,o)}}function A(t,e){var i=t._Gx,n=t._Mx,o=document.createEvent("Event");if(o.initEvent("lyrdel",!0,!0),o.index=e,o.name=i.lyr[e].name,o.layer=i.lyr[e],s.dispatchEvent(n,o)){if(i.lyr[e].ybufn=0,i.lyr[e].ybuf=null,e<i.lyr.length-1){i.lyr[e];for(var r=e;r<i.lyr.length-1;r++)i.lyr[r]=i.lyr[r+1]}i.lyr.length-=1,i.HCB.length>0&&(i.panxmin=1,i.panxmax=-1,i.panymin=1,i.panymax=-1)}}function C(t){var e=t._Gx,i=t._Mx;if(2===e.lyr[0].hcb.class){var n=i.b-i.t,o=i.r-i.l,r=e.lyr[0].yframe,a=e.lyr[0].xframe;if(e.p_cuts)if(e.lyr[0].hcb.pipe){if(i.xpos>=i.l&&i.xpos<=i.r){s=0;for(r=e.lyr[0].lps,e.y_cut_data=[],s=Math.floor(a*(i.xpos-i.l)/o);s<a*r;s+=a)e.y_cut_data.push(e.lyr[0].zbuf[s]);S(t)}if(i.ypos>=i.t&&i.ypos<=i.b){l=0,h=0;e.x_cut_data=[],h=(l=Math.floor(r*(i.ypos-i.t)/n)*a)+a,e.x_cut_data=e.lyr[0].zbuf.slice(l,h),k(t)}}else{if(i.xpos>=i.l&&i.xpos<=i.r&&e.p_cuts_xpos!==i.xpos){var s=0;for(e.y_cut_data=[],s=Math.floor(a*(i.xpos-i.l)/o);s<a*r;s+=a)e.y_cut_data.push(e.lyr[0].zbuf[s]);S(t),e.p_cuts_xpos=i.xpos}if(i.ypos>=i.t&&i.ypos<=i.b&&e.p_cuts_ypos!==i.ypos){var l=0,h=0,s=0;h=(l=Math.floor(r*(i.ypos-i.t)/n)*a)+a,e.x_cut_data=e.lyr[0].zbuf.slice(l,h),k(t),e.p_cuts_ypos=i.ypos}}}}function L(t){var e=t._Gx,i=t._Mx;e.cross&&("vertical"!==e.cross&&!0!==e.cross||i.xpos>=i.l&&i.xpos<=i.r&&e.cross_xpos!==i.xpos&&(void 0!==e.cross_xpos&&s.rubberline(i,e.cross_xpos,i.t,e.cross_xpos,i.b),s.rubberline(i,i.xpos,i.t,i.xpos,i.b),e.cross_xpos=i.xpos),"horizontal"!==e.cross&&!0!==e.cross||i.ypos>=i.t&&i.ypos<=i.b&&e.cross_ypos!==i.ypos&&(void 0!==e.cross_ypos&&s.rubberline(i,i.l,e.cross_ypos,i.r,e.cross_ypos),s.rubberline(i,i.l,i.ypos,i.r,i.ypos),e.cross_ypos=i.ypos))}function z(t){var e=t._Gx,i=t._Mx;if(null!==e.xmrk&&null!==e.ymrk){var n=s.real_to_pixel(i,e.xmrk,e.ymrk);if(e.lyr.length>0&&1===e.lyr[0].hcb.class){if(n.clipped)return}else if(e.lyr.length>0&&2===e.lyr[0].hcb.class&&(n.clipped_x||!n.clipped_y))return;var o=i.active_canvas.getContext("2d");o.beginPath(),o.strokeStyle=i.xwfg,o.fillStyle=i.xwfg,o.arc(n.x,n.y,2,0,360),o.stroke(),o.textBaseline="alphabetic",o.textAlign="left",o.fillStyle=i.fg,o.font=i.font.font;var r="x:"+s.format_g(e.xmrk,6,3,!0);o.fillText(r,n.x+5,n.y-5),r="y:"+s.format_g(e.ymrk,6,3,!0),o.fillText(r,n.x+5,n.y-5+i.text_h)}}function G(t,e){var i=t._Mx,n=t._Gx;n.xdata=!1;for(var o=0;o<n.lyr.length;o++)n.lyr[o].xdata=5===e,n.lyr[o].xdata&&(n.xdata=!0);if(e!==n.cmode)if(5===e&&n.index)alert("Imag/Real mode not permitted in INDEX mode");else if(n.lyr.length<=0)n.cmode=e,I(t);else if(e>0){var r=n.cmode;n.cmode=e;var a=n.autox,s=n.autoy;if(n.autox=3,n.autoy=3,5===e||5===r)n.panxmin=1,n.panxmax=-1,n.panymin=1,n.panymax=-1,i.level=0,e===n.basemode?(i.stk[0].xmin=n.xmin,i.stk[0].xmax=n.xmax,i.stk[0].ymin=n.ymin,i.stk[0].ymax=n.ymax):5===e||5===n.basemode?O(t,{get_data:!0}):(i.stk[0].xmin=n.xmin,i.stk[0].xmax=n.xmax,O(t,{get_data:!0},n.xmin,n.xmax));else{e===n.basemode?(n.panymin=1,n.panymax=-1,i.stk[0].ymin=n.ymin,i.stk[0].ymax=n.ymax):O(t,{},i.stk[i.level].xmin,i.stk[i.level].xmax);for(o=1;o<=i.level;o++)i.stk[o].ymin=i.stk[0].ymin,i.stk[o].ymax=i.stk[0].ymax}n.autox=a,n.autoy=s,t.refresh()}}function T(t){var e,i=t._Mx,n=t._Gx;if(n.pan&&!i.widget){e=i.level;var o={ps:i.stk[e].ymin,pe:i.stk[e].ymax},r=o.ps!==n.panymin||o.pe!==n.panymax;if(r=r&&i.level>0,!n.autohide_panbars||r&&t.mouseOnCanvas||n.panning){s.scrollbar(i,0,n.pyl,n.pyl+n.pthk,i.t,i.b,o,n.panymin,n.panymax,void 0,i.scrollbar_y);i.stk[e].ymin=o.ps,i.stk[e].ymax=o.pe}else{(l=i.canvas.getContext("2d")).fillStyle=i.bg,l.fillRect(n.pyl,i.t,n.pyl+n.pthk,i.b-i.t)}if(n.pl<i.width){var a=(o={ps:i.stk[e].xmin,pe:i.stk[e].xmax}).ps!==n.panxmin||o.pe!==n.panxmax;if(a=a&&(!n.all||i.level>0),!n.autohide_panbars||a&&t.mouseOnCanvas||n.panning){s.scrollbar(i,0,n.pl,n.pr,n.pt,n.pt+n.pthk,o,n.panxmin,n.panxmax,void 0,i.scrollbar_x);i.stk[e].xmin=o.ps,i.stk[e].xmax=o.pe}else{var l;(l=i.canvas.getContext("2d")).fillStyle=i.bg,l.fillRect(n.pl,n.pt-1,n.pr-n.pl,n.pthk+4)}}}}function P(t,e,i,n){var o,r,a,l,h,c,d,u,f=t._Mx,x=t._Gx,m=new s.SCROLLBAR,p=new s.SCROLLBAR,y=!1;if(o=f.level,x.panmode>0?(m.flag=11,p.flag=11):(m.flag=-12,p.flag=-12),0===i&&(m.action=0,p.action=0),!0,"Y"===e.substring(0,1)){if(h=f.stk[o].ymin,d=(c=f.stk[o].ymax)-h,"YPAN"===e){u=f.scrollbar_y;var v={ps:h,pe:c};s.scrollbar(f,p,x.pyl,x.pyl+x.pthk,f.t,f.b,v,x.panymin,x.panymax,n,u),h=v.ps,c=v.pe,0!==p.action&&s.scroll(f,p,s.XW_UPDATE,void 0,u),!1}else"YCENTER"===e&&(c=(h-=d*(f.ypos-(f.t+f.b)/2)/(f.b-f.t))+d,!1);if(h!==f.stk[o].ymin||c!==f.stk[o].ymax)f.stk[o].ymin=h,f.stk[o].ymax=c,x.cmode===x.basemode&&1===f.level&&(x.ymin=Math.min(x.ymin,h),x.ymax=Math.max(x.ymax,c)),this.inPan=!0,(_=document.createEvent("Event")).initEvent("ypan",!0,!0),_.level=f.level,_.xmin=f.stk[f.level].xmin,_.ymin=f.stk[f.level].ymin,_.xmax=f.stk[f.level].xmax,_.ymax=f.stk[f.level].ymax,s.dispatchEvent(f,_),this.inPan=!1,t.refresh(),y=!0}else{if(r=f.stk[o].xmin,l=(a=f.stk[o].xmax)-r,"XPAN"===e){u=f.scrollbar_x;v={ps:r,pe:a};s.scrollbar(f,m,x.pl,x.pr,x.pt,x.pt+x.pthk,v,x.panxmin,x.panxmax,n,u),r=v.ps,a=v.pe,0!==m.action&&s.scroll(f,m,s.XW_UPDATE,void 0,u),!1}else"XCENTER"===e&&((r+=l*(f.xpos-(f.l+f.r)/2)/(f.r-f.l))!==f.stk[o].xmin&&(a=r+l),!1);var _;if(f.stk[o].xmin!==r||f.stk[o].xmax!==a)f.stk[o].xmin=r,f.stk[o].xmax=a,x.xdata||1!==f.level||(x.xmin=f.stk[1].xmin,x.xmax=f.stk[1].xmax),this.inPan=!0,(_=document.createEvent("Event")).initEvent("xpan",!0,!0),_.level=f.level,_.xmin=f.stk[f.level].xmin,_.ymin=f.stk[f.level].ymin,_.xmax=f.stk[f.level].xmax,_.ymax=f.stk[f.level].ymax,s.dispatchEvent(f,_),this.inPan=!1,t.refresh(),y=!0}return y}function R(t,e,i,n,o,r,a,l){var h=t._Mx;if(h.prompt)throw"Prompt already exists! Can only have one prompt at a time!";s.disableListeners(h),t.disable_listeners();try{s.prompt(h,e,i,function(t,e){return function(i){e(i),s.enableListeners(h),t.enable_listeners(),t.refresh(),void 0!==l&&l()}}(t,n),function(){t.refresh()},o,r,a,5e3)}catch(t){console.log("ERROR: Failed to set up prompt due to: "+t)}}function I(t){var e=t._Mx,i=t._Gx,n=e.canvas.getContext("2d");if(0!==i.sections||(i.isec=0),e.warpbox){var o=N(t,e.warpbox.xo,e.warpbox.yo),r=N(t,e.warpbox.xl,e.warpbox.yl);i.aretx=o.x,i.arety=o.y,i.dretx=r.x-o.x,i.drety=r.y-o.y}else i.aretx=i.retx,i.arety=i.rety,i.dretx=i.retx-i.xmrk,i.drety=i.rety-i.ymrk;if(5===i.cmode&&1===i.iabsc&&(i.iabsc=2),1===i.iabsc?(i.aretx=Math.round((i.aretx-i.xstart)/i.xdelta),i.index||(i.aretx+=1),i.dretx=Math.round(i.dretx/i.xdelta)):2===i.iabsc&&(0!==i.aretx&&(i.aretx=1/i.aretx),0!==i.arety&&(i.arety=1/i.arety),0!==i.dretx&&(i.dretx=1/i.dretx),0!==i.drety&&(i.drety=1/i.drety)),i.show_readout&&!e.widget){n.fillStyle=e.bg;var l=Math.floor(e.height-2.5*e.text_h);n.fillRect(e.text_w,l-1,49*e.text_w,l+1.5*e.text_h),l=Math.floor(e.height-.5*e.text_h);var h=Math.max(i.pr+e.text_w,e.width-2*e.text_w);if(n.fillStyle=e.bg,n.fillRect(h,l-e.text_h,e.text_w,e.text_h),!i.autohide_readout||t.mouseOnCanvas||i.panning){var c,d,u,m;0===i.iabsc&&4===i.ylab?(d=(a.sec2tspec(i.arety)+"                ").substring(0,16),m=(a.sec2tspec(i.drety,"delta")+"                ").substring(0,16)):(d=s.format_g(i.arety,16,9,!0),m=s.format_g(i.drety,16,9)),0===i.iabsc&&4===i.xlab?(c=(a.sec2tspec(i.aretx)+"                ").substring(0,16),u=(a.sec2tspec(i.dretx,"delta")+"                ").substring(0,16)):(c=s.format_g(i.aretx,16,9,!0),u=s.format_g(i.dretx,16,9));var p="y: "+d+" dy: "+m+" L="+e.level+" "+f[i.cmode-1],y="x: "+c+" dx: "+u+" "+x[i.iabsc];3===i.iabsc&&(p=0===i.dretx?p.substr(0,20)+"sl: Inf             "+p.substr(40,p.length):p.substr(0,20)+"sl: "+s.format_g(i.drety/i.dretx,16,9)+p.substr(40,p.length)),l=Math.floor(e.height-1.5*e.text_h),s.text(e,e.text_w,l,p),l=Math.floor(e.height-.5*e.text_h),s.text(e,e.text_w,l,y),s.LEGACY_RENDER&&h<e.width&&(i.cntrls>0?s.text(e,h,l,"C"):s.text(e,h,l," "));var v=0,_=0,b=0,g=0;if(i.lg_colorbar&&2===i.lyr[0].hcb.class){var w=e.b-e.t;v=e.r+35,_=e.t+1/8*w,b=5*e.text_w,g=.75*w,(n=e.active_canvas.getContext("2d")).strokeStyle="rgba(124, 123, 121, 0.8)",n.fillStyle=" rgba(124, 123, 121, 0.8)";var M=g,E=b-2,A=E/2,C=v+(b-E)/2,L=_-10;n.beginPath(),n.moveTo(C,L),n.lineTo(C+E,L),n.lineTo(C+.5*E,L-A),n.lineTo(C,L),n.stroke(),n.fill();var z=L+M+20;n.beginPath(),n.moveTo(C,z),n.lineTo(C+E,z),n.lineTo(C+.5*E,z+A),n.lineTo(C,z),n.stroke(),n.fill(),i.cbb_top_x1=C,i.cbb_top_y1=L,i.cbb_bot_x1=C,i.cbb_bot_y1=z,i.cbb_width=E,i.cbb_height=A}else v=49*e.text_w-3,_=e.height-2.5*e.text_h,b=e.text_w,g=2*e.text_h;s.colorbar(e,v,_,b,g),i.p_cuts&&1===i.lyr.length&&2===i.lyr[0].hcb.class&&(S(t),k(t))}}}function O(t,e,i,n,o,r){var a=t._Mx,s=t._Gx,l=!0===e.get_data;s.panxmin=1,s.panxmax=-1,s.panymin=1,s.panymax=-1;var h=i,c=n,d=void 0===h,u=void 0===c;if(0===s.lyr.length)s.panxmin=-1,s.panxmax=1,s.panymin=-1,s.panymax=1;else{void 0===o&&(s.xlab=s.lyr[0].xlab),void 0===r&&(s.ylab=s.lyr[0].ylab);for(var f=0;f<s.lyr.length;f++)if(!1!==s.lyr[f].display)if(d&&(h=s.lyr[f].xmin),u&&(c=s.lyr[f].xmax),s.xlab!==s.lyr[f].xlab&&(s.xlab=0),s.ylab!==s.lyr[f].ylab&&(s.ylab=0),l&&s.lyr[f].get_data(h,c),s.autox>0||s.autoy>0)for(;h<c;){s.lyr[f].get_data(h,c);var x=s.lyr[f].prep(h,c);s.all&&s.expand?0===s.lyr[f].size?h=c:s.index?h+=x:s.lyr[f].xdelta>=0?h+=s.lyr[f].size*s.lyr[f].xdelta:c+=s.lyr[f].size*s.lyr[f].xdelta:h=c}else s.lyr[f].prep(1,-1)}var m=s.panxmax-s.panxmin;if(m<0&&(s.panxmax=s.panxmin,s.panxmin=s.panxmax+m,m=-m),m<=1e-20&&(s.panxmin=s.panxmin-1,s.panxmax=s.panxmax+1),0!=(1&s.autox)&&d&&(a.stk[0].xmin=s.panxmin),0!=(2&s.autox)&&u&&(a.stk[0].xmax=s.panxmax,!s.all&&!s.xdata))for(f=0;f<s.lyr.length;f++){c=Math.min(s.lyr[f].xmax,a.stk[0].xmax);var p=Math.abs((c-s.lyr[f].xmin)/s.lyr[f].xdelta)-s.bufmax+1;p>0&&(a.stk[0].xmax=c-p*Math.abs(s.lyr[f].xdelta))}0!=(1&s.autoy)&&(a.stk[0].ymin=s.panymin),0!=(2&s.autoy)&&(a.stk[0].ymax=s.panymax)}function N(t,e,i){var n=t._Gx,o=t._Mx,r=s.pixel_to_real(o,e,i);return n.index&&(r.x=r.x*n.xdelta),r}function D(t,e,i,n,o,r,a,s){var l=[a-i,s-n],h=[o-i,r-n],c=[t-i,e-n],d=l[0]*l[0]+l[1]*l[1],u=l[0]*h[0]+l[1]*h[1],f=l[0]*c[0]+l[1]*c[1],x=h[0]*h[0]+h[1]*h[1],m=h[0]*c[0]+h[1]*c[1],p=1/(d*x-u*u),y=(x*f-u*m)*p,v=(d*m-u*f)*p;return y>=0&&v>=0&&y+v<1}function B(t,e){var i=!1,n=t._Gx,o=t._Mx,r=0,s=0;if(void 0===e){if(r=o.xpos,s=o.ypos,!t.mouseOnCanvas)return!1}else r=e.x,s=e.y;var l=" ";if(!n.pan)return!1;var h=r>o.r,c=s<=n.pt+n.pthk+2,d=s>n.pt-2,u=s>=o.t&&s<=o.b,f=r>=n.pl&&r<=n.pr,x=n.show_readout||"bottom"===n.x_scrollbar_location;h&&u?(l="YPAN",n.lg_colorbar&&2===n.lyr[0].hcb.class?i=!!(r>o.r+100):(o.xpos=n.pyl+a.trunc(n.pthk/2),i=!0)):x&&f&&d?(l="XPAN",o.ypos=n.pt+a.trunc(n.pthk/2),i=!0):!x&&f&&c&&(l="XPAN",o.ypos=n.pt+a.trunc(n.pthk/2),i=!0);return{inPanRegion:i,command:l}}function U(t,e){var i,n,o;1&e.origin?(o=t.x-e.x,2&e.origin&&(o=e.w-o)):(o=t.y-e.y,e.origin<=2&&(o=e.h-o));var r=s.scroll_real2pix(e);return i=r.s1,n=r.sw,o>=i&&o<=i+n}function H(t,e,i){var n,o=t._Mx;"XPAN"===i?n=o.scrollbar_x:"YPAN"===i&&(n=o.scrollbar_y),n.action=e,n.step=.1*n.srange,n.page=9*n.step,n.scale=2,s.scroll(o,n,s.XW_COMMAND,void 0,n),F(t,n.smin,n.smin+n.srange,i.slice(0,1)),this.inPan=!0;var r=document.createEvent("Event");"XPAN"===i?r.initEvent("xpan",!0,!0):"YPAN"===i&&r.initEvent("ypan",!0,!0),r.level=o.level,r.xmin=o.stk[o.level].xmin,r.ymin=o.stk[o.level].ymin,r.xmax=o.stk[o.level].xmax,r.ymax=o.stk[o.level].ymax,s.dispatchEvent(o,r),this.inPan=!1}function F(t,e,i,n){var o=t._Mx,r=t._Gx,a=o.level;if("X"===n){var s=e,l=i;o.stk[a].xmin===s&&o.stk[a].xmax===l||(o.stk[a].xmin=s,o.stk[a].xmax=l,r.xdata||1!==o.level||(r.xmin=o.stk[1].xmin,r.xmax=o.stk[1].xmax),t.refresh())}else if("Y"===n){var h=e,c=i;h===o.stk[a].ymin&&c===o.stk[a].ymax||(o.stk[a].ymin=h,o.stk[a].ymax=c,r.cmode===r.basemode&&1===o.level&&(r.ymin=Math.min(r.ymin,h),r.ymax=Math.max(r.ymax,c)),t.refresh())}}t.exports=c}()},function(t,e,i){
/**
 * @license
 * File: m.js
 * Copyright (c) 2012-2017, LGS Innovations Inc., All rights reserved.
 *
 * This file is part of SigPlot.
 *
 * Licensed to the LGS Innovations (LGS) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  LGS licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */
!function(){"use strict";var e=i(7),n=i(15);function o(){}o.log=n;!!navigator.userAgent.match(/(iPad|iPhone|iPod)/i)||"undefined"==typeof Float64Array||Float64Array.emulated||!Float64Array.BYTES_PER_ELEMENT?o.PointArray=Float32Array:o.PointArray=Float64Array;var r={0:["None","U",!0,!0],1:["Time","sec",!0,!0],2:["Delay","sec",!0,!1],3:["Frequency","Hz",!0,!0],4:["Time code format","",!0,!1],5:["Distance","m",!0,!0],6:["Speed","m/s",!0,!0],7:["Acceleration","m/sec^2",!0,!0],8:["Jerk","m/sec^3",!0,!0],9:["Doppler","Hz",!0,!1],10:["Doppler rate","Hz/sec",!0,!0],11:["Energy","J",!0,!0],12:["Power","W",!0,!0],13:["Mass","g",!0,!0],14:["Volume","l",!0,!0],15:["Angular power density","W/ster",!0,!0],16:["Integrated power density","W/rad",!0,!0],17:["Spatial power density","W/m^2",!0,!0],18:["Integrated power density","W/m",!1,!0],19:["Spectral power density","W/MHz",!0,!0],20:["Amplitude","U",!0,!1],21:["Real","U",!0,!1],22:["Imaginary","U",!0,!1],23:["Phase","rad",!0,!0],24:["Phase","deg",!1,!0],25:["Phase","cycles",!1,!0],26:["10*Log","U",!0,!1],27:["20*Log","U",!0,!1],28:["Magnitude","U",!0,!1],29:["Unknown","U",!0,!1],30:["Unknown","U",!1,!1],31:["General dimensionless","",!0,!0],32:["Counts","",!0,!1],33:["Angle","rad",!0,!1],34:["Angle","deg",!1,!1],35:["Relative power","dB",!0,!0],36:["Relative power","dBm",!1,!0],37:["Relative power","dBW",!1,!0],38:["Solid angle","ster",!0,!0],40:["Distance","ft",!1,!0],41:["Distance","nmi",!1,!0],42:["Speed","ft/sec",!1,!0],43:["Speed","nmi/sec",!1,!0],44:["Speed","knots=nmi/hr",!1,!0],45:["Acceleration","ft/sec^2",!1,!0],46:["Acceleration","nmi/sec^2",!1,!0],47:["Acceleration","knots/sec",!1,!0],48:["Acceleration","G",!1,!0],49:["Jerk","G/sec",!1,!0],50:["Rotation","rps",!0,!1],51:["Rotation","rpm",!1,!1],52:["Angular velocity","rad/sec",!0,!0],53:["Angular velocity","deg/sec",!1,!0],54:["Angular acceleration","rad/sec^2",!0,!0],55:["Angular acceleration","deg/sec^2",!1,!0],60:["Latitude","deg",!0,!1],61:["Longitude","deg",!0,!1],62:["Altitude","ft",!0,!1],63:["Altitude","m",!1,!1]};o.UNITS=r,o.Mc={colormap:[{name:"Greyscale",colors:[{pos:0,red:0,green:0,blue:0},{pos:60,red:50,green:50,blue:50},{pos:100,red:100,green:100,blue:100},{pos:100,red:0,green:0,blue:0},{pos:100,red:0,green:0,blue:0},{pos:100,red:0,green:0,blue:0},{pos:100,red:0,green:0,blue:0}]},{name:"Ramp Colormap",colors:[{pos:0,red:0,green:0,blue:15},{pos:10,red:0,green:0,blue:50},{pos:31,red:0,green:65,blue:75},{pos:50,red:0,green:85,blue:0},{pos:70,red:75,green:80,blue:0},{pos:83,red:100,green:60,blue:0},{pos:100,red:100,green:0,blue:0}]},{name:"Color Wheel",colors:[{pos:0,red:100,green:100,blue:0},{pos:20,red:0,green:80,blue:40},{pos:30,red:0,green:100,blue:100},{pos:50,red:10,green:10,blue:0},{pos:65,red:100,green:0,blue:0},{pos:88,red:100,green:40,blue:0},{pos:100,red:100,green:100,blue:0}]},{name:"Spectrum",colors:[{pos:0,red:0,green:75,blue:0},{pos:22,red:0,green:90,blue:90},{pos:37,red:0,green:0,blue:85},{pos:49,red:90,green:0,blue:85},{pos:68,red:90,green:0,blue:0},{pos:80,red:90,green:90,blue:0},{pos:100,red:95,green:95,blue:95}]},{name:"calewhite",colors:[{pos:0,red:100,green:100,blue:100},{pos:16.666,red:0,green:0,blue:100},{pos:33.333,red:0,green:100,blue:100},{pos:50,red:0,green:100,blue:0},{pos:66.666,red:100,green:100,blue:0},{pos:83.333,red:100,green:0,blue:0},{pos:100,red:100,green:0,blue:100}]},{name:"HotDesat",colors:[{pos:0,red:27.84,green:27.84,blue:85.88},{pos:14.2857,red:0,green:0,blue:35.69},{pos:28.571,red:0,green:100,blue:100},{pos:42.857,red:0,green:49.8,blue:0},{pos:57.14286,red:100,green:100,blue:0},{pos:71.42857,red:100,green:37.65,blue:0},{pos:85.7143,red:41.96,green:0,blue:0},{pos:100,red:87.84,green:29.8,blue:29.8}]},{name:"Sunset",colors:[{pos:0,red:10,green:0,blue:23},{pos:18,red:34,green:0,blue:60},{pos:36,red:58,green:20,blue:47},{pos:55,red:74,green:20,blue:28},{pos:72,red:90,green:43,blue:0},{pos:87,red:100,green:72,blue:0},{pos:100,red:100,green:100,blue:76}]},{name:"Hot",colors:["#000000","#7f0000","#b30000","#d7301f","#ef6548","#fc8d59","#fdbb84","#fdd49e","#fee8c8","#fff7ec","#ffffff"]},{name:"Cold",colors:["#000000","#023858","#045a8d","#0570b0","#3690c0","#74a9cf","#a6bddb","#d0d1e6","#ece7f2","#fff7fb","#ffffff"]},{name:"Purple",colors:["#230022","#4d004b","#810f7c","#88419d","#8c6bb1","#8c96c6","#9ebcda","#bfd3e6","#e0ecf4","#f7fcfd"]},{name:"BuGn",colors:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"]},{name:"YlOrBr",colors:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"]},{name:"YlGnBu",colors:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"]},{name:"YlOrRd",colors:["#000000","#662506","#993404","#cc4c02","#ec7014","#fe9929","#fec44f","#fee391","#fff7bc","#ffffe5","#ffffff"]},{name:"GreyNRed",colors:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"].reverse()}]},o.PIPESIZE=1048576,o.unit_lookup=function(t){for(var e=0;e<64;e++){var i,n=(i=void 0===r[e]?r[0]:r[e])[0],o=i[1],a=i[0]+" "+i[1],s=i[0]+"_"+i[1];if(t===n){if(i[2])return e}else if(t===o){if(i[3])return e}else if(t===a||t===s)return e}return t},o.initialize=function(t,i){var n=new e.BlueHeader(null);for(var r in n.version="BLUE",n.size=0,n.type=1e3,n.format="SF",n.timecode=0,n.xstart=0,n.xdelta=1,n.xunits=0,n.subsize=1,n.ystart=0,n.ydelta=1,n.yunits=0,n.enabled_streaming_pcut=!1,i||(i={}),i)n[r]=i[r];if(n.xunits=o.unit_lookup(n.xunits),n.yunits=o.unit_lookup(n.yunits),n.subsize>1?n.type=2e3:Array.isArray(t)&&Array.isArray(t[0])&&(n.type=2e3,n.subsize=t[0].length),n.class=n.type/1e3,2===n.class&&void 0===n.subsize)throw"subsize must be provided with type 2000 files";if(i.pipe){n.pipe=!0,n.in_byte=0,n.out_byte=0;var a=i.pipesize||o.PIPESIZE;n.buf=new ArrayBuffer(a),n.setData(n.buf),n.data_free=n.dview.length}else n.setData(t);return n},o.force1000=function(t){2===t.class&&(t.size&&!t.pipe?t.size=t.subsize*t.size:t.size=0,t.bpe=t.bpe/t.subsize,t.ape=1)},o.grab=function(t,e,i,n){if(!t.dview)return 0;"C"===t.format[0]&&(i*=2),n=t.ape*n;var o=Math.min(e.length,t.dview.length-i);if(void 0===e.set)for(var r=0;r<o;r++)e[r]=t.dview[i+r];else e.set(t.dview.subarray(i,i+o));return"C"===t.format[0]&&(o/=2),o},o.filad=function(t,e,i){if(t.data_free<e.length)throw"Pipe full";var n=t.in_byte/t.dview.BYTES_PER_ELEMENT,o=n+e.length;if(o>t.dview.length){var r=t.dview.length-n,a=e.length-r;e.subarray?(t.dview.set(e.subarray(0,r),n),t.dview.set(e.subarray(r,e.length),0)):(t.dview.set(e.slice(0,r),n),t.dview.set(e.slice(r,e.length),0)),t.in_byte=a*t.dview.BYTES_PER_ELEMENT}else t.dview.set(e,n),t.in_byte=o*t.dview.BYTES_PER_ELEMENT%t.buf.byteLength;if(t.data_free-=e.length,t.onwritelisteners)for(var s=0;s<t.onwritelisteners.length;s++)i?t.onwritelisteners[s]():window.setTimeout(t.onwritelisteners[s],0)},o.pavail=function(t){return t.dview.length-t.data_free},o.grabx=function(t,e,i,n){var o=t.dview.length-t.data_free;if(void 0===n&&(n=0),i){if(i>e.length-n)throw"m.grabx : nget larger then available buffer space"}else i=Math.min(e.length-n,o);if(i<0)throw"m.grabx : nget cannot be negative";if(i>o)return 0;var r=t.out_byte/t.dview.BYTES_PER_ELEMENT,a=r+i;if(a>=t.dview.length){var s=t.dview.length-r;a-=t.dview.length,e.set(t.dview.subarray(r,t.dview.length),n),e.set(t.dview.subarray(0,a),n+s)}else e.set(t.dview.subarray(r,a),n);return t.out_byte=a*t.dview.BYTES_PER_ELEMENT%t.buf.byteLength,t.data_free+=i,i},o.addPipeWriteListener=function(t,e){t.onwritelisteners||(t.onwritelisteners=[]),-1===t.onwritelisteners.indexOf(e)&&t.onwritelisteners.push(e)},o.units_name=function(t){var e=r[t];return e[0]+" ("+e[1]+")"},o.trim_name=function(t){var e=t.indexOf("]");-1===e&&(e=t.indexOf("/")),-1===e&&(e=t.indexOf(":"));var i=t.substr(e+1,t.length).indexOf(".");return i<0&&(i=t.length-e),t.substr(e+1,e+i+1)},o.label=function(t,e){var i=["Unknown","U"];"string"==typeof t?i=[t,null]:Array.isArray(t)?i=t:void 0===(i=r[t])&&(i=["Unknown","U"]);var n=o.mult_prefix(e);return i[1]?i[0]+" ("+n+i[1]+")":i[0]},o.bound=function(t,e,i){return t<e?e:t>i?i:t},o.touch_distance=function(t,e){var i=t.pageX-e.pageX,n=t.pageY-e.pageY;return Math.sqrt(i*i+n*n)},o.mult_prefix=function(t){var e="?";return 1==t?e="":10==t?e="da":.1==t?e="d":100==t?e="h":.01==t?e="c":1e3==t?e="K":.001==t?e="m":1e6==t?e="M":1e-6==t?e="u":1e9==t?e="G":1e-9==t?e="n":1e12==t?e="T":1e-12==t&&(e="p"),e};var a={MV:"F",MS:"F",nbpt:4,view:void 0};function s(t){return(t<10?"0":"")+t}o.vstype=function(t){a.MS=t,a.MV=t,"D"===a.MV?a.nbpt=8:"L"===a.MV||"F"===a.MV?a.nbpt=4:"I"===a.MV?a.nbpt=2:"B"===a.MV?a.nbpt=1:alert("Unsupported vector type")},o.log10=function(t,e){return void 0===e&&(e=1e-20),Math.log(Math.max(t,e))/Math.log(10)},o.vlog10=function(t,e,i){void 0===e&&(e=1e-20),void 0===i&&(i=t);for(var n=0;n<t.length&&!(i.length<=n);n++)i[n]=Math.log(Math.max(t[n],e))/Math.log(10)},o.vlogscale=function(t,e,i,n){void 0===e&&(e=1e-20),void 0===i&&(i=1),void 0===n&&(n=t);for(var o=0;o<t.length&&!(n.length<=o);o++)n[o]=Math.log(Math.abs(Math.max(t[o],e)))/Math.log(10),n[o]=n[o]*i},o.cvmag2logscale=function(t,e,i,n){void 0===e&&(e=1e-20),void 0===i&&(i=1),void 0===n&&(n=t);for(var o=0,r=0;r<n.length&&!((o=2*r+1)>=t.length);r++)n[r]=t[o-1]*t[o-1]+t[o]*t[o],n[r]=Math.log(Math.abs(Math.max(n[r],e)))/Math.log(10),n[r]=n[r]*i},o.vsmul=function(t,e,i,n){void 0===i&&(i=t),void 0===n&&(n=i.length),n=Math.min(i.length,n),n=Math.min(t.length,n);for(var o=0;o<n&&!(i.length<=o);o++)i[o]=t[o]*e},o.vmxmn=function(t,e){var i=t[0],n=t[0],o=0,r=0;e=Math.min(e,t.length);for(var a=0;a<e;a++)t[a]>i&&(i=t[a],o=a),t[a]<n&&(n=t[a],r=a);return{smax:i,smin:n,imax:o,imin:r}},o.vmov=function(t,e,i,n,o){void 0===o&&(o=t.length),o=Math.min(t.length,o);for(var r=0;r<o;r++){var a=r*e,s=r*n;if(a>=t.length)break;if(s>=i.length)break;i[s]=t[a]}},o.vfill=function(t,e,i){void 0===i&&(i=t.length),i=Math.min(t.length,i);for(var n=0;n<i;n++)t[n]=e},o.vabs=function(t,e,i){void 0===i&&(i=t.length),void 0===e&&(e=t);for(var n=0;n<i;n++)e[n]=Math.abs(t[n])},o.cvmag=function(t,e,i){void 0===i&&(i=e.length),i=Math.min(e.length,i);for(var n=0;n<i;n++){var o=2*n+1;if(o>=t.length)break;e[n]=Math.sqrt(t[o-1]*t[o-1]+t[o]*t[o])}},o.cvmag2=function(t,e,i){void 0===i&&(i=e.length),i=Math.min(e.length,i);for(var n=0,o=0;o<i&&!((n=2*o+1)>=t.length);o++)e[o]=t[n-1]*t[n-1]+t[n]*t[n]},o.cvpha=function(t,e,i){void 0===i&&(i=e.length),i=Math.min(e.length,i);for(var n=0,o=0,r=0,a=0;a<i&&!((n=2*a+1)>=t.length);a++)o=t[n-1],r=t[n],0===o&&0===r&&(o=1),e[a]=Math.atan2(r,o)},o.cvphad=function(t,e,i){void 0===i&&(i=e.length),i=Math.min(e.length,i);for(var n=0,o=0,r=0,a=0;a<i&&!((n=2*a+1)>=t.length);a++)o=t[n-1],r=t[n],0===o&&0===r&&(o=1),e[a]=Math.atan2(r,o)*(180/Math.PI)},o.trunc=function(t){return t-t%1},o.sign=function(t,e){return e>=0?Math.abs(t):-Math.abs(t)},o.sec2tod=function(t,e){var i="",n=Date.UTC(1950,0,1),o=(new Date(n),Date.UTC(1949,11,31)),r=(new Date(o),new Date),a=new Date(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0,0);if(t>=0)if(t<86400){var l=a.getTime()+1e3*t;i=s((r=new Date(l)).getHours())+":"+s(r.getMinutes())+":"+s(r.getSeconds())}else if(86400===t)i="24:00:00";else if(t<31536e3){c=[(c=t/86400)>0?Math.floor(c):Math.ceil(c)];r=new Date(1e3*t+a.getTime());i=c.toString()+"::"+s(r.getHours())+":"+s(r.getMinutes())+":"+s(r.getSeconds())}else{var h=Math.floor(1e3*t)+n;i=(r=new Date(h)).getUTCFullYear()+":"+s(r.getUTCMonth()+1)+":"+s(r.getUTCDate())+"::"+s(r.getUTCHours())+":"+s(r.getUTCMinutes())+":"+s(r.getUTCSeconds())}else if(t>-31536e3){var c;c=(c=t/86400)<=0?Math.ceil(c):Math.floor(c);r=new Date(Math.abs(1e3*t)+a.getTime());i=(c=0===c?"-0":c.toString())+"::"+s(r.getHours())+":"+s(r.getMinutes())+":"+s(r.getSeconds())}else{h=Math.floor(1e3*t)+n;i=(r=new Date(h)).getUTCFullYear()+":"+s(r.getUTCMonth()+1)+":"+s(r.getUTCDate())+"::"+s(r.getUTCHours())+":"+s(r.getUTCMinutes())+":"+s(r.getUTCSeconds())}if(i+=0===t%1?".000000":"."+Math.abs(t%1).toPrecision(6).slice(2,8),e){var d=i.indexOf("."),u=-1;-1!==d&&(u=i.substr(d,i.length).indexOf("0")),-1!==u&&(i=i.substr(0,d+u))}return i};o.sec2tspec=function(t,e,i){return e=e||"",t>=0&&t<=86400?o.sec2tod(t,i):(t%=86400,"delta"!==e&&t<=0?o.sec2tod(t+86400,i):"delta"===e&&t<=0?"-"+o.sec2tod(-1*t,i):o.sec2tod(t,i))},o.sec2tod_j1970=function(t){var e,i="";if(t>=0&&t<86400)i=s((e=new Date(1e3*t)).getHours())+":"+s(e.getMinutes())+":"+s(e.getSeconds());else if(t<0&&t>-31536e3){var n=t/86400*-1;e=new Date(1e3*t),i=n.toString()+"::"+s(e.getHours())+":"+s(e.getMinutes())+":"+s(e.getSeconds())}else i=(e=new Date(1e3*(t-631152e3))).getFullYear()+":"+s(e.getMonth())+":"+s(e.getDate())+"::"+s(e.getHours())+":"+s(e.getMinutes())+":"+s(e.getSeconds());return t%1!=0&&(i+="."+(t%1).toPrecision(6).slice(2,8)),i},o.j1970toj1950=function(t){return void 0!==t.getTime?t.getTime()/1e3+631152e3:t+631152e3},o.j1950toj1970=function(t){return t-631152e3},o.throttle=function(t,e){var i=(new Date).getTime();return function(){var n=(new Date).getTime();n-i>=t&&(i=n,e.apply(null,arguments))}},t.exports=o}()},function(t,e,i){"use strict";i.r(e);var n=i(1),o=i.n(n),r=i(0),a=i.n(r),s=i(2);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=function(t){function e(t){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=c(this,d(e).call(this,t))).state={},i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,n["Component"]),function(t,e,i){e&&h(t.prototype,e),i&&h(t,i)}(e,[{key:"getChildContext",value:function(){return{plot:this.plot}}},{key:"componentDidMount",value:function(){var t=this.props.options;this.plot=new s.Plot(this.element,t),this.setState({plot:this.plot})}},{key:"render",value:function(){var t=this,e=this.props,i=e.height,n=e.width,r=e.children,a=this.plot,s=a?o.a.Children.map(r,function(t){return t?o.a.cloneElement(t,{plot:a}):null}):null;return o.a.createElement("div",{style:{height:i,width:n,display:"inline-block"},ref:function(e){return t.element=e}},s)}}]),e}();function x(t){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function p(t,e){return!e||"object"!==x(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}f.childContextTypes={plot:a.a.instanceOf(s.Plot)},f.propTypes={children:a.a.node,height:a.a.number,width:a.a.number,options:a.a.object},f.defaultProps={height:300,width:300,options:{all:!0,expand:!0,autol:100,autohide_panbars:!0}};var _=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),p(this,y(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(e,n["Component"]),function(t,e,i){e&&m(t.prototype,e),i&&m(t,i)}(e,[{key:"componentWillUnmount",value:function(){this.plot.remove_layer(this.layer)}},{key:"render",value:function(){return!1}},{key:"plot",get:function(){return this.context.plot}}]),e}();function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function w(t,e){return!e||"object"!==b(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function M(t){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function k(t,e){return(k=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}_.contextTypes={plot:a.a.instanceOf(s.Plot)},_.propTypes={data:a.a.arrayOf(a.a.number),options:a.a.object};var S=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),w(this,M(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&k(t,e)}(e,_),function(t,e,i){e&&g(t.prototype,e),i&&g(t,i)}(e,[{key:"componentDidMount",value:function(){this.layer=this.plot.overlay_array(this.props.data,this.props.options)}},{key:"componentWillReceiveProps",value:function(t){t.data!==this.props.data&&this.plot.reload(this.layer,t.data)}}]),e}();function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function A(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function C(t,e){return!e||"object"!==E(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function L(t){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function z(t,e){return(z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var G=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),C(this,L(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&z(t,e)}(e,_),function(t,e,i){e&&A(t.prototype,e),i&&A(t,i)}(e,[{key:"componentDidMount",value:function(){this.layer=this.plot.overlay_pipe(this.props.options)}},{key:"componentWillReceiveProps",value:function(t){t.data&&t.data!==this.props.data&&this.plot.push(this.layer,t.data)}}]),e}();function T(t){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function P(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function R(t,e){return!e||"object"!==T(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function I(t){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function O(t,e){return(O=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var N=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),R(this,I(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&O(t,e)}(e,_),function(t,e,i){e&&P(t.prototype,e),i&&P(t,i)}(e,[{key:"componentDidMount",value:function(){var t=this.props,e=t.href,i=t.onload,n=t.options;this.layer=this.plot.overlay_href(e,i,n)}},{key:"componentWillReceiveProps",value:function(t){var e=this.props,i=e.href,n=e.options,o=t.href,r=t.onload,a=t.options;o!==i?this.plot.overlay_href(o,r,a):a!==n&&this.plot.change_settings(a)}}]),e}();function D(t){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function B(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function U(t,e){return!e||"object"!==D(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function H(t){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function F(t,e){return(F=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}N.propTypes={href:a.a.string,onload:a.a.func,options:a.a.object},N.defaultProps={href:"",onload:null};var W=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),U(this,H(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&F(t,e)}(e,_),function(t,e,i){e&&B(t.prototype,e),i&&B(t,i)}(e,[{key:"componentDidMount",value:function(){var t=this.props,e=t.wsurl,i=t.overrides,n=t.options;this.layer=this.plot.overlay_websocket(e,i,n)}},{key:"componentWillReceiveProps",value:function(t){var e=this.props,i=e.wsurl,n=e.options,o=t.wsurl,r=t.overrides,a=t.options;o!==i?this.plot.overlay_websocket(o,r,a):a!==n&&this.plot.change_settings(a)}}]),e}();W.propTypes={wsurl:a.a.string,overrides:a.a.func,options:a.a.object},W.defaultProps={wsurl:""},i.d(e,"SigPlot",function(){return f}),i.d(e,"ArrayLayer",function(){return S}),i.d(e,"PipeLayer",function(){return G}),i.d(e,"HrefLayer",function(){return N}),i.d(e,"WebsocketLayer",function(){return W})},function(t,e){
/**
 * @license
 * File: common.js
 * Copyright (c) 2012-2017, LGS Innovations Inc., All rights reserved.
 *
 * This file is part of SigPlot.
 *
 * Licensed to the LGS Innovations (LGS) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  LGS licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 *
 */
t.exports={},window.ArrayBuffer&&(ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(t,e){var i=new Uint8Array(this);void 0===e&&(e=i.length);for(var n=new ArrayBuffer(e-t),o=new Uint8Array(n),r=0;r<o.length;r++)o[r]=i[r+t];return n})),window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)},window.cancelAnimFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCanelAnimationFrame||function(t){window.clearTimeout(t)},t.exports.dashOn=function(t,e,i){return t.setLineDash?(t.setLineDash([e,i]),!0):void 0!==t.mozDash?(t.mozDash=[e,i],!0):!(!t.webkitLineDash||0!==t.webkitLineDash.length||(t.webkitLineDash=[e,i],0))},t.exports.dashOff=function(t){t.setLineDash?t.setLineDash([]):t.mozDash?t.mozDash=null:t.webkitLineDash&&(t.webkitLineDash=[])},t.exports.getKeyCode=function(t){return t=(t=window.event||t).charCode||t.keyCode},t.exports.setKeypressHandler=function(t){window.addEventListener?window.addEventListener("keypress",t,!1):window.attachEvent&&window.attachEvent("onkeypress",t)},Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),window.Float64Array||(window.Float64Array=window.Float64Array||function(t,e,i){if(!(t instanceof ArrayBuffer))throw"Invalid type";var n=new DataView(t),o=[],r=(t.byteLength-e)/8;o.length=void 0===i?r:Math.min(i,r);for(var a=0;a<o.length;a++)o[a]=n.getFloat64(8*a+e,!0);return o.subarray=function(t,e){return o.slice(t,e)},o}),function(){var t=function(){};if(window.console||(window.console={log:t,info:t,warn:t,debug:t,error:t}),new Int8Array([0,1,0]).subarray(1).subarray(1)[0]){var e=function(t,e){0===arguments.length?(t=0,e=this.length):(t<0&&(t+=this.length),t=Math.max(0,Math.min(this.length,t)),1===arguments.length?e=this.length:(e<0&&(e+=this.length),e=Math.max(t,Math.min(this.length,e))));var i=this.byteOffset+t*this.BYTES_PER_ELEMENT;return new this.constructor(this.buffer,i,e-t)};[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array].forEach(function(t){t.prototype.subarray=e})}}(),function(t,e){var i,n,o="";function r(e,r,a,s){e[i](o+r,"wheel"===n?a:function(e){!e&&(e=t.event);var i={originalEvent:e,target:e.target||e.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"===e.type?0:1,deltaX:0,delatZ:0,preventDefault:function(){e.preventDefault?e.preventDefault():e.returnValue=!1}};return"mousewheel"===n?(i.deltaY=-.025*e.wheelDelta,e.wheelDeltaX&&(i.deltaX=-.025*e.wheelDeltaX)):i.deltaY=e.detail,a(i)},s||!1)}t.addEventListener?i="addEventListener":(i="attachEvent",o="on"),n="onwheel"in e.createElement("div")?"wheel":void 0!==e.onmousewheel?"mousewheel":"DOMMouseScroll",t.addWheelListener=function(t,e,i){r(t,n,e,i),"DOMMouseScroll"===n&&r(t,"MozMousePixelScroll",e,i)}}(window,document),t.exports.update=function t(e,i){for(var n in i){var o=i[n];"object"==typeof o?t(e[n],o):e[n]=o}return e}},function(t,e,i){
/**
 * @license
 * File: mx.js
 * Copyright (c) 2012-2017, LGS Innovations Inc., All rights reserved.
 *
 * This file is part of SigPlot.
 *
 * Licensed to the LGS Innovations (LGS) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  LGS licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */
!function(){var e=i(8),n=i(16),o=i(5),r=i(17),a=i(3);function s(){}function l(t,e,i){var n=!1,o=!1;return t>=e&&(n=!0),t<=i&&(o=!0),!0===n&&!0===o}function h(t,e,i,n,o,r){return(i-t)*(r-e)-(o-t)*(n-e)}function c(t,e,i,n,o,r,a){return o<=i?a>i&&h(e,i,n,o,r,a)>0&&(t+=1):a<=i&&h(e,i,n,o,r,a)<0&&(t-=1),t}s.XW_INIT=-3,s.XW_DRAW=1,s.XW_EVENT=2,s.XW_UPDATE=3,s.XW_COMMAND=5,s.SB_EXPAND=1,s.SB_SHRINK=2,s.SB_FULL=3,s.SB_STEPINC=4,s.SB_STEPDEC=5,s.SB_PAGEINC=6,s.SB_PAGEDEC=7,s.SB_DRAG=8,s.SB_WHEELUP=9,s.SB_WHEELDOWN=10,s.L_ArrowLeft=1001,s.L_ArrowRight=1002,s.L_ArrowUp=1003,s.L_ArrowDown=1004,s.L_dashed=801,s.GBorder=3,s.L_RModeOff=900,s.L_RModeOn=901,s.L_PixelSymbol=1,s.L_CircleSymbol=2,s.L_SquareSymbol=3,s.L_PlusSymbol=4,s.L_XSymbol=5,s.L_TriangleSymbol=6,s.L_ITriangleSymbol=7,s.L_HLineSymbol=8,s.L_VLineSymbol=9,s.LEGACY_RENDER=!1,s.STKSTRUCT=function(){this.xmin=0,this.xmax=0,this.ymin=0,this.ymax=0,this.xscl=0,this.yscl=0,this.x1=0,this.y1=0,this.x2=0,this.y2=0},s.SCROLLBAR=function(){this.flag=null,this.action=null,this.smin=null,this.srange=null,this.tmin=null,this.trange=null,this.step=null,this.page=null,this.scale=null,this.dragoutline=null,this.initial_pause=null,this.repeat_pause=null,this.x=null,this.y=null,this.w=null,this.h=null,this.s1=null,this.sw=null,this.swmin=null,this.soff=null,this.a1=null,this.a2=null,this.arrow=null,this.mxevent=null,this.origin=null,this.repeat_count=null},s.open=function(t){var e=new function(t){this.root=t,this.parent=document.createElement("div"),this.parent.style.position="relative",this.parent.width=t.clientWidth,this.parent.height=t.clientHeight,t.appendChild(this.parent),this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.top="0px",this.canvas.style.left="0px",this.canvas.width=t.clientWidth,this.canvas.height=t.clientHeight,this.parent.appendChild(this.canvas),this.active_canvas=this.canvas,this.wid_canvas=document.createElement("canvas"),this.wid_canvas.style.position="absolute",this.wid_canvas.style.top="0px",this.wid_canvas.style.left="0px",this.wid_canvas.style.zIndex=1,this.wid_canvas.width=t.clientWidth,this.wid_canvas.height=t.clientHeight,this.parent.appendChild(this.wid_canvas),this.font=void 0,this.font_family="Courier New, monospace",this.font_width=8,this.font_scaled=!1,this.text_w=0,this.text_h=0,this.level=0,this.width=this.parent.width,this.height=this.parent.height,this.xpos=0,this.ypos=0,this.xmrk=0,this.ymrk=0,this.origin=1,this.stk=[new s.STKSTRUCT],s.setbgfg(this,"black","white"),this.event_cb=void 0,this.warpbox=void 0,this.rmode=!1,this.linewidth=1,this.style=void 0,this.xi=!1,this.button_release=0,this.button_press=0,this.state_mask=0,this.l=0,this.r=this.width,this.t=0,this.b=this.height,this.scrollbar_x=new s.SCROLLBAR,this.scrollbar_y=new s.SCROLLBAR,this.prompt=void 0,this.pixel=[],this._renderCanvas=document.createElement("canvas")}(t);return e.wid_canvas.oncontextmenu=function(t){return t.preventDefault(),!1},this._ctx=e.active_canvas.getContext("2d"),e.onmousemove=function(t){return function(e){var i=e.target.getBoundingClientRect();t.x=e.x||e.clientX,t.y=e.y||e.clientY,t.xpos=void 0===e.offsetX?e.pageX-i.left-window.scrollX:e.offsetX,t.ypos=void 0===e.offsetX?e.pageY-i.top-window.scrollY:e.offsetY,t.warpbox&&((e.ctrlKey||e.metaKey)&&void 0!==t.warpbox.alt_style?t.warpbox.style=t.warpbox.alt_style:t.warpbox.style=t.warpbox.def_style,s.redraw_warpbox(t)),s.widget_callback(t,e)}}(e),e.onmouseup=function(t){return function(e){if(t.warpbox){s.onWidgetLayer(t,function(){s.erase_window(t)});var i=t.warpbox;if(t.warpbox=void 0,(1===e.which||3===e.which)&&i.func){var n=i.xo,o=i.yo,r=i.xl,a=i.yl;"vertical"===i.mode?(n=t.l,r=t.r):"horizontal"===i.mode&&(o=t.t,a=t.b),i.func(e,n,o,r,a,i.style.return_value,i.mode)}}s.widget_callback(t,e)}}(e),e.onmousedown=function(t){return function(e){return e.preventDefault(),s.widget_callback(t,e),!1}}(e),e.onkeydown=function(t){return function(e){if(t.warpbox){var i=o.getKeyCode(e);17!==i&&224!==i&&91!==i&&93!==i||t.warpbox.style===t.warpbox.alt_style||(t.warpbox.style=t.warpbox.alt_style,s.redraw_warpbox(t))}s.widget_callback(t,e)}}(e),e.onkeyup=function(t){return function(e){if(t.warpbox){var i=o.getKeyCode(e);17!==i&&224!==i&&91!==i&&93!==i||t.warpbox.style===t.warpbox.def_style||(t.warpbox.style=t.warpbox.def_style,s.redraw_warpbox(t))}}}(e),e.ontouchend=function(t){return function(e){t.onmouseup({which:1})}}(e),e.ontouchmove=function(t){return function(e){var i=t.canvas,n=0,o=0;if(void 0!==i.offsetParent)do{n+=i.offsetLeft,o+=i.offsetTop}while(i=i.offsetParent);t.xpos=e.targetTouches[0].pageX-n,t.ypos=e.targetTouches[0].pageY-o,s.redraw_warpbox(t)}}(e),s.enableListeners(e),e},s.enableListeners=function(t){s.addEventListener(t,"mousemove",t.onmousemove,!1),window.addEventListener("mouseup",t.onmouseup,!1),s.addEventListener(t,"mousedown",t.onmousedown,!1),window.addEventListener("keydown",t.onkeydown,!1),window.addEventListener("keyup",t.onkeyup,!1)},s.disableListeners=function(t){s.removeEventListener(t,"mousemove",t.onmousemove,!1),window.removeEventListener("mouseup",t.onmouseup,!1),s.removeEventListener(t,"mousedown",t.onmousedown,!1),window.removeEventListener("keydown",t.onkeydown,!1),window.removeEventListener("keyup",t.onkeyup,!1)},s.addEventListener=function(t,e,i,n){return t.wid_canvas.addEventListener(e,i,n)},s.removeEventListener=function(t,e,i,n){return t.wid_canvas.removeEventListener(e,i,n)},s.dispatchEvent=function(t,e){return t.wid_canvas.dispatchEvent(e)},s.onWidgetLayer=function(t,e){s.onCanvas(t,t.wid_canvas,e)},s.onCanvas=function(t,e,i){var n=t.active_canvas;t.active_canvas=e;try{if(i)return i()}finally{t.active_canvas=n}},s.withWidgetLayer=function(t,e){return function(){s.onWidgetLayer(t,e)}},s.render=function(t,e){if(e){var i=t.active_canvas;i._animationFrameHandle||(i._animationFrameHandle=requestAnimFrame(function(){i._animationFrameHandle=void 0,e()}))}},s.fullscreen=function(t,e){void 0===e&&(e=!t.fullscreen),e?(t.fullscreen={position:t.root.style.position,height:t.root.style.height,width:t.root.style.width,left:t.root.style.left,top:t.root.style.top,zIndex:t.root.style.zIndex},t.root.style.position="fixed",t.root.style.height="100%",t.root.style.width="100%",t.root.style.left="0px",t.root.style.top="0px",t.root.style.zIndex=16777271):(t.root.style.position=t.fullscreen.position,t.root.style.height=t.fullscreen.height,t.root.style.width=t.fullscreen.width,t.root.style.left=t.fullscreen.left,t.root.style.top=t.fullscreen.top,t.root.style.zIndex=t.fullscreen.zIndex,t.fullscreen=void 0),s.checkresize(t)},s.checkresize=function(t){var e=t.canvas;return(e.height!==t.root.clientHeight||e.width!==t.root.clientWidth)&&(t.height=t.root.clientHeight,t.width=t.root.clientWidth,t.canvas.height=t.height,t.canvas.width=t.width,t.wid_canvas.height=t.height,t.wid_canvas.width=t.width,!0)},s.invertbgfg=function(t){s.setbgfg(t,t.fg,t.bg,!t.xi)},s.mixcolor=function(t,i,n){var o=e(t).toRgb(),r=e(i).toRgb(),a=1-n;return r.r=o.r*a+r.r*n,r.g=o.g*a+r.g*n,r.b=o.b*a+r.b*n,e(r).toHexString(!0)},s.linear_gradient=function(t,e,i,n,o,r){for(var a=t.active_canvas.getContext("2d"),s=1/r.length,l=a.createLinearGradient(e,i,n,o),h=0;h<r.length-1;h++)l.addColorStop(s*h,r[h]);return l.addColorStop(1,r[r.length-1]),l},s.setbgfg=function(t,i,n,o){if(t.bg=e(i).toHexString(),t.fg=e(n).toHexString(),t.xi=e(o).toHexString(),e.equals(t.bg,"black")&&e.equals(t.fg,"white"))t.xwfg=t.fg,t.xwbg="rgb(35%,35%,30%)",t.xwts="rgb(60%,60%,55%)",t.xwbs="rgb(25%,25%,20%)",t.xwms=s.mixcolor(t.xwts,t.xwbs,.5),t.xwlo="rgb(15%,15%,10%)",t.hi=t.xwts;else if(e.equals(t.bg,"white")&&e.equals(t.fg,"black"))t.xwfg=t.fg,t.xwbg="rgb(60%,60%,55%)",t.xwts="rgb(80%,80%,75%)",t.xwbs="rgb(40%,40%,35%)",t.xwms=s.mixcolor(t.xwts,t.xwbs,.5),t.xwlo="rgb(70%,70%,65%)",t.hi=t.xwbs;else{var r=e(t.bg).toRgb();Math.sqrt(r.r*r.r*.299+r.g*r.g*.587+r.b*r.b*.114)>127.5?(t.xwfg="black",t.xwbg="rgb(60%,60%,55%)",t.xwts="rgb(80%,80%,75%)",t.xwbs="rgb(40%,40%,35%)",t.xwms=s.mixcolor(t.xwts,t.xwbs,.5),t.xwlo="rgb(70%,70%,65%)",t.hi=t.xwts):(t.xwfg="white",t.xwbg="rgb(35%,35%,30%)",t.xwts="rgb(60%,60%,55%)",t.xwbs="rgb(25%,25%,20%)",t.xwms=s.mixcolor(t.xwts,t.xwbs,.5),t.xwlo="rgb(15%,15%,10%)",t.hi=t.xwbs)}},s.settheme=function(t,e){t.bg=e.bg,t.fg=e.fg,t.xi=e.xi,t.xwfg=e.xwfg,t.xwbg=e.xwbg,t.xwts=e.xwts,t.xwbs=e.xwbs,t.xwlo=e.xwlo,t.hi=e.hi},s.close=function(t){var e=t.wid_canvas;e.removeEventListener("mousemove",t.onmousemove,!1),e.removeEventListener("mouseup",t.onmouseup,!1),t.parent&&t.parent.parentNode&&t.parent.parentNode.removeChild(t.parent)},s.scrollbar=function(t,e,i,n,o,r,a,l,h,c,d){var u,f,x,m,p,y,v=0,_=new s.SCROLLBAR;switch(u=void 0!==e.flag?e.flag:e,f=Math.abs(u),x=r-o>n-i?t.origin<3?2:4:2&t.origin?3:1,f<10&&(e=_),(f<10||0===e.action)&&(s.scroll(t,e,s.XW_INIT,void 0,d),e.flag=u,e.initial_pause=-1,s.scroll_loc(e,i,o,n-i+1,r-o+1,x,d)),e.srange=a.pe-a.ps,f){case 0:m=p=y=1;break;case 1:case 11:m=p=.9*e.srange,y=2;break;case 2:case 12:p=9*(m=.1*e.srange),y=2;break;case 3:case 13:m=1,p=e.srange-1,y=1;break;default:return 0}return s.scroll_vals(e,a.ps,e.srange,l,h-l,m,p,y,d),0===u?s.scroll(t,e,s.XW_DRAW,void 0,void 0):s.scroll(t,e,s.XW_EVENT,c,d)&&(a.ps!==e.smin&&(a.ps=e.smin,v+=1),a.pe!==e.smin+e.srange&&(a.pe=e.smin+e.srange,v+=2)),v},s.scroll=function(t,e,i,n,o){var r,a,l,h;if(void 0===e)return!1;switch(i){case s.XW_INIT:s.scroll_loc(e,0,0,t.width,20,1,o),s.scroll_vals(e,0,10,0,100,1,10,1,o),e.flag=0,e.action=0,e.initial_pause=.25,e.repeat_pause=.05,e.mxevent=!0,e.repeat_count=0;break;case s.XW_EVENT:if(r=0,e.mxevent)r=t.button_release?-t.button_release:t.button_press;else if("mousedown"===n.type||"mouseup"===n.type){switch(n.which){case 1:r=1;break;case 2:r=2;break;case 3:r=3;break;case 4:r=4;break;case 5:r=5}"mouseup"===n.type&&(r=-r)}else"mousewheel"!==n.type&&"DOM-MouseScroll"!==n.type||(n.wheelDelta&&n.wheelDelta>0?r=4:n.wheelDelta&&n.wheelDelta<0&&(r=5));if(0===e.action){if(4!==r&&5!==r||(t.xpos=e.x),1!==r&&2!==r&&4!==r&&5!==r||t.xpos<e.x||t.ypos<e.y||t.xpos>e.x+e.w||t.ypos>e.y+e.h)return!1}else if(r<0)return e.action=e.repeat_count=0,!0;if(1&e.origin?(h=t.xpos-e.x,2&e.origin&&(h=e.w-h)):(h=t.ypos-e.y,e.origin<=2&&(h=e.h-h)),0===e.action){e.repeat_count=0;var c=s.scroll_real2pix(e);if(e.s1=o.s1=c.s1,e.sw=o.sw=c.sw,e.soff=o.soff=h-e.s1,0===e.trange)e.smin=o.smin=e.tmin,e.srange=o.srange=0;else switch(r){case 1:h>e.a1&&h<e.a2?e.action=e.soff>0?s.SB_PAGEINC:s.SB_PAGEDEC:e.action=e.soff>0?s.SB_STEPINC:s.SB_STEPDEC;break;case 4:e.action=s.SB_WHEELUP;break;case 5:e.action=s.SB_WHEELDOWN}}else switch(e.action){case s.SB_WHEELUP:case s.SB_WHEELDOWN:case s.SB_EXPAND:case s.SB_SHRINK:case s.SB_FULL:e.action=e.repeat_count=0}case s.XW_COMMAND:switch(a=e.smin,l=e.srange,e.action){case s.SB_STEPINC:a+=e.step;break;case s.SB_STEPDEC:a-=e.step;break;case s.SB_PAGEINC:a+=e.page;break;case s.SB_PAGEDEC:a-=e.page;break;case s.SB_FULL:a=e.tmin,l=e.trange;break;case s.SB_EXPAND:l*=e.scale,a<=0&&a+e.srange>=0?a*=e.scale:a-=(l-e.srange)/2;break;case s.SB_SHRINK:l/=e.scale,a<0&&a+e.srange>=0?a+=l/e.scale:0===a&&a+e.srange>=0?a=l/e.scale:a+=(e.srange-l)/2;break;case s.SB_WHEELUP:a-=e.page;break;case s.SB_WHEELDOWN:a+=e.page}e.trange>0?(a=Math.max(e.tmin,Math.min(a,e.tmin+e.trange-l)),l=Math.min(l,e.trange)):(a=Math.min(e.tmin,Math.max(a,e.tmin+e.trange-l)),l=Math.max(l,e.trange)),e.smin===a&&e.srange===l?e.action!==s.SB_DRAG&&(e.action=e.repeat_count=0):(e.smin=o.smin=a,e.srange=o.srange=l,e.repeat_count++),i===s.XW_COMMAND&&(s.scroll(t,e,s.XW_UPDATE,void 0),e.action=0);break;case s.XW_DRAW:case s.XW_UPDATE:s.redrawScrollbar(e,t,i)}return!0},s.scroll_loc=function(t,e,i,n,o,r,l){void 0!==t&&(t.x=l.x=e,t.y=l.y=i,t.w=l.w=n,t.h=l.h=o,t.origin=l.origin=Math.max(1,Math.min(4,r)),1&t.origin?(t.a2=l.a2=t.w,t.arrow=l.arrow=Math.min(a.trunc((t.w-a.trunc(2*s.GBorder))/3),t.h+s.GBorder)):(t.a2=l.a2=t.h,t.arrow=l.arrow=Math.min(a.trunc((t.h-a.trunc(2*s.GBorder))/3),t.w+s.GBorder)),t.a1=l.a1=t.arrow+s.GBorder,t.a2-=t.arrow+s.GBorder,l.a2-=t.arrow+s.GBorder,t.swmin=l.swmin=Math.min(10,t.a2-t.a1),t.s1=l.s1=0,t.sw=l.sw=0,t.action=l.action=0)},s.scroll_vals=function(t,e,i,n,o,r,a,s,l){void 0!==t&&(t.smin=l.smin=e,t.srange=l.srange=i,t.tmin=l.tmin=n,t.trange=l.trange=o,t.step=l.step=r,t.page=l.page=a,t.scale=l.scale=Math.max(s,1))},s.draw_symbol=function(t,e,i,n,o,r,l){for(var h,c=t.active_canvas.getContext("2d"),d=0,u=0,f=0,x=[],m=0;m<4;m++)x[m]={x:0,y:0};var _="";if(h=r<0,u=2*(d=Math.abs(r)),c.fillStyle=e,c.strokeStyle=e,"function"==typeof o)o(c,l,i,n);else switch(o){case s.L_CircleSymbol:c.beginPath(),h?(c.arc(i,n,d,0,360),c.fill()):(c.arc(i,n,d,0,360),c.stroke());break;case s.L_SquareSymbol:h?function(t,e,i,n,o,r,a,s){s&&(t.lineWidth=s);a&&(t.strokeStyle=a);r&&(t.fillStyle=r);t.fillRect(e,i,n,o)}(c,i-d,n-d,u,u):function(t,e,i,n,o,r,a){a&&(t.lineWidth=a);r&&(t.strokeStyle=r);t.strokeRect(e,i,n,o)}(c,i-d,n-d,u,u);break;case s.L_PixelSymbol:u=1,c.beginPath(),c.arc(i,n,1,0,2*Math.PI,!0),c.fill();break;case s.L_ITriangleSymbol:d=-d;case s.L_TriangleSymbol:u=a.trunc(1.5*d),f=a.trunc(.8*d),x[1].x=-f,x[1].y=u,x[2].x=2*f,x[2].y=0,x[3].x=-f,x[3].y=-u;var b=[];for(m=0;m<4;m++)b[m]={x:0,y:0};h?(b[0].x=i,b[0].y=n-d,b[1].x=b[0].x+x[1].x,b[1].y=b[0].y+x[1].y,b[2].x=b[1].x+x[2].x,b[2].y=b[1].y+x[2].y,b[3].x=b[2].x+x[3].x,b[3].y=b[2].y+x[3].y,y(c,b)):(b[0].x=i,b[0].y=n-d,b[1].x=b[0].x+x[1].x,b[1].y=b[0].y+x[1].y,b[2].x=b[1].x+x[2].x,b[2].y=b[1].y+x[2].y,b[3].x=b[2].x+x[3].x,b[3].y=b[2].y+x[3].y,function(t,e,i,n){v(t,e,n),i&&(t.strokeStyle=i);t.stroke(),t.closePath()}(c,b));break;case s.L_PlusSymbol:p(c,i,n+d,i,n-d),p(c,i+d,n,i-d,n);break;case s.L_HLineSymbol:p(c,i+d,n,i-d,n);break;case s.L_VLineSymbol:p(c,i,n+d,i,n-d);break;case s.L_XSymbol:p(c,i-d,n-d,i+d,n+d),p(c,i+d,n-d,i-d,n+d);break;default:_=o,d=a.trunc(t.text_w/2),h&&c.fillText(_.substring(0,2),i-d,n+d)}},s.draw_symbols=function(t,e,i,n,o,r,a,l){for(var h=0;h<o;h++)s.draw_symbol(t,e,i[h],n[h],r,a,h+l)},s.trace=function(t,e,i,n,o,r,h,d,u,f,x){if(void 0===i||void 0===n)throw"mx.trace requires xpoint and ypoint";if(void 0===h&&(h=1),void 0===d&&(d=1),void 0===u&&(u=0),void 0===f&&(f=0),void 0===x&&(x={}),o<=0)a.log.warn("No points to draw");else if(0!==d||0!==u){var p;x.dashed&&(p={mode:"dashed",on:4,off:4});var y=s.origin(t.origin,4,t.stk[t.level]);if(0!==y.xscl&&0!==y.yscl){var v=y.x1,_=y.y1,b=y.xmin,g=1/y.xscl,w=y.ymin,M=1/y.yscl;x.noclip||s.clip(t,v,_,y.x2-v+1,y.y2-_+1);var k=Math.abs(y.xmax-y.xmin),S=Math.abs(y.ymax-y.ymin),E=Math.min(y.xmin,y.xmax),A=Math.min(y.ymin,y.ymax),C=E+k,L=A+S,z=4*Math.ceil(2*i.length),G=new Int32Array(new ArrayBuffer(z)),T=new Int32Array(new ArrayBuffer(z)),P=0;if(0===d&&0!==u)for(var R=h-1;R<o;R+=h){var I=i[R],O=n[R];(Y=I>=E&&I<=C&&O>=A&&O<=L)&&(G[0]=Math.round((I-b)*g)+v,T[0]=Math.round((O-w)*M)+_,s.draw_symbol(t,e,G[0],T[0],u,f,r+R))}if(!0===x.vertsym)for(R=h-1;R<o;R+=h){I=i[R],O=n[R];if(I>=E&&I<=C){var N=Math.round((I-b)*g)+v;s.draw_line(t,e,N,0,N,t.height),O>=A&&O<=L&&(G[0]=N,T[0]=Math.round((O-w)*M)+_,s.draw_symbol(t,e,G[0],T[0],u,f,r+R))}}if(!0===x.horzsym)for(R=h-1;R<o;R+=h){I=i[R];if((O=n[R])>=A&&O<=L){N=Math.round((O-w)*M)+_;s.draw_line(t,e,0,N,t.width,N),I>=E&&I<=C&&(G[0]=Math.round((I-b)*g)+v,T[0]=N,s.draw_symbol(t,e,G[0],T[0],u,f,r+R))}}else if(0!==d){var D;if(x&&x.highlight){D=[];for(var B=0;B<x.highlight.length;B++)if(!(x.highlight[B].xstart>=C||x.highlight[B].xend<=E)){var U=Math.max(x.highlight[B].xstart,E),H=Math.min(x.highlight[B].xend,C);if(U<H){for(var F=Math.round((U-b)*g)+v,W=Math.round((H-b)*g)+v,X=D.length-1;X>=0;X--)F<=D[X].start&&W>=D[X].end?D.splice(X,1):(F>=D[X].start&&W<=D[X].end?(D.push({start:W,end:D[X].end,color:D[X].color}),D[X].end=F):F<=D[X].start&&W>=D[X].start?D[X].start=W:F<=D[X].end&&W>=D[X].end&&(D[X].end=F),D[X].end<=D[X].start&&D.splice(X,1));D.push({start:F,end:W,color:x.highlight[B].color})}}D.push({start:v,color:e}),D.sort(function(t,e){return t.start-e.start})}else D=e;var Y,j=0,V=(t.stk[t.level].xmax+t.stk[t.level].xmin)/2,q=(t.stk[t.level].ymax+t.stk[t.level].ymin)/2;I=i[0],O=n[0];j=c(j,V,q,t.stk[t.level].xmin,t.stk[t.level].ymin,I,O),(Y=I>=E&&I<=C&&O>=A&&O<=L)?(G[P]=Math.round((I-b)*g)+v,T[P]=Math.round((O-w)*M)+_,P+=1,0!==u&&s.draw_symbols(t,e,G,T,1,u,f,r)):P=0;var K=0,Z=!1;for(R=h;R<=h*(o-1);R+=h){var $=I,J=O;if(j=c(j,V,q,$,J,I=i[R],O=n[R]),Z=I>=E&&I<=C&&O>=A&&O<=L,Y&&Z)G[P]=Math.round((I-b)*g)+v,T[P]=Math.round((O-w)*M)+_,P+=1;else if(Y=Z,S=J-O,0!==(k=$-I)||0!==S){var Q={tL:1,tE:0};m(k,E-I,Q)&&m(-k,I-C,Q)&&m(S,A-O,Q)&&m(-S,O-L,Q)&&(Q.tL<1&&(G[P]=Math.round((I-b+Q.tL*k)*g)+v,T[P]=Math.round((O-w+Q.tL*S)*M)+_,P+=1),Q.tE>0?(G[P]=Math.round((I-b+Q.tE*k)*g)+v,T[P]=Math.round((O-w+Q.tE*S)*M)+_,P+=1,s.draw_lines(t,D,G.subarray(K,P),T.subarray(K,P),P-K,d,p),0!==u&&P-K>2&&s.draw_symbols(t,e,G.subarray(K+1,P-1),T.subarray(K+1,P-1),P-K-2,u,f,r+R-(P-K-2)),K=P):(G[P]=Math.round((I-b)*g)+v,T[P]=Math.round((O-w)*M)+_,P+=1))}}if(j=c(j=c(j,V,q,I,O,t.stk[t.level].xmax,t.stk[t.level].ymin),V,q,t.stk[t.level].xmax,t.stk[t.level].ymin,t.stk[t.level].xmin,t.stk[t.level].ymin),P-K>0&&(s.draw_lines(t,D,G.subarray(K,P),T.subarray(K,P),P-K,d,p),Z&&(K+=1),0!==u&&P-K>1&&s.draw_symbols(t,e,G.subarray(K-1,P),T.subarray(K-1,P),P-K-1,u,f,R-P+r)),!x.fillStyle||t.fillMin||t.fillMax||(P>1||0!==j)&&s.fill_trace(t,x.fillStyle,G,T,P),x.highlight)for(N=0;N<x.highlight.length;N++){var tt=x.highlight[N];if(tt.fill){var et=tt.xstart,it=tt.xend;if(console.log("x start ",et),console.log("x end ",it),!(et>=t.stk[t.level].xmax||it<=t.stk[t.level].xmin||!(P>1||0!==j))){for(var nt=s.real_to_pixel(t,et,0),ot=s.real_to_pixel(t,it,0),rt=nt.x,at=ot.x,st=[],lt=[],ht=0;ht<P;ht++){var ct=G[ht],dt=T[ht];!0===l(ct,rt,at)&&(st.push(ct),lt.push(dt))}(st.length>0||0!==j)&&(rt=Math.max(rt,st[0]),at=Math.min(at,st[st.length-1]),s.fill_trace(t,tt.fill,st,lt,st.length,rt,at))}}}}x.noclip||s.clip(t,0,0,0,0)}}else a.log.warn("No line or symbol to draw")},s.draw_mode=function(t,e,i){t.linewidth=void 0===e?1:e,t.style=i},s.draw_line=function(t,e,i,n,o,r,s,l){var h=t.active_canvas.getContext("2d");if(void 0===s&&(s=t.linewidth),void 0===l&&(l=t.style),"number"==typeof e)if(t.pixel){isNaN(e)&&(e=0);Math.max(0,Math.min(t.pixel.map.length,e));e=b((e=t.pixel.getColor(e)).red,e.green,e.blue)}else a.log.warn("COLORMAP not initialized, defaulting to foreground"),e=t.fg;p(h,i,n,o,r,l,e,s)},s.rubberline=function(t,e,i,n,o){p(t.active_canvas.getContext("2d"),e,i,n,o,{mode:"xor"},"white",1)},s.fill_trace=function(t,e,i,n,o,r,a){var l=t.active_canvas.getContext("2d");if(Array.isArray(e)?l.fillStyle=s.linear_gradient(t,0,0,0,t.b-t.t,e):l.fillStyle=e,o<1)l.fillRect(t.l,t.t,t.r-t.l,t.b-t.t);else if(void 0===r&&(r=t.l),void 0===a&&(a=t.r),e){var h=i[0],c=n[0];l.beginPath(),c===t.t?l.lineTo(r,t.t):l.lineTo(r,t.b),l.lineTo(h,c);for(var d=1;d<o;d++)h=i[d],c=n[d],l.lineTo(h,c);c===t.t&&l.lineTo(a,t.t),l.lineTo(a,t.b),n[0]===t.t&&l.lineTo(r,t.b),l.closePath(),l.fill("evenodd")}},s.draw_lines=function(t,e,i,n,r,s,l){var h=t.active_canvas.getContext("2d");if(!(r<1)){var c=i[0],d=n[0];if(void 0===s&&(s=t.linewidth),void 0===l&&(l=t.style),l&&"dashed"===l.mode)o.dashOn(h,l.on,l.off)||a.log.warn("WARNING: Dashed lines aren't supported on your browser");h.lineWidth=s;var u,f=0;for("string"==typeof e?e=[{start:0,color:e}]:e instanceof Array||(void 0===e.start&&(e.start=0),e=[e]),u=e.length-1;u>=0;u--)null!=e[u].end&&e[u].end<c&&e.splice(u,1);for(u=0;u<e.length;u++)e[u].start<c&&(f=u);h.strokeStyle=e[f].color,h.beginPath(),h.moveTo(c,d);for(var x=0;x<r;x++)if(c!==i[x]||d!==n[x]){c=i[x],d=n[x];var m=!1;if(f>0&&null!=e[f].end&&e[f].end<c)for(m=!0;null!=e[f].end&&e[f].end<c&&(e.splice(f,1),0!=(f-=1)););if(f+1<e.length&&e[f+1].start<=c)for(m=!0;f+1<e.length&&e[f+1].start<=c;)f++;h.lineTo(c,d),m&&(h.stroke(),h.strokeStyle=e[f].color,h.beginPath(),h.lineTo(c,d))}h.stroke(),o.dashOff(h),h.beginPath()}},s.clip=function(t,e,i,n,o){var r=t.active_canvas.getContext("2d");0!==e||0!==i||0!==n||0!==o?(r.save(),r.beginPath(),r.rect(e,i,n,o),r.clip()):r.restore()},s.clear_window=function(t){var e=t.active_canvas.getContext("2d");e.fillStyle=t.bg,e.fillRect(0,0,t.width,t.height)},s.erase_window=function(t){t.active_canvas.getContext("2d").clearRect(0,0,t.width,t.height)},s.rubberbox=function(t,e,i,n,o){s.warpbox(t,t.xpos,t.ypos,t.xpos,t.ypos,0,t.width,0,t.height,e,i,n,o)},s.warpbox=function(t,e,i,n,o,r,a,s,l,h,c,d,u){d||(d={}),t.warpbox=new function(){this.xo=0,this.yo=0,this.xl=0,this.yl=0,this.xmin=0,this.xmax=0,this.ymin=0,this.ymax=0,this.func=void 0,this.mode=void 0},t.warpbox.xo=e,t.warpbox.yo=i,t.warpbox.xl=n,t.warpbox.yl=o,t.warpbox.xmin=r,t.warpbox.xmax=a,t.warpbox.ymin=s,t.warpbox.ymax=l,t.warpbox.func=h,t.warpbox.mode=c,t.warpbox.style=d,t.warpbox.def_style=d,t.warpbox.alt_style=u},s.origin=function(t,e,i){t=Math.max(1,t),e=Math.max(1,e);var n=new s.STKSTRUCT;if(n.xmin=i.xmin,n.xmax=i.xmax,n.ymin=i.ymin,n.ymax=i.ymax,n.xscl=i.xscl,n.yscl=i.yscl,n.x1=i.x1,n.y1=i.y1,n.x2=i.x2,n.y2=i.y2,t!==e){var o=Math.abs(e-t),r=e+t;2!==o&&5===r||(n.xmin=i.xmax,n.xmax=i.xmin,n.xscl=-i.xscl),2!==o&&5!==r||(n.ymin=i.ymax,n.ymax=i.ymin,n.yscl=-i.yscl)}return n},s.mult=function(t,e){var i=Math.max(Math.abs(t),Math.abs(e));if(0===i)return 1;var n=.1447648*Math.log(i);return n|=n,i<1&&(n-=1),n<0?1/Math.pow(10,-3*n):Math.pow(10,3*n)},s.widget_callback=function(t,e){t.prompt&&3===e.which&&t.prompt.input.onsubmit(),t.widget&&t.widget.callback(e)},s.prompt=function(t,e,i,n,o,a,l,h,c){if(void 0!==a){var d=i(a);if(!d.valid)throw"Prompt default input value not valid due to '"+d.reason+"'"}s.onWidgetLayer(t,function(){var o=t.active_canvas.getContext("2d"),d=o.font.indexOf("px"),u=d+3,f=o.font.substr(0,d),x=o.font.substr(u,o.font.length).toString(),m=new r({height:t.text_h,fontFamily:x,fontSize:new Number(f),backgroundColor:t.bg,fontColor:t.fg,borderWidth:0,borderRadius:0,padding:0,boxShadow:"none",innerShadow:"none",width:30*t.text_w,value:void 0!==a?a.toString():"",disableBlur:!0,renderOnReturn:!1,tabToClear:!0}),p=function(e,o){return function(){var r=this.value(),a=i(r);a.valid?(t.prompt=void 0,this.cleanup(),s.onWidgetLayer(t,function(){s.erase_window(t)}),n(r)):(s.message(t,"Value: '"+r+"' isn't valid due to '"+a.reason+"' - RETRY",void 0,e,o),setTimeout(function(){s.onWidgetLayer(t,function(){s.erase_window(t)}),t.widget=null},null!=c?c:4e3))}},y=function(t,e,i){return function(n,o){s.onWidgetLayer(t,function(){var r=(i.length+2)*t.text_w,a=r+31*t.text_w+6,l=2*t.text_h+6;n||(n=t.xpos),o||(o=t.ypos);var h=Math.max(0,Math.min(n,t.width-a)),c=Math.max(0,Math.min(o,t.height-l)),d=h+3,u=c+3,f=u+1.5*t.text_h,x=d+t.text_w;s.widgetbox(t,h,c,a,l,d,u,0,""),s.text(t,x,f,i);var m=f-1.15*t.text_h;e.x(d+t.text_w+r-t.text_w),e.y(m),e.onsubmit(p(h,m-75)),e.canvas()?e.render():e.canvas(t.active_canvas)})}}(t,m,e);y(l,h),m.focus(),t.prompt={redraw:y,input:m}})},s.floatValidator=function(t,e){return(void 0!==e&&!1!==e||""!==t)&&isNaN(parseFloat(t))||!isFinite(t)?{valid:!1,reason:"Failed float validation: not a valid floating point number"}:{valid:!0,reason:""}},s.intValidator=function(t,e){return(void 0===e||!1===e)&&""===t||parseFloat(t)===parseInt(t,10)&&!isNaN(t)?{valid:!0,reason:""}:{valid:!1,reason:"Failed integer validation: not a valid integer"}},s.hexValidator=function(t,e){return(void 0===e||!1===e)&&""===t||!1!==/^(#)?([0-9a-fA-F]{3})([0-9a-fA-F]{3})?$/.test(t)?{valid:!0,reason:""}:{valid:!1,reason:"Failed hexcode validation: not a valid hexcode"}},s.message=function(t,e,i,n,o,r){s.onWidgetLayer(t,function(){s.render_message_box(t,e,n,o),t.widget={type:r||"ONESHOT",callback:function(e){"mousedown"!==e.type&&"keydown"!==e.type||(t.widget=null,s.onWidgetLayer(t,function(){s.erase_window(t)}))}}})},s.render_message_box=function(t,e,i,n,o){var r,a=0;if(1===(x=e.split(/\r\n|\r|\n/g)).length){x=[];if((a=Math.min((t.width-6)/t.text_w-2,e.length))<=0)return;for(;a>40&&2.5*t.text_h*e.length<t.height*a;)a-=5;var l=0,h=0,c=0,d=0,u=0,f=0,x=[];for(r=!0;h<e.length;){u=h+a-1,f=u=Math.min(u,e.length-1);var m=!1;for(l=h;l<=u&&!m;l++)switch(e[l]){case",":case";":case" ":case":":f=l;break;case"-":case"/":f!==l-1&&(f=l);break;case"@":case"\n":case"\r":r=!1,m=!0,f=l}if(l===e.length&&(f=u),m)x.push(e.substring(h,f));else{var p=e.substring(h,f+1).replace(/^\s+/,"");x.push(p)}h=f+1,d=Math.max(d,x[c].length)}}else for(c=0;c<x.length;c++)a=Math.min((t.width-6)/t.text_w-2,Math.max(a,x[c].length));var y=x.length;y>6&&(r=!1);l=0;var v=Math.max(1,t.height/t.text_h),_=Math.min(y,l+v-1),b=(a+2)*t.text_w+6,g=(_-l+1)*t.text_h+6;i||(i=t.xpos),n||(n=t.ypos);var w=Math.max(t.l,Math.min(i,t.r-b)),M=Math.max(t.t,Math.min(n,t.b-g)),k=w+3,S=M+3;s.widgetbox(t,w,M,b,g,k,S,0,"");for(d=S+t.text_h/3,c=k+t.text_w;l<_;)d+=t.text_h,r&&(c=w+b/2-x[l].length*t.text_w/2),s.text(t,c,d,x[l],o),l++},s.draw_round_box=function(t,e,i,n,o,r,a,s,l){var h=t.active_canvas.getContext("2d");if(l||(l=5),h.beginPath(),h.moveTo(i+l,n),h.lineTo(i+o-l,n),h.quadraticCurveTo(i+o,n,i+o,n+l),h.lineTo(i+o,n+r-l),h.quadraticCurveTo(i+o,n+r,i+o-l,n+r),h.lineTo(i+l,n+r),h.quadraticCurveTo(i,n+r,i,n+r-l),h.lineTo(i,n+l),h.quadraticCurveTo(i,n,i+l,n),h.closePath(),h.lineWidth=1,h.strokeStyle=e,h.stroke(),void 0!==a&&a>0){var c=h.globalAlpha;h.globalAlpha=a,h.fillStyle=s||e,h.fill(),h.globalAlpha=c}},s.draw_box=function(t,e,i,n,o,r,a,s){var l=t.active_canvas.getContext("2d");if("xor"!==e)l.lineWidth=1,l.strokeStyle=e,l.strokeRect(i,n,o,r);else if("undefined"==typeof Uint8ClampedArray)l.lineWidth=1,l.strokeStyle=t.fg,l.strokeRect(i,n,o,r);else{i=Math.floor(i),n=Math.floor(n),o=Math.floor(o),r=Math.floor(r);for(var h=t.canvas.getContext("2d"),c=(u=h.getImageData(i,n,o,1)).data,d=0;d<u.data.length;d++)c[4*d]=255-c[4*d],c[4*d+1]=255-c[4*d+1],c[4*d+2]=255-c[4*d+2],c[4*d+3]=255;l.putImageData(u,i,n),c=(u=h.getImageData(i,n+r,o,1)).data;for(d=0;d<u.data.length;d++)c[4*d]=255-c[4*d],c[4*d+1]=255-c[4*d+1],c[4*d+2]=255-c[4*d+2],c[4*d+3]=255;l.putImageData(u,i,n+r);var u;for(c=(u=h.getImageData(i,n,1,r)).data,d=0;d<r;d++)c[4*d]=255-c[4*d],c[4*d+1]=255-c[4*d+1],c[4*d+2]=255-c[4*d+2],c[4*d+3]=255;l.putImageData(u,i,n),c=(u=h.getImageData(i+o,n,1,r)).data;for(d=0;d<r;d++)c[4*d]=255-c[4*d],c[4*d+1]=255-c[4*d+1],c[4*d+2]=255-c[4*d+2],c[4*d+3]=255;l.putImageData(u,i+o,n)}if(void 0!==a&&a>0){var f=l.globalAlpha;l.globalAlpha=a,l.fillStyle=s||e,l.fillRect(i+1,n+1,o-1,r-1),l.globalAlpha=f}},s.set_font=function(t,e){var i=t.canvas.getContext("2d"),n=t.wid_canvas.getContext("2d");if(t.font&&t.font.width===e)i.font=t.font.font,n.font=t.font.font;else{var o=1;do{o+=1,i.font=o+"px "+t.font_family,n.font=o+"px "+t.font_family;var r=i.measureText("M");t.text_w=r.width,t.text_h=o}while(t.text_w<e);t.font={font:o+"px "+t.font_family,width:e}}},s.textline=function(t,e,i,n,o,r){var a=t.active_canvas.getContext("2d");r||(r={}),r.color||(r.color=t.fg),r.width||(r.width=1),p(a,e,i,n,o,r,r.color,r.width)},s.tics=function(t,e,i,n){var o=1,r=t;if(e===t)return{dtic:1,dtic1:t};var a,s=Math.abs(e-t)/i,l=function(t){return Math.log(t)/Math.log(10)}(Math.max(s,1e-36));l<0?(a=Math.ceil(l),a-=1):a=Math.floor(l);var h,c,d=s*Math.pow(10,-a),u=d*(l=Math.pow(10,a));n&&u>=5&&u<=5140800?(h=u<17.5?5:u<37.5?15:u<270?60:u<1050?300:u<2250?900:u<7200?3600:u<16200?10800:u<32400?21600:u<129600?43200:u<518400?86400:604800,o=Math.round(u/h)*h):o=d<1.75?l:d<2.25?2*l:d<3.5?2.5*l:d<7?5*l:10*l;return 0===o&&(o=1),e>=t?(c=t>=0?t/o+.995:t/o-.005,r=(c=Math.floor(c))*o):(c=t>=0?t/o+.005:t/o-.995,r=(c=Math.floor(c))*o,o*=-1),r+o===r&&(o=e-t),{dtic:o,dtic1:r}},s.drawaxis=function(t,e,i,n,o,r,l){var h=s.origin(e.origin,1,e.stk[e.level]),c=0,d=0,u=0,f=0,x=0,m=0;o=void 0===o?30:o,r=void 0===r?30:r,l.exactbox?(c=Math.floor(h.x1),d=Math.floor(h.y1),x=(u=Math.floor(h.x2))-c,m=(f=Math.floor(h.y2))-d):(c=Math.max(Math.floor(h.x1)-2,0),d=Math.max(Math.floor(h.y1)-2,0),x=(u=Math.min(Math.floor(h.x2)+2,e.width))-c-4,m=(f=Math.min(Math.floor(h.y2)+2,e.height))-d-4);var p=e.active_canvas.getContext("2d");l.fillStyle?Array.isArray(l.fillStyle)?p.fillStyle=s.linear_gradient(e,0,0,0,f-d,l.fillStyle):p.fillStyle=l.fillStyle:p.fillStyle=e.bg,p.fillRect(c,d,u-c,f-d),l.noaxisbox||(s.textline(e,c,d,u,d),s.textline(e,u,d,u,f),s.textline(e,u,f,c,f),s.textline(e,c,f,c,d));var y={dtic:0,dtic1:0},v={dtic:0,dtic1:0};i<0?(y.dtic1=h.xmin,y.dtic=(h.xmin-h.xmax)/i):y=s.tics(h.xmin,h.xmax,i,l.xtimecode);var _=1;l.xmult?_=l.xmult:l.xtimecode||(_=s.mult(h.xmin,h.xmax)),n<0?(v.dtic1=h.ymin,v.dtic=(h.ymin-h.ymax)/n):v=s.tics(h.ymin,h.ymax,n,l.ytimecode);var b=1;l.ymult?b=l.ymult:l.ytimecode||(b=s.mult(h.ymin,h.ymax));var w,M,k=!l.noxtlab,S=!l.noytlab,E=Math.max(0,c-4*e.text_w),A=0;if((A=l.ontop?Math.min(e.height,Math.floor(f+1.5*e.text_h)):Math.max(e.text_h,Math.floor(d-.5*e.text_h)))>0){l.noyplab||(M=l.ylabel instanceof Function?l.ylabel(r,b):void 0!==l.ylabel?l.ylabel:a.label(r,b)),l.noxplab||(w=l.xlabel instanceof Function?l.xlabel(o,_):void 0!==l.xlabel?l.xlabel:a.label(o,_))}w&&M?s.text(e,E,A,M+" vs "+w):w?s.text(e,E,A,w):M&&s.text(e,E,A,M);var C,L,z=5.5*e.text_w,G=0;G=l.ontop?l.inside?d+1*e.text_h:d-.2*e.text_h:l.inside?f-.5*e.text_h:f+1*e.text_h+2,C=h.xmin!==h.xmax?x/(h.xmax-h.xmin):x/1,L=0!==_?1/_:1;var T,P,R,I,O,N=Math.min(12,Math.round(C*y.dtic)/e.text_w),D=1,B="";if(k)if(l.xtimecode)D=(B=a.sec2tod(y.dtic1)).length*e.text_w<(u-c)/2;else for(T=y.dtic1;T<=h.xmax;T+=y.dtic){if((B=s.format_f(T*L,N,N/2))===P){D=0;break}P=B}for(0===y.dtic&&(y.dtic=h.xmax-y.dtic1+1),E=0,B="",T=y.dtic1;T<=h.xmax;T+=y.dtic)if(!((R=c+Math.round(C*(T-h.xmin))+2)<c)&&(l.grid&&"y"!==l.grid?(l.gridStyle||(s.LEGACY_RENDER?l.gridStyle={mode:"dashed",on:1,off:3}:l.gridStyle={color:e.xwms,mode:"dashed",on:1,off:3}),s.textline(e,R,f,R,d,l.gridStyle)):(s.textline(e,R,f-2,R,f+2),s.textline(e,R,d-2,R,d+2)),k))if(D){if(B=null,l.xtimecode?R>E&&(B=a.sec2tod(T,!0),E=R+e.text_w*(B.length+1)):B=g(B=s.format_f(T*L,N,N/2),!0),B){var U=Math.round(B.length/2)*e.text_w;l.inside&&(R=Math.max(c+U,R),R=Math.min(u-U,R)),R-U>=0&&s.text(e,R-U,G,B)}}else T===y.dtic1&&(l.xtimecode?(B=a.sec2tod(T,!0),l.inside&&(R=Math.floor(Math.max(c+z,R))),s.text(e,R-z,G,B+" +Δ "+a.sec2tod(y.dtic))):(B=(y.dtic1*L).toString(),l.inside&&(R=Math.floor(Math.max(c+z,R))),s.text(e,R-z,G,B+" +Δ "+y.dtic*L)));z=l.yonright?l.inside?Math.min(u-6*e.text_w,e.width-5*e.text_w):Math.min(u+e.text_w,e.width-5*e.text_w):l.inside?Math.max(0,c+e.text_w):Math.max(0,Math.floor(c-(e.l-.5)*e.text_w)),G=.4*e.text_h,C=h.ymin!==h.ymax?-m/(h.ymax-h.ymin):-m/1,L=0!==b?1/b:1,0===v.dtic&&h.ymax,I=h.ymax>=h.ymin?function(t){return t<=h.ymax}:function(t){return t>=h.ymax};for(var H=v.dtic1;I(H);H+=v.dtic)if(!((R=f+Math.round(C*(H-h.ymin))-2)>f)&&(l.grid&&"x"!==l.grid?(l.gridStyle||(l.gridStyle={mode:"dashed",on:1,off:3}),s.textline(e,c,R,u,R,l.gridStyle)):(s.textline(e,c-2,R,c+2,R),s.textline(e,u-2,R,u+2,R)),S))if(l.inside&&(R<d+e.text_h||R>f-2*e.text_h));else if(l.ytimecode){O=a.sec2tod(H);var F=R+G-e.text_h,W=O.indexOf("::");-1!==W&&(F>d&&F<f&&s.text(e,z,F,O.substring(0,W)),W+=1),s.text(e,z,Math.min(f,R+G),O.substring(W+1,W+6)),(F=R+G+e.text_h)>d&&F<f&&"00"!==O.substring(W+7,W+9)&&(O+=".00",s.text(e,z,F,O.substring(W+7,W+12)))}else O=g(O=s.format_f(H*L,12,6),l.inside),s.text(e,z,Math.min(f,R+G),O)},s.inrect=function(t,e,i,n,o,r){return t>=i&&t<=i+o&&e>=n&&e<=n+r};var d={GBorder:3,sidelab:0,toplab:1,n_show:0};function u(t,e){if(!e.animationFrameHandle){var i=t.canvas.height-70,n=1.5*t.text_h,o=Math.floor(i/n);o>=e.items.length?d.n_show=e.items.length:d.n_show=o,e.animationFrameHandle=requestAnimFrame(s.withWidgetLayer(t,function(){s.erase_window(t),e.animationFrameHandle=void 0;var i=1.5*t.text_h;e.x=Math.max(e.x,0),e.y=Math.max(e.y,0),e.x=Math.min(e.x,t.width-e.w),e.y=Math.min(e.y,t.height-e.h);var n=e.x+d.GBorder+Math.max(0,d.sidelab),o=e.y+d.GBorder+d.toplab*(i+d.GBorder),r=e.w-2*d.GBorder-Math.abs(d.sidelab),a=e.h-2*d.GBorder-d.toplab*(i+d.GBorder);s.widgetbox(t,e.x,e.y,e.w,e.h,n,o,r,a,e.title);var l=t.wid_canvas.getContext("2d");l.lineWidth=1,l.strokeStyle=t.xwbs,l.beginPath(),l.moveTo(n,o-4+.5),l.lineTo(n+r-1,o-4+.5),l.stroke(),l.strokeStyle=t.xwts,l.beginPath(),l.moveTo(n,o-3+.5),l.lineTo(n+r-1,o-3+.5),l.stroke();var h=e.queue[0],c=e.queue[d.n_show-1];if(0===c){for(var u=0;u<d.n_show;u++)e.queue[u]=u;h=e.queue[0],c=e.queue[d.n_show-1]}for(var f=0,x=h;x<=c;x++){var m=e.items[x],p=o+i*f;f+=1,"separator"===m.style?(l.fillStyle=t.xwbs,l.fillRect(n,p,r,i),l.beginPath(),l.moveTo(n,p+.5),l.lineTo(n+r,p+.5),l.stroke(),l.textBaseline="middle",l.textAlign="left",l.fillStyle=t.xwfg,l.fillText(" "+m.text+" ",n+2*t.text_w,p+i/2)):(s.LEGACY_RENDER?(l.fillStyle=t.xwlo,l.fillRect(n,p,r,i),l.beginPath(),l.moveTo(n,p+.5),l.lineTo(n+r,p+.5),l.stroke(),m.selected&&s.shadowbox(t,n-1,p,r+2,i,1,2,"",.75)):(l.save(),l.globalAlpha=.75,m.selected?l.fillStyle=t.xwts:l.fillStyle=t.xwlo,l.fillRect(n,p,r,i),l.restore(),l.strokeStyle=t.bg,l.beginPath(),l.moveTo(n,p+.5),l.lineTo(n+r,p+.5),l.stroke()),l.textBaseline="middle",l.textAlign="left",l.fillStyle=t.xwfg,"checkbox"===m.style?(l.fillText(" "+m.text+" ",n+2*t.text_w,p+i/2),l.strokeStyle=t.xwfg,l.strokeRect(n+1+t.text_w,p+(i-t.text_w)/2,t.text_w,t.text_w),m.checked&&(l.beginPath(),l.moveTo(n+1+t.text_w,p+(i-t.text_w)/2),l.lineTo(n+1+t.text_w+t.text_w,p+(i-t.text_w)/2+t.text_w),l.stroke(),l.beginPath(),l.moveTo(n+1+t.text_w+t.text_w,p+(i-t.text_w)/2),l.lineTo(n+1+t.text_w,p+(i-t.text_w)/2+t.text_w),l.stroke())):(l.fillText(" "+m.text+" ",n,p+i/2),m.checked&&(l.beginPath(),l.moveTo(n+1,p+t.text_h/4),l.lineTo(n+1+t.text_w-2,p+t.text_h/4+t.text_h/2),l.lineTo(n+1,p+t.text_h/4+t.text_h),l.lineTo(n+1,p+t.text_h/4),l.fill())))}}))}}function f(t,e){s.onWidgetLayer(t,function(){s.erase_window(t)}),t.menu=void 0,t.widget=null;for(var i=0;i<e.items.length;i++){var n=e.items[i];if(n.selected){if(n.handler)n.handler();else if(n.menu){var o=n.menu;"function"==typeof n.menu&&(o=n.menu()),o.finalize=e.finalize,s.menu(t,o)}break}}!t.menu&&e.finalize&&e.finalize()}function x(t,e,i){var n=e.queue[0],r=e.queue[d.n_show-1];if(void 0===i)u(t,e);else if("mousemove"===i.type){void 0!==e.drag_x&&void 0!==e.drag_y&&Math.abs(t.xpos-e.drag_x)>2&&Math.abs(t.ypos-e.drag_y)>2&&(e.x+=t.xpos-e.drag_x,e.y+=t.ypos-e.drag_y,e.drag_x=t.xpos,e.drag_y=t.ypos);for(var a=e.x+d.GBorder+Math.max(0,d.sidelab),l=e.w-2*d.GBorder-Math.abs(d.sidelab),h=1.5*t.text_h,c=e.y+d.GBorder+d.toplab*(h+d.GBorder),x=n;x<=r;x++){var m=c+h*x;(b=e.items[x]).selected=!1,s.inrect(t.xpos,t.ypos,a,m,l,h)&&(b.selected=!0)}u(t,e)}else if("mouseup"===i.type)1===i.which?void 0!==e.drag_x&&void 0!==e.drag_y?(e.drag_x=void 0,e.drag_y=void 0):f(t,e):3===i.which&&function(t,e){s.onWidgetLayer(t,function(){s.erase_window(t)}),t.menu=void 0,t.widget=null,!t.menu&&e.finalize&&e.finalize()}(t,e);else if("mousedown"===i.type)i.preventDefault(),1===i.which?t.xpos>e.x&&t.xpos<e.x+e.w&&t.ypos>e.y&&t.ypos<e.y+1.5*t.text_h&&(e.drag_x=t.xpos,e.drag_y=t.ypos):2===i.which&&f(t,e);else if("keydown"===i.type&&t.menu){e=t.menu;i.preventDefault();var p=o.getKeyCode(i);if(13===p)f(t,e);else if(38===p){for(x=n;x<r;x++){if((b=e.items[x]).selected){b.selected=!1,void 0!==e.items[x-1]&&(e.items[x-1].selected=!0);break}x===n&&0!==n?(e.queue.pop(),e.queue.unshift(n-1),u(t,e),e.items[r-1].selected=!0):0===n&&!0===e.items[n].selected&&(u(t,e),e.items[0].selected=!0)}u(t,e)}else if(40===p){for(x=n;x<r;x++){if((b=e.items[x]).selected){b.selected=!1,void 0!==e.items[x+1]&&(e.items[x+1].selected=!0);break}if(x===r-1){var y=r+1;r+1===e.items.length&&(y=0),e.queue.shift(),e.queue.push(y),e.items[r].selected=!1,e.items[y].selected=!0,u(t,e)}}u(t,e)}else if(p>=48&&p<=57||p>=65&&p<=90){var v=String.fromCharCode(p).toUpperCase();void 0===e.keypresses?e.keypresses=v:e.keypresses=e.keypresses+v;var _=0;for(x=0;x<e.items.length;x++){var b;(b=e.items[x]).selected=!1,b.text&&(0===b.text.toUpperCase().indexOf(e.keypresses)&&(0===_&&(b.selected=!0),_++))}0===_?(e.keypresses=void 0,u(t,e)):1===_?f(t,e):u(t,e)}}}function m(t,e,i){var n,o=!0;return n=e/t,t>0?n>i.tL?o=!1:n>i.tE&&(i.tE=n):t<0?n<i.tE?o=!1:n<i.tL&&(i.tL=n):e>0&&(o=!1),o}function p(t,e,i,n,r,a,s,l){if(e<0&&(e=0),i<0&&(i=0),n<0&&(n=0),r<0&&(r=0),l&&(t.lineWidth=l),s&&(t.strokeStyle=s),t.lineWidth%2==1&&(e===n&&(n=e=Math.floor(e)+.5),i===r&&(r=i=Math.floor(i)+.5)),a&&a.mode){if("dashed"===a.mode){if(o.dashOn(t,a.on,a.off))t.beginPath(),t.moveTo(e,i),t.lineTo(n,r),t.stroke(),o.dashOff(t),t.beginPath();else{if(t.beginPath(),i===r){var h=Math.min(e,n);for(n=Math.max(e,n);h<n;)t.moveTo(h,i),t.lineTo(h+a.on,i),t.stroke(),h+=a.on+a.off}else{if(e!==n)throw"Only horizontal or vertical dashed lines are supported";var c=Math.min(i,r);for(r=Math.max(i,r);c<r;)t.moveTo(e,c),t.lineTo(e,c+a.on),t.stroke(),c+=a.on+a.off}t.beginPath()}}else if("xor"===a.mode)if("undefined"==typeof Uint8ClampedArray)t.beginPath(),t.moveTo(e,i),t.lineTo(n,r),t.stroke(),t.beginPath();else{var d=0,u=0;if(i===r)d=Math.abs(n-e),u=l,e=Math.min(e,n);else{if(e!==n)throw"Only horizontal and vertical lines can be drawn with XOR";d=l,u=Math.abs(r-i),i=Math.min(i,r)}if(0===d||0===u)return;e=Math.floor(e),i=Math.floor(i);for(var f=t.getImageData(e,i,d,u),x=f.data,m=0,p=x.length;m<p;m+=4)x[m]=255-x[m],x[m+1]=255-x[m+1],x[m+2]=255-x[m+2],x[m+3]=255;t.putImageData(f,e,i),t.clearRect(0,0,1,1)}}else t.beginPath(),t.moveTo(e,i),t.lineTo(n,r),t.stroke(),t.beginPath()}function y(t,e,i,n,o){v(t,e,o),i&&(t.strokeStyle=i),n&&(t.fillStyle=n),t.fill(),t.closePath()}function v(t,e,i){if(!(e.length<1)){var n=e[0].x,o=e[0].y;t.lineWidth=i||1,t.beginPath(),t.moveTo(n,o);for(var r=0;r<e.length;r++)n=e[r].x,o=e[r].y,t.lineTo(n,o)}}function _(t){return Math.floor(Math.round(t/100*255))}function b(t,e,i){return"rgb("+Math.round(t)+", "+Math.round(e)+", "+Math.round(i)+")"}function g(t,e){var i,n;if(".000000"===t.substring(5,8))i=4;else for(i=t.length-1;"0"===t[i];)i-=1;for(n=0;" "===t[n]&&(i-n+1>5||e);)n+=1;var o=t.substring(n,i+1);return-1===o.indexOf(".")&&(o+="."),o}function w(t,e,i,n,o,r){var a=new Uint32Array(e);o||(o=e.width),r||(r=e.height),i||(i=0),n||(n=0);for(var s=t.width,l=t.height,h=t.getContext("2d"),c=h.createImageData(s,l),d=new ArrayBuffer(c.data.length),u=new Uint8ClampedArray(d),f=new Uint32Array(d),x=o/s,m=r/l,p=0,y=0,v=0,_=0;_<f.length;_++)p=Math.round(Math.floor(_%s)*x)+i,y=Math.round(Math.floor(_/s)*m)+n,v=Math.floor(y*e.width+p),f[_]=a[v];c.data.set(u),h.putImageData(c,0,0)}s.menu=function(t,e){var i=1.5*t.text_h,n=t.canvas.height-70,o=1.5*t.text_h,r=Math.floor(n/o);if(r>=e.items.length?d.n_show=e.items.length:d.n_show=r,e){if(!t.widget){e.x=t.xpos,e.y=t.ypos,e.val=0,e.h=2*d.GBorder+i*d.n_show+d.toplab*(i+d.GBorder)-1,e.y=e.y-((d.toplab+Math.max(1,e.val)-.5)*i+(1+d.toplab)*d.GBorder)+1;for(var a=e.title.length,s=0,l=0;l<e.items.length;l++){var h=e.items[l];a=Math.max(a,h.text.length),"checkbox"===h.style&&(a+=2),"separator"===h.style&&(a+=2),h.checked&&"checkbox"!==h.style&&(s=i*l)}e.queue=[];for(var c=0;c<d.n_show;c++)e.queue.push(c);e.y=e.y-s,a+=2,a*=t.text_w,e.w=2*d.GBorder+Math.abs(d.sidelab)+a-1,e.x=e.x-e.w/2,t.menu=e,t.widget={type:"MENU",callback:function(i){x(t,e,i)}}}u(t,e)}},s.widgetbox=function(t,e,i,n,o,r,a,l,h,c){if(s.shadowbox(t,e,i,n,o,1,2,"",.75),c){var d=c.length;d=Math.min(d,n/t.text_w);var u=e+(n-(d=Math.max(d,1))*t.text_w)/2,f=(i+=3)+(a-i+.7*t.text_h)/2;s.text(t,u,f,c,t.xwfg)}if(l>0&&h>0){var x=t.active_canvas.getContext("2d");s.LEGACY_RENDER?(x.fillStyle=t.bg,x.fillRect(r,a,l,h)):(x.save(),x.globalAlpha=.1,x.fillStyle=t.bg,x.fillRect(r,a,l,h),x.restore())}},s.text=function(t,e,i,n,o){var r=t.active_canvas.getContext("2d");if(e=Math.max(0,e),i=Math.max(0,i),e<0||i<0)throw"On No!";r.textBaseline="bottom",r.textAlign="left",r.font=t.font.font,r.fillStyle=void 0===o?t.fg:o,r.fillText(n,e,i)},s.getcolor=function(t,e,i){for(var n=0;n<6&&0===e[n+1].pos;n++);for(;i>e[n].pos&&n<6;)n++;if(0===n||i>=e[n].pos)return b(_(e[n].red),_(e[n].green),_(e[n].blue));var o=_(100*((i-e[n-1].pos)/(e[n].pos-e[n-1].pos))),r=255-o;return b(o*(e[n].red/100)+r*(e[n-1].red/100),o*(e[n].green/100)+r*(e[n-1].green/100),o*(e[n].blue/100)+r*(e[n-1].blue/100))},s.redraw_warpbox=function(t){t.warpbox&&(t._animationFrameHandle&&cancelAnimFrame(t._animationFrameHandle),t._animationFrameHandle=requestAnimFrame(function(){!function(t){t._animationFrameHandle=void 0;var e=t.warpbox;t.active_canvas.getContext("2d");if(!e)return;if(t.xpos>=e.xmin&&t.xpos<=e.xmax&&t.ypos>=e.ymin&&t.ypos<=e.ymax){e.xl=t.xpos,e.yl=t.ypos;var i=Math.min(e.xo,e.xl),n=Math.min(e.yo,e.yl),o=Math.abs(e.xl-e.xo),r=Math.abs(e.yl-e.yo);if(0===o||0===r)return;"vertical"===e.mode?(i=t.l,o=t.r-t.l):"horizontal"===e.mode&&(n=t.t,r=t.b-t.t),s.onWidgetLayer(t,function(){s.erase_window(t),s.draw_box(t,"xor",i,n,o,r,e.style.opacity,e.style.fill_color)})}}(t)}))},s.format_g=function(t,e,i,n){e=Math.min(e,i+7);var o=Math.abs(t).toString(),r=o.indexOf(".");-1===r&&(r=(o+=".").length);var a=0,l=o.indexOf("e");-1!==l&&(a=parseInt(o.slice(l+1,o.length),10),o=o.slice(0,l));for(var h=Math.min(i-(o.length-r)+1,i),c=0;c<h;c++)o+="0";if(0!==t)if(Math.abs(t)<1)if("0."===o.slice(0,2))for(c=2;c<o.length;c++){if("0"!==o[c]){o="0."+o.slice(c,c+i);break}a-=1}else o=o.slice(0,i+2);else if(r>i){a=Math.max(0,r-1);o=o[0]+"."+o.slice(1,i+1)}else o=o.slice(0,i+2);if(0===a)o+="    ";else{var d=s.pad(Math.abs(a).toString(),2,"0");o=a<0?o+"E-"+d:o+"E+"+d}return o=t<0?"-"+o:" "+o},s.format_f=function(t,e,i){i=Math.max(Math.min(i,20),0);var n=t.toFixed(i).toString();return n=s.pad(n,e+i," ")},s.pad=function(t,e,i){for(;t.length<e;)t=i+t;return t},s.legacy_shadowbox=function(t,e,i,n,o,r,l,h){for(var c=h.length,d=0,u=0,f=0,x=[],m=0;m<11;m++)x[m]={x:0,y:0};var p=!(1===l||-1===l);r===s.L_ArrowLeft||s.L_ArrowUp;if(0!==l&&s.GBorder>0&&(f=a.trunc(Math.min(n,o)/3),f=Math.max(1,Math.min(f,s.GBorder))),f>0){switch(x[0].x=x[1].x=e,x[8].x=x[9].x=e+n,x[1].y=x[8].y=i,x[0].y=x[9].y=i+o,r){case s.L_ArrowLeft:x[0].y=x[1].y=i+a.trunc(o/2),e+=2,--n;break;case s.L_ArrowRight:x[8].y=x[9].y=i+a.trunc(o/2),--e,--n;break;case s.L_ArrowUp:x[1].x=x[8].x=e+a.trunc(n/2),i+=2,--o;break;case s.L_ArrowDown:x[0].x=x[9].x=e+a.trunc(n/2),--i,--o}x[2]=x[8],x[10]=x[0],e+=f,i+=f,n-=2*f,o-=2*f}switch(x[4].x=x[5].x=e,x[3].x=x[6].x=e+n,x[3].y=x[4].y=i,x[5].y=x[6].y=i+o,r){case s.L_ArrowLeft:x[4].y=x[5].y=i+a.trunc(o/2);break;case s.L_ArrowRight:x[3].y=x[6].y=i+a.trunc(o/2);break;case s.L_ArrowUp:x[3].x=x[4].x=e+a.trunc(n/2);break;case s.L_ArrowDown:x[5].x=x[6].x=e+a.trunc(n/2)}x[7]=x[3];var v=t.active_canvas.getContext("2d");f>0&&(v.fillStyle=l>0?t.xwts:t.xwbs,y(v,x.slice(0,7)),v.fillStyle=l<0?t.xwts:t.xwbs,y(v,x.slice(5,11))),p&&(v.fillStyle=t.xwbg,y(v,x.slice(3,8))),v.fillStyle=t.xwfg,v.textBaseline="alphabetic",p&&c>0&&(c=Math.min(c,a.trunc(n/t.text_w)),c=Math.max(c,1),d=e+a.trunc((n-c*t.text_w)/2),u=i+a.trunc((o+.7*t.text_h)/2),v.fillText(h,d,u))},s.sigplot_shadowbox=function(t,e,i,n,o,r,l,h,c){var d=t.active_canvas.getContext("2d"),u=h.length,f=l<0?t.xwts:t.xwbs;c=c||1;for(var x=[],m=0;m<11;m++)x[m]={x:0,y:0};switch(r){case s.L_ArrowLeft:case s.L_ArrowRight:case s.L_ArrowUp:case s.L_ArrowDown:x=s.chevron(r,e,i,n,o);d.fillStyle=l>0?t.xwts:t.xwbs,y(d,x.slice(0,6));break;default:s.draw_round_box(t,f,e,i,n,o,c,t.xwbg,5,t.xwbs)}if(d.fillStyle=t.xwfg,d.textBaseline="alphabetic",!(1===l||-1===l)&&u>0){u=Math.min(u,a.trunc(n/t.text_w)),u=Math.max(u,1);var p=e+a.trunc((n-u*t.text_w)/2),v=i+a.trunc((o+.7*t.text_h)/2);d.fillText(h,p,v)}},s.LEGACY_RENDER?s.shadowbox=s.legacy_shadowbox:s.shadowbox=s.sigplot_shadowbox,s.chevron=function(t,e,i,n,o,r){var l=Math.min(n,o);r||(r=.25*l);for(var h=[],c=0;c<6;c++)h[c]={x:0,y:0};var d=a.trunc((n-l)/2+l/4-r/2.828),u=a.trunc((o-l)/2+l/4-r/2.828);switch(t){case s.L_ArrowLeft:h[0].x=e+d,h[0].y=i+a.trunc(l/2),h[1].x=e+d+a.trunc(l/2),h[1].y=i,h[2].x=e+d+a.trunc(l/2+r/1.414),h[2].y=i+a.trunc(r/1.414),h[3].x=e+d+a.trunc(2*r/1.414),h[3].y=i+a.trunc(l/2),h[4].x=e+d+a.trunc(l/2+r/1.414),h[4].y=i+o-a.trunc(r/1.414),h[5].x=e+d+a.trunc(l/2),h[5].y=i+l;break;case s.L_ArrowRight:h[0].x=e+n-d,h[0].y=i+a.trunc(l/2),h[1].x=e+n-d-a.trunc(l/2),h[1].y=i,h[2].x=e+n-d-a.trunc(l/2+r/1.414),h[2].y=i+a.trunc(r/1.414),h[3].x=e+n-d-a.trunc(2*r/1.414),h[3].y=i+a.trunc(l/2),h[4].x=e+n-d-a.trunc(l/2+r/1.414),h[4].y=i+o-a.trunc(r/1.414),h[5].x=e+n-d-a.trunc(l/2),h[5].y=i+l;break;case s.L_ArrowUp:h[0].x=e+a.trunc(l/2),h[0].y=i+u,h[1].x=e,h[1].y=i+u+a.trunc(l/2),h[2].x=e+a.trunc(r/1.414),h[2].y=i+u+a.trunc(l/2+r/1.414),h[3].x=e+a.trunc(l/2),h[3].y=i+u+a.trunc(2*r/1.414),h[4].x=e+n-a.trunc(r/1.414),h[4].y=i+u+a.trunc(l/2+r/1.414),h[5].x=e+l,h[5].y=i+u+a.trunc(l/2);break;case s.L_ArrowDown:h[0].x=e+a.trunc(l/2),h[0].y=i+o-u,h[1].x=e,h[1].y=i+o-u-a.trunc(l/2),h[2].x=e+a.trunc(r/1.414),h[2].y=i+o-u-a.trunc(l/2+r/1.414),h[3].x=e+a.trunc(l/2),h[3].y=i+o-u-a.trunc(2*r/1.414),h[4].x=e+n-a.trunc(r/1.414),h[4].y=i+o-u-a.trunc(l/2+r/1.414),h[5].x=e+l,h[5].y=i+o-u-a.trunc(l/2)}return h},s.ifevent=function(t,e){t.button_press=0,t.button_release=0,t.state_mask=0;var i=e.target.getBoundingClientRect(),n=void 0===e.offsetX?e.pageX-i.left-window.scrollX:e.offsetX,o=void 0===e.offsetX?e.pageY-i.top-window.scrollY:e.offsetY;switch(e.type){case"mousedown":switch(t.xpos=a.bound(n,0,t.width),t.ypos=a.bound(o,0,t.height),e.which){case 1:t.button_press=1;break;case 2:t.button_press=2;break;case 3:t.button_press=3;break;case 4:t.button_press=4;break;case 5:t.button_press=5}break;case"mouseup":switch(t.xpos=a.bound(n,0,t.width),t.ypos=a.bound(o,0,t.height),e.which){case 1:t.button_release=1;break;case 2:t.button_release=2;break;case 3:t.button_release=3;break;case 4:t.button_release=4;break;case 5:t.button_release=5}}},s.scroll_real2pix=function(t){return 0===t.range?{s1:t.a1,sw:t.a2-t.a1}:(e=(t.a2-t.a1)/t.trange,n=(i=t.a1+Math.floor(.5+(t.smin-t.tmin)*e))+Math.floor(.5+t.srange*e),i=i>t.a2-t.swmin?t.a2-t.swmin:Math.max(i,t.a1),n=n<t.a1+t.swmin?t.a1+t.swmin:Math.min(n,t.a2),{s1:i,sw:Math.max(n-i,t.swmin)});var e,i,n},s.redrawScrollbar=function(t,e,i){var n,o,r,l,h,c,d,u,f,x,m=e.active_canvas.getContext("2d"),p=s.scroll_real2pix(t);if(f=p.s1,x=p.sw,d=f,u=t.s1,r=t.x,l=t.y,h=t.w,c=t.h,1&t.origin){if(o=l+c/2,2&t.origin&&(u=h-u-t.sw,d=h-d-x),i===s.XW_DRAW){var y=t.arrow;s.shadowbox(e,r,l,y,c-1,s.L_ArrowLeft,2,"",0),s.shadowbox(e,r+h-y,l,y-1,c,s.L_ArrowRight,2,"",0)}if(s.LEGACY_RENDER)s.draw_line(e,e.fg,r+t.a1,o,r+t.a2,o),s.shadowbox(e,r+d,l,x+1,c,1,2,"",0);else(v=m.createLinearGradient(r+t.a1,0,r+t.a2,0)).addColorStop(0,e.xwbs),v.addColorStop(.5,e.xwts),v.addColorStop(1,e.xwbs),s.draw_line(e,v,r+t.a1,o,r+t.a2,o,1),(v=m.createLinearGradient(0,l,0,l+c)).addColorStop(.1,e.xwts),v.addColorStop(.75,e.xwbs),s.draw_round_box(e,e.xwbg,r+d,l,x+1,c,1,v,8,e.xwbs)}else{if(n=r+a.trunc(h/2),t.origin<=2&&(u=c-u-t.sw,d=c-d-x),i===s.XW_DRAW){y=t.arrow;s.shadowbox(e,r,l,h-1,y,s.L_ArrowUp,2,"",0),s.shadowbox(e,r,l+c-y,h-1,y,s.L_ArrowDown,2,"",0)}var v;if(s.LEGACY_RENDER)s.draw_line(e,e.fg,n,l+t.a1,n,l+t.a2),s.shadowbox(e,r,l+d,h,x+1,1,2,"",0);else(v=m.createLinearGradient(0,l+t.a1,0,l+t.a2)).addColorStop(0,e.xwbs),v.addColorStop(.5,e.xwts),v.addColorStop(1,e.xwbs),s.draw_line(e,v,n,l+t.a1,n,l+t.a2,1),(v=m.createLinearGradient(r,0,r+h,0)).addColorStop(.1,e.xwts),v.addColorStop(.75,e.xwbs),s.draw_round_box(e,e.xwbg,r-1,l+d,h,x+1,1,v,8,e.xwbs)}t.s1=f,t.sw=x},s.real_to_pixel=function(t,e,i,n){var o=s.origin(t.origin,4,t.stk[t.level]);if(0===o.xscl||0===o.yscl)return{x:0,y:0};var r=o.x1,a=o.y1,l=o.xmin,h=1/o.xscl,c=o.ymin,d=1/o.yscl,u=!1,f=!1;return null!==e&&(u=e>o.xmax||e<o.xmin,n&&(e=Math.min(e,o.xmax),e=Math.max(e,o.xmin)),e=Math.round((e-l)*h)+r),null!==i&&(f=i>o.ymin||i<o.ymax,n&&(i=Math.min(i,o.ymin),i=Math.max(i,o.ymax)),i=Math.round((i-c)*d)+a),{x:e=Math.round(e),y:i=Math.round(i),clipped_x:u,clipped_y:f,clipped:u||f}},s.pixel_to_real=function(t,e,i){var n=Math.min(t.r,Math.max(t.l,e)),o=Math.min(t.b,Math.max(t.t,i)),r=t.level;return{x:2!==t.origin&&3!==t.origin?t.stk[r].xmin+(n-t.stk[r].x1)*t.stk[r].xscl:t.stk[r].xmin+(t.stk[r].x2-n)*t.stk[r].xscl,y:t.origin>2?t.stk[r].ymin+(o-t.stk[r].y1)*t.stk[r].yscl:t.stk[r].ymin+(t.stk[r].y2-o)*t.stk[r].yscl}},s.colormap=function(t,e,i){t.pixel=new n(e,{ncolors:i})},s.colorbar=function(t,e,i,n,o){t.pixel.setRange(0,t.pixel.map.length);for(var r=1;r<o;r++){var a=Math.floor(t.pixel.map.length*(r-1)/o);s.draw_line(t,a,e,i+o-r,e+n,i+o-r)}s.draw_box(t,t.fg,e+.5,i,n,o)},s.legend_colorbar=function(t,e,i,n,o){for(var r=1;r<n;r++){var a=Math.floor(t.pixel.length*(r-1)/n);s.draw_line(t,a,e+n-r,i,e+n-r,i+o)}s.draw_box(t,t.fg,e+.5,i,n,o)};var M="undefined"==typeof Uint8ClampedArray?function(t,e,i,n,o,r,a,s,l,h,c,d,u){void 0===h&&(h=0),void 0===c&&(c=0),void 0===d&&(d=i.width-h),void 0===u&&(u=i.height-c),t._renderCanvas.width=i.width,t._renderCanvas.height=i.height;for(var f=t._renderCanvas.getContext("2d"),x=f.createImageData(t._renderCanvas.width,t._renderCanvas.height),m=new Uint8Array(i),p=0;p<i.height;++p)for(var y=0;y<i.width;++y){var v=4*(p*i.width+y);x.data[v]=m[v],x.data[v+1]=m[v+1],x.data[v+2]=m[v+2],x.data[v+3]=255}f.putImageData(x,0,0),e.save(),e.globalAlpha=n,o||(e.imageSmoothingEnabled=!1,e.mozImageSmoothingEnabled=!1,e.webkitImageSmoothingEnabled=!1),e.drawImage(t._renderCanvas,h,c,d,u,r,a,s,l),e.restore()}:function(t,e,i,n,o,r,a,s,l,h,c,d,u){if(void 0===h&&(h=0),void 0===c&&(c=0),void 0===d&&(d=i.width-h),void 0===u&&(u=i.height-c),i.width<32768&&i.height<32768){t._renderCanvas.width=i.width,t._renderCanvas.height=i.height;var f=t._renderCanvas.getContext("2d"),x=f.createImageData(t._renderCanvas.width,t._renderCanvas.height),m=new Uint8ClampedArray(i);x.data.set(m),f.putImageData(x,0,0)}else d<32768&&u<32768?(t._renderCanvas.width=d,t._renderCanvas.height=u,w(t._renderCanvas,i,h,c,d,u)):(t._renderCanvas.width=Math.min(2*s,i.width),t._renderCanvas.height=Math.min(2*l,i.height),w(t._renderCanvas,i,h,c,d,u),d=t._renderCanvas.width,u=t._renderCanvas.height),h=0,c=0;e.save(),e.globalAlpha=n,o||(e.imageSmoothingEnabled=!1,e.mozImageSmoothingEnabled=!1,e.webkitImageSmoothingEnabled=!1),e.drawImage(t._renderCanvas,h,c,d,u,r,a,s,l),e.restore()};s.shift_image_rows=function(t,e,i){var n=new Uint32Array(e);return i>0?(i*=e.width,n.set(n.subarray(0,n.length-i),i)):i<0&&(i=Math.abs(i)*e.width,n.set(n.subarray(i))),e},s.update_image_row=function(t,e,i,n,o,r,a){var s=new Uint32Array(e,n*e.width*4,e.width);t.pixel.setRange(o,r);for(var l=Math.max(1,i.length/e.width),h=0;h<e.width;h++){var c=Math.floor(h*l),d=i[c];if(l>1)if(1===a){for(var u=1;u<l;u++)d+=i[c+u];d/=l}else if(2===a)for(u=1;u<l;u++)d=Math.min(d,i[c+u]);else if(3===a)for(u=1;u<l;u++)d=Math.max(d,i[c+u]);else if(4===a)d=i[h];else if(5===a)for(u=1;u<l;u++)d=Math.max(Math.abs(d),Math.abs(i[c+u]));var f=t.pixel.getColor(d);f&&(s[h]=f.color)}return s},s.create_image=function(t,e,i,o,r,s,l,h){t.active_canvas.getContext("2d");t.pixel||(console.log("COLORMAP not initialized, defaulting to foreground"),t.pixel=new n(a.Mc.colormap[1].colors)),t.pixel.setRange(s,l),o=Math.ceil(o),r=Math.ceil(r);var c=new ArrayBuffer(o*r*4);c.width=o,c.height=r;var d=Math.max(1,i/o),u=new Uint32Array(c);if(e)for(var f=0;f<u.length;f++){var x,m;if(x=1===t.origin||4===t.origin?Math.floor(f%o):o-Math.floor(f%o)-1,1===(m=3===t.origin||4===t.origin?Math.floor(f/o):r-Math.floor(f/o)-1));var p=m*i+Math.floor(x*d),y=e[p];if(d>1)if(1===h){for(var v=1;v<d;v++)y+=e[p+v];y/=d}else if(2===h)for(v=1;v<d;v++)y=Math.min(y,e[p+v]);else if(3===h)for(v=1;v<d;v++)y=Math.max(y,e[p+v]);else if(4===h)y=e[p];else if(5===h)for(v=1;v<d;v++)y=Math.max(Math.abs(y),Math.abs(e[p+v]));var _=t.pixel.getColor(y);_&&(u[f]=_.color)}return c},s.put_image=function(t,e,i,o,r,s,l,h,c,d,u){var f,x,m=t.active_canvas.getContext("2d");t.pixel||(a.log.warn("COLORMAP not initialized, defaulting to foreground"),t.pixel=new n(a.Mc.colormap[1].colors)),f=r>0?i*r:-r,f=Math.floor(f),x=Math.floor(o*s);var p=new ArrayBuffer(f*x*4);p.width=f,p.height=x;for(var y=new Uint32Array(p),v=0;v<y.length;v++){var _=t.pixel.getColor(e[v]);_&&(y[v]=_.color)}return M(t,m,p,d,u,l,h,f,x),p},s.draw_image=function(t,e,i,n,o,r,a,l){var h=Math.max(i,t.stk[t.level].xmin),c=Math.min(o,t.stk[t.level].xmax),d=Math.max(n,t.stk[t.level].ymin),u=Math.min(r,t.stk[t.level].ymax);if(!(e.width<=1||0===Math.abs(o-i)||e.height<=1||0===Math.abs(r-n))){var f,x,m,p,y,v,_=e.width/(o-i),b=e.height/(r-n);h=Math.floor(h*_)/_,c=Math.ceil(c*_)/_,d=Math.floor(d*b)/b,u=Math.ceil(u*b)/b,1===t.origin?(m=Math.max(0,Math.floor((r-u)*b)),v=Math.min(e.height-m,Math.floor((u-d)*b)),p=Math.max(0,Math.floor((h-i)*_)),y=Math.min(e.width-p,Math.floor((c-h)*_)),f=s.real_to_pixel(t,h,u),x=s.real_to_pixel(t,c,d)):2===t.origin?(m=Math.max(0,Math.floor((r-u)*b)),v=Math.min(e.height-m,Math.floor((u-d)*b)),p=Math.max(0,Math.ceil((h-i)*_)),y=Math.min(e.width-p,Math.floor((c-h)*_)),f=s.real_to_pixel(t,c,u),x=s.real_to_pixel(t,h,d)):3===t.origin?(m=Math.max(0,Math.ceil((d-n)*b)),v=Math.min(e.height-m,Math.floor((u-d)*b)),p=Math.max(0,Math.ceil((h-i)*_)),y=Math.min(e.width-p,Math.floor((c-h)*_)),f=s.real_to_pixel(t,c,d),x=s.real_to_pixel(t,h,u)):4===t.origin&&(m=Math.max(0,Math.ceil((d-n)*b)),v=Math.min(e.height-m,Math.floor((u-d)*b)),p=Math.max(0,Math.floor((h-i)*_)),y=Math.min(e.width-p,Math.floor((c-h)*_)),f=s.real_to_pixel(t,h,d),x=s.real_to_pixel(t,c,u));var g=x.x-f.x,w=x.y-f.y;if(y=Math.max(1,y),v=Math.max(1,v),"number"==typeof l)l=(t.r-t.l)/y<=l;var k=t.active_canvas.getContext("2d");k.save(),k.beginPath(),k.rect(t.l,t.t,t.r-t.l,t.b-t.t),k.clip(),M(t,k,e,a,l,f.x,f.y,g,w,p,m,y,v),k.restore()}},t.exports=s}()},function(t,e,i){
/**
 * @license
 * File: bluefile.js
 * Copyright (c) 2012-2017, LGS Innovations Inc., All rights reserved.
 *
 * This file is part of SigPlot.
 *
 * Licensed to the LGS Innovations (LGS) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  LGS licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 *
 */
!function(){"use strict";var e=i(5);function n(){}navigator.userAgent.match(/(iPad|iPhone|iPod)/i);var o=function(){var t=new ArrayBuffer(4),e=new Uint32Array(t),i=new Uint8Array(t);if(e[0]=3735928559,239===i[0])return"LE";if(222===i[0])return"BE";throw new Error("unknown endianness")}(),r={S:1,C:2,V:3,Q:4,M:9,X:10,T:16,U:1,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9},a={P:.125,A:1,O:1,B:1,I:2,L:4,X:8,F:4,D:8},s={P:null,A:null,O:Uint8Array,B:Int8Array,I:Int16Array,L:Int32Array,X:null,F:Float32Array,D:Float64Array};var l={P:null,A:null,O:"getUint8",B:"getInt8",I:"getInt16",L:"getInt32",X:function(t,e,i){var n,o,r=Math.pow(2,53);i?(n=4,o=0):(n=0,o=4);var a=t.getInt32(e+n,i),s=t.getInt32(e+o,i)+u(32)*a;return s>=r?(window.console.info("Int is bigger than JS can represent."),1/0):s},F:"getFloat32",D:"getFloat64"},h=!0;try{var c=new Uint8Array(new ArrayBuffer(4));c[0]=66,c[1]=76,c[2]=85,c[3]=69,"BLUE"!==String.fromCharCode.apply(null,c)&&(h=!1)}catch(t){h=!1}function d(t){var e=new Uint8Array(t);if(h)return String.fromCharCode.apply(null,e);for(var i="",n=0;n<e.length;n++)i+=String.fromCharCode(e[n]);return i}function u(t){return t>=0&&t<31?1<<t:u[t]||(u[t]=Math.pow(2,t))}function f(t){var e=document.createElement("a");return e.href=t,{source:t,protocol:e.protocol.replace(":",""),host:e.hostname,port:e.port,query:e.search,params:function(){for(var t,i={},n=e.search.replace(/^\?/,"").split("&"),o=n.length,r=0;r<o;r++)n[r]&&(i[(t=n[r].split("="))[0]]=t[1]);return i}(),file:(e.pathname.match(/\/([^\/?#]+)$/i)||[null,""])[1],hash:e.hash.replace("#",""),path:e.pathname.replace(/^([^\/])/,"/$1"),relative:(e.href.match(/tps?:\/\/[^\/]+(.+)/)||[null,""])[1],segments:e.pathname.replace(/^\//,"").split("/")}}n.BlueHeader=function(t,i){if(this.options={ext_header_type:"dict"},e.update(this.options,i),this.buf=t,null!=this.buf){var n=new DataView(this.buf);this.version=d(this.buf.slice(0,4)),this.headrep=d(this.buf.slice(4,8)),this.datarep=d(this.buf.slice(8,12));var o="EEEI"===this.headrep,r="EEEI"===this.datarep;this.ext_start=n.getInt32(24,o),this.ext_size=n.getInt32(28,o),this.type=n.getUint32(48,o),this.class=this.type/1e3,this.format=d(this.buf.slice(52,54)),this.timecode=n.getFloat64(56,o),1===this.class?(this.xstart=n.getFloat64(256,o),this.xdelta=n.getFloat64(264,o),this.xunits=n.getInt32(272,o),this.yunits=n.getInt32(296,o),this.subsize=1):2===this.class&&(this.xstart=n.getFloat64(256,o),this.xdelta=n.getFloat64(264,o),this.xunits=n.getInt32(272,o),this.subsize=n.getInt32(276,o),this.ystart=n.getFloat64(280,o),this.ydelta=n.getFloat64(288,o),this.yunits=n.getInt32(296,o)),this.data_start=n.getFloat64(32,o),this.data_size=n.getFloat64(40,o);var a=this.data_start,s=this.data_start+this.data_size;this.ext_size&&(this.ext_header=this.unpack_keywords(this.buf,this.ext_size,512*this.ext_start,o)),this.setData(this.buf,a,s,r)}},n.BlueHeader.prototype={setData:function(t,e,i,n){if(1===this.class?(this.spa=r[this.format[0]],this.bps=a[this.format[1]],this.bpa=this.spa*this.bps,this.ape=1,this.bpe=this.ape*this.bpa):2===this.class&&(this.spa=r[this.format[0]],this.bps=a[this.format[1]],this.bpa=this.spa*this.bps,this.ape=this.subsize,this.bpe=this.ape*this.bpa),void 0===n&&(n="LE"===o),"LE"===o&&!n)throw"Not supported "+o+" "+n;if("BE"===o&&this.littleEndianData)throw"Not supported "+o+" "+n;t?(this.dview=e&&i?this.createArray(t,e,(i-e)/this.bps):this.createArray(t),this.size=this.dview.length/(this.spa*this.ape)):this.dview=this.createArray(null,null,this.size)},unpack_keywords:function(t,e,i,n){var o,r,a,s,h,c,u,f,x,m=[],p={},y={},v=0;window.buf=t,t=t.slice(i,t.byteLength);var _=new DataView(t);for(t=d(t);v<e;)x=v+8,o=_.getUint32(v,n),r=_.getInt16(v+4,n),a=_.getInt8(v+6,n),s=t.slice(v+7,v+8),f=x+(u=o-r),h=t.slice(f,f+a),"A"===s?c=t.slice(x,x+u):l[s]?c="string"==typeof l[s]?_[l[s]](x,n):l[s](_,x,n):window.console.info("Unsupported keyword format "+s+" for tag "+h),void 0===p[h]?p[h]=1:(p[h]++,h=""+h+p[h]),y[h]=c,m.push({tag:h,value:c}),v+=o;var b=["dict","json",{},"XMTable","JSON","DICT"];for(var g in b)if(b[g]===this.options.ext_header_type)return y;return m},createArray:function(t,e,i){var n=s[this.format[1]];if(void 0===n)throw"unknown format "+this.format[1];return void 0===e&&(e=0),void 0===i&&(i=t.length||t.byteLength/a[this.format[1]]),t?(Array.isArray(t)&&Array.isArray(t[0])&&(t=[].concat.apply([],t)),new n(t,e,i)):new n(i)}},n.BlueFileReader=function(t){this.options=t},n.BlueFileReader.prototype={readheader:function(t,e){var i=this,o=new FileReader,r=t.webkitSlice(0,512);o.onloadend=function(t){return function(r){if(r.target.error)e(null);else{var a=o.result,s=new n.BlueHeader(a,i.options);s.file=t,e(s)}}}(t),o.readAsArrayBuffer(r)},read:function(t,e){var i=this,o=new FileReader;o.onloadend=function(t){return function(r){if(r.target.error)e(null);else{var a=o.result,s=new n.BlueHeader(a,i.options);s.file=t,s.file_name=t.name,e(s)}}}(t),o.readAsArrayBuffer(t)},read_http:function(t,e){var i=this,o=new XMLHttpRequest;o.open("GET",t,!0),o.responseType="arraybuffer",o.overrideMimeType("text/plain; charset=x-user-defined"),o.onload=function(r){if(4!==o.readyState||200!==o.status&&0!==o.status)e(null);else{var a=null;if(o.response){a=o.response;var s=new n.BlueHeader(a,i.options);f(t);var l=f(t);s.file_name=l.file,e(s)}else o.responseText&&function(t,e,i){i=i||1024;var n=0,o=new ArrayBuffer(t.length),r=new Uint8Array(o),a=function(){for(var s=n+i;n<s;n++)r[n]=255&t.charCodeAt(n);n>=t.length?e(o):setTimeout(a,0)};setTimeout(a,0)}(o.responseText,function(o){var r=new n.BlueHeader(o,i.options);f(t);var a=f(t);r.file_name=a.file,e(r)})}},o.onerror=function(t){e(null)},o.send(null)}},t.exports=n}()},function(t,e,i){var n;!function(o){var r=/^\s+/,a=/\s+$/,s=0,l=o.round,h=o.min,c=o.max,d=o.random;function u(t,e){if(t=t||"",e=e||{},t instanceof u)return t;if(!(this instanceof u))return new u(t,e);var i=function(t){var e={r:0,g:0,b:0},i=1,n=null,s=null,l=null,d=!1,u=!1;"string"==typeof t&&(t=function(t){t=t.replace(r,"").replace(a,"").toLowerCase();var e,i=!1;if(z[t])t=z[t],i=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};if(e=U.rgb.exec(t))return{r:e[1],g:e[2],b:e[3]};if(e=U.rgba.exec(t))return{r:e[1],g:e[2],b:e[3],a:e[4]};if(e=U.hsl.exec(t))return{h:e[1],s:e[2],l:e[3]};if(e=U.hsla.exec(t))return{h:e[1],s:e[2],l:e[3],a:e[4]};if(e=U.hsv.exec(t))return{h:e[1],s:e[2],v:e[3]};if(e=U.hsva.exec(t))return{h:e[1],s:e[2],v:e[3],a:e[4]};if(e=U.hex8.exec(t))return{r:I(e[1]),g:I(e[2]),b:I(e[3]),a:B(e[4]),format:i?"name":"hex8"};if(e=U.hex6.exec(t))return{r:I(e[1]),g:I(e[2]),b:I(e[3]),format:i?"name":"hex"};if(e=U.hex4.exec(t))return{r:I(e[1]+""+e[1]),g:I(e[2]+""+e[2]),b:I(e[3]+""+e[3]),a:B(e[4]+""+e[4]),format:i?"name":"hex8"};if(e=U.hex3.exec(t))return{r:I(e[1]+""+e[1]),g:I(e[2]+""+e[2]),b:I(e[3]+""+e[3]),format:i?"name":"hex"};return!1}(t));"object"==typeof t&&(H(t.r)&&H(t.g)&&H(t.b)?(e=function(t,e,i){return{r:255*P(t,255),g:255*P(e,255),b:255*P(i,255)}}(t.r,t.g,t.b),d=!0,u="%"===String(t.r).substr(-1)?"prgb":"rgb"):H(t.h)&&H(t.s)&&H(t.v)?(n=N(t.s),s=N(t.v),e=function(t,e,i){t=6*P(t,360),e=P(e,100),i=P(i,100);var n=o.floor(t),r=t-n,a=i*(1-e),s=i*(1-r*e),l=i*(1-(1-r)*e),h=n%6;return{r:255*[i,s,a,a,l,i][h],g:255*[l,i,i,s,a,a][h],b:255*[a,a,l,i,i,s][h]}}(t.h,n,s),d=!0,u="hsv"):H(t.h)&&H(t.s)&&H(t.l)&&(n=N(t.s),l=N(t.l),e=function(t,e,i){var n,o,r;function a(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}if(t=P(t,360),e=P(e,100),i=P(i,100),0===e)n=o=r=i;else{var s=i<.5?i*(1+e):i+e-i*e,l=2*i-s;n=a(l,s,t+1/3),o=a(l,s,t),r=a(l,s,t-1/3)}return{r:255*n,g:255*o,b:255*r}}(t.h,n,l),d=!0,u="hsl"),t.hasOwnProperty("a")&&(i=t.a));return i=T(i),{ok:d,format:t.format||u,r:h(255,c(e.r,0)),g:h(255,c(e.g,0)),b:h(255,c(e.b,0)),a:i}}(t);this._originalInput=t,this._r=i.r,this._g=i.g,this._b=i.b,this._a=i.a,this._roundA=l(100*this._a)/100,this._format=e.format||i.format,this._gradientType=e.gradientType,this._r<1&&(this._r=l(this._r)),this._g<1&&(this._g=l(this._g)),this._b<1&&(this._b=l(this._b)),this._ok=i.ok,this._tc_id=s++}function f(t,e,i){t=P(t,255),e=P(e,255),i=P(i,255);var n,o,r=c(t,e,i),a=h(t,e,i),s=(r+a)/2;if(r==a)n=o=0;else{var l=r-a;switch(o=s>.5?l/(2-r-a):l/(r+a),r){case t:n=(e-i)/l+(e<i?6:0);break;case e:n=(i-t)/l+2;break;case i:n=(t-e)/l+4}n/=6}return{h:n,s:o,l:s}}function x(t,e,i){t=P(t,255),e=P(e,255),i=P(i,255);var n,o,r=c(t,e,i),a=h(t,e,i),s=r,l=r-a;if(o=0===r?0:l/r,r==a)n=0;else{switch(r){case t:n=(e-i)/l+(e<i?6:0);break;case e:n=(i-t)/l+2;break;case i:n=(t-e)/l+4}n/=6}return{h:n,s:o,v:s}}function m(t,e,i,n){var o=[O(l(t).toString(16)),O(l(e).toString(16)),O(l(i).toString(16))];return n&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function p(t,e,i,n){return[O(D(n)),O(l(t).toString(16)),O(l(e).toString(16)),O(l(i).toString(16))].join("")}function y(t,e){e=0===e?0:e||10;var i=u(t).toHsl();return i.s-=e/100,i.s=R(i.s),u(i)}function v(t,e){e=0===e?0:e||10;var i=u(t).toHsl();return i.s+=e/100,i.s=R(i.s),u(i)}function _(t){return u(t).desaturate(100)}function b(t,e){e=0===e?0:e||10;var i=u(t).toHsl();return i.l+=e/100,i.l=R(i.l),u(i)}function g(t,e){e=0===e?0:e||10;var i=u(t).toRgb();return i.r=c(0,h(255,i.r-l(-e/100*255))),i.g=c(0,h(255,i.g-l(-e/100*255))),i.b=c(0,h(255,i.b-l(-e/100*255))),u(i)}function w(t,e){e=0===e?0:e||10;var i=u(t).toHsl();return i.l-=e/100,i.l=R(i.l),u(i)}function M(t,e){var i=u(t).toHsl(),n=(i.h+e)%360;return i.h=n<0?360+n:n,u(i)}function k(t){var e=u(t).toHsl();return e.h=(e.h+180)%360,u(e)}function S(t){var e=u(t).toHsl(),i=e.h;return[u(t),u({h:(i+120)%360,s:e.s,l:e.l}),u({h:(i+240)%360,s:e.s,l:e.l})]}function E(t){var e=u(t).toHsl(),i=e.h;return[u(t),u({h:(i+90)%360,s:e.s,l:e.l}),u({h:(i+180)%360,s:e.s,l:e.l}),u({h:(i+270)%360,s:e.s,l:e.l})]}function A(t){var e=u(t).toHsl(),i=e.h;return[u(t),u({h:(i+72)%360,s:e.s,l:e.l}),u({h:(i+216)%360,s:e.s,l:e.l})]}function C(t,e,i){e=e||6,i=i||30;var n=u(t).toHsl(),o=360/i,r=[u(t)];for(n.h=(n.h-(o*e>>1)+720)%360;--e;)n.h=(n.h+o)%360,r.push(u(n));return r}function L(t,e){e=e||6;for(var i=u(t).toHsv(),n=i.h,o=i.s,r=i.v,a=[],s=1/e;e--;)a.push(u({h:n,s:o,v:r})),r=(r+s)%1;return a}u.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,e,i,n=this.toRgb();return t=n.r/255,e=n.g/255,i=n.b/255,.2126*(t<=.03928?t/12.92:o.pow((t+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:o.pow((e+.055)/1.055,2.4))+.0722*(i<=.03928?i/12.92:o.pow((i+.055)/1.055,2.4))},setAlpha:function(t){return this._a=T(t),this._roundA=l(100*this._a)/100,this},toHsv:function(){var t=x(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=x(this._r,this._g,this._b),e=l(360*t.h),i=l(100*t.s),n=l(100*t.v);return 1==this._a?"hsv("+e+", "+i+"%, "+n+"%)":"hsva("+e+", "+i+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var t=f(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=f(this._r,this._g,this._b),e=l(360*t.h),i=l(100*t.s),n=l(100*t.l);return 1==this._a?"hsl("+e+", "+i+"%, "+n+"%)":"hsla("+e+", "+i+"%, "+n+"%, "+this._roundA+")"},toHex:function(t){return m(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return function(t,e,i,n,o){var r=[O(l(t).toString(16)),O(l(e).toString(16)),O(l(i).toString(16)),O(D(n))];if(o&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)&&r[3].charAt(0)==r[3].charAt(1))return r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0)+r[3].charAt(0);return r.join("")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:l(this._r),g:l(this._g),b:l(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+l(this._r)+", "+l(this._g)+", "+l(this._b)+")":"rgba("+l(this._r)+", "+l(this._g)+", "+l(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:l(100*P(this._r,255))+"%",g:l(100*P(this._g,255))+"%",b:l(100*P(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+l(100*P(this._r,255))+"%, "+l(100*P(this._g,255))+"%, "+l(100*P(this._b,255))+"%)":"rgba("+l(100*P(this._r,255))+"%, "+l(100*P(this._g,255))+"%, "+l(100*P(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(G[m(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+p(this._r,this._g,this._b,this._a),i=e,n=this._gradientType?"GradientType = 1, ":"";if(t){var o=u(t);i="#"+p(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+e+",endColorstr="+i+")"},toString:function(t){var e=!!t;t=t||this._format;var i=!1,n=this._a<1&&this._a>=0;return e||!n||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(i=this.toRgbString()),"prgb"===t&&(i=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(i=this.toHexString()),"hex3"===t&&(i=this.toHexString(!0)),"hex4"===t&&(i=this.toHex8String(!0)),"hex8"===t&&(i=this.toHex8String()),"name"===t&&(i=this.toName()),"hsl"===t&&(i=this.toHslString()),"hsv"===t&&(i=this.toHsvString()),i||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return u(this.toString())},_applyModification:function(t,e){var i=t.apply(null,[this].concat([].slice.call(e)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(b,arguments)},brighten:function(){return this._applyModification(g,arguments)},darken:function(){return this._applyModification(w,arguments)},desaturate:function(){return this._applyModification(y,arguments)},saturate:function(){return this._applyModification(v,arguments)},greyscale:function(){return this._applyModification(_,arguments)},spin:function(){return this._applyModification(M,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(C,arguments)},complement:function(){return this._applyCombination(k,arguments)},monochromatic:function(){return this._applyCombination(L,arguments)},splitcomplement:function(){return this._applyCombination(A,arguments)},triad:function(){return this._applyCombination(S,arguments)},tetrad:function(){return this._applyCombination(E,arguments)}},u.fromRatio=function(t,e){if("object"==typeof t){var i={};for(var n in t)t.hasOwnProperty(n)&&(i[n]="a"===n?t[n]:N(t[n]));t=i}return u(t,e)},u.equals=function(t,e){return!(!t||!e)&&u(t).toRgbString()==u(e).toRgbString()},u.random=function(){return u.fromRatio({r:d(),g:d(),b:d()})},u.mix=function(t,e,i){i=0===i?0:i||50;var n=u(t).toRgb(),o=u(e).toRgb(),r=i/100;return u({r:(o.r-n.r)*r+n.r,g:(o.g-n.g)*r+n.g,b:(o.b-n.b)*r+n.b,a:(o.a-n.a)*r+n.a})},u.readability=function(t,e){var i=u(t),n=u(e);return(o.max(i.getLuminance(),n.getLuminance())+.05)/(o.min(i.getLuminance(),n.getLuminance())+.05)},u.isReadable=function(t,e,i){var n,o,r=u.readability(t,e);switch(o=!1,(n=function(t){var e,i;e=((t=t||{level:"AA",size:"small"}).level||"AA").toUpperCase(),i=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA");"small"!==i&&"large"!==i&&(i="small");return{level:e,size:i}}(i)).level+n.size){case"AAsmall":case"AAAlarge":o=r>=4.5;break;case"AAlarge":o=r>=3;break;case"AAAsmall":o=r>=7}return o},u.mostReadable=function(t,e,i){var n,o,r,a,s=null,l=0;o=(i=i||{}).includeFallbackColors,r=i.level,a=i.size;for(var h=0;h<e.length;h++)(n=u.readability(t,e[h]))>l&&(l=n,s=u(e[h]));return u.isReadable(t,s,{level:r,size:a})||!o?s:(i.includeFallbackColors=!1,u.mostReadable(t,["#fff","#000"],i))};var z=u.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},G=u.hexNames=function(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[t[i]]=i);return e}(z);function T(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function P(t,e){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(t)&&(t="100%");var i=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(t);return t=h(e,c(0,parseFloat(t))),i&&(t=parseInt(t*e,10)/100),o.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function R(t){return h(1,c(0,t))}function I(t){return parseInt(t,16)}function O(t){return 1==t.length?"0"+t:""+t}function N(t){return t<=1&&(t=100*t+"%"),t}function D(t){return o.round(255*parseFloat(t)).toString(16)}function B(t){return I(t)/255}var U=function(){var t="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",e="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",i="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?";return{CSS_UNIT:new RegExp(t),rgb:new RegExp("rgb"+e),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+e),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+e),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function H(t){return!!U.CSS_UNIT.exec(t)}void 0!==t&&t.exports?t.exports=u:void 0===(n=function(){return u}.call(e,i,e,t))||(t.exports=n)}(Math)},function(t,e,i){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var i,a,s=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),l=1;l<arguments.length;l++){for(var h in i=Object(arguments[l]))o.call(i,h)&&(s[h]=i[h]);if(n){a=n(i);for(var c=0;c<a.length;c++)r.call(i,a[c])&&(s[a[c]]=i[a[c]])}}return s}},function(t,e,i){"use strict";
/** @license React v16.5.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=i(9),o="function"==typeof Symbol&&Symbol.for,r=o?Symbol.for("react.element"):60103,a=o?Symbol.for("react.portal"):60106,s=o?Symbol.for("react.fragment"):60107,l=o?Symbol.for("react.strict_mode"):60108,h=o?Symbol.for("react.profiler"):60114,c=o?Symbol.for("react.provider"):60109,d=o?Symbol.for("react.context"):60110,u=o?Symbol.for("react.async_mode"):60111,f=o?Symbol.for("react.forward_ref"):60112;o&&Symbol.for("react.placeholder");var x="function"==typeof Symbol&&Symbol.iterator;function m(t){for(var e=arguments.length-1,i="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=0;n<e;n++)i+="&args[]="+encodeURIComponent(arguments[n+1]);!function(t,e,i,n,o,r,a,s){if(!t){if(t=void 0,void 0===e)t=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[i,n,o,r,a,s],h=0;(t=Error(e.replace(/%s/g,function(){return l[h++]}))).name="Invariant Violation"}throw t.framesToPop=1,t}}(!1,"Minified React error #"+t+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",i)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y={};function v(t,e,i){this.props=t,this.context=e,this.refs=y,this.updater=i||p}function _(){}function b(t,e,i){this.props=t,this.context=e,this.refs=y,this.updater=i||p}v.prototype.isReactComponent={},v.prototype.setState=function(t,e){"object"!=typeof t&&"function"!=typeof t&&null!=t&&m("85"),this.updater.enqueueSetState(this,t,e,"setState")},v.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},_.prototype=v.prototype;var g=b.prototype=new _;g.constructor=b,n(g,v.prototype),g.isPureReactComponent=!0;var w={current:null,currentDispatcher:null},M=Object.prototype.hasOwnProperty,k={key:!0,ref:!0,__self:!0,__source:!0};function S(t,e,i){var n=void 0,o={},a=null,s=null;if(null!=e)for(n in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(a=""+e.key),e)M.call(e,n)&&!k.hasOwnProperty(n)&&(o[n]=e[n]);var l=arguments.length-2;if(1===l)o.children=i;else if(1<l){for(var h=Array(l),c=0;c<l;c++)h[c]=arguments[c+2];o.children=h}if(t&&t.defaultProps)for(n in l=t.defaultProps)void 0===o[n]&&(o[n]=l[n]);return{$$typeof:r,type:t,key:a,ref:s,props:o,_owner:w.current}}function E(t){return"object"==typeof t&&null!==t&&t.$$typeof===r}var A=/\/+/g,C=[];function L(t,e,i,n){if(C.length){var o=C.pop();return o.result=t,o.keyPrefix=e,o.func=i,o.context=n,o.count=0,o}return{result:t,keyPrefix:e,func:i,context:n,count:0}}function z(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>C.length&&C.push(t)}function G(t,e,i){return null==t?0:function t(e,i,n,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case r:case a:l=!0}}if(l)return n(o,e,""===i?"."+T(e,0):i),1;if(l=0,i=""===i?".":i+":",Array.isArray(e))for(var h=0;h<e.length;h++){var c=i+T(s=e[h],h);l+=t(s,c,n,o)}else if(c=null===e||"object"!=typeof e?null:"function"==typeof(c=x&&e[x]||e["@@iterator"])?c:null,"function"==typeof c)for(e=c.call(e),h=0;!(s=e.next()).done;)l+=t(s=s.value,c=i+T(s,h++),n,o);else"object"===s&&m("31","[object Object]"==(n=""+e)?"object with keys {"+Object.keys(e).join(", ")+"}":n,"");return l}(t,"",e,i)}function T(t,e){return"object"==typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,function(t){return e[t]})}(t.key):e.toString(36)}function P(t,e){t.func.call(t.context,e,t.count++)}function R(t,e,i){var n=t.result,o=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?I(t,n,i,function(t){return t}):null!=t&&(E(t)&&(t=function(t,e){return{$$typeof:r,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,o+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(A,"$&/")+"/")+i)),n.push(t))}function I(t,e,i,n,o){var r="";null!=i&&(r=(""+i).replace(A,"$&/")+"/"),G(t,R,e=L(e,r,n,o)),z(e)}var O={Children:{map:function(t,e,i){if(null==t)return t;var n=[];return I(t,n,null,e,i),n},forEach:function(t,e,i){if(null==t)return t;G(t,P,e=L(null,null,e,i)),z(e)},count:function(t){return G(t,function(){return null},null)},toArray:function(t){var e=[];return I(t,e,null,function(t){return t}),e},only:function(t){return E(t)||m("143"),t}},createRef:function(){return{current:null}},Component:v,PureComponent:b,createContext:function(t,e){return void 0===e&&(e=null),(t={$$typeof:d,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,Provider:null,Consumer:null,unstable_read:null}).Provider={$$typeof:c,_context:t},t.Consumer=t,t.unstable_read=function(t,e){var i=w.currentDispatcher;return null===i&&m("277"),i.readContext(t,e)}.bind(null,t),t},forwardRef:function(t){return{$$typeof:f,render:t}},Fragment:s,StrictMode:l,unstable_AsyncMode:u,unstable_Profiler:h,createElement:S,cloneElement:function(t,e,i){(null===t||void 0===t)&&m("267",t);var o=void 0,a=n({},t.props),s=t.key,l=t.ref,h=t._owner;if(null!=e){void 0!==e.ref&&(l=e.ref,h=w.current),void 0!==e.key&&(s=""+e.key);var c=void 0;for(o in t.type&&t.type.defaultProps&&(c=t.type.defaultProps),e)M.call(e,o)&&!k.hasOwnProperty(o)&&(a[o]=void 0===e[o]&&void 0!==c?c[o]:e[o])}if(1===(o=arguments.length-2))a.children=i;else if(1<o){c=Array(o);for(var d=0;d<o;d++)c[d]=arguments[d+2];a.children=c}return{$$typeof:r,type:t.type,key:s,ref:l,props:a,_owner:h}},createFactory:function(t){var e=S.bind(null,t);return e.type=t,e},isValidElement:E,version:"16.5.2",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:w,assign:n}},N={default:O},D=N&&O||N;t.exports=D.default||D},function(t,e,i){"use strict";var n=i(12);function o(){}t.exports=function(){function t(t,e,i,o,r,a){if(a!==n){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var i={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};return i.checkPropTypes=o,i.PropTypes=i,i}},function(t,e,i){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e){var i,n=["webkit","Moz","ms","O"],o={};function r(t,e){var i,n=document.createElement(t||"div");for(i in e)n[i]=e[i];return n}function a(t){for(var e=1,i=arguments.length;e<i;e++)t.appendChild(arguments[e]);return t}var s=function(){var t=r("style");return a(document.getElementsByTagName("head")[0],t),t.sheet||t.styleSheet}();function l(t,e,n,r){var a=["opacity",e,~~(100*t),n,r].join("-"),l=.01+n/r*100,h=Math.max(1-(1-t)/e*(100-l),t),c=i.substring(0,i.indexOf("Animation")).toLowerCase(),d=c&&"-"+c+"-"||"";return o[a]||(s.insertRule("@"+d+"keyframes "+a+"{0%{opacity:"+h+"}"+l+"%{opacity:"+t+"}"+(l+.01)+"%{opacity:1}"+(l+e)%100+"%{opacity:"+t+"}100%{opacity:"+h+"}}",0),o[a]=1),a}function h(t,e){var i,o,r=t.style;if(void 0!==r[e])return e;for(e=e.charAt(0).toUpperCase()+e.slice(1),o=0;o<n.length;o++)if(void 0!==r[i=n[o]+e])return i}function c(t,e){for(var i in e)t.style[h(t,i)||i]=e[i];return t}function d(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)void 0===t[n]&&(t[n]=i[n])}return t}function u(t){for(var e={x:t.offsetLeft,y:t.offsetTop};t=t.offsetParent;)e.x+=t.offsetLeft,e.y+=t.offsetTop;return e}var f={lines:12,length:7,width:5,radius:10,rotate:0,color:"#000",speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto"},x=function t(e){if(!this.spin)return new t(e);this.opts=d(e||{},t.defaults,f)};x.defaults={},d(x.prototype,{spin:function(t){this.stop();var e,n,o=this,a=o.opts,s=o.el=c(r(0,{className:a.className}),{position:"relative",zIndex:a.zIndex}),l=a.radius+a.length+a.width;if(t&&(t.insertBefore(s,t.firstChild||null),n=u(t),e=u(s),c(s,{left:("auto"==a.left?n.x-e.x+(t.offsetWidth>>1):a.left+l)+"px",top:("auto"==a.top?n.y-e.y+(t.offsetHeight>>1):a.top+l)+"px"})),s.setAttribute("aria-role","progressbar"),o.lines(s,o.opts),!i){var h=0,d=a.fps,f=d/a.speed,x=(1-a.opacity)/(f*a.trail/100),m=f/a.lines;!function t(){h++;for(var e=a.lines;e;e--){var i=Math.max(1-(h+e*m)%f*x,a.opacity);o.opacity(s,a.lines-e,i,a)}o.timeout=o.el&&setTimeout(t,~~(1e3/d))}()}return o},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=void 0),this},lines:function(t,e){var n,o=0;function s(t,i){return c(r(),{position:"absolute",width:e.length+e.width+"px",height:e.width+"px",background:t,boxShadow:i,transformOrigin:"left",transform:"rotate("+~~(360/e.lines*o+e.rotate)+"deg) translate("+e.radius+"px,0)",borderRadius:(e.width>>1)+"px"})}for(;o<e.lines;o++)n=c(r(),{position:"absolute",top:1+~(e.width/2)+"px",transform:e.hwaccel?"translate3d(0,0,0)":"",opacity:e.opacity,animation:i&&l(e.opacity,e.trail,o,e.lines)+" "+1/e.speed+"s linear infinite"}),e.shadow&&a(n,c(s("#000","0 0 4px #000"),{top:"2px"})),a(t,a(n,s(e.color,"0 0 1px rgba(0,0,0,.1)")));return t},opacity:function(t,e,i){e<t.childNodes.length&&(t.childNodes[e].style.opacity=i)}}),function(){function t(t,e){return r("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',e)}var e=c(r("group"),{behavior:"url(#default#VML)"});!h(e,"transform")&&e.adj?(s.addRule(".spin-vml","behavior:url(#default#VML)"),x.prototype.lines=function(e,i){var n=i.length+i.width,o=2*n;function r(){return c(t("group",{coordsize:o+" "+o,coordorigin:-n+" "+-n}),{width:o,height:o})}var s,l=2*-(i.width+i.length)+"px",h=c(r(),{position:"absolute",top:l,left:l});function d(e,o,s){a(h,a(c(r(),{rotation:360/i.lines*e+"deg",left:~~o}),a(c(t("roundrect",{arcsize:1}),{width:n,height:i.width,left:i.radius,top:-i.width>>1,filter:s}),t("fill",{color:i.color,opacity:i.opacity}),t("stroke",{opacity:0}))))}if(i.shadow)for(s=1;s<=i.lines;s++)d(s,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(s=1;s<=i.lines;s++)d(s);return a(e,h)},x.prototype.opacity=function(t,e,i,n){var o=t.firstChild;n=n.shadow&&n.lines||0,o&&e+n<o.childNodes.length&&(o=(o=(o=o.childNodes[e+n])&&o.firstChild)&&o.firstChild)&&(o.opacity=i)}):i=h(e,"animation")}(),t.exports=x},function(t,e){
/**
 * @license
 * File: matfile.js
 * Copyright (c) 2012-2017, LGS Innovations Inc., All rights reserved.
 *
 * This file is part of SigPlot.
 *
 * Licensed to the LGS Innovations (LGS) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  LGS licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */
!function(t){"use strict";navigator.userAgent.match(/(iPad|iPhone|iPod)/i);var e=1,i=116,n=117,o=124,r=125,a=127,s=128,l=129,h=133,c=136;!function(){var t=new ArrayBuffer(4),e=new Uint32Array(t),i=new Uint8Array(t);if(e[0]=3735928559,239===i[0])return"LE";if(222===i[0])return"BE";throw new Error("unknown endianness")}();var d={256:"MAT-file"},u={1:{name:"miINT8",size:1},2:{name:"miUINT8",size:1},3:{name:"miINT16",size:2},4:{name:"miUINT16",size:2},5:{name:"miINT32",size:4},6:{name:"miUINT32",size:4},7:{name:"miSINGLE",size:4},9:{name:"miDOUBLE",size:8},12:{name:"miINT64",size:8},13:{name:"miUINT64",size:8},14:{name:"miMATRIX",size:null},15:{name:"miCOMPRESSED",size:null},16:{name:"miUTF8",size:null},17:{name:"miUTF16",size:null},18:{name:"miUTF32",size:null}},f={1:"mxCELL_CLASS",2:"mxSTRUCT_CLASS",3:"mxOBJECT_CLASS",4:"mxCHAR_CLASS",5:"mxSPARSE_CLASS",6:"mxDOUBLE_CLASS",7:"mxSINGLE_CLASS",8:"mxINT8_CLASS",9:"mxUINT8_CLASS",10:"mxINT16_CLASS",11:"mxUINT16_CLASS",12:"mxINT32_CLASS",13:"mxUINT32_CLASS",14:"mxINT64_CLASS",15:"mxUINT64_CLASS"};Uint8Array,Int8Array,Int16Array,Int32Array,Float32Array,Float64Array;var x=!0;try{var m=new Uint8Array(new ArrayBuffer(4));m[0]=66,m[1]=76,m[2]=85,m[3]=69,"BLUE"!==String.fromCharCode.apply(null,m)&&(x=!1)}catch(t){x=!1}function p(t){var e=new Uint8Array(t);if(x)return String.fromCharCode.apply(null,e);for(var i="",n=0;n<e.length;n++)i+=String.fromCharCode(e[n]);return i}function y(t){return t>=0&&t<31?1<<t:y[t]||(y[t]=Math.pow(2,t))}function v(t,e,i,n){var o;switch(e){case"miINT8":case"miUINT8":o=t.getInt8(i,n);break;case"miINT16":o=t.getInt16(i,n);break;case"miUINT16":o=t.getUint16(i,n);break;case"miINT32":o=t.getInt32(i,n);break;case"miUINT32":o=t.getUint32(i,n);break;case"miSINGLE":o=t.getFloat32(i,n);break;case"miDOUBLE":o=t.getFloat64(i,n);break;case"miINT64":o=function(t,e,i){var n,o,r=Math.pow(2,53);i?(n=4,o=0):(n=0,o=4);var a=t.getInt32(e+n,i),s=t.getInt32(e+o,i)+y(32)*a;return s>=r?(window.console.info("Int is bigger than JS can represent."),1/0):s}(t,i,n);break;default:window.console.warn(e+" not supported at thsi time")}return o}function _(t,x){if(this.file=null,this.file_name=null,this.buf=t,null!=this.buf){var m=new DataView(this.buf);this.headerStr=p(this.buf.slice(e-1,i)),this.datarep=p(this.buf.slice(a-1,s));var y="IM"===this.datarep,_="IM"===this.datarep;this.headerList=this.headerStr.split(",").map(function(t){return t.trim()}),this.matfile=this.headerList[0],this.platform=this.headerList[1],this.createdOn=this.headerList[2],this.subsystemOffset=p(this.buf.slice(n-1,o)),this.version=m.getUint16(r-1,y),this.versionName=d[this.version],this.dataType=m.getUint32(l-1,y),this.dataTypeName=u[this.dataType].name,this.arraySize=m.getUint32(h-1,y);var b=c+1,g=m.getUint32(b-1,y),w=u[g].name,M=u[g].size,k=(v(m,w,(b+=4)-1,_),v(m,w,(b+=M)-1,_));b+=M;f[15&k];b+=M;var S=m.getUint32(b-1,_);b+=4;var E=u[S].name,A=u[S].size,C=(m.getUint32(b-1,_),v(m,E,(b+=4)-1,_));b+=A,C>1&&window.console.warn("Only 1D arrays are currently supported.");v(m,E,b-1,_);b+=M;var L=m.getUint32(b-1,_);b+=4;var z=0,G=!1;L>15&&(L&=255,G=!0,z=m.getUint16(b-5,_));var T=u[L].name;u[L].size;G||(z=v(m,T,b-1,_),b+=4);p(this.buf.slice(b-1,b+z-1));b+=z+(G?(4-z%4)%4:(8-z%8)%8),this.setData(this.buf,m,b,_)}}function b(t){var e=document.createElement("a");return e.href=t,{source:t,protocol:e.protocol.replace(":",""),host:e.hostname,port:e.port,query:e.search,params:function(){for(var t,i={},n=e.search.replace(/^\?/,"").split("&"),o=n.length,r=0;r<o;r++)n[r]&&(i[(t=n[r].split("="))[0]]=t[1]);return i}(),file:(e.pathname.match(/\/([^\/?#]+)$/i)||[null,""])[1],hash:e.hash.replace("#",""),path:e.pathname.replace(/^([^\/])/,"/$1"),relative:(e.href.match(/tps?:\/\/[^\/]+(.+)/)||[null,""])[1],segments:e.pathname.replace(/^\//,"").split("/")}}function g(t){this.options=t}_.prototype={setData:function(t,e,i,n){var o,r=e.getUint32(i-1,n),a=!1;r>15?(r&=255,a=!0,o=e.getUint16(i+1,2,n)):i+=4;var s=u[r].name,l=u[r].size;a||(o=e.getUint32(i-1,n),a=!1),i+=4,this.dview=function(t,e,i,n){var o,r=[];if(new DataView(t,e,i),"miINT8"===n)o=new Int8Array(t,e,i);else if("miUINT8"===n)o=new Uint8Array(t,e,i);else if("miINT16"===n)o=new Int16Array(t,e,i);else if("miUINT16"===n)o=new Uint16Array(t,e,i);else if("miINT32"===n)o=new Int32Array(t,e,i);else if("miUINT32"===n)o=new Uint32Array(t,e,i);else{if("miDOUBLE"!==n)return void window.console.warn("Array data type not supported yet.");o=new Float64Array(t,e,i)}return o.forEach(function(t){r.push(t)}),r}(t,i-1,o/l,s)}},g.prototype={readheader:function(t,e){var i=this,n=new FileReader,o=t.webkitSlice(0,116);n.onloadend=function(t){return function(o){if(o.target.error)e(null);else{var r=new _(n.result,i.options);r.file=t,e(r)}}}(t),n.readAsArrayBuffer(o)},read:function(t,e){var i=this,n=new FileReader;n.onloadend=function(t){return function(o){if(o.target.error)e(null);else{var r=new _(n.result,i.options);r.file=t,r.file_name=t.name,e(r)}}}(t),n.readAsArrayBuffer(t)},read_http:function(t,e){var i=this,n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.overrideMimeType("text/plain; charset=x-user-defined"),n.onload=function(o){if(4!==n.readyState||200!==n.status&&0!==n.status)e(null);else{if(n.response){var r=new _(n.response,i.options);b(t);var a=b(t);r.file_name=a.file,e(r)}else n.responseText&&function(t,e,i){i=i||1024;var n=0,o=new ArrayBuffer(t.length),r=new Uint8Array(o),a=function(){for(var s=n+i;n<s;n++)r[n]=255&t.charCodeAt(n);n>=t.length?e(o):setTimeout(a,0)};setTimeout(a,0)}(n.responseText,function(n){var o=new _(n,i.options);b(t);var r=b(t);o.file_name=r.file,e(o)})}},n.onerror=function(t){e(null)},n.send(null)}},t.MatHeader=t.MatHeader||_,t.MatFileReader=t.MatFileReader||g}(this)},function(t,e,i){var n,o;!function(r,a){"use strict";void 0===(o="function"==typeof(n=function(){var t=function(){},e="undefined",i=["trace","debug","info","warn","error"];function n(t,e){var i=t[e];if("function"==typeof i.bind)return i.bind(t);try{return Function.prototype.bind.call(i,t)}catch(e){return function(){return Function.prototype.apply.apply(i,[t,arguments])}}}function o(e,n){for(var o=0;o<i.length;o++){var r=i[o];this[r]=o<e?t:this.methodFactory(r,e,n)}this.log=this.debug}function r(i,r,a){return function(i){"debug"===i&&(i="log");return typeof console!==e&&(void 0!==console[i]?n(console,i):void 0!==console.log?n(console,"log"):t)}(i)||function(t,i,n){return function(){typeof console!==e&&(o.call(this,i,n),this[t].apply(this,arguments))}}.apply(this,arguments)}function a(t,n,a){var s,l=this,h="loglevel";function c(){var t;if(typeof window!==e){try{t=window.localStorage[h]}catch(t){}if(typeof t===e)try{var i=window.document.cookie,n=i.indexOf(encodeURIComponent(h)+"=");-1!==n&&(t=/^([^;]+)/.exec(i.slice(n))[1])}catch(t){}return void 0===l.levels[t]&&(t=void 0),t}}t&&(h+=":"+t),l.name=t,l.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},l.methodFactory=a||r,l.getLevel=function(){return s},l.setLevel=function(n,r){if("string"==typeof n&&void 0!==l.levels[n.toUpperCase()]&&(n=l.levels[n.toUpperCase()]),!("number"==typeof n&&n>=0&&n<=l.levels.SILENT))throw"log.setLevel() called with invalid level: "+n;if(s=n,!1!==r&&function(t){var n=(i[t]||"silent").toUpperCase();if(typeof window===e)return;try{return void(window.localStorage[h]=n)}catch(t){}try{window.document.cookie=encodeURIComponent(h)+"="+n+";"}catch(t){}}(n),o.call(l,n,t),typeof console===e&&n<l.levels.SILENT)return"No console available for logging"},l.setDefaultLevel=function(t){c()||l.setLevel(t,!1)},l.enableAll=function(t){l.setLevel(l.levels.TRACE,t)},l.disableAll=function(t){l.setLevel(l.levels.SILENT,t)};var d=c();null==d&&(d=null==n?"WARN":n),l.setLevel(d,!1)}var s=new a,l={};s.getLogger=function(t){if("string"!=typeof t||""===t)throw new TypeError("You must supply a name when creating a logger.");var e=l[t];return e||(e=l[t]=new a(t,s.getLevel(),s.methodFactory)),e};var h=typeof window!==e?window.log:void 0;return s.noConflict=function(){return typeof window!==e&&window.log===s&&(window.log=h),s},s.getLoggers=function(){return l},s})?n.call(e,i,e,t):n)||(t.exports=o)}()},function(t,e,i){!function(){var e=i(8);"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,e){"use strict";if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),n=1;n<arguments.length;n++){var o=arguments[n];if(null!=o)for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(i[r]=o[r])}return i},writable:!0,configurable:!0});var n=window.ColorMap=function(t,e){this.options={ncolors:500,alpha:255},this.options=Object.assign(this.options,e),this.map=[];this._low=0,this._high=1;var i=this.options.ncolors;this._fscale=i/(this._high-this._low);var n=1,o=1;t=JSON.parse(JSON.stringify(t)),t=this._parseColors(t),this.colors=t;var r=t[0],a=t[1],s=i*((t[1].pos-t[0].pos)/100);this.colorsInBlock=s;for(var l=1/s,h=0;h<i-2;h++){if(o>s){if(r=t[n],void 0===(a=t[n+1]))break;s=i*((a.pos-r.pos)/100);this.colorsInBlock=s;l=1/s,o=1;n+=1}this._addColor(this.interpolate(r,a,l*o)),o+=1}this._addColor(t[t.length-1]),this._addColor(t[0],!0)};n.prototype={_addColor:function(t,e){t.hex=this._rgbToHex(t.red,t.green,t.blue),t.color=t.alpha<<24|t.blue<<16|t.green<<8|t.red,e?this.map.unshift(t):this.map.push(t)},_parseColors:function(t){for(var i=0,n=t.length;i<n;i++){var o=t[i];if("string"==typeof o)t[i]=this._hexToRgb(o),o=(o=e(o)).toRgb(),t[i]={red:o.r,green:o.g,blue:o.b,alpha:this.options.alpha};else if(o.hasOwnProperty("color")){var r=e(o.color);r={red:(r=r.toRgb()).r,green:r.g,blue:r.b,alpha:this.options.alpha},o.hasOwnProperty("pos")&&(r.pos=o.pos),t[i]=r}else t[i].red=Math.floor(Math.round(o.red/100*255)),t[i].green=Math.floor(Math.round(o.green/100*255)),t[i].blue=Math.floor(Math.round(o.blue/100*255));t[i].hasOwnProperty("alpha")||(t[i].alpha=this.options.alpha)}return this._checkColorStops(t)},_checkColorStops:function(t){for(var e=0,i=0,n=t.length;i<n;i++){var o=t[i];if(o.hasOwnProperty("pos")){if(e)for(var r=(o.pos-0)/e,a=o.pos,s=1;s<=e;s++)t[i-s].pos=a-r,a-=r;e=0}else e+=1}if(e){a=100;t[t.length-1].pos=a,t[0].pos=0;for(r=(a-0)/(e-=1),i=t.length-1,s=1;s<e;s++)t[i-s].pos=a-r,a-=r}return t},_componentToHex:function(t){var e=t.toString(16);return 1===e.length?"0"+e:e},_rgbToHex:function(t,e,i){return"#"+this._componentToHex(t)+this._componentToHex(e)+this._componentToHex(i)},_hexToRgb:function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{red:parseInt(e[1],16),green:parseInt(e[2],16),blue:parseInt(e[3],16)}:null},getColor:function(t){var e=~~((t-this._low)*this._fscale);return e>this.map.length-1?e=this.map.length-1:e<0&&(e=0),this.map[e]},setRange:function(t,e){this._low===t&&this._high===e||(this._low=t,this._high=e,this._fscale=this.map.length/Math.abs(this._high-this._low))},interpolate:function(t,e,i){return{red:t.red+i*(e.red-t.red),green:t.green+i*(e.green-t.green),blue:t.blue+i*(e.blue-t.blue),alpha:t.alpha+i*(e.alpha-t.alpha)}}},t.exports=n}()},function(t,e){
/**
 * @license
 * File: CanvasInput.js
 *  CanvasInput v1.0.10
 *  http://goldfirestudios.com/blog/108/CanvasInput-HTML5-Canvas-Text-Input
 *
 *  (c) 2013, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  (c) 2013, Axios, Inc.
 *  Modifications made by Axios, Inc.
 *  axiosengineering.com
 *
 *  MIT License
 */
!function(){var e=[],i=window.CanvasInput=function(t){var i=this;t=t||{},i._canvas=t.canvas||null,i._ctx=i._canvas?i._canvas.getContext("2d"):null,i._x=t.x||0,i._y=t.y||0,i._extraX=t.extraX||0,i._extraY=t.extraY||0,i._fontSize=t.fontSize||14,i._fontFamily=t.fontFamily||"Arial",i._fontColor=t.fontColor||"#000",i._placeHolderColor=t.placeHolderColor||"#bfbebd",i._fontWeight=t.fontWeight||"normal",i._fontStyle=t.fontStyle||"normal",i._readonly=t.readonly||!1,i._maxlength=t.maxlength||null,i._width=t.width||150,i._height=t.height||i._fontSize,i._padding=t.padding>=0?t.padding:5,i._borderWidth=t.borderWidth>=0?t.borderWidth:1,i._borderColor=t.borderColor||"#959595",i._borderRadius=t.borderRadius>=0?t.borderRadius:3,i._backgroundImage=t.backgroundImage||"",i._boxShadow=t.boxShadow||"1px 1px 0px rgba(255, 255, 255, 1)",i._innerShadow=t.innerShadow||"0px 0px 4px rgba(0, 0, 0, 0.4)",i._selectionColor=t.selectionColor||"rgba(179, 212, 253, 0.8)",i._placeHolder=t.placeHolder||"",i._value=t.value||i._placeHolder,i._onsubmit=t.onsubmit||function(){},i._onkeydown=t.onkeydown||function(){},i._onkeyup=t.onkeyup||function(){},i._onfocus=t.onfocus||function(){},i._onblur=t.onblur||function(){},i._cursor=!1,i._cursorPos=0,i._hasFocus=!1,i._selection=[0,0],i._wasOver=!1,i._renderOnReturn=void 0===t.renderOnReturn||t.renderOnReturn,i._disableBlur=t.disableBlur||!1,i._tabToClear=t.tabToClear||!1,i.boxShadow(i._boxShadow,!0),i._calcWH(),i._renderCanvas=document.createElement("canvas"),i._renderCanvas.setAttribute("width",i.outerW),i._renderCanvas.setAttribute("height",i.outerH),i._renderCtx=i._renderCanvas.getContext("2d"),i._shadowCanvas=document.createElement("canvas"),i._shadowCanvas.setAttribute("width",i._width+2*i._padding),i._shadowCanvas.setAttribute("height",i._height+2*i._padding),i._shadowCtx=i._shadowCanvas.getContext("2d"),void 0!==t.backgroundGradient?(i._backgroundColor=i._renderCtx.createLinearGradient(0,0,0,i.outerH),i._backgroundColor.addColorStop(0,t.backgroundGradient[0]),i._backgroundColor.addColorStop(1,t.backgroundGradient[1])):i._backgroundColor=t.backgroundColor||"#fff",i._canvas&&(i.mousemoveCanvasListener=function(t){t=t||window.event,i.mousemove(t,i)},i._canvas.addEventListener("mousemove",i.mousemoveCanvasListener,!1),i.mousedownCanvasListener=function(t){t=t||window.event,i.mousedown(t,i)},i._canvas.addEventListener("mousedown",i.mousedownCanvasListener,!1),i.mouseupCanvasListener=function(t){t=t||window.event,i.mouseup(t,i)},i._canvas.addEventListener("mouseup",i.mouseupCanvasListener,!1)),i.mouseupWindowListener=function(t){t=t||window.event,i._hasFocus&&!i._mouseDown&&i.blur()},window.addEventListener("mouseup",i.mouseupWindowListener,!0),i.keydownWindowListener=function(t){t=t||window.event,i._hasFocus&&i.keydown(t,i)},window.addEventListener("keydown",i.keydownWindowListener,!1),i.keyupWindowListener=function(t){t=t||window.event,i._hasFocus&&i._onkeyup(t,i)},window.addEventListener("keyup",i.keyupWindowListener,!1),i.pasteWindowListener=function(t){if(t=t||window.event,i._hasFocus){var e=t.clipboardData.getData("text/plain"),n=i._value.substr(0,i._cursorPos),o=i._value.substr(i._cursorPos);i._value=n+e+o,i._cursorPos+=e.length,i.render()}},window.addEventListener("paste",i.pasteWindowListener,!1),e.push(i),i._inputsIndex=e.length-1,i.render()};i.prototype={canvas:function(t){return void 0!==t?(this._canvas=t,this._ctx=this._canvas.getContext("2d"),this.render()):this._canvas},x:function(t){return void 0!==t?(this._x=t,this.render()):this._x},y:function(t){return void 0!==t?(this._y=t,this.render()):this._y},extraX:function(t){return void 0!==t?(this._extraX=t,this.render()):this._extraX},extraY:function(t){return void 0!==t?(this._extraY=t,this.render()):this._extraY},fontSize:function(t){return void 0!==t?(this._fontSize=t,this.render()):this._fontSize},fontFamily:function(t){return void 0!==t?(this._fontFamily=t,this.render()):this._fontFamily},fontColor:function(t){return void 0!==t?(this._fontColor=t,this.render()):this._fontColor},placeHolderColor:function(t){return void 0!==t?(this._placeHolderColor=t,this.render()):this._placeHolderColor},fontWeight:function(t){return void 0!==t?(this._fontWeight=t,this.render()):this._fontWeight},fontStyle:function(t){return void 0!==t?(this._fontStyle=t,this.render()):this._fontStyle},width:function(t){return void 0!==t?(this._width=t,this._calcWH(),this._updateCanvasWH(),this.render()):this._width},height:function(t){return void 0!==t?(this._height=t,this._calcWH(),this._updateCanvasWH(),this.render()):this._height},padding:function(t){return void 0!==t?(this._padding=t,this._calcWH(),this._updateCanvasWH(),this.render()):this._padding},borderWidth:function(t){return void 0!==t?(this._borderWidth=t,this._calcWH(),this._updateCanvasWH(),this.render()):this._borderWidth},borderColor:function(t){return void 0!==t?(this._borderColor=t,this.render()):this._borderColor},borderRadius:function(t){return void 0!==t?(this._borderRadius=t,this.render()):this._borderRadius},backgroundColor:function(t){return void 0!==t?(this._backgroundColor=t,this.render()):this._backgroundColor},backgroundGradient:function(t){return void 0!==t?(this._backgroundColor=this._renderCtx.createLinearGradient(0,0,0,this.outerH),this._backgroundColor.addColorStop(0,t[0]),this._backgroundColor.addColorStop(1,t[1]),this.render()):this._backgroundColor},boxShadow:function(t,e){if(void 0===t)return this._boxShadow;var i=t.split("px ");return this._boxShadow={x:"none"===this._boxShadow?0:parseInt(i[0],10),y:"none"===this._boxShadow?0:parseInt(i[1],10),blur:"none"===this._boxShadow?0:parseInt(i[2],10),color:"none"===this._boxShadow?"":i[3]},this._boxShadow.x<0?(this.shadowL=Math.abs(this._boxShadow.x)+this._boxShadow.blur,this.shadowR=this._boxShadow.blur+this._boxShadow.x):(this.shadowL=Math.abs(this._boxShadow.blur-this._boxShadow.x),this.shadowR=this._boxShadow.blur+this._boxShadow.x),this._boxShadow.y<0?(this.shadowT=Math.abs(this._boxShadow.y)+this._boxShadow.blur,this.shadowB=this._boxShadow.blur+this._boxShadow.y):(this.shadowT=Math.abs(this._boxShadow.blur-this._boxShadow.y),this.shadowB=this._boxShadow.blur+this._boxShadow.y),this.shadowW=this.shadowL+this.shadowR,this.shadowH=this.shadowT+this.shadowB,this._calcWH(),e?void 0:(this._updateCanvasWH(),this.render())},innerShadow:function(t){return void 0!==t?(this._innerShadow=t,this.render()):this._innerShadow},selectionColor:function(t){return void 0!==t?(this._selectionColor=t,this.render()):this._selectionColor},placeHolder:function(t){return void 0!==t?(this._placeHolder=t,this.render()):this._placeHolder},value:function(t){return void 0!==t?(this._value=t,this.focus()):this._value},onsubmit:function(t){if(void 0!==t)return this._onsubmit=t,this;this._onsubmit()},onkeydown:function(t){if(void 0!==t)return this._onkeydown=t,this;this._onkeydown()},onkeyup:function(t){if(void 0!==t)return this._onkeyup=t,this;this._onkeyup()},focus:function(t){var e,i=this;if(!i._readonly){i._hasFocus||i._onfocus(i),i._selectionUpdated?delete i._selectionUpdated:i._selection=[0,0],i._cursorPos="number"==typeof t?t:i._clipText().length,i._placeHolder===i._value&&(i._value=""),i._hasFocus=!0,i._cursor=!0,i._cursorInterval&&clearInterval(i._cursorInterval),i._cursorInterval=setInterval(function(){i._cursor=!i._cursor,i.render()},500);var n=navigator.userAgent.toLowerCase(),o=n.indexOf("chrome")>=0&&n.indexOf("mobile")>=0&&n.indexOf("android")>=0,r=void 0!==window.orientation;return r&&!o&&document&&document.createElement&&(e=document.createElement("input"))?(e.type="text",e.style.opacity=0,e.style.position="absolute",e.style.left=i._x+i._extraX+(i._canvas?i._canvas.offsetLeft:0)+"px",e.style.top=i._y+i._extraY+(i._canvas?i._canvas.offsetTop:0)+"px",e.style.width=i._width,e.style.height=0,document.body.appendChild(e),e.focus(),e.addEventListener("blur",function(){i.blur(i)},!1)):r&&i.value(prompt(i._placeHolder)||""),i.render()}},blur:function(t){var e=t||this;return e._disableBlur||(e._onblur(e),e._cursorInterval&&clearInterval(e._cursorInterval),e._hasFocus=!1,e._cursor=!1,e._selection=[0,0],""===e._value&&(e._value=e._placeHolder)),e.render()},disableBlur:function(t){(t||this)._disableBlur=!0},enableBlur:function(t){(t||this)._disableBlur=!1},keydown:function(t,i){var n,o,r=t.which,a=t.shiftKey,s=null;if(i._hasFocus){if(i._onkeydown(t,i),65===r&&(t.ctrlKey||t.metaKey))return i._selection=[0,i._value.length],t.preventDefault(),i.render();if(17===r||t.metaKey||t.ctrlKey)return i;if(t.preventDefault(),8===r)i._clearSelection()||i._cursorPos>0&&(n=i._value.substr(0,i._cursorPos-1),o=i._value.substr(i._cursorPos,i._value.length),i._value=n+o,i._cursorPos--);else if(37===r)i._cursorPos>0&&(i._cursorPos--,i._cursor=!0,i._selection=[0,0]);else if(39===r)i._cursorPos<i._value.length&&(i._cursorPos++,i._cursor=!0,i._selection=[0,0]);else if(13===r)i._onsubmit(t,i);else if(9===r)if(i._tabToClear)i._value="",i._cursorPos=0;else{var l=e[i._inputsIndex+1]?i._inputsIndex+1:0;l!==i._inputsIndex&&(i.blur(),setTimeout(function(){e[l].focus()},10))}else if(s=i._mapCodeToKey(a,r)){if(i._clearSelection(),i._maxlength&&i._maxlength<=i._value.length)return;n=i._value?i._value.substr(0,i._cursorPos):"",o=i._value?i._value.substr(i._cursorPos):"",i._value=n+s+o,i._cursorPos++}return 13==r&&i._renderOnReturn||13!==r?i.render():function(){}}},click:function(t,e){var i=e._mousePos(t),n=i.x,o=i.y;return e._endSelection?(delete e._endSelection,void delete e._selectionUpdated):e._canvas&&e._overInput(n,o)||!e._canvas?e._mouseDown?(e._mouseDown=!1,e.click(t,e),e.focus(e._clickPos(n,o))):void 0:e.blur()},mousemove:function(t,e){var i=e._mousePos(t),n=i.x,o=i.y,r=e._overInput(n,o);if(r&&e._canvas?(e._canvas.style.cursor="text",e._wasOver=!0):e._wasOver&&e._canvas&&(e._canvas.style.cursor="default",e._wasOver=!1),e._hasFocus&&e._selectionStart>=0){var a=e._clickPos(n,o),s=Math.min(e._selectionStart,a),l=Math.max(e._selectionStart,a);if(!r)return e._selectionUpdated=!0,e._endSelection=!0,delete e._selectionStart,void e.render();e._selection[0]===s&&e._selection[1]===l||(e._selection=[s,l],e.render())}},mousedown:function(t,e){var i=e._mousePos(t),n=i.x,o=i.y,r=e._overInput(n,o);e._mouseDown=r,e._hasFocus&&r&&(e._selectionStart=e._clickPos(n,o))},mouseup:function(t,e){var i=e._mousePos(t),n=i.x,o=i.y,r=e._clickPos(n,o)!==e._selectionStart;e._hasFocus&&e._selectionStart>=0&&e._overInput(n,o)&&r?(e._selectionUpdated=!0,delete e._selectionStart,e.render()):delete e._selectionStart,e.click(t,e)},renderCanvas:function(){return this._renderCanvas},cleanup:function(){this._canvas.removeEventListener("mouseup",this.mouseupCanvasListener,!1),this._canvas.removeEventListener("mousedown",this.mousedownCanvasListener,!1),this._canvas.removeEventListener("mousemove",this.mousemoveCanvasListener,!1),window.removeEventListener("keydown",this.keydownWindowListener,!1),window.removeEventListener("keyup",this.keyupWindowListener,!1),window.removeEventListener("mouseup",this.mouseupWindowListener,!0),window.removeEventListener("paste",this.pasteWindowListener,!1),clearInterval(this._cursorInterval),this._canvas.style.cursor="default";for(var t=e.length-1;t>=0;t--)e[t]===this&&e.splice(t,1)},render:function(){var t=this,e=t._renderCtx,i=t.outerW,n=t.outerH,o=t._borderRadius,r=t._borderWidth,a=t.shadowW,s=t.shadowH;e.clearRect(0,0,e.canvas.width,e.canvas.height),e.shadowOffsetX=t._boxShadow.x,e.shadowOffsetY=t._boxShadow.y,e.shadowBlur=t._boxShadow.blur,e.shadowColor=t._boxShadow.color,t._borderWidth>0&&(e.fillStyle=t._borderColor,t._roundedRect(e,t.shadowL,t.shadowT,i-a,n-s,o),e.fill(),e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0),t._drawTextBox(function(){e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0;var l=t._clipText(),h=t._padding+t._borderWidth+t.shadowT;if(t._selection[1]>0){var c=t._textWidth(l.substring(0,t._selection[0])),d=t._textWidth(l.substring(t._selection[0],t._selection[1]));e.fillStyle=t._selectionColor,e.fillRect(h+c,h,d,t._height)}if(e.fillStyle=t._placeHolder===t._value&&""!==t._value?t._placeHolderColor:t._fontColor,t._cursor){var u=t._textWidth(l.substring(0,t._cursorPos));e.fillRect(h+u,h,1,t._height)}var f=t._padding+t._borderWidth+t.shadowL,x=Math.round(h+t._height/2);e.font=t._fontStyle+" "+t._fontWeight+" "+t._fontSize+"px "+t._fontFamily,e.textAlign="left",e.textBaseline="middle",e.fillText(l,f,x);var m=t._innerShadow.split("px "),p="none"===t._innerShadow?0:parseInt(m[0],10),y="none"===t._innerShadow?0:parseInt(m[1],10),v="none"===t._innerShadow?0:parseInt(m[2],10),_="none"===t._innerShadow?"":m[3];if(v>0){var b=t._shadowCtx,g=b.canvas.width,w=b.canvas.height;b.clearRect(0,0,g,w),b.shadowBlur=v,b.shadowColor=_,b.shadowOffsetX=0,b.shadowOffsetY=y,b.fillRect(-1*i,-100,3*i,100),b.shadowOffsetX=p,b.shadowOffsetY=0,b.fillRect(g,-1*n,100,3*n),b.shadowOffsetX=0,b.shadowOffsetY=y,b.fillRect(-1*i,w,3*i,100),b.shadowOffsetX=p,b.shadowOffsetY=0,b.fillRect(-100,-1*n,100,3*n),t._roundedRect(e,r+t.shadowL,r+t.shadowT,i-2*r-a,n-2*r-s,o),e.clip(),e.drawImage(t._shadowCanvas,0,0,g,w,r+t.shadowL,r+t.shadowT,g,w)}return t._ctx&&(t._ctx.clearRect(t._x,t._y,e.canvas.width,e.canvas.height),t._ctx.drawImage(t._renderCanvas,t._x,t._y)),t})},_drawTextBox:function(t){var e=this,i=e._renderCtx,n=e.outerW,o=e.outerH,r=e._borderRadius,a=e._borderWidth,s=e.shadowW,l=e.shadowH;if(""===e._backgroundImage)i.fillStyle=e._backgroundColor,e._roundedRect(i,a+e.shadowL,a+e.shadowT,n-2*a-s,o-2*a-l,r),i.fill(),t();else{var h=new Image;h.src=e._backgroundImage,h.onload=function(){i.drawImage(h,0,0,h.width,h.height,a+e.shadowL,a+e.shadowT,n,o),t()}}},_clearSelection:function(){if(this._selection[1]>0){var t=this._selection[0],e=this._selection[1];return this._value=this._value.substr(0,t)+this._value.substr(e),this._cursorPos=t,this._cursorPos=this._cursorPos<0?0:this._cursorPos,this._selection=[0,0],!0}return!1},_clipText:function(t){t=void 0===t?this._value:t;var e=this._textWidth(t)/(this._width-this._padding);return(e>1?t.substr(-1*Math.floor(t.length/e)):t)+""},_textWidth:function(t){var e=this._renderCtx;return e.font=this._fontStyle+" "+this._fontWeight+" "+this._fontSize+"px "+this._fontFamily,e.textAlign="left",e.measureText(t).width},_calcWH:function(){this.outerW=this._width+2*this._padding+2*this._borderWidth+this.shadowW,this.outerH=this._height+2*this._padding+2*this._borderWidth+this.shadowH},_updateCanvasWH:function(){var t=this._renderCanvas.width,e=this._renderCanvas.height;this._renderCanvas.setAttribute("width",this.outerW),this._renderCanvas.setAttribute("height",this.outerH),this._shadowCanvas.setAttribute("width",this._width+2*this._padding),this._shadowCanvas.setAttribute("height",this._height+2*this._padding),this._ctx&&this._ctx.clearRect(this._x,this._y,t,e)},_roundedRect:function(t,e,i,n,o,r){n<2*r&&(r=n/2),o<2*r&&(r=o/2),t.beginPath(),t.moveTo(e+r,i),t.lineTo(e+n-r,i),t.quadraticCurveTo(e+n,i,e+n,i+r),t.lineTo(e+n,i+o-r),t.quadraticCurveTo(e+n,i+o,e+n-r,i+o),t.lineTo(e+r,i+o),t.quadraticCurveTo(e,i+o,e,i+o-r),t.lineTo(e,i+r),t.quadraticCurveTo(e,i,e+r,i),t.closePath()},_overInput:function(t,e){var i=t>=this._x+this._extraX,n=t<=this._x+this._extraX+this._width+2*this._padding,o=e>=this._y+this._extraY,r=e<=this._y+this._extraY+this._height+2*this._padding;return i&&n&&o&&r},_clickPos:function(t,e){var i=this._value;this._value===this._placeHolder&&(i="");var n=this._clipText(i),o=0,r=n.length;if(t-(this._x+this._extraX)<this._textWidth(n))for(var a=0;a<n.length;a++)if((o+=this._textWidth(n[a]))>=t-(this._x+this._extraX)){r=a;break}return r},_mousePos:function(t){var e=t.target,i=document.defaultView.getComputedStyle(e,void 0),n=parseInt(i.paddingLeft,10)||0,o=parseInt(i.paddingLeft,10)||0,r=parseInt(i.borderLeftWidth,10)||0,a=parseInt(i.borderLeftWidth,10)||0,s=document.body.parentNode.offsetTop||0,l=document.body.parentNode.offsetLeft||0,h=0,c=0;if("unefined"!=typeof e.offsetParent)do{h+=e.offsetLeft,c+=e.offsetTop}while(e=e.offsetParent);return h+=n+r+l,c+=o+a+s,{x:t.pageX-h,y:t.pageY-c}},_mapCodeToKey:function(t,e){for(var i=[8,9,13,16,17,18,20,27,91,92],n=0;n<i.length;n++)if(e===i[n])return;if("boolean"==typeof t&&"number"==typeof e){return t?e>=65&&e<=90?String.fromCharCode(e):{32:" ",48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",107:"+",173:"_",189:"_",186:":",187:"+",188:"<",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'}[e]:e>=65&&e<=90?String.fromCharCode(e).toLowerCase():96===e?"0":97===e?"1":98===e?"2":99===e?"3":100===e?"4":101===e?"5":102===e?"6":103===e?"7":104===e?"8":105===e?"9":188===e?",":190===e?".":191===e?"/":192===e?"`":220===e?"\\":187===e?"=":189===e||173===e?"-":222===e?"'":186===e?";":219===e?"[":221===e?"]":String.fromCharCode(e)}}},t.exports=i}()},function(t,e,i){
/**
 * @license
 * File: sigplot.layer1d.js
 * Copyright (c) 2012-2017, LGS Innovations Inc., All rights reserved.
 *
 * This file is part of SigPlot.
 *
 * Licensed to the LGS Innovations (LGS) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  LGS licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */
!function(){var e=i(3),n=i(6),o=function(t){this.plot=t,this.xbuf=void 0,this.ybuf=void 0,this.offset=0,this.xstart=0,this.xdelta=0,this.imin=0,this.xmin=0,this.xmax=0,this.name="",this.cx=!1,this.hcb=void 0,this.size=0,this.display=!0,this.color=0,this.line=3,this.thick=1,this.symbol=0,this.radius=3,this.skip=0,this.xsub=0,this.ysub=0,this.xdata=!1,this.modified=!1,this.opacity=1,this.fillStyle=null,this.preferred_origin=1,this.pointbufsize=0,this.xptr=null,this.yptr=null,this.xpoint=null,this.ypoint=null,this.options={}};o.prototype={init:function(t,i){this.plot._Gx;if(this.hcb=t,this.hcb.buf_type="D",this.offset=0,this.size=0,this.xbufn=0,this.ybufn=0,this.hcb.pipe?2===t.class&&(e.force1000(t),this.size=t.subsize):2===t.class?(e.force1000(t),this.size=t.subsize):this.size=t.size,i.framesize&&(this.size=i.framesize),this.hcb.pipe&&!this.size)throw"1D layer could not determine appropriate size for pipe, use framesize option";t.class<=2&&(this.xsub=-1,this.ysub=1,this.cx="C"===t.format[0]),this.skip=1,this.cx&&(this.skip=2),this.xstart=t.xstart,this.xdelta=t.xdelta;var n=t.xstart+t.xdelta*(this.size-1);if(this.xmin=Math.min(t.xstart,n),this.xmax=Math.max(t.xstart,n),this.xlab=t.xunits,this.ylab=t.yunits,this.hcb.pipe){this.drawmode="scrolling",this.position=0,this.tle=i.tl,this.ybufn=this.size*Math.max(this.skip*e.PointArray.BYTES_PER_ELEMENT,e.PointArray.BYTES_PER_ELEMENT),this.ybuf=new ArrayBuffer(this.ybufn);var o=this;e.addPipeWriteListener(this.hcb,function(){o._onpipewrite()})}},_onpipewrite:function(){var t=new e.PointArray(this.ybuf),i=this.tle;void 0===i&&(i=Math.floor(e.pavail(this.hcb))/this.hcb.spa);for(var n=i*this.hcb.spa;e.pavail(this.hcb)>=n;){if("lefttoright"===this.drawmode)this.position=0,t.set(t.subarray(0,this.size-n),n);else if("righttoleft"===this.drawmode)this.position=this.size-i,t.set(t.subarray(n),0);else if("scrolling"!==this.drawmode)throw"Invalid draw mode";if(0===e.grabx(this.hcb,t,Math.min(i,this.size-this.position)*this.hcb.spa,this.position*this.hcb.spa))break;this.position=(this.position+i)%this.size,void 0===this.tle&&(i=Math.floor(e.pavail(this.hcb))/this.hcb.spa),n=i*this.hcb.spa}0!==this.plot._Gx.autol&&this.plot.rescale()},get_data:function(t,i){var n,o=this.plot._Gx,r=this.hcb,a=this.skip;n=2===r.class?r.subsize:r.size;var s=0,l=0;o.index?(s=Math.floor(t),l=Math.floor(i+.5)):r.xdelta>=0?(s=Math.floor((t-r.xstart)/r.xdelta)-1,l=Math.floor((i-r.xstart)/r.xdelta+.5)):(s=Math.floor((i-r.xstart)/r.xdelta)-1,l=Math.floor((t-r.xstart)/r.xdelta+.5)),s=Math.max(0,s),l=Math.min(n,l);var h=Math.max(0,Math.min(l-s+1,o.bufmax));if(r.xdelta<0&&(s=l-h+1),s>=this.imin&&s+h<=this.imin+this.size&&void 0!==this.ybuf);else if(this.modified);else if(r.class<=2){var c=this.offset+s;a=this.skip;this.ybufn=h*Math.max(a*e.PointArray.BYTES_PER_ELEMENT,e.PointArray.BYTES_PER_ELEMENT),(void 0===this.ybuf||this.ybuf.byteLength<this.ybufn)&&(this.ybuf=new ArrayBuffer(this.ybufn));var d=new e.PointArray(this.ybuf),u=e.grab(r,d,c,h);this.imin=s,this.xstart=r.xstart+s*this.xdelta,this.size=u}},change_settings:function(t){if(void 0!==t.index)if(t.index)this.xstart=1,this.xdelta=1,this.xmin=1,this.xmax=this.size;else{this.xstart=this.hcb.xstart+this.imin*this.xdelta,this.xdelta=this.hcb.xdelta;var i=this.hcb.xstart+this.hcb.xdelta*(this.size-1);this.xmin=Math.min(this.hcb.xstart,i),this.xmax=Math.max(this.hcb.xstart,i)}if(void 0!==t.drawmode&&(this.drawmode=t.drawmode,this.position=0,this.ybufn=this.size*Math.max(this.skip*e.PointArray.BYTES_PER_ELEMENT,e.PointArray.BYTES_PER_ELEMENT),this.ybuf=new ArrayBuffer(this.ybufn)),void 0!==t.framesize){this.size=t.framesize,this.xstart=this.hcb.xstart+this.imin*this.xdelta,this.xdelta=this.hcb.xdelta;i=this.hcb.xstart+this.hcb.xdelta*(this.size-1);this.xmin=Math.min(this.hcb.xstart,i),this.xmax=Math.max(this.hcb.xstart,i),this.ybufn=this.size*Math.max(this.skip*e.PointArray.BYTES_PER_ELEMENT,e.PointArray.BYTES_PER_ELEMENT),this.ybuf=new ArrayBuffer(this.ybufn)}},reload:function(t,i){if(this.hcb.pipe)throw"reload cannot be used with pipe, use push instead";var n=this.hcb.dview.length!==t.length||i;if(i)for(var o in i)this.hcb[o]=i[o],"xstart"!==o&&"xdelta"!==o||(n=!0);this.hcb.setData(t),this.imin=0,this.xstart=void 0,this.size=0;var r=this.xmin,a=this.xmax;if(n){2===this.hcb.class&&e.force1000(this.hcb);var s=this.hcb.xstart+this.hcb.xdelta*(this.hcb.size-1);this.xmin=Math.min(this.hcb.xstart,s),this.xmax=Math.max(this.hcb.xstart,s),this.xdelta=this.hcb.xdelta,this.xstart=this.hcb.xstart,r=void 0,a=void 0}return{xmin:r,xmax:a}},push:function(t,i,n){if(i){for(var o in i)this.hcb[o]=i[o],"type"===o&&(this.hcb.class=i[o]/1e3);i.subsize&&2===this.hcb.class&&(e.force1000(this.hcb),this.size=this.hcb.subsize,this.position=null,this.ybufn=this.size*Math.max(this.skip*e.PointArray.BYTES_PER_ELEMENT,e.PointArray.BYTES_PER_ELEMENT),this.ybuf=new ArrayBuffer(this.ybufn));var r=this.hcb.xstart+this.hcb.xdelta*(this.size-1);this.xmin=this.hcb.xmin||Math.min(this.hcb.xstart,r),this.xmax=this.hcb.xmax||Math.max(this.hcb.xstart,r),this.xdelta=this.hcb.xdelta,this.xstart=this.hcb.xstart}return t.length>0&&e.filad(this.hcb,t,n),!!i},prep:function(t,i){var n=this.plot._Gx,o=this.plot._Mx,r=Math.ceil(this.size),a=this.skip;if(0===r)return{num:0,start:0,end:0};r*e.PointArray.BYTES_PER_ELEMENT>this.pointbufsize&&(this.pointbufsize=r*e.PointArray.BYTES_PER_ELEMENT,this.xptr=new ArrayBuffer(this.pointbufsize),this.yptr=new ArrayBuffer(this.pointbufsize),this.xpoint=new e.PointArray(this.xptr),this.ypoint=new e.PointArray(this.yptr));var s,l,h,c=new e.PointArray(this.ybuf),d=this.xmin,u=this.xmax;if(5===n.cmode||this.xsub>0)r<=0?(d=n.panxmin,u=n.panxmax):5!==n.cmode?this.xpoint=new e.PointArray(this.xbuf):this.cx?e.vmov(c,a,this.xpoint,1,r):0!==this.line?(h=e.vmxmn(c,r),this.xpoint[0]=h.smax,this.xpoint[1]=h.smin,s=0,l=2,r=2):this.xpoint=c,r>0&&(u=(h=e.vmxmn(this.xpoint,r)).smax,d=h.smin,s=0,l=r);else if(r>0){var f=this.xstart,x=this.xdelta,m=r;n.index?(s=0,l=r-1):x>=0?(s=Math.max(1,Math.min(m,Math.round((t-f)/x)))-1,l=Math.max(1,Math.min(m,Math.round((i-f)/x)+2))-1):(s=Math.max(1,Math.min(m,Math.round((i-f)/x)-1))-1,l=Math.max(1,Math.min(m,Math.round((t-f)/x)+2))-1),(r=l-s+1)<0&&(e.log.debug("Nothing to plot"),r=0),c=new e.PointArray(this.ybuf).subarray(s*a),f+=x*s;for(var p=0;p<r;p++)n.index?this.xpoint[p]=this.imin+p+1:this.xpoint[p]=f+p*x}if(n.panxmin>n.panxmax?(n.panxmin=d,n.panxmax=u):(n.panxmin=Math.min(n.panxmin,d),n.panxmax=Math.max(n.panxmax,u)),r<=0)return e.log.debug("Nothing to plot"),{num:r,start:s,end:l};if(this.cx)1===n.cmode?e.cvmag(c,this.ypoint,r):2===n.cmode?25===n.plab?(e.cvpha(c,this.ypoint,r),e.vsmul(this.ypoint,1/(2*Math.PI),this.ypoint,r)):24!==n.plab?e.cvpha(c,this.ypoint,r):e.cvphad(c,this.ypoint,r):3===n.cmode?e.vmov(c,a,this.ypoint,1,r):n.cmode>=6?e.cvmag2(c,this.ypoint,r):n.cmode>=4&&e.vmov(c.subarray(1),a,this.ypoint,1,r);else if(5===n.cmode)e.vfill(this.ypoint,0,r);else if(1===n.cmode||n.cmode>=6)for(p=0;p<r;p++)this.ypoint[p]=Math.abs(c[p]);else for(p=0;p<r;p++)this.ypoint[p]=c[p];if(n.cmode>=6){e.vlog10(this.ypoint,n.dbmin,this.ypoint);var y=10;7===n.cmode&&(y=20),n.lyr.length>0&&n.lyr[0].cx&&(y/=2),e.vsmul(this.ypoint,y,this.ypoint)}var v=(u=(h=e.vmxmn(this.ypoint,r)).smax)-(d=h.smin);if(v<0&&(d=(u=d)+v,v=-v),v<=1e-20?(d-=1,u+=1):(d-=.02*v,u+=.02*v),0===o.level&&(n.panymin>n.panymax?(n.panymin=d,n.panymax=u):(n.panymin=Math.min(n.panymin,d),n.panymax=Math.max(n.panymax,u)),n.autol>1)){var _=1/Math.max(n.autol,1);n.panymin=n.panymin*_+o.stk[0].ymin*(1-_),n.panymax=n.panymax*_+o.stk[0].ymax*(1-_)}return{num:r,start:s,end:l}},draw:function(){var t=this.plot._Mx,i=this.plot._Gx,o=this.color,r=this.symbol,a=this.radius,s=0,l={};this.fillStyle?l.fillStyle=this.fillStyle:i.fillStyle&&(l.fillStyle=i.fillStyle),this.options&&(l.highlight=this.options.highlight,l.noclip=this.options.noclip),0===this.line?s=0:(s=1,this.thick>0?s=this.thick:this.thick<0&&(s=Math.abs(this.thick),l.dashed=!0),1===this.line&&(l.vertsym=!0),2===this.line&&(l.horzsym=!0),4===this.line&&(l.horzsym=!0,l.vertsym=!0));var h,c,d=i.segment&&5!==i.cmode&&this.xsub>0&&!0,u=this.xdelta;if(this.xdata?(h=this.xmin,c=this.xmax):(h=Math.max(this.xmin,t.stk[t.level].xmin))>=(c=Math.min(this.xmax,t.stk[t.level].xmax))&&(i.panxmin=Math.min(i.panxmin,this.xmin),i.panxmax=Math.max(i.panxmax,this.xmax)),!i.all){var f=(i.bufmax-1)*u;f>=-0?c=Math.min(c,h+f):h=Math.max(h,c+f)}if(0!==s||0!==r){for(;h<c;){this.hcb.pipe||this.get_data(h,c);var x=this.prep(h,c);x.num>0&&(d||n.trace(t,o,new e.PointArray(this.xptr),new e.PointArray(this.yptr),x.num,x.start,1,s,r,a,l)),i.all?0===this.size?h=c:i.index?h+=x.num:u>=0?h+=this.size*u:c+=this.size*u:h=c}if(this.position&&"scrolling"===this.drawmode){var m=n.real_to_pixel(t,this.position*this.xdelta,0);m.x>t.l&&m.x<t.r&&n.draw_line(t,"white",m.x,t.t,m.x,t.b)}}},add_highlight:function(t){this.options.highlight||(this.options.highlight=[]);var e=t.xstart,i=t.xend,n=isNaN(e),o=isNaN(i);!0!==n&&null!==e&&void 0!==e||(this.options.highlight=[]),!0!==o&&null!==i&&void 0!==i||(this.options.highlight=[]),t instanceof Array?this.options.highlight.push.apply(this.options.highlight,t):this.options.highlight.push(t),this.plot.refresh()},remove_highlight:function(t){if(this.options.highlight){for(var e=this.options.highlight.length;e--;)t!==this.options.highlight[e]&&t!==this.options.highlight[e].id||this.options.highlight.splice(e,1);this.plot.refresh()}},get_highlights:function(){return this.options.highlight?this.options.highlight.slice(0):[]},clear_highlights:function(){this.options.highlight&&(this.options.highlight=void 0,this.plot.refresh())}};var r=[0,53,27,80,13,40,67,93,7,60,33,87,20,47,73,100];o.overlay=function(t,i,a){var s=t._Gx,l=t._Mx;2===i.class&&e.force1000(i),i.buf_type="D";var h=1;if(2===i.class&&i.size>0){var c=i.size/i.subsize;h=Math.min(c,16-s.lyr.length)}var d=a.name;delete a.name;for(var u=0;u<h;u++){var f=new o(t);f.init(i,a);var x=s.lyr.length%r.length;for(var m in f.color=n.getcolor(l,e.Mc.colormap[3].colors,r[x]),2===i.class?(void 0!==d&&(Array.isArray(d)?f.name=d[u]:(f.name=d,f.name=f.name+"."+n.pad((u+1).toString(),3,"0"))),f.name||(i.file_name?f.name=e.trim_name(i.file_name):f.name="layer_"+s.lyr.length,f.name=f.name+"."+n.pad((u+1).toString(),3,"0")),f.offset=u*i.subsize):(void 0!==d?f.name=d:i.file_name?f.name=e.trim_name(i.file_name):f.name="layer_"+s.lyr.length,f.offset=0),a)void 0!==f[m]&&(f[m]=a[m]);return t.add_layer(f)?f:null}},t.exports=o}()},function(t,e,i){
/**
 * @license
 * File: sigplot.layer2d.js
 * Copyright (c) 2012-2017, LGS Innovations Inc., All rights reserved.
 *
 * This file is part of SigPlot.
 *
 * Licensed to the LGS Innovations (LGS) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  LGS licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License
 */
!function(){var e=i(3),n=i(6),o=function(t){this.plot=t,this.offset=0,this.xstart=0,this.xdelta=0,this.ystart=0,this.ydelta=0,this.imin=0,this.xmin=0,this.xmax=0,this.name="",this.cx=!1,this.hcb=void 0,this.display=!0,this.color=0,this.line=3,this.thick=1,this.symbol=0,this.radius=3,this.skip=0,this.xsub=0,this.ysub=0,this.xdata=!1,this.modified=!1,this.preferred_origin=4,this.opacity=1,this.lpb=void 0,this.yc=1,this.options={}};o.prototype={init:function(t){var i=this.plot._Gx,n=this.plot._Mx;if(this.hcb=t,this.hcb.buf_type="D",this.hcb.pipe){var o=this;this.position=0,this.frame=0,this.lps=this.hcb.lps||Math.ceil(Math.max(1,n.b-n.t)),e.addPipeWriteListener(this.hcb,function(){o._onpipewrite()})}else this.lps=this.hcb.lps||Math.ceil(t.size);if(this.offset=0,this.xbufn=0,this.ybufn=0,this.drawmode="scrolling",t.class<=2&&(this.xsub=-1,this.ysub=1,this.cx="C"===t.format[0]),this.skip=1,this.cx&&(this.skip=2),i.index)this.xstart=1,this.xdelta=1,this.xmin=1,this.xmax=t.subsize,this.ystart=1,this.ydelta=1,this.ymin=1,this.ymax=this.size;else{this.xstart=t.xstart,this.xdelta=t.xdelta;var r=t.xstart+t.xdelta*(t.subsize-1);this.xmin=this.hcb.xmin||Math.min(t.xstart,r),this.xmax=this.hcb.xmax||Math.max(t.xstart,r),this.ystart=t.ystart,this.ydelta=t.ydelta;r=t.ystart+t.ydelta*(this.lps-1);this.ymin=this.hcb.ymin||Math.min(t.ystart,r),this.ymax=this.hcb.ymax||Math.max(t.ystart,r)}this.xframe=this.hcb.subsize,this.yframe=this.lps*this.hcb.subsize/this.xframe,0===this.lpb&&(this.lpb=this.yframe),(!this.lpb||this.lpb<=0)&&(this.lpb=16),this.lpb=Math.max(1,this.lpb/this.yc)*this.yc,this.xlab=t.xunits,this.ylab=t.yunits},_onpipewrite:function(){for(var t=this.plot._Gx,i=this.plot._Mx;e.pavail(this.hcb)>=this.hcb.subsize*this.hcb.spa;){if("scrolling"!==this.drawmode&&(this.hcb.ystart+=this.hcb.ydelta,this.ystart=this.hcb.ystart,this.ymin=this.hcb.ystart-this.hcb.ydelta*this.lps,this.ymax=this.hcb.ystart),"falling"===this.drawmode)this.position=0,this.img&&n.shift_image_rows(i,this.img,1);else if("rising"===this.drawmode)this.position=this.lps-1,this.img&&n.shift_image_rows(i,this.img,-1);else{if("scrolling"!==this.drawmode)throw"Invalid draw mode";var o=Math.abs(this.ymax-this.ymin);this.ystart=0,this.ymin=0,this.ymax=o,this.position>=this.lps&&(this.position=0)}if(!this.buf)return;if(0===e.grabx(this.hcb,this.buf,this.hcb.subsize*this.hcb.spa))return void e.log.error("Internal error");var r=new e.PointArray(this.hcb.subsize);this.cx?1===t.cmode?e.cvmag(this.buf,r,r.length):2===t.cmode?25===t.plab?(e.cvpha(this.buf,r,r.length),e.vsmul(r,1/(2*Math.PI),r,r.length)):24!==t.plab?e.cvpha(this.buf,r,r.length):e.cvphad(this.buf,r,r.length):3===t.cmode?e.vmov(this.buf,this.skip,r,1,r.length):4===t.cmode?e.vmov(this.buf.subarray(1),this.skip,r,1,r.length):5===t.cmode?e.vfill(r,0,r.length):6===t.cmode?e.cvmag2logscale(this.buf,t.dbmin,10,r):7===t.cmode&&e.cvmag2logscale(this.buf,t.dbmin,20,r):1===t.cmode?e.vabs(this.buf,r):2===t.cmode?e.vfill(r,0,r.length):3===t.cmode?e.vmov(this.buf,this.skip,r,1,r.length):4===t.cmode?e.vfill(r,0,r.length):5===t.cmode?e.vfill(r,0,r.length):6===t.cmode?e.vlogscale(this.buf,t.dbmin,10,r):7===t.cmode&&e.vlogscale(this.buf,t.dbmin,20,r);for(var a,s,l=r[0],h=r[0],c=0;c<r.length;c++)r[c]<l&&(l=r[c]),r[c]>h&&(h=r[c]);if(1===t.autol)a=l,s=h;else if(t.autol>1){var d=1/Math.max(t.autol,1);a=t.zmin*d+l*(1-d),s=t.zmax*d+h*(1-d)}else if(t.autol<0){d=1/Math.max(5,1);a=t.zmin*d+l*(1-d),s=t.zmax*d+h*(1-d)}if(0!=(1&t.autoz)&&(t.zmin=a),0!=(2&t.autoz)&&(t.zmax=s),t.p_cuts){if("scrolling"===this.drawmode){var u=this.position*this.hcb.subsize,f=u+this.hcb.subsize,x=0;for(c=u;c<f;c++)this.zbuf[c]=r[x],x++}if("falling"===this.drawmode){var m=(this.lps-1)*this.hcb.subsize,p=this.zbuf.slice(0,m);this.zbuf=[];for(c=0;c<this.hcb.subsize;c++)this.zbuf.push(r[c]);this.zbuf.push.apply(this.zbuf,p),p=[]}if("rising"===this.drawmode){m=this.lps*this.hcb.subsize,p=this.zbuf.slice(this.hcb.subsize,m);this.zbuf=[],this.zbuf.push.apply(this.zbuf,p);for(c=0;c<this.hcb.subsize;c++)this.zbuf.push(r[c]);p=[]}}this.img&&n.update_image_row(i,this.img,r,this.position,t.zmin,t.zmax,t.xcompression),this.frame+=1,"scrolling"===this.drawmode&&(this.position=(this.position+1)%this.lps),0===i.level&&(t.panymin=this.ymin,t.panymax=this.ymax,i.stk[0].ymin=this.ymin,i.stk[0].ymax=this.ymax)}},get_data:function(){var t=this.hcb;this.buf||(this.hcb.pipe?(this.buf=this.hcb.createArray(null,0,this.hcb.subsize*this.hcb.spa),this.zbuf=new e.PointArray(this.hcb.subsize)):(this.buf=this.hcb.createArray(null,0,this.lps*this.hcb.subsize*this.hcb.spa),this.zbuf=new e.PointArray(this.lps*this.hcb.subsize))),this.hcb.pipe||e.grab(t,this.buf,0,t.subsize)},get_z:function(t,e){var i=Math.floor(t/this.hcb.xdelta),n=Math.floor(e/this.hcb.ydelta)*this.hcb.subsize+i;return this.zbuf[n]},change_settings:function(t){var i=this.plot._Gx;if(void 0!==t.cmode&&(this.img=void 0,0!=(1&i.autoz)&&(i.zmin=void 0),0!=(2&i.autoz)&&(i.zmax=void 0)),void 0===t.zmin&&void 0===t.zmax&&void 0===t.autoz||(this.img=void 0),void 0!==t.cmap&&(this.img=void 0),void 0===t.drawmode&&void 0===t.xmin&&void 0===t.xmax&&void 0===t.xdelta&&void 0===t.xstart||(void 0===t.drawmode&&(t.drawmode=this.drawmode),this.drawmode=t.drawmode,this.position=0,this.frame=0,this.hcb.pipe?(this.buf=this.hcb.createArray(null,0,this.hcb.subsize*this.hcb.spa),this.zbuf=new e.PointArray(this.hcb.subsize)):(this.buf=this.hcb.createArray(null,0,this.lps*this.hcb.subsize*this.hcb.spa),this.zbuf=new e.PointArray(this.lps*this.hcb.subsize)),this.img=void 0,"falling"===this.drawmode?(this.plot._Mx.origin=1,this.preferred_origin=1):(this.plot._Mx.origin=4,this.preferred_origin=4)),void 0!==t.opacity&&(this.opacity=t.opacity),void 0!==t.p_cuts){var n=i.p_cuts;n=null===t.p_cuts?!n:t.p_cuts,this.hcb.pipe&&(n?(this.buf=this.hcb.createArray(null,0,this.hcb.subsize*this.hcb.spa),this.zbuf=new e.PointArray(this.hcb.subsize)):(this.buf=this.hcb.createArray(null,0,this.lps*this.hcb.subsize*this.hcb.spa),this.zbuf=new e.PointArray(this.lps*this.hcb.subsize)))}},push:function(t,i,n){var o=this.plot._Gx,r=!1,a=null;if(i){for(var s in i.timestamp&&(a=i.timestamp,delete i.timestamp),i.subsize&&i.subsize!==this.hcb.subsize&&(this.hcb.subsize=i.subsize,this.hcb.pipe&&!o.p_cuts?(this.buf=this.hcb.createArray(null,0,this.hcb.subsize*this.hcb.spa),this.zbuf=new e.PointArray(this.hcb.subsize)):(this.buf=this.hcb.createArray(null,0,this.lps*this.hcb.subsize*this.hcb.spa),this.zbuf=new e.PointArray(this.lps*this.hcb.subsize)),r=!0),i)this.hcb[s]!==i[s]&&(this.hcb[s]=i[s],"type"===s&&(this.hcb.class=i[s]/1e3),r=!0);if(i.lps&&(this.lps=i.lps),r){var l=this.hcb.xstart+this.hcb.xdelta*(this.hcb.subsize-1);this.xmin=Math.min(this.hcb.xstart,l),this.xmax=Math.max(this.hcb.xstart,l),this.xdelta=this.hcb.xdelta,this.xstart=this.hcb.xstart,this.ystart=this.hcb.ystart,this.ydelta=this.hcb.ydelta;l=this.hcb.ystart+this.hcb.ydelta*(this.lps-1);this.ymin=Math.min(this.hcb.ystart,l),this.ymax=Math.max(this.hcb.ystart,l)}}return 1!==this.hcb.yunits&&4!==this.hcb.yunits||!this.hcb.timecode&&a&&(this.hcb.timecode=e.j1970toj1950(a),this.hcb.ystart=0,r=!0),t.length>0&&e.filad(this.hcb,t,n),r},prep:function(t,i){var o,r,a=this.plot._Gx,s=this.plot._Mx,l=this.lps,h=(this.skip,this.xmin),c=this.xmax,d=this.hcb.subsize;if(a.xcompression>0&&(d=Math.ceil(s.r-s.l)),this.get_data(t,i),this.hcb.pipe)a.panxmin>a.panxmax?(a.panxmin=h,a.panxmax=c):(a.panxmin=Math.min(a.panxmin,h),a.panxmax=Math.max(a.panxmax,c)),a.panymin>a.panxmax?(a.panymin=this.ymin,a.panymax=this.ymax):(a.panymin=Math.min(a.panymin,this.ymin),a.panymax=Math.max(a.panymax,this.ymax)),this.img||(void 0===a.zmin&&(a.zmin=0),void 0===a.zmax&&(a.zmax=0),this.img=n.create_image(s,null,this.hcb.subsize,d,this.lps,a.zmin+a.zoff,a.zmax+a.zoff,a.xcompression));else{if(5===a.cmode||this.xsub>0);else if(l>0){var u=this.xstart,f=this.xdelta,x=l;a.index?(o=0,r=l-1):f>=0?(o=Math.max(1,Math.min(x,Math.round((t-u)/f)))-1,r=Math.max(1,Math.min(x,Math.round((i-u)/f)+2))-1):(o=Math.max(1,Math.min(x,Math.round((i-u)/f)-1))-1,r=Math.max(1,Math.min(x,Math.round((t-u)/f)+2))-1),(l=r-o+1)<0&&(e.log.debug("Nothing to plot"),l=0)}if(a.panxmin>a.panxmax?(a.panxmin=h,a.panxmax=c):(a.panxmin=Math.min(a.panxmin,h),a.panxmax=Math.max(a.panxmax,c)),l<=0)return void e.log.debug("Nothing to plot");if(5===a.cmode||this.ysub>0);else if(l>0){var m=this.ystart,p=this.ydelta;x=l;a.index?(o=0,r=l-1):p>=0?(o=Math.max(1,Math.min(x,Math.round((t-m)/p)))-1,r=Math.max(1,Math.min(x,Math.round((i-m)/p)+2))-1):(o=Math.max(1,Math.min(x,Math.round((i-m)/p)-1))-1,r=Math.max(1,Math.min(x,Math.round((t-m)/p)+2))-1),(l=r-o+1)<0&&(e.log.debug("Nothing to plot"),l=0)}a.panymin>a.panxmax?(a.panymin=this.ymin,a.panymax=this.ymax):(a.panymin=Math.min(a.panymin,this.ymin),a.panymax=Math.max(a.panymax,this.ymax)),this.cx?1===a.cmode?e.cvmag(this.buf,this.zbuf,this.zbuf.length):2===a.cmode?25===a.plab?(e.cvpha(this.buf,this.zbuf,this.zbuf.length),e.vsmul(this.zbuf,1/(2*Math.PI),this.zbuf,this.zbuf.length)):24!==a.plab?e.cvpha(this.buf,this.zbuf,this.zbuf.length):e.cvphad(this.buf,this.zbuf,this.zbuf.length):3===a.cmode?e.vmov(this.buf,this.skip,this.zbuf,1,this.zbuf.length):4===a.cmode?e.vmov(this.buf.subarray(1),this.skip,this.zbuf,1,this.zbuf.length):5===a.cmode?e.vfill(this.zbuf,0,this.zbuf.length):6===a.cmode?e.cvmag2logscale(this.buf,a.dbmin,10,this.zbuf):7===a.cmode&&e.cvmag2logscale(this.buf,a.dbmin,20,this.zbuf):1===a.cmode?e.vabs(this.buf,this.zbuf):2===a.cmode?e.vfill(this.zbuf,0,this.zbuf.length):3===a.cmode?e.vmov(this.buf,this.skip,this.zbuf,1,this.zbuf.length):4===a.cmode?e.vfill(this.zbuf,0,this.zbuf.length):5===a.cmode?e.vfill(this.zbuf,0,this.zbuf.length):6===a.cmode?e.vlogscale(this.buf,a.dbmin,10,this.zbuf):7===a.cmode&&e.vlogscale(this.buf,a.dbmin,20,this.zbuf);var y=this.zbuf,v=0,_=0;if(a.autol<=0||this.hcb.pipe){if(y.length>0){v=y[0],_=y[0];for(var b=0;b<y.length&&!(b/this.xframe>=this.lpb);b++)y[b]<v&&(v=y[b]),y[b]>_&&(_=y[b])}0!=(1&a.autoz)&&(void 0!==a.zmin?a.zmin=Math.min(a.zmin,v):a.zmin=v),0!=(2&a.autoz)&&(void 0!==a.zmax?a.zmax=Math.min(a.zmax,_):a.zmax=_),this.img=n.create_image(s,this.zbuf,this.hcb.subsize,d,this.lps,a.zmin+a.zoff,a.zmax+a.zoff,a.xcompression)}else{var g=this.hcb.size,w=1/Math.max(a.autol,1);if(this.img||(this.img=n.create_image(s,this.zbuf,this.hcb.subsize,d,this.lps,a.zmin+a.zoff,a.zmax+a.zoff)),a.zmin=0,a.zmax=0,y.length>0)for(var M=0;M<g;M++){var k=M*this.xframe;for(v=y[k],_=y[k],b=0;b<this.xframe;b++)v=Math.min(y[k+b],v),_=Math.max(y[k+b],_);2!==a.autoz&&void 0!==v&&(a.zmin=v*w+a.zmin*(1-w)),1!==a.autoz&&void 0!==_&&(a.zmax=_*w+a.zmax*(1-w)),n.update_image_row(s,this.img,y.subarray(k,k+this.xframe),M,a.zmin,a.zmax)}}}if(this.img.cmode=a.cmode,this.img.cmap=a.cmap,this.img.origin=s.origin,this.hcb.pipe&&this.frame<this.lps){var S=new Uint32Array(this.img);if("rising"===this.drawmode)for(b=0;b<S.length-this.frame*d;b++)S[b]=0;else for(b=this.frame*d;b<S.length;b++)S[b]=0}return l},draw:function(){var t=this.plot._Mx,e=this.plot._Gx,i=this.hcb;if(this.hcb.pipe){var o=this.hcb.lps||Math.ceil(Math.max(1,t.b-t.t));if(o!==this.lps&&this.buf){this.lps=o,this.position>=this.lps&&(this.position=0);var r=i.ystart+i.ydelta*(this.lps-1);this.ymin=Math.min(i.ystart,r),this.ymax=Math.max(i.ystart,r),this.img=null,this.plot.rescale()}}var a=Math.max(this.xmin,t.stk[t.level].xmin),s=Math.min(this.xmax,t.stk[t.level].xmax);if(a>=s)return e.panxmin=Math.min(e.panxmin,this.xmin),void(e.panxmax=Math.max(e.panxmax,this.xmax));var l=Math.max(this.ymin,t.stk[t.level].ymin),h=Math.min(this.ymax,t.stk[t.level].ymax),c=Math.abs(s-a)+1,d=Math.abs(h-l)+1;c=Math.floor(c/i.xdelta),d=Math.floor(d/i.ydelta),c=Math.min(c,i.subsize),d=Math.min(d,i.size);var u=n.real_to_pixel(t,a,l),f=n.real_to_pixel(t,s,h),x=(f.x-u.x)/c,m=(f.y-u.y)/d;if(e.xe=Math.max(1,Math.round(x)),e.ye=Math.max(1,Math.round(m)),this.img&&this.buf&&e.cmode===this.img.cmode&&e.cmap===this.img.cmap&&t.origin===this.img.origin||this.prep(a,s),this.img&&n.draw_image(t,this.img,this.xmin,this.ymin,this.xmax,this.ymax,this.opacity,e.rasterSmoothing),null!==this.position&&"scrolling"===this.drawmode){var p=n.real_to_pixel(t,0,this.position*this.ydelta);p.y>t.t&&p.y<t.b&&n.draw_line(t,"white",t.l,p.y,t.r,p.y)}}},o.overlay=function(t,i,n){var r=t._Gx;t._Mx;i.buf_type="D";var a=new o(t);return a.init(i),i.file_name?a.name=e.trim_name(i.file_name):a.name="layer_"+r.lyr.length,a.change_settings(n),t.add_layer(a)?a:null},t.exports=o}()},,function(t,e,i){t.exports=i(4)}])});
//# sourceMappingURL=react-sigplot.js.map